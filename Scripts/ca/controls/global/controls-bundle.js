define("controls/global/base-dialog/base-dialog",["require","exports","tslib","aurelia-framework","aurelia-dialog"],(function(e,t,r,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BaseDialog=void 0;var o=function(){function e(e,t){if(t===void 0){t=true}this.controller=e;this.maxHeight=-1;this.minHeight=-1;if(t){e.settings.lock=false;e.settings.position=this.position.bind(this)}}e.prototype.position=function(e,t){if(!this.config.attachTo)return;var r=e;var i=this.config.attachTo.getBoundingClientRect();var n=r.querySelector("ux-dialog");if(n){var o=e.getBoundingClientRect().height;var a=e.getBoundingClientRect().width;var s=i.top;var l=o-(i.top+i.height);var d=n.offsetHeight;if(this.maxHeight>0&&d>this.maxHeight)d=this.maxHeight;if(this.minHeight>0){var c=Math.max(s,l);if(d>c)d=c;if(d<this.minHeight)d=this.minHeight}var p=i.top+i.height;if(d>l&&s>l){p=i.top-d}else if(d>l){p=o-d}n.style.position="absolute";n.style.top=(p>0?p:0)+"px";var u=i.left;if(n.offsetWidth+u>a)u=a-n.offsetWidth;n.style.left=u+"px";if(n.offsetHeight>d){var f=n.querySelector("ux-dialog-body");if(f)f.style.height=d-(n.offsetHeight-f.offsetHeight)+"px"}}};e=r.__decorate([i.autoinject,r.__metadata("design:paramtypes",[n.DialogController,Boolean])],e);return e}();t.BaseDialog=o}));define("text!controls/global/base-dialog/base-dialog.css",[],(function(){return"\r\nux-dialog-container \r\n{\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n\t-webkit-box-pack: center;\r\n\t    -ms-flex-pack: center;\r\n\t        justify-content: center;\r\n\t-webkit-box-align: center;\r\n\t    -ms-flex-align: center;\r\n\t        align-items: center;\r\n}\r\nux-dialog-container > div \r\n{\r\n\tmargin: auto !important;\r\n}\r\n\r\n.dialog ::-webkit-scrollbar \r\n{\r\n\twidth: 6px;\r\n\theight: 8px;\r\n}\r\n.dialog ::-webkit-scrollbar-track \r\n{\r\n\tbackground-color: #fafafa;\r\n}\r\n.dialog ::-webkit-scrollbar-thumb \r\n{\r\n\tbackground-color: #c2c2c2;\r\n\tborder-radius: 8px;\r\n\tbackground-clip: content-box;\r\n}\r\n.dialog ::-webkit-scrollbar-thumb:hover\r\n{\r\n\tbackground-color: #7d7d7d;\r\n}\r\n\r\n.dialog\r\n{\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n\t-webkit-box-orient: vertical;\r\n\t-webkit-box-direction: normal;\r\n\t    -ms-flex-direction: column;\r\n\t        flex-direction: column;\r\n\twidth: auto;\r\n\tborder-radius: 0px;\r\n\tfont-size: 13px;\r\n}\r\n\r\n.dialog ux-dialog-body\r\n{\r\n\t-webkit-box-sizing: border-box;\r\n\t        box-sizing: border-box;\r\n\tpadding: 9px;\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n\t-webkit-box-orient: vertical;\r\n\t-webkit-box-direction: normal;\r\n\t    -ms-flex-direction: column;\r\n\t        flex-direction: column;\r\n}\r\n\r\n.dialog ux-dialog-footer\r\n{\r\n\tborder-width: 0px;\r\n\tpadding-right: 9px;\r\n}\r\n\r\n.dialog ux-dialog-header\r\n{\r\n\tpadding: 10px;\r\n\tborder-bottom: none;\r\n\tfont-size: 18px;\r\n}\r\n\r\nux-dialog > ux-dialog-header > button\r\n{\r\n\topacity: 0.6;\r\n\tmargin: -10px -10px 0 0;\r\n\tfont-size: 28px;\r\n}\r\n\r\nux-dialog > ux-dialog-header > button:hover\r\n{\r\n\topacity: 1;\r\n}\r\n\r\n.stack-vert > div\r\n{\r\n\tmargin-top: 3px;\r\n}\r\n.stack-vert > div:first-child\r\n{\r\n\tmargin-top: 0px;\r\n}\r\n.stack-vert > div > *\r\n{\r\n\tmin-height: 24px;\r\n}\r\n\r\n.label-group\r\n{\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n}\r\n.label-group > label\r\n{\r\n\twidth: 100px;\r\n\tdisplay: inline-block;\r\n}\r\n.label-group > label + *\r\n{\r\n\t-webkit-box-flex: 1;\r\n\t    -ms-flex: 1;\r\n\t        flex: 1;\r\n}\r\n\r\n.empty-label-group\r\n{\r\n\tmargin-left: 100px;\r\n}"}));define("controls/global/base-field-editor",["require","exports","tslib","aurelia-dependency-injection","aurelia-framework","descriptors/fieldstate"],(function(e,t,r,i,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpBaseFieldEditor=void 0;var a=function(){function e(){var e=this;this.stateSubscriptions=[];this.configSetters=new Map;this.bindingEngine=i.Container.instance.get(n.BindingEngine);this.addConfigSetter("visible",(function(t){return e.config.hidden=!t}));this.addConfigSetter("enabled");this.addConfigSetter("readOnly");this.addConfigSetter("required")}e.prototype.addConfigSetter=function(e,t){if(t===void 0){t=null}this.configSetters.set(e,t)};e.prototype.stateChanged=function(e,t){this.unsubscribeStateChanges();if(e)this.subscribeStateChanges(e)};e.prototype.subscribeStateChanges=function(e){var t=this;if(this.config)e.configureControl(this.config);this.configSetters.forEach((function(r,i){var n=t.bindingEngine.propertyObserver(e,i).subscribe((function(n,o){return t.setConfigProperty(r,i,n,e)}));t.setConfigProperty(r,i,e[i],e);t.stateSubscriptions.push(n)}))};e.prototype.setConfigProperty=function(e,t,r,i){var n;if(e==null||typeof e==="string"){Object.assign(this.config,(n={},n[String(e||t)]=r,n))}else e(r,i)};e.prototype.unsubscribeStateChanges=function(){this.stateSubscriptions.forEach((function(e){return e.dispose()}));this.stateSubscriptions=[]};e.prototype.detached=function(){this.unsubscribeStateChanges()};r.__decorate([n.bindable,r.__metadata("design:type",o.PXFieldState)],e.prototype,"state",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Object)],e.prototype,"config",void 0);e=r.__decorate([n.autoinject,r.__metadata("design:paramtypes",[])],e);return e}();t.QpBaseFieldEditor=a}));define("controls/global/branch-selector/qp-branch-selector-3d",["require","exports","tslib","aurelia-framework","aurelia-event-aggregator","apps/enhance/services/api-client","apps/enhance/services/control-helper","plugins/happeded-on-body","apps/enhance/services/mark-highlights"],(function(e,t,r,i,n,o,a,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpBranchSelector3dCustomElement=void 0;var d={ArrowDown:1,ArrowUp:-1,Down:1,PageDown:7,PageUp:-7,Up:-1};var c=function(){function e(e,t,r,i){this.element=e;this.apiClient=t;this.taskQueue=r;this.eventAggregator=i;this.highlightedIndex=undefined;this.autoExpandIfLessThen=3;this.treeOpen=false;this.loadingStatus="in-sync"}e.prototype.configChanged=function(){};e.prototype.editModeChanged=function(e,t){if(e){if(!this.branches){this.loadBranches()}this.selectAllText()}};e.prototype.loadBranches=function(){return r.__awaiter(this,void 0,void 0,(function(){var e=this;return r.__generator(this,(function(t){if(!this.branchesPromise){this.loadingStatus="loading";this.branchesPromise=this.apiClient.getBranchTree({dac:this.config.dac,screenId:a.getScreenID(),view:this.config.view,graph:this.config.graph,screenStateId:this.config.screenStateId}).then((function(t){e.branches=t.data;e.loadingStatus="in-sync";e.taskQueue.flushMicroTaskQueue()}))}return[2,this.branchesPromise]}))}))};e.prototype.toggleSelector=function(e){var t=this;e.preventDefault();e.stopImmediatePropagation();this.inputControl.focus();if(this.treeOpen){this.hide();return}this.show();if(!this.highlightedIndex){this.search()}if(this.highlightedIndex!==undefined&&this.highlightedIndex>=0){var r=this.highlightedIndex;this.taskQueue.flushTaskQueue();this.taskQueue.queueTask((function(){return t.scrollNodeIntoView(r)}))}};e.prototype.select=function(e,t){var r=this;if(e.CanSelect){this.value={id:e.AcctCD,text:e.AcctName};this.updateToolTip();this.hide();this.taskQueue.queueTask((function(){r.selectAllText();r.filter=""}))}t===null||t===void 0?void 0:t.preventDefault();t===null||t===void 0?void 0:t.stopImmediatePropagation();t===null||t===void 0?void 0:t.stopPropagation()};e.prototype.handleKey=function(e){var t=d[e.key];if(t!==undefined&&this.treeOpen!==e.altKey){e.preventDefault();e.stopImmediatePropagation();this.moveCursor(t)}switch(e.key){case"Enter":if(this.highlightedIndex!==undefined&&this.flatStructure[this.highlightedIndex]){this.select(this.flatStructure[this.highlightedIndex])}break;case"Esc":case"Escape":this.hide();e.preventDefault();e.stopImmediatePropagation();break;default:break}return true};e.prototype.moveCursor=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,i,n;return r.__generator(this,(function(r){switch(r.label){case 0:if(!!this.treeOpen)return[3,3];this.show();if(!(!Array.isArray(this.flatStructure)||this.flatStructure.length===0))return[3,2];return[4,this.loadBranches()];case 1:r.sent();if(!Array.isArray(this.flatStructure)||this.flatStructure.length===0){return[2]}return[3,3];case 2:if(typeof this.highlightedIndex==="number"&&this.highlightedIndex>=0){return[2]}r.label=3;case 3:if(typeof this.highlightedIndex!=="number"||this.highlightedIndex<0){this.selectFirst()}else{t=this.highlightedIndex+e;i=e>0?1:-1;n=(e>0?this.flatStructure.length:0)+i;if(t<0){t=0}if(t>=this.flatStructure.length){t=this.flatStructure.length-1}for(;t!==n;t+=i){if(this.flatStructure[t].CanSelect){this.highlightedIndex=t;break}}}this.taskQueue.flushTaskQueue();this.scrollNodeIntoView(this.highlightedIndex||0);return[2]}}))}))};e.prototype.selectFirst=function(e){var t=this;this.highlightedIndex=undefined;if(e===undefined){if(this.value&&this.value.id){var r=this.flatStructure.filter((function(e){return e.AcctCD==t.value.id}));if(r.length>1){if(r[0].PrimaryGroupID){var i=this.flatStructure.findIndex((function(e){return e.AcctCD==t.value.id&&e.PrimaryGroupID==e.ParentBAccountID}));this.highlightedIndex=i===-1?0:i}else if(r[0].Type=="branch"){var n=this.flatStructure.findIndex((function(e){return e.BAccountID==r[0].ParentBAccountID&&e.ParentBAccountID==e.PrimaryGroupID}));var i=this.flatStructure.findIndex((function(e,r){return r>n&&e.AcctCD==t.value.id}));this.highlightedIndex=i===-1?0:i}else{var i=this.flatStructure.findIndex((function(e){return e.AcctCD==t.value.id}));this.highlightedIndex=i===-1?0:i}}else{var i=this.flatStructure.findIndex((function(e){return e.AcctCD==t.value.id}));this.highlightedIndex=i===-1?0:i}}}else{for(var o=0;o<this.flatStructure.length;o++){if(this.flatStructure[o].CanSelect){if(e===""||this.flatStructure[o].displaySegments.length>1){this.highlightedIndex=o;break}}}}if(this.highlightedIndex!==undefined&&this.highlightedIndex>=0){var a=this.highlightedIndex;this.taskQueue.flushTaskQueue();this.taskQueue.queueTask((function(){return t.scrollNodeIntoView(a)}))}};e.prototype.search=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:this.show();this.filter=e;if(!!this.branches)return[3,2];return[4,this.loadBranches()];case 1:t.sent();t.label=2;case 2:this.selectFirst(e);return[2]}}))}))};e.prototype.toolTipShown=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){this.updateToolTip();return[2]}))}))};e.prototype.updateToolTip=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,i,n,o,a;var s=this;return r.__generator(this,(function(r){switch(r.label){case 0:if(!this.value||!this.value.id){this.toolTip=[];return[2]}if(!!this.branches)return[3,2];this.toolTip=[];this.toolTip.push(""+this.value.id+(this.value.text?" - "+this.value.text:""));return[4,this.loadBranches()];case 1:r.sent();r.label=2;case 2:e=this.value.id;if(e){t=-1;i=[];do{t=this.flatStructure.findIndex((function(e,r){return r>t&&e.AcctCD===s.value.id}));if(t>-1){i.push(t)}}while(t!==-1);for(t=0;t<i.length;t++){n=i[t];o=n>0&&this.flatStructure[n].level>0?n-1:-1;if(o>0){for(;o>0;o--){if(this.flatStructure[o].level<this.flatStructure[n].level)break}}a=o>0&&this.flatStructure[o].level>0?o-1:-1;if(a>0){for(;a>0;a--){if(this.flatStructure[a].level<this.flatStructure[o].level)break}}if((this.flatStructure[n].ParentBAccountID===this.flatStructure[n].PrimaryGroupID||this.flatStructure[n].PrimaryGroupID===undefined)&&(o<0||this.flatStructure[o].ParentBAccountID===this.flatStructure[o].PrimaryGroupID||this.flatStructure[o].PrimaryGroupID===undefined)&&(a<0||this.flatStructure[a].ParentBAccountID===this.flatStructure[a].PrimaryGroupID||this.flatStructure[a].PrimaryGroupID===undefined)){this.toolTip=[];if(a>-1){this.toolTip.push(""+this.flatStructure[a].AcctCD+(this.flatStructure[a].AcctName?" - "+this.flatStructure[a].AcctName:""))}if(o>-1){this.toolTip.push(""+this.flatStructure[o].AcctCD+(this.flatStructure[o].AcctName?" - "+this.flatStructure[o].AcctName:""))}this.toolTip.push(""+this.value.id+(this.value.id?" - "+this.value.text:""));break}}}return[2]}}))}))};e.prototype.onBlur=function(){var e=this;var t,r,i,n;if(!(this.config.enabled===false)&&!this.config.readOnly){if(this.inputControl.value.trim()===""){if((t=this.value)===null||t===void 0?void 0:t.id){this.value={id:"",text:""}}}else{if(this.inputControl.value.trim()!==((i=(r=this.value)===null||r===void 0?void 0:r.id)===null||i===void 0?void 0:i.trim())){var o=(n=this.flatStructure)===null||n===void 0?void 0:n.find((function(t){return t.AcctCD.trim().toLowerCase()===e.inputControl.value.trim().toLowerCase()}));if(o){this.value={id:o.AcctCD,text:o.AcctName}}else{this.value={id:this.inputControl.value,text:""}}}}}this.filter="";this.hide();return true};e.prototype.findParent=function(e,t){var r,i;if(!e){return undefined}for(var n=0;n<t.length;n++){if((r=t[n].Children)===null||r===void 0?void 0:r.find((function(t){return t.AcctCD===e.AcctCD&&t.PrimaryGroupID===t.ParentBAccountID}))){return t[n]}if((i=t[n].Children)===null||i===void 0?void 0:i.find((function(t){return t.AcctCD===e.AcctCD}))){return t[n]}else if(t[n].Children){var o=this.findParent(e,t[n].Children);if(o){return o}}}return undefined};e.prototype.findFilteredParent=function(e){var t;for(var r=0;r<this.filtered.length;r++){var i=this.filtered[r];if(i.BAccountID===e.BAccountID&&i.ParentBAccountID===e.ParentBAccountID){return i}else if((t=i.Children)===null||t===void 0?void 0:t.length){for(var n=0;n<i.Children.length;n++){var o=i.Children[n];if(o.BAccountID===e.BAccountID&&o.ParentBAccountID===e.ParentBAccountID){return o}}}}};e.prototype.toggleExpand=function(e,t){var i;var n=this.findFilteredParent(e);if(n){var o=this.findParent(n,this.filtered);n.expand=!n.expand;e.expand=n.expand;var a=this.flatStructure.indexOf(e)+1;if(e.expand===false){var s=this.flatStructure.findIndex((function(t,r){return!(r<a||t.level>e.level)}));if(s===-1){s=this.flatStructure.length}var l=s-a;if(l>0&&a<this.flatStructure.length){this.flatStructure.splice(a,l)}}else{var d=false;if(o){d=o.Children.indexOf(n)===o.Children.length-1}var c=this.flatten(n.Children,n.level+1,d);(i=this.flatStructure).splice.apply(i,r.__spreadArray([a,0],c))}}t.stopPropagation();t.stopImmediatePropagation()};e.prototype.scrollNodeIntoView=function(e){var t,r;var i;i="nearest";if(e===((t=this.flatStructure)===null||t===void 0?void 0:t.length)-1){i="start"}var n=(r=this.treeView)===null||r===void 0?void 0:r.querySelectorAll(".branch-selector__node")[e];if(n){var o="scrollBehavior"in document.documentElement.style?{block:i}:undefined;n.scrollIntoView(o)}};e.prototype.unsubscribeFromMouseDownOnDocument=function(){var e;(e=this.documentMouseDownSubscription)===null||e===void 0?void 0:e.dispose();this.documentMouseDownSubscription=undefined};e.prototype.show=function(){var e=this;this.documentMouseDownSubscription=this.eventAggregator.subscribe(s.MOUSE_DOWN_REACHED_BODY,(function(){return e.hide()}));this.treeOpen=true};e.prototype.hide=function(){this.unsubscribeFromMouseDownOnDocument();this.treeOpen=false};e.prototype.ignoreMouseDown=function(e){e.preventDefault();e.stopImmediatePropagation()};e.prototype.selectAllText=function(){var e=this.inputControl.value.length;this.inputControl.setSelectionRange(0,e)};e.prototype.highlight=function(e){this.highlightedNode=e;if(e.CanSelect){this.highlightedIndex=this.flatStructure.indexOf(e)}};e.prototype.flatten=function(e,t,r,i){var n=this;var o,a,s;if(i===void 0){i=[]}for(var l=0;l<e.length;l++){var d=e[l];d.level=t;d.lastChild=r;var c=this.value&&this.value.id&&((o=d.Children)===null||o===void 0?void 0:o.find((function(e){var t;return e.AcctCD==n.value.id||((t=e.Children)===null||t===void 0?void 0:t.find((function(e){return e.AcctCD==n.value.id})))})));var p=!!c;if(p&&(c===null||c===void 0?void 0:c.PrimaryGroupID)&&c.PrimaryGroupID!==c.ParentBAccountID){p=false}d.expand=d.expand||((a=d.Children)===null||a===void 0?void 0:a.length)&&((s=d.Children)===null||s===void 0?void 0:s.length)<=this.autoExpandIfLessThen||p;i.push(d);if(d.expand&&d.Children){d.expand=true;this.flatten(d.Children,t+1,l===e.length-1,i)}}return i};e.prototype.conditionsChanged=function(){if(!Array.isArray(this.branches)){return}function e(t,i){var n;var o=[];for(var a=0;a<t.length;a++){var s=t[a];var d=r.__assign({},s),c=d.AcctCD,p=d.AcctName,u=d.BAccountID,f=d.ParentBAccountID,h=d.CanSelect,g=d.Type,m=d.PrimaryGroupID;var b=((n=s.Children)===null||n===void 0?void 0:n.length)?e(s.Children,i):[];if(b.length||c.toLocaleLowerCase().indexOf(i)>-1||p.toLocaleLowerCase().indexOf(i)>-1){o.push({AcctCD:c,AcctName:p,BAccountID:u,Children:b.length?b:undefined,ParentBAccountID:f,PrimaryGroupID:m,Type:b.length?g:"branch",CanSelect:h,displaySegments:l.markHighlights(i,c+" - "+p)})}}return o}this.highlightedIndex=undefined;var t=this.filter&&this.filter.toLocaleLowerCase()||"";this.filtered=e(this.branches,t);var i=this.flatten(this.filtered,0,this.filtered.length===1);this.flatStructure=i};r.__decorate([i.bindable,r.__metadata("design:type",Object)],e.prototype,"config",void 0);r.__decorate([i.bindable,r.__metadata("design:type",Object)],e.prototype,"value",void 0);r.__decorate([i.observable({changeHandler:"conditionsChanged"}),r.__metadata("design:type",Object)],e.prototype,"branches",void 0);r.__decorate([i.observable({changeHandler:"conditionsChanged"}),r.__metadata("design:type",Object)],e.prototype,"filter",void 0);r.__decorate([i.observable,r.__metadata("design:type",Object)],e.prototype,"autoExpandIfLessThen",void 0);e=r.__decorate([i.customElement("qp-branch-selector"),i.autoinject,r.__metadata("design:paramtypes",[Element,o.ApiClient,i.TaskQueue,n.EventAggregator])],e);return e}();t.QpBranchSelector3dCustomElement=c}));define("text!controls/global/branch-selector/qp-branch-selector-3d.html",[],(function(){return'<template class="branch-selector ${editMode?\'edit-mode\':\'\'} ${(config.readOnly || config.enabled === false) ?\'ReadOnly\':\'\'}" id="${config.id}"><require from="./qp-branch-selector.css"></require><div class="editor ${config.class} ${editMode?\'focus\':\'\'} " style="display:flex;padding:0;position:relative;direction:ltr" ref="rectControl"><input class="${(config.readOnly || config.enabled === false) ?\'ReadOnly\':\'\'}" id="${config.id}_text" name="${config.name}" tabindex="${config.tabIndex}" value.to-view="value.id.trim()" ref="inputControl" blur.trigger="onBlur()" input.delegate="search(inputControl.value)" keydown.capture="handleKey($event)" style="margin:0;border:0;flex:1 0 auto;padding:0 4px 0 6px" autocomplete="off" autocorrect="off" focus.from-view="editMode" enabled.bind="config.enabled === false ?  false:null  & attr" readonly="${(config.readOnly || config.enabled===false) ? true : null}"><div class="branch-selector__display-text" if.bind="value && value.id">${[value.id]}${value.text?\' - \'+value.text:\'\'}</div><button type="button" show.bind="config.enabled!== false && !config.readOnly" mousedown.trigger="toggleSelector($event)" class="sprite-icon branch-selector__button" tabindex="-1"><i class="control-icon control-ArrowDown"></i></button><qp-loader-indicator if.bind="loadingStatus != \'in-sync\'" style="position:absolute;bottom:0;left:0;right:0" loading-state.bind="loadingStatus"></qp-loader-indicator><qp-tooltip if.bind="!treeOpen && toolTip && toolTip.length" target.bind="element" on-show.call="toolTipShown()"><div repeat.for="t of toolTip" class="tooltip-level branch-level-${$index}">${t}</div></qp-tooltip></div><div class="branch-selector__branch-tree" if.bind="branches && treeOpen" glue-to.bind="rectControl" ref="treeView" style="max-height:210px;max-width:610px" mousedown.capture="ignoreMouseDown($event)"><div repeat.for="n of flatStructure" node.bind="n" click.delegate="select(n,$event)" mouseenter.capture="highlight(n,$event)" class="branch-selector__node branch-selector__${n.Type} ${highlightedIndex == $index?\'highlight\':\'\'} nesting-level-${n.level} ${b.CanSelect?\'can-select\':\'\'} ${n.lastChild?\'parent-last-child\':\'\'}"><qp-icon class="group-icon" if.bind="n.Type==\'group\'" imagesrc="${n.expand?\'control@DropDownH\':\'control@SubMenu\'}" click.delegate="toggleExpand(n,$event)"></qp-icon><qp-icon class="company-icon" if.bind="n.Type==\'organization\'" imagesrc="${n.expand?\'ac@keyboard_arrow_down\':\'ac@keyboard_arrow_right\'}" click.delegate="toggleExpand(n,$event)"></qp-icon><template repeat.for="s of n.displaySegments"><mark if.bind="s.highlight">${s.text}</mark><template else>${s.text}</template></template></div></div></template>'}));define("text!controls/global/branch-selector/qp-branch-selector.css",[],(function(){return".qp-branch-selector,\r\n.qp-branch-selector * {\r\n\t-webkit-box-sizing: border-box;\r\n\t        box-sizing: border-box;\r\n}\r\n\r\nqp-branch-selector {\r\n\tdisplay: block;\r\n}\r\n\r\nqp-branch-selector qp-loader-indicator {\r\n\tpointer-events: none;\r\n}\r\n\r\n.branch-selector input {\r\n\tcolor: transparent;\r\n}\r\n\r\n.branch-selector__display-text {\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\tright: 26px;\r\n\theight: 100%;\r\n\tpointer-events: none;\r\n\r\n\tmargin: 0;\r\n\tborder: 0;\r\n\tpadding: 0 4px 0 6px;\r\n\tline-height: 24px;\r\n\r\n\twhite-space: nowrap;\r\n\toverflow: hidden;\r\n\ttext-overflow: ellipsis;\r\n}\r\n.rtl .branch-selector__display-text {\r\n\tright:0;\r\n\tleft:26px;\r\n\tpadding: 0 6px 0 4px;\r\n}\r\n\r\n.branch-selector__button {\r\n\tbackground: #fff;\r\n\tborder: 0;\r\n\twidth: 18px;\r\n\tcolor: rgba(0, 0, 0, .64);\r\n\tcursor: pointer;\r\n\tpadding: 5px 4px;\r\n}\r\n\r\n\r\n.edit-mode .branch-selector__display-text {\r\n\tvisibility: hidden;\r\n}\r\n\r\n.edit-mode input {\r\n\tcolor: initial;\r\n}\r\n\r\n.branch-selector__branch-tree {\r\n\twidth: auto;\r\n\toverflow-y: auto;\r\n\tposition: absolute;\r\n\tz-index: 1000;\r\n\tbackground: white;\r\n}\r\n\r\n.branch-selector__node {\r\n\tdisplay: block;\r\n\tmin-height: 18px;\r\n\tpadding: 5px 6px;\r\n\tfont-size: 13px;\r\n\twhite-space: nowrap;\r\n\ttext-overflow: ellipsis;\r\n\tposition: relative;\r\n\t-webkit-box-sizing: border-box;\r\n\t        box-sizing: border-box;\r\n\theight: 24px;\r\n}\r\n\r\n.branch-selector__node.nesting-level-0 {\r\n\tpadding-left: 20px;\r\n}\r\n\r\n.branch-selector__node.nesting-level-0 {\r\n\tpadding-left: 20px;\r\n}\r\n.branch-selector__node.nesting-level-1 {\r\n\tpadding-left: 40px;\r\n}\r\n\r\n.branch-selector__node.nesting-level-2 {\r\n\tpadding-left: 60px;\r\n}\r\n\r\n\r\n.rtl .branch-selector__node.nesting-level-0 {\r\n\tpadding-left: 5px;\r\n\tpadding-right: 20px;\r\n}\r\n\r\n.rtl .branch-selector__node.nesting-level-0 {\r\n\tpadding-left: 5px;\r\n\tpadding-right: 20px;\r\n}\r\n.rtl .branch-selector__node.nesting-level-1 {\r\n\tpadding-left: 5px;\r\n\tpadding-right: 40px;\r\n}\r\n\r\n.rtl .branch-selector__node.nesting-level-2 {\r\n\tpadding-left: 5px;\r\n\tpadding-right: 60px;\r\n}\r\n\r\n.branch-selector__group {\r\n\tfont-weight: bold;\r\n}\r\n\r\n.branch-selector__group .control-icon {\r\n\tfont-weight: normal;\r\n\t/* font-size: 15px; */\r\n}\r\n\r\n/* .branch-selector__node.nesting-level-1::before {\r\n\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\tcontent: '';\r\n\twidth: 12px;\r\n\tleft: 20px;\r\n\t\r\n\ttop: -50%;\r\n\theight: 100%;\r\n\tborder-bottom: 1px dotted #bbb;\r\n\tborder-left: 1px dotted #bbb;\r\n} */\r\n\r\n.branch-selector__node.nesting-level-1+.branch-selector__node.nesting-level-2::before {\r\n\theight: 60%;\r\n\ttop: -15%;\r\n}\r\n\r\n.branch-selector__node.nesting-level-2::before {\r\n\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\tcontent: '';\r\n\twidth: 12px;\r\n\tleft: 45px;\r\n\t/* left: 0;//2.35em; */\r\n\ttop: -50%;\r\n\theight: 100%;\r\n\tborder-bottom: 1px dotted #bbb;\r\n\tborder-left: 1px dotted #bbb;\r\n\tpointer-events: none;\r\n}\r\n\r\n.branch-selector__node.nesting-level-1::before {\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\tcontent: '';\r\n\twidth: 12px;\r\n\tleft: 25px;\r\n\t/* left: 0;//2.35em; */\r\n\ttop: -50%;\r\n\theight: 100%;\r\n\tborder-bottom: 1px dotted #bbb;\r\n\tborder-left: 1px dotted #bbb;\r\n\tpointer-events: none;\r\n}\r\n\r\n.rtl .branch-selector__node.nesting-level-2::before {\r\n\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\tcontent: '';\r\n\twidth: 12px;\r\n\tright: 45px;\r\n\t/* left: 0;//2.35em; */\r\n\tleft:unset;\r\n\ttop: -50%;\r\n\theight: 100%;\r\n\tborder-left: 0;\r\n\tborder-bottom: 1px dotted #bbb;\r\n\tborder-right: 1px dotted #bbb;\r\n\tpointer-events: none;\r\n}\r\n\r\n.rtl .branch-selector__node.nesting-level-1::before {\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\tcontent: '';\r\n\twidth: 12px;\r\n\tright: 25px;\r\n\t/* left: 0;//2.35em; */\r\n\tleft:unset;\r\n\ttop: -50%;\r\n\theight: 100%;\r\n\tborder-left: 0;\r\n\tborder-bottom: 1px dotted #bbb;\r\n\tborder-right: 1px dotted #bbb;\r\n\tpointer-events: none;\r\n}\r\n\r\n\r\n.branch-selector__node.nesting-level-2:not(.parent-last-child)::after {\r\n\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\tcontent: '';\r\n\twidth: 12px;\r\n\tleft: 25px;\r\n\t/* left: 0;//2.35em; */\r\n\ttop: -25%;\r\n\theight: 100%;\r\n\t/* border-bottom: 1px dotted #bbb; */\r\n\tborder-left: 1px dotted #bbb;\r\n\tpointer-events: none;\r\n}\r\n\r\n.rtl .branch-selector__node.nesting-level-2:not(.parent-last-child)::after {\r\n\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\tcontent: '';\r\n\twidth: 12px;\r\n\tright: 25px;\r\n\t/* left: 0;//2.35em; */\r\n\tleft:unset;\r\n\ttop: -25%;\r\n\theight: 100%;\r\n\t/* border-bottom: 1px dotted #bbb; */\r\n\tborder-right: 1px dotted #bbb;\r\n\tpointer-events: none;\r\n}\r\n\r\n\r\n.branch-selector__node.nesting-level-0+.branch-selector__node.nesting-level-1::before {\r\n\theight: 60%;\r\n\ttop: -15%;\r\n}\r\n\r\n.branch-selector__node qp-icon i.ac {\r\n\tfont-size: 16px;\r\n}\r\n\r\n.branch-selector__node .group-icon {\r\n\tposition: absolute;\r\n\r\n\twidth: 10px;\r\n\tleft: 6px;\r\n\ttop: 3px;\r\n\t/* left: 0;//2.35em; */\r\n\t/* background-color: white; */\r\n\tbackground-color: inherit;\r\n\r\n\r\n}\r\n.rtl .branch-selector__node .group-icon {\r\n\tleft:unset;\r\n\tright:6px;\r\n}\r\n\r\n.branch-selector__node .company-icon {\r\n\tposition: absolute;\r\n\tbackground-color: inherit;\r\n\twidth: 14px;\r\n\theight: 16px;\r\n\tleft: 19px;\r\n\ttop: 4px;\t\r\n}\r\n\r\n.rtl .branch-selector__node .company-icon {\r\n\tleft:unset;\r\n\tright:19px;\r\n}\r\n\r\n\r\n.branch-selector__node.nesting-level-0 .company-icon {\r\n\tleft: 4px;\r\n\ttop: 4px;\r\n}\r\n\r\n.rtl .branch-selector__node.nesting-level-0 .company-icon{\r\n\tleft:unset;\r\n\tright:4px;\r\n}\r\n\r\n.branch-selector__node.can-select {\r\n\tcursor: pointer;\r\n}\r\n\r\n.branch-selector__node-organization {\r\n\tmargin: 2px 0;\r\n}\r\n\r\n.branch-selector__node-branch {\r\n\r\n\tpadding-left: 30px;\r\n\tposition: relative;\r\n}\r\n\r\n.rtl .branch-selector__node-branch {\r\n\r\n\tpadding-left: unset;\r\n\tpadding-right: 30px;\r\n\tposition: relative;\r\n}\r\n\r\n\r\n.branch-selector__node-branch::before {\r\n\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\tcontent: '';\r\n\twidth: 15px;\r\n\tleft: 10px;\r\n\t/* left: 0;//2.35em; */\r\n\ttop: -50%;\r\n\theight: 100%;\r\n\tborder-bottom: 1px dotted #bbb;\r\n\tborder-left: 1px dotted #bbb;\r\n}\r\n\r\n.branch-selector__node-organization+.branch-selector__node-branch::before {\r\n\theight: 60%;\r\n\ttop: -15%;\r\n}\r\n\r\nqp-tooltip .tooltip-level {\r\n\tmargin: 5px 0;\r\n\tpadding: 0 2px;\r\n}\r\n\r\nqp-tooltip .branch-level-1 {\r\n\tposition: relative;\r\n\tpadding-left: 15px;\r\n}\r\n\r\nqp-tooltip .branch-level-2 {\r\n\tposition: relative;\r\n\tpadding-left: 30px;\r\n}\r\n\r\n\r\nqp-tooltip .branch-level-1::before {\r\n\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\tcontent: '';\r\n\twidth: 8px;\r\n\tleft: 4px;\r\n\t/* left: 0;//2.35em; */\r\n\theight: 60%;\r\n\ttop: -15%;\r\n\tborder-bottom: 1px dotted #bbb;\r\n\tborder-left: 1px dotted #bbb;\r\n}\r\n\r\nqp-tooltip .branch-level-2::before {\r\n\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\tcontent: '';\r\n\twidth: 8px;\r\n\tleft: 19px;\r\n\t/* left: 0;//2.35em; */\r\n\theight: 60%;\r\n\ttop: -15%;\r\n\tborder-bottom: 1px dotted #bbb;\r\n\tborder-left: 1px dotted #bbb;\r\n}\r\n"}));define("controls/global/button/qp-button",["require","exports","tslib","aurelia-framework","apps/enhance/services/control-helper","aurelia-event-aggregator","plugins/happeded-on-body"],(function(e,t,r,i,n,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpButtonCustomElement=void 0;var s=function(){function e(e,t){this.element=e;this.eventAggregator=t;this.pushed=false;this.imageSrc="";this.currentMouseType="normal";this.menuOpen=false;this.currentMode="normal";this.isMouseOver=false;this.element.removeAttribute("style")}t=e;e.prototype.configChanged=function(e,r){if(!this.config)this.config={};n.applyDefaultValues(this.config,t.defaultConfig);if(this.config.toggleMode)this.pushed=this.config.pushed;if(!this.config.images)this.config.images={};if(this.config.imageUrl)this.config.images.normal=this.config.imageUrl;else if(this.config.imageSet&&this.config.imageKey)this.config.images.normal=this.config.imageSet+"@"+this.config.imageKey;if(!this.config.images.hover)this.config.images.hover=this.config.images.normal;if(!this.config.images.dropDown)this.config.images.dropDown=this.config.images.pushed;if(!this.config.images.pushed)this.config.images.pushed=this.config.images.dropDown;if(!this.config.images.pushed)this.config.images.pushed=this.config.images.hover;if(!this.config.images.disabled)this.config.images.disabled=this.config.images.normal;this.imageSrc=this.config.images[this.currentMode];if(this.hidden!==undefined)this.hiddenChanged(this.hidden);if(this.enabled!==undefined)this.enabledChanged(this.enabled);if(this.text!==undefined)this.textChanged(this.text)};e.prototype.hiddenChanged=function(e){if(this.config)this.config.hidden=e};e.prototype.enabledChanged=function(e){if(this.config)this.config.enabled=e};e.prototype.textChanged=function(e){if(this.config)this.config.text=e};e.prototype.imageSrcChanged=function(e,t){if(!this.config){this.imageSrc=undefined;return}if(this.config.enabled&&this.currentMode==="disabled"){this.currentMode="normal"}else if(!this.config.enabled){this.currentMode="disabled"}else{switch(this.currentMouseType){case"hover":this.currentMode=this.currentMouseType;break;case"pushed":if(this.menuOpen)this.currentMode="dropDown";else this.currentMode=this.currentMouseType;break;case"normal":if(this.pushed)this.currentMode="pushed";else this.currentMode=this.currentMouseType;break}}this.imageSrc=this.config.images[this.currentMode]};e.prototype.handleState=function(e){if(!this.config.enabled)return;switch(e.type){case"mouseover":this.currentMouseType="hover";break;case"mouseout":if(this.menuOpen)this.currentMouseType="pushed";else this.currentMouseType="normal";break;case"mousedown":if(document.activeElement)document.activeElement.blur();this.currentMouseType="pushed";break;case"mouseup":if(this.pushed)this.currentMouseType="pushed";else if(this.menuOpen)this.currentMouseType="pushed";else this.currentMouseType="hover";break}};e.prototype.processMouseOver=function(e){this.isMouseOver=true;this.handleState(e)};e.prototype.processMouseOut=function(e){this.isMouseOver=false;this.handleState(e)};e.prototype.processPointerDown=function(e){this.handleState(e);this.buttonElement.setPointerCapture(e.pointerId);return true};e.prototype.processPointerUp=function(e){if(l(e)&&e.buttons>0&&!this.isPointInside(e.clientX,e.clientY)){return}this.handleState(e)};e.prototype.processPointerCancel=function(e){this.buttonElement.releasePointerCapture(e.pointerId)};e.prototype.detached=function(){var e;(e=this.documentMouseDownSubscription)===null||e===void 0?void 0:e.dispose();this.documentMouseDownSubscription=undefined};e.prototype.processClick=function(e,t){var r=this;var i,n;if(t===void 0){t=false}if(l(e)&&e.buttons>0&&!this.isPointInside(e.clientX,e.clientY)){return undefined}if(this.config.action){this.eventAggregator.publish("execute-command",this.config.action);return undefined}if(!((i=this.config)===null||i===void 0?void 0:i.enabled))return true;if(this.config.toggleMode){this.pushed=!this.pushed}if(this.config.options){this.menuOpen=!this.menuOpen;this.isMouseOver=false}var o={event:e,value:e instanceof CustomEvent?e.detail.value:this.pushed,isMenuItem:t,config:this.config};this.documentMouseDownSubscription=this.eventAggregator.subscribe(a.MOUSE_DOWN_REACHED_BODY,(function(){r.menuOpen=false;r.isMouseOver=false}));var s=new CustomEvent("buttonpressed",{bubbles:true,detail:o});this.element.dispatchEvent(s);if((n=this.config)===null||n===void 0?void 0:n.captureClick){e.stopPropagation();return undefined}return true};e.prototype.processMenuClick=function(e){return this.processClick(e,true)};e.prototype.isPointInside=function(e,t){var r=this.buttonElement.getBoundingClientRect();return e>=r.left&&e<=r.right&&t>=r.top&&t<=r.bottom};var t;e.defaultConfig={enabled:true,dialogResult:0};r.__decorate([i.bindable,r.__metadata("design:type",Object)],e.prototype,"config",void 0);r.__decorate([i.bindable,r.__metadata("design:type",Boolean)],e.prototype,"hidden",void 0);r.__decorate([i.bindable,r.__metadata("design:type",Boolean)],e.prototype,"enabled",void 0);r.__decorate([i.bindable,r.__metadata("design:type",String)],e.prototype,"text",void 0);r.__decorate([i.bindable,r.__metadata("design:type",Boolean)],e.prototype,"pushed",void 0);r.__decorate([i.observable({changeHandler:"imageSrcChanged"}),r.__metadata("design:type",String)],e.prototype,"currentMouseType",void 0);e=t=r.__decorate([i.customElement("qp-button"),i.autoinject,r.__metadata("design:paramtypes",[Element,o.EventAggregator])],e);return e}();t.QpButtonCustomElement=s;var l=function(e){return e instanceof MouseEvent||e instanceof PointerEvent}}));define("text!controls/global/button/qp-button.css",[],(function(){return"button.qp-button div.btn-inner {\r\n\tpadding-top: 1px;\r\n}\r\n\r\nbutton.qp-button div.btn-inner qp-icon.icon-menu {\r\n\tpadding-left: 5px;\r\n}\r\n\r\nqp-button div.glue-to {\r\n\tposition: fixed;\r\n\tz-index: 1000;\r\n}\r\n\r\nqp-button div.glue-to div.options-panel {\r\n\tbackground-color: white;\r\n\tz-index: 1000;\r\n\tmax-width: 412px;\r\n\tmax-height: 269px;\r\n}\r\n\r\nqp-button div.drop-down__options-pane {\r\n\topacity: 1 !important;\r\n\tmin-width: 210px;\r\n\tcolor: rgba(0, 0, 0, 0.87);\r\n}\r\n\r\nqp-button div.drop-down__options-pane div {\r\n\theight: 26px;\r\n\tline-height: 26px;\r\n}\r\n\r\nbutton.qp-button {\r\n\tfont-weight: 400;\r\n\tfont-size: 13px;\r\n\tbackground-color: #D2D4D7;\r\n\tpadding: 2px 6px 3px 6px;\r\n\tborder: 1px solid #D2D4D7;\r\n\theight: 24px;\r\n\tmin-width: 60px;\r\n\tvertical-align: middle;\r\n\topacity: 0.87;\r\n\twhite-space: nowrap;\r\n\tcursor: pointer;\r\n\toverflow: hidden;\r\n\ttext-transform: uppercase;\r\n\twidth: inherit;\r\n}\r\n\r\nbutton.qp-button[disabled] {\r\n\tcolor: #333333 !important;\r\n\topacity: 0.26 !important;\r\n}\r\n\r\nbutton.qp-button:not([disabled]):hover,\r\nbutton.qp-button.pushed {\r\n\topacity: 0.87;\r\n\tbackground-color: var(--primary-color, #007ACC) !important;\r\n\tborder-color: var(--primary-color, #007ACC) !important;\r\n\tcolor: #FFFFFF;\r\n}\r\nbutton.qp-button.ButtonT {\r\n\tbackground-color: transparent;\r\n\tborder: none;\r\n}\r\nbutton.qp-button:not([disabled]):active {\r\n\topacity: 1;\r\n}\r\n\r\nbutton.qp-button:focus {\r\n\tborder: 1px solid #007ACC;\r\n\tborder: 1px solid var(--primary-color, #007ACC);\r\n}\r\n"}));define("text!controls/global/button/qp-button.html",[],(function(){return'<template show.bind="!config.hidden"><require from="./qp-button.css"></require><require from="../options/qp-options"></require><button id="${config.id}" name="${config.name}" css="${config.style}" type="button" ref="buttonElement" tabindex="${config.tabIndex}" class="qp-button ${config.class} ${pushed ? \'pushed\' : \'\'}" disabled.bind="config.enabled == false || config.disabled" click.capture="processClick($event)" mouseover.delegate="processMouseOver($event)" mouseout.delegate="processMouseOut($event)" pointerdown.delegate="processPointerDown($event)" pointerup.delegate="processPointerUp($event)" pointercancel.delegate="processPointerCancel($event)"><div class="btn-inner" data-cmd="${config.commandName}"><qp-icon imagesrc.bind="imageSrc"></qp-icon><span if.bind="!imageSrc" style="padding-top:1px">${config.text || config.displayName}</span><qp-icon if.bind="config.options" imagesrc="control@ArrowDown" class="icon-menu"></qp-icon></div></button><div glue-to.bind="buttonElement" if.bind="config.options && menuOpen" class="glue-to"><div class="options-panel"><qp-options config.bind="config" options-for.bind="buttonElement" valuechanged.delegate="processMenuClick($event)"></qp-options></div></div></template>'}));define("controls/global/calendar/qp-calendar",["require","exports","tslib","aurelia-framework","apps/enhance/services/control-helper","aurelia-logging"],(function(e,t,r,i,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpCalendarCustomElement=t.StringToIntValueConverter=void 0;var a=o.getLogger("qp-calendar");var s=function(){function e(){}e.prototype.toView=function(e){return e==null?"":e.toString()};e.prototype.fromView=function(e){return parseInt(e)};return e}();t.StringToIntValueConverter=s;var l=7;var d=12;var c=864e5;var p=4;var u=6;var f=13;var h=100;var g=50;var m=.25;var b=3;var v=.5;var x=function(){function e(e){var r=this;this.elem=e;this.timer=undefined;this.down=false;this.required=false;this.year=NaN;this.month=NaN;this.monthNames=[];this.shortMonthNames=[];this.shortDayNames=[];this.yearFix=0;this.firstDayOfWeek=0;this.locale="en-US";this.enableMonthChange=true;this.allowClicks=false;this._bindMouseUpYearSel=function(e){return r.onMouseUpYearSel(e)};this._bindMouseDownYearSel=function(e){return r.onMouseDownYearSel(e)};this.formats={showDOWHeader:true,showOtherMonthDays:true,showWeekNumber:true,nextPrevFormat:0};if(n.dateFormatInfo){this.monthNames=n.dateFormatInfo.monthNames.split(",");this.shortMonthNames=n.dateFormatInfo.abbrMonthNames.split(",");this.shortDayNames=n.dateFormatInfo.abbrDayNames.split(",");this.yearFix=n.dateFormatInfo.yearFix?n.dateFormatInfo.yearFix:0}else{this.monthNames=t._MN;this.shortMonthNames=t._SMN;this.shortDayNames=t._SDN}this.todayDate=new Date;this.todayString=this.todayDateToString()}t=e;Object.defineProperty(e.prototype,"monthPanel",{get:function(){return D(new Date(this.year,this.month,1),this.firstDayOfWeek)},enumerable:false,configurable:true});e.prototype.selectTheDate=function(e,t){this.value=e;this.syncMonthYear();this.monthPaneEle&&this.monthPaneEle.focus();this.commitSelection(this.value);t&&t.stopPropagation();return false};e.prototype.selectCustomItem=function(e,t){this.value=e;this.commitSelection(this.value);t&&t.stopPropagation();return false};e.prototype.onChangeYearSel=function(e){this.closeYearSel();e.blur()};e.prototype.onScrollYearSel=function(e){var t=this;if(e.oldScrollTop===e.scrollTop||e.oldScrollTop==null){return}var r=e.clientHeight;if(e.scrollTop>=r*(1-m)||e.scrollTop<=r*m){if(e.scrollTop>=r*(1-m)){e.oldScrollTop=Math.round(r*(1-m));e.scrollTop=e.oldScrollTop;if(!this.down){clearTimeout(this.timer);this.timer=setTimeout((function(){return t.scrollBackToCenter(t.yearSelection)}),h);this.scrollDown()}else if(!this.timer){this.timer=setInterval((function(){return t.scrollDown()}),g)}}else{if(e.scrollTop<=r*m){e.oldScrollTop=Math.round(r*m);e.scrollTop=e.oldScrollTop;if(!this.down){clearTimeout(this.timer);this.timer=setTimeout((function(){return t.scrollBackToCenter(t.yearSelection)}),h);this.scrollUp()}else if(!this.timer){this.timer=setInterval((function(){return t.scrollUp()}),g)}}}}else{clearInterval(this.timer);this.timer=undefined;e.oldScrollTop=e.scrollTop}};e.prototype.scrollUp=function(){this.year--;this.renderSelectForIE()};e.prototype.scrollDown=function(){this.year++;this.renderSelectForIE()};e.prototype.renderSelectForIE=function(){var e=this;if(n.browser.isIE||n.browser.isIE11){setTimeout((function(){var t,r;(t=e.yearSelection)===null||t===void 0?void 0:t.add(document.createElement("option"),null);(r=e.yearSelection)===null||r===void 0?void 0:r.remove(e.yearSelection.options.length-1)}),0)}};e.prototype.scrollBackToCenter=function(e){var t=this;if(!e)return;clearInterval(this.timer);this.timer=undefined;var r=e.clientHeight;var i=r*v-e.scrollTop?r*v-e.scrollTop<0?-1:1:0;e.oldScrollTop=undefined;e.scrollTop=(r-i*r*v)*v;var n=0;this.timer=setInterval((function(){e.scrollTop=(r-i*(b-n)*r*v/b)*v;n++;if(n>b){e.oldScrollTop=e.scrollTop;clearInterval(t.timer);t.timer=undefined;return}}),g)};e.prototype.onMouseOut=function(e){if(n.browser.isIE||n.browser.isIE11){this.onMouseUpYearSel(e)}};e.prototype.onMouseUpYearSel=function(e){if(this.down){this.down=false;this.scrollBackToCenter(this.yearSelection)}};e.prototype.onMouseDownYearSel=function(e){this.down=true};e.prototype.onKeyDownYearSel=function(e){switch(e.key){case"PageUp":this.year-=f;e.preventDefault();e.stopPropagation();break;case"PageDown":this.year+=f;e.preventDefault();e.stopPropagation();break;case"Up":case"ArrowUp":this.year--;this.renderSelectForIE();break;case"Down":case"ArrowDown":this.year++;this.renderSelectForIE();break}};e.prototype.onFocusYearSel=function(e){if(!e)return;this.yearSelection=e;this.openYearSel();this.yearSelection.scrollTop=Math.round(e.clientHeight*v);this.yearSelection.oldScrollTop=this.yearSelection.scrollTop;this.yearSelection.addEventListener("mouseup",this._bindMouseUpYearSel);this.yearSelection.addEventListener("mousedown",this._bindMouseDownYearSel)};e.prototype.onBlurYearSel=function(e){var t,r;(t=this.yearSelection)===null||t===void 0?void 0:t.removeEventListener("mouseup",this._bindMouseUpYearSel);(r=this.yearSelection)===null||r===void 0?void 0:r.removeEventListener("mousedown",this._bindMouseDownYearSel);this.closeYearSel();clearInterval(this.timer);e.oldScrollTop=undefined;this.timer=undefined;this.down=false};e.prototype.closeYearSel=function(){this.yearSelection.size=1;this.yearSelection.classList.remove("opened");this.yearSelection.classList.add("closed")};e.prototype.openYearSel=function(){this.yearSelection.size=f;this.yearSelection.classList.remove("closed");this.yearSelection.classList.add("opened")};e.prototype.syncMonthYear=function(){if(this.value instanceof Date){this.month=this.value.getMonth();this.year=this.value.getFullYear()}else{this.month=this.todayDate.getMonth();this.year=this.todayDate.getFullYear()}};e.prototype.commitSelection=function(e){var t=new CustomEvent("valuechanged",{bubbles:true,detail:{value:this.value}});this.elem.dispatchEvent(t)};e.prototype.ignoreClicks=function(e){e.stopImmediatePropagation();return true};e.prototype.monthChanged=function(e){this.renderHintsToPrevNextMonths(e)};e.prototype.attached=function(){a.info("attached() of ",this.config&&this.config.id);this.syncMonthYear();this.renderHintsToPrevNextMonths(this.month);this.monthPaneEle&&this.monthPaneEle.focus()};e.prototype.configChanged=function(e,t){a.info("configChanged() of ",e,t);if(!this.config)this.config={};if(this.config.todayDate)this.todayDate=this.config.todayDate;if(this.config.todayString)this.todayString=this.config.todayString;if(this.config.firstDayOfWeek!=null)this.firstDayOfWeek=this.config.firstDayOfWeek;this.syncMonthYear()};e.prototype.keyDown=function(e){a.info(e.key+" pressed");var t=true;switch(e.key){case"Down":case"ArrowDown":this.advanceDate(0,0,l);break;case"Up":case"ArrowUp":this.advanceDate(0,0,-l);break;case"Right":case"ArrowRight":this.advanceDate(0,0,1);break;case"Left":case"ArrowLeft":this.advanceDate(0,0,-1);break;case"PageUp":this.advanceDate(0,-1,0);break;case"PageDown":this.advanceDate(0,1,0);break;case"Home":this.advanceDate(-1,0,0);break;case"End":this.advanceDate(1,0,0);break;case"Space":this.value=this.todayDate;this.syncMonthYear();break;case"Enter":this.commitSelection(this.value);break;case"Esc":case"Escape":this.commitSelection(undefined);break;default:t=false}if(t){e.stopPropagation();return false}return true};e.prototype.advanceDate=function(e,t,r){if(this.value instanceof Date){this.value=new Date(this.value.getFullYear()+e,this.value.getMonth()+t,this.value.getDate()+r);this.syncMonthYear()}};e.prototype.todayDateToString=function(){if(n.dateFormatInfo&&n.dateFormatInfo.shortDate){return n.formatDate(this.todayDate,n.dateFormatInfo.shortDate,n.dateFormatInfo)}else return Intl.DateTimeFormat(this.locale).format(this.todayDate)};e.prototype.renderHintsToPrevNextMonths=function(e){var t=(d+e-1)%d;var r=(d+e+1)%d;if(this.prevMonthEle&&i.PLATFORM.global.px){i.PLATFORM.global.px.setTitle(this.prevMonthEle,this.monthNames[t])}if(this.nextMonthEle&&i.PLATFORM.global.px){i.PLATFORM.global.px.setTitle(this.nextMonthEle,this.monthNames[r])}};e.prototype.handleMonthChange=function(e,t){this.month+=e;if(this.month<0){this.month=d-1;this.year--}else if(this.month>=d){this.month=0;this.year++}this.ignoreClicks(t);return false};e.prototype.isTheSame=function(e,t){if(e instanceof Date&&t instanceof Date&&e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()){return true}return false};e.prototype.isWeekend=function(e){var t=e.getDay();if(t===0||t===l-1){return true}return false};e.prototype.getWeekNumber=function(e){if(e===undefined||e.length<l){return 0}var t=e[p].date;if(t===undefined){return 0}var r=new Date(t.getFullYear(),t.getMonth(),t.getDate());var i=r.getDay();r.setDate(r.getDate()-(i+l-1)%l+p-1);var n=r.valueOf();r.setMonth(0);r.setDate(p);return Math.round((n-r.valueOf())/(l*c))+1};var t;e._nextPrevShortMonth=1;e._nextPrevFullMonth=2;e._daysInWeek=7;e._MN=["January","February","March","April","May","June","July","August","September","October","November","December"];e._SMN=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e._SDN=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];e._selectMode=0;e._addSelectionMode=1;e._rangeSelectionMode=2;r.__decorate([i.computedFrom("year","month"),r.__metadata("design:type",Array),r.__metadata("design:paramtypes",[])],e.prototype,"monthPanel",null);r.__decorate([i.bindable,r.__metadata("design:type",Object)],e.prototype,"config",void 0);r.__decorate([i.bindable,r.__metadata("design:type",Object)],e.prototype,"value",void 0);r.__decorate([i.observable,r.__metadata("design:type",Number)],e.prototype,"month",void 0);e=t=r.__decorate([i.autoinject,i.customElement("qp-calendar"),r.__metadata("design:paramtypes",[Element])],e);return e}();t.QpCalendarCustomElement=x;function y(e){return new Date(e.getFullYear(),e.getMonth())}function w(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function q(e){return new Date(e.getFullYear(),e.getMonth(),0)}function C(e,t){var r=[];var i=y(e);var n=i.getDay();var o=(n-t+l)%l;var a=q(i);var s=a.getDate();for(var d=s-o+1;d<=s;++d){r.push({dayOfMonth:d,leadingDay:true,date:new Date(a.getFullYear(),a.getMonth(),d)})}return r}function k(e,t){var r=[];var i=(t+l-1)%l;var n=w(e);var o=n.getDay();var a=(i-o+l)%l;for(var s=1;s<=a;++s){r.push({dayOfMonth:s,trailingDay:true,date:new Date(n.getFullYear(),n.getMonth()+1,s)})}return r}function _(e,t){var r=[];var i=(t+l-1)%l;var n=w(e);var o=n.getDay();var a=(i-o+l)%l;for(var s=a+1;s<=a+l;++s){r.push({dayOfMonth:s,trailingDay:true,date:new Date(n.getFullYear(),n.getMonth()+1,s)})}return r}function D(e,t){var r=[];var i=w(e).getDate();var n=C(e,t);for(var o=1;o<=i;++o){n.push({dayOfMonth:o,inCurrentMonth:true,date:new Date(e.getFullYear(),e.getMonth(),o)});if(n.length===l){r.push(n);n=[]}}n=n.concat(k(e,t));if(n.length>0){r.push(n)}if(r.length<u){r.push(_(e,t))}return r}}));define("text!controls/global/calendar/qp-calendar.css",[],(function(){return'.qp-calendar select.year-select{\r\n\tscrollbar-width: thin;\r\n\tscrollbar-color: rgba(0, 0, 0, 0.15) transparent;\r\n\tposition: absolute;\r\n}\r\n@supports (-moz-appearance:none) {\r\n\t.qp-calendar select.year-select{\r\n\t\twidth: 50px;\r\n\t}\r\n\t.qp-calendar select.month-select{\r\n\t\twidth: 100px;\r\n\t}\r\n}\r\n.qp-calendar select.year-select::-webkit-scrollbar {\r\n\twidth: 19px;\r\n}\r\n.qp-calendar select.year-select::-webkit-scrollbar-thumb {\r\n    background: rgba(0, 0, 0, 0.15);\r\n    border-radius: 10px;\r\n    width: 3px;\r\n    border: 5px solid white;\r\n}\r\n.year-select.closed {\r\n\ttop: 5px;\r\n}\r\n.year-select.opened {\r\n\ttop: 24px;\r\n}\r\n\r\n.calendar {\r\n\tbackground-color: #FFFFFF;\r\n\tborder: 1px solid #D2D4D7;\r\n\tbox-shadow: 3px 3px 4px rgba(0, 0, 0, 0.64);\r\n\t-moz-box-shadow: 3px 3px 4px rgba(0, 0, 0, 0.64);\r\n\t-webkit-box-shadow: 3px 3px 4px rgba(0, 0, 0, 0.64);\r\n }\r\n \r\n .calendarMT {\r\n\tfont-size: 12px;\r\n\tfont-weight: bold;\r\n\tborder-bottom: #D2D4D7 1px Solid;\r\n\tbackground-color: #D2D4D7;\r\n\tpadding: 4px 6px;\r\n }\r\n \r\n .calendarMT select {\r\n\tmargin: 0;\r\n\tpadding: 0;\r\n\twidth: auto;\r\n }\r\n \r\n .calendarMT select + select {\r\n\tmargin-left: 8px;\r\n }\r\n \r\n .calendarNP {\r\n\twidth: 16px;\r\n }\r\n \r\n .calendarF {\r\n\tbackground-color: #F5F7F8;\r\n\tbackground-color: var(--background-color, #F5F7F8);\r\n\tpadding: 5px 12px;\r\n }\r\n \r\n .calendarD {\r\n\ttext-align: right;\r\n\tvertical-align: middle;\r\n\tpadding: 8px 12px;\r\n }\r\n \r\n .calendarD:hover {\r\n\tbackground-color: #007ACC;\r\n\tbackground-color: var(--primary-color, #007ACC);\r\n\tcolor: #FFFFFF;\r\n }\r\n \r\n .calendar table[id$="customItems"] .calendarD {\r\n\ttext-align: left;\r\n\tcursor: pointer;\r\n\tpadding: 3px 10px;\r\n }\r\n \r\n .calendarWE {\r\n\tcolor: #007ACC;\r\n\tcolor: var(--primary-color, #007ACC);\r\n }\r\n \r\n .calendarTD {\r\n\toutline: 1px solid #007ACC;\r\n\toutline: 1px solid var(--primary-color, #007ACC);\r\n\tpadding: 4px 7px;\r\n }\r\n \r\n .calendarOMD {\r\n\tcolor: RGBA(0, 0, 0, 0.26);\r\n }\r\n \r\n .calendarSD {\r\n\tbackground-color: #D2D4D7;\r\n }\r\n \r\n .calendarDH {\r\n\ttext-align: center;\r\n\tcolor: rgba(0, 0, 0, 0.64);\r\n\tbackground-color: #F5F7F8;\r\n\tbackground-color: var(--background-color, #F5F7F8);\r\n\tpadding: 6px 3px;\r\n }\r\n \r\n .calendarWN, .calendarWN:hover {\r\n\tcolor: rgba(0, 0, 0, 0.64);\r\n\tbackground-color: #F5F7F8;\r\n\tbackground-color: var(--background-color, #F5F7F8);\r\n\tfont-size: 9px;\r\n\tpadding: 8px 10px;\r\n }'}));define("text!controls/global/calendar/qp-calendar.html",[],(function(){return'<template><require from="./qp-calendar"></require><require from="./qp-calendar.css"></require><table class="calendar qp-calendar" cellpadding="0" cellspacing="0" style="z-index:11000" click.delegate="$event.stopPropagation()" mousedown.trigger="ignoreClicks($event)"><tbody><tr><td class="calendarMT"><table cellpadding="0" cellspacing="0" border="0" style="height:100%;width:100%"><tbody><tr><td class="calendarNP" click.capture="handleMonthChange(-1, $event)" ref="prevMonthEle"><div class="sprite-icon control-icon" icon="PrevMonth"><div class="control-icon-img control-PrevMonth"></div></div></td><td style="text-align:Center"><select ref="monthSelEle" class="month-select" value.bind="month | stringToInt"><option repeat.for="i of 12" value.one-time="i">${monthNames[i]}</option></select> <select ref="yearSelEle" class="year-select closed" style="pointer-events:none" value.bind="year | stringToInt"><option value="${year}">${year}</option></select> <select ref="yearSelEle" class="year-select closed" value.bind="year | stringToInt" mouseout.trigger="onMouseOut($event.currentTarget)" scroll.trigger="onScrollYearSel($event.currentTarget)" keydown.trigger="onKeyDownYearSel($event)" focus.trigger="onFocusYearSel($event.currentTarget)" blur.trigger="onBlurYearSel($event.currentTarget)" change.trigger="onChangeYearSel($event.currentTarget)"><option repeat.for="i of 27" value="${year+i-13}">${year+i-13}</option></select></td><td class="calendarNP" click.capture="handleMonthChange(1, $event)" ref="nextMonthEle"><div class="sprite-icon control-icon" icon="NextMonth"><div class="control-icon-img control-NextMonth"></div></div></td></tr></tbody></table></td><td if.bind="config.customItems.length > 0" rowspan="3" style="vertical-align:Top"><table id="${id}_customItems"><tbody><tr repeat.for="item of config.customItems" click.capture="selectCustomItem(item, $event)"><td class="calendarD">${item}</td></tr></tbody></table></td></tr><tr><td><table cellspacing="0" align="Center" border="0" style="width:100%" ref="monthPaneEle" keydown.capture="keyDown($event)" tabindex="0"><colgroup><col repeat.for="i of 8" style="width:12%"></colgroup><tbody><tr><td class="calendarDH">#</td><td class="calendarDH" repeat.for="i of 7">${shortDayNames[(i+firstDayOfWeek)%7]}</td></tr><tr repeat.for="week of monthPanel"><td class="calendarWN calendarD">${getWeekNumber(week)}</td><td repeat.for="day of week" class="calendarD ${isTheSame(day.date, todayDate) ? \'calendarTD\' : \'\'} ${day.trailingDay || day.leadingDay ? \'calendarOMD\' : \'\'} ${isWeekend(day.date) ? \'calendarWE\':\'\'} ${isTheSame(day.date, value) ? \'calendarSD\':\'\'}" click.capture="selectTheDate(day.date, $event)">${day.dayOfMonth}</td></tr></tbody></table></td></tr><tr><td ref="todayCellEle" class="calendarF" style="cursor:pointer" click.capture="selectTheDate(todayDate, $event)"> ${todayString} </td></tr></tbody></table></template>'}));define("controls/global/check-box/qp-check-box",["require","exports","tslib","aurelia-framework","aurelia-logging","apps/enhance/services/control-helper","../base-field-editor"],(function(e,t,r,i,n,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpCheckBoxCustomElement=t.IntToBoolValueConverter=void 0;var s=n.getLogger("check-box");var l=function(){function e(){}e.prototype.toView=function(e,t){return!!e};e.prototype.fromView=function(e,t){return e===true?1:0};return e}();t.IntToBoolValueConverter=l;var d=function(e){r.__extends(t,e);function t(t){var r=e.call(this)||this;r.element=t;r.addConfigSetter("displayName","label");return r}n=t;t.prototype.configChanged=function(e,t){if(!this.config)this.config={};o.applyDefaultValues(this.config,n.defaultConfig)};t.prototype.toggleValue=function(e){if(e.target===this.element){return true}this.value=!this.value;e.stopPropagation();return false};var n;t.defaultConfig={enabled:true,required:false,trueValue:"true",falseValue:"false"};r.__decorate([i.bindable,r.__metadata("design:type",Object)],t.prototype,"config",void 0);r.__decorate([i.bindable,r.__metadata("design:type",Object)],t.prototype,"value",void 0);t=n=r.__decorate([i.customElement("qp-check-box"),i.autoinject,r.__metadata("design:paramtypes",[Element])],t);return t}(a.QpBaseFieldEditor);t.QpCheckBoxCustomElement=d}));define("text!controls/global/check-box/qp-check-box.css",[],(function(){return'.qp-checkbox .qp-checkbox-icon {\r\n\tdisplay: inline-block;\r\n}\r\n\r\n.qp-checkbox label {\r\n\tdisplay: inline-block;\r\n\twhite-space: nowrap;\r\n\toverflow: hidden;\r\n}\r\n\r\ninput[type="checkbox"] {\r\n\tmargin-bottom: 0px;\r\n\tmargin-left: 0px;\r\n\theight: 15px;\r\n}\r\n\r\ninput[type="checkbox"]:focus {\r\n\tborder: 1px solid #007ACC;\r\n\tborder: 1px solid var(--primary-color, #007ACC);\r\n\t-webkit-box-shadow: 0px 0px 4px 0px #007ACC;\r\n\t        box-shadow: 0px 0px 4px 0px #007ACC;\r\n\t-webkit-box-shadow: 0px 0px 4px 0px var(--primary-color, #007ACC);\r\n\t        box-shadow: 0px 0px 4px 0px var(--primary-color, #007ACC);\r\n}\r\n'}));define("text!controls/global/check-box/qp-check-box.html",[],(function(){return'<template css="display: ${config.hidden ? \'none\': \'block\'};"><require from="./qp-check-box"></require><require from="./qp-check-box.css"></require><span if.bind="config.renderStyle!==\'button\'" id="${config.id}" class="qp-checkbox ${config.class}" enabled.bind="!!config.enabled & attr" click.delegate="config.enabled===true && toggleValue($event)"><label if.bind="config.textAlign===\'left\'" for="${config.id}_text" class="left ${config.labelWidth ? \'fld-l\'+config.labelWidth : \'\'}">${config.label}</label> <input id="${config.id}_text" name="${config.name}" ref="element" type="checkbox" tabindex="${config.tabIndex}" disabled.bind="!config.enabled" checked.two-way="value | intToBool"><label if.bind="config.textAlign!==\'left\'" for="${config.id}_text">${config.label}</label></span><div else class="qp-checkbox ${config.class}" id="${config.id}" enabled.bind="!!config.enabled & attr" checked.bind="!!value & attr"><qp-hyper-icon id="${config.id}_pic" if.bind="config.renderStyle == \'button\' && value" images.bind="config.checkImages" disabled.bind="!config.enabled" click.delegate="config.enabled===true && toggleValue($event)" class="qp-checkbox-icon"></qp-hyper-icon><qp-hyper-icon id="${config.id}_pic" if.bind="config.renderStyle == \'button\' && !value" images.bind="config.uncheckImages" disabled.bind="!config.enabled" click.delegate="config.enabled===true && toggleValue($event)" class="qp-checkbox-icon"></qp-hyper-icon><label if.bind="config.renderStyle == \'button\' && config.label && config.label.length" class="qp-checkbox-label" for="${config.id}_pic">${config.label}</label></div></template>'}));define("controls/global/color-picker/qp-color-picker",["require","exports","tslib","aurelia-framework"],(function(e,t,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpColorPickerCustomElement=void 0;var n=true;var o=document.createElement("input");o.setAttribute("type","color");o.value="a";if(o.value==="a"){n=false}var a=function(){function e(){this.supportsColor=n}e.prototype.validateValue=function(e){var t=/^#[a-f\d]{6}$/i;var r=t.test(e.target.value);if(!r){e.target.value="#000000"}};r.__decorate([i.bindable,r.__metadata("design:type",Object)],e.prototype,"config",void 0);r.__decorate([i.bindable,r.__metadata("design:type",String)],e.prototype,"value",void 0);e=r.__decorate([i.customElement("qp-color-picker"),i.autoinject],e);return e}();t.QpColorPickerCustomElement=a}));define("text!controls/global/color-picker/qp-color-picker.html",[],(function(){return'<template style="display:inline-block"><div style="display:flex;padding:0;border:0" class.bind="config.class"><input if.bind="supportsColor" disabled.bind="config.readOnly" class="editor" style="flex:1 1 auto" type="color" tabindex="${config.tabIndex}" value.bind="value & updateTrigger:\'blur\'"> <span else css="background-color:${value};flex:1 1 auto;min-width:60px;"></span> <input class="editor size-xs" disabled.bind="config.readOnly" style="flex:0 1 auto" type="text" value.bind="value & updateTrigger:\'blur\'" id="${config.id}" tabindex="${config.tabIndex}" name="${config.name}" blur.capture="validateValue($event)"></div></template>'}));define("controls/global/customization/customizable",["require","exports","tslib","aurelia-templating","aurelia-logging","aurelia-binding","aurelia-framework","aurelia-loader"],(function(e,t,r,i,n,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CustomizableCustomElement=void 0;var l=n.getLogger("customizable");var d=function(){function e(e,t,r,i,n,o,a,s){this.container=e;this.viewResources=t;this.element=r;this.targetInstruction=i;this.compositionEngine=n;this.loader=o;this.viewCompiler=a;this.taskQueue=s;this.initialized=false;this.expressions=this.targetInstruction.expressions;this.container=e;this.slot=this.bindingContext=this.overrideContext=undefined;this.isAttached=this.isBound=this.isCompiled=this.isInitialized=false;this.isCleanedUp=true}e.prototype.bind=function(e,t){this.isBound=true;this.bindingContext=e.context||e;this.overrideContext=o.createOverrideContext(e,t);this.screenNameChanged(this.screenName)};e.prototype.unbind=function(){this.isBound=false;var e=this===null||this===void 0?void 0:this.currentViewModel;if(e===null||e===void 0?void 0:e.unbind)e.unbind();this.bindingContext=undefined;this.overrideContext=undefined};e.prototype.attached=function(){var e=this;this.isAttached=true;this.isInitialized=true;this.slot=new a.ViewSlot(this.routerElement||this.element.firstElementChild||this.element,true);this.taskQueue.queueMicroTask((function(){e.tryCompile()}))};e.prototype.detached=function(){this.isAttached=false;var e=this===null||this===void 0?void 0:this.currentViewModel;if(e===null||e===void 0?void 0:e.detached)e.detached();if(this.isCompiled){this.cleanUp()}this.slot=undefined};e.prototype.cleanUp=function(){this.isCompiled=false;var e=this.slot;try{e.detached()}catch(e){l.error(e.message)}try{e.unbind()}catch(e){l.error(e.message)}try{e.removeAll()}catch(e){l.error(e.message)}this.isCleanedUp=true};e.prototype.tryCompile=function(){var e=this;if(this.isAttached){if(!this.isCleanedUp){this.cleanUp()}try{this.taskQueue.queueMicroTask((function(){e.compile()}))}catch(t){l.warn(t.message);this.taskQueue.queueMicroTask((function(){e.compile("<template>"+t.message+"</template>")}))}}};e.prototype.dispatchCompiledEvent=function(){var e=new CustomEvent("compiled",{cancelable:true,bubbles:true,detail:this});this.element.dispatchEvent(e)};e.prototype.escapeHtml=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")};e.prototype.findElement=function(e,t){if(!t)throw new Error("Empty locator. ");var r=e.content.querySelector(t);if(!r){throw new Error("Element "+t+" is not found. ")}return r};e.prototype.applyCustomization=function(e,t){var r,i,n,o,a,s,l,d,c,p,u,f;try{for(var h=0;h<t.content.children.length;++h){var g=t.content.children[h];if(g.nodeName==="MODIFY"){var m=this.findElement(e,(r=g.attributes.target)===null||r===void 0?void 0:r.value);for(var b=0;b<g.attributes.length;++b){var v=g.attributes[b];if(v.name==="target")continue;if(v.value)m.setAttribute(v.name,v.value);else m.removeAttribute(v.name)}continue}if((i=g.attributes.modify)===null||i===void 0?void 0:i.value){var m=this.findElement(e,(n=g.attributes.modify)===null||n===void 0?void 0:n.value);for(var b=0;b<g.attributes.length;++b){var v=g.attributes[b];if(v.name==="modify")continue;if(v.value)m.setAttribute(v.name,v.value);else m.removeAttribute(v.name)}}else if((o=g.attributes.replace)===null||o===void 0?void 0:o.value){var m=this.findElement(e,(a=g.attributes.replace)===null||a===void 0?void 0:a.value);(s=m.parentNode)===null||s===void 0?void 0:s.replaceChild(g.cloneNode(true),m)}else if((l=g.attributes.before)===null||l===void 0?void 0:l.value){var m=this.findElement(e,(d=g.attributes.before)===null||d===void 0?void 0:d.value);(c=m.parentNode)===null||c===void 0?void 0:c.insertBefore(g.cloneNode(true),m)}else if((p=g.attributes.after)===null||p===void 0?void 0:p.value){var m=this.findElement(e,(u=g.attributes.after)===null||u===void 0?void 0:u.value);(f=m.parentNode)===null||f===void 0?void 0:f.insertBefore(g.cloneNode(true),m.nextElementSibling)}else{e.content.appendChild(g.cloneNode(true))}}}catch(g){var x=g.message+"<br>";x+="In customization template:<br>"+this.escapeHtml(t.outerHTML);throw new Error(x)}};e.prototype.compile=function(e){if(this.isCompiled)return;if(!this.isCleanedUp){this.cleanUp()}var t=e||this.html;if(!t){return}this.isCleanedUp=false;var r=this.container.get(a.ViewResources);var i=this.container.createChild();var n=this.viewCompiler.compile(t,r);var s=n.create(i);var l=this.slot;if(this.bindingContext)this.bindingContext.viewModel=this.currentViewModel;var d=o.createOverrideContext(this.currentViewModel,this.overrideContext);l.add(s);l.bind(this.currentViewModel,d);this.currentViewModel.attached();l.attached();this.dispatchCompiledEvent();this.isCompiled=true};e.prototype.isViewModel=function(e){var t=e;do{if(t.name==="ScreenBaseViewModel")return true;t=t.__proto__}while(t);return false};e.prototype.getViewModelClassFromScreenName=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,i,n,o,a,s,l,d,c,p,u,f,h,g,m;var b=this;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.loader.loadModule(e)];case 1:t=r.sent();i=Object.getOwnPropertyNames(t);n=undefined;for(o=0,a=i;o<a.length;o++){s=a[o];l=t[s];if(this.isViewModel(l)){n=this.container.get(l);break}}this.currentViewModel=n;d=new Array;while(n.__proto__&&n.__proto__.constructor.name!=="ScreenBaseViewModel"){d.push({viewName:n.viewName});n=n.__proto__}c=0,p=d;r.label=2;case 2:if(!(c<p.length))return[3,5];u=p[c];return[4,this.loader.loadTemplate("html-resource-plugin!"+u.viewName)];case 3:f=r.sent();h=document.createElement("div");h.innerHTML=f.toString();u.template=h.firstChild;r.label=4;case 4:c++;return[3,2];case 5:g=d[d.length-1].template;try{for(m=d.length-2;m>=0;--m){this.applyCustomization(g,d[m].template)}this.html=g.outerHTML}catch(e){this.html='<template><div style="white-space: pre;background-color: lightgoldenrodyellow;padding: 12px;">Error: '+e.message+"</div></template>"}this.taskQueue.queueMicroTask((function(){b.tryCompile()}));return[2,undefined]}}))}))};e.prototype.screenNameChanged=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){if(this.currentViewModel||this.currentViewModelPromise||!e)return[2];this.getViewModelClassFromScreenName(e);return[2]}))}))};e.prototype.activate=function(e,t){this.screenName=t.settings.screen;this.routerElement=t.navModel.router.viewPorts.default.element};e.prototype.deactivate=function(){var e=this===null||this===void 0?void 0:this.currentViewModel;if(e===null||e===void 0?void 0:e.deactivate)e.deactivate()};r.__decorate([i.bindable,r.__metadata("design:type",String)],e.prototype,"screenName",void 0);e=r.__decorate([a.autoinject,i.customElement("customizable"),a.inlineView("<template></template>"),r.__metadata("design:paramtypes",[a.Container,a.ViewResources,Element,a.TargetInstruction,a.CompositionEngine,s.Loader,a.ViewCompiler,a.TaskQueue])],e);return e}();t.CustomizableCustomElement=d}));define("controls/global/dac-browser/messages",["require","exports","tslib","apps/enhance/services/localization"],(function(e,t,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ErrorMessages=void 0;var n=function(){function e(){}e.DisplayName="Display Name";e.DAC="DAC";e.DacQuery="DAC Query";e.Type="Type";e.Obsolete="Obsolete";e.ObsoleteDacTooltip="The DAC is obsolete and is going to be removed in a future version.";e.ObsoleteFieldTooltip="The field is obsolete and is going to be removed in a future version.";e.Customized="Customized";e.Field="Field";e.ForeignReference="Foreign Reference";e.Virtual="Nonexistent in DB";e.VirtualDacTooltip="The DAC exists only in the application code and does not correspond to table in the database.";e.VirtualFieldTooltip="The field exists only in the application code and does not correspond to a field in the database.";e.Remarks="Remarks";e.Summary="Summary";e.Value="Value";e.AppliedCustomization="Customization";e.Created="Created in";e.Modified="Modified in";e.UDF="User-Defined";e.UDFTooltip="A user-defined field";e.NameValuePairField="Name-Value";e.NameValuePairFieldTooltip="The field is stored in a KvExt table.";e.DefaultNavigation="Default Navigation";e.DefaultNavigationTooltip="The field has the PXSelector attribute that causes the opening of the record defined in the attribute if a user clicks the field on the form.";e.DacBrowserTitle="DAC Schema Browser";e.Search="Search";e.Namespace="Namespace";e.Definition="Definition";e.Fields="Fields";e.IncomingReferences="Incoming References";e.OutgoingReferences="Outgoing References";e.PreviewSourceData="Source Data";e.ViewDacQuery="DAC Query";e.SourceCode="Source Code";e.ViewSourceCode="Source Code";e.Hidden="Hidden";e.HiddenTooltip="The DAC is hidden and is not available in the reporting.";e.Projection="Projection";e.ProjectionTooltip="The DAC has a PXProjection attribute, which binds the DAC to a data set defined by the Select command in this attribute.";e.Accumulator="Accumulator";e.AccumulatorTooltip="The DAC has a PXAccumulator attribute, which updates DAC records in the database according to the policies specified in the attribute.";e.RowLevelSecurity="Row-Level Security";e.RowLevelSecurityTooltip="Row-level security is applied to the DAC data.";e.Name="Name";e.ChildDAC="Child DAC";e.ParentDAC="Parent DAC";e.BaseDAC="Base DAC";e.ParentKeyFields="Parent Key Fields";e.ChildKeyFields="Child Key Fields";e.PrimaryScreen="Primary Screen";e.PrimaryScreens="Primary Screens";e.PrimaryForeignKey="Primary & Foreign Key";e.PrimaryKey="Primary Key";e.ForeignKey="Foreign Key";e.NoOutgoingReferences="There are no outgoing references";e.NoIncomingReferences="There are no incoming references";e.DACBrowserWelcomeText="Select any DAC";e.DeleteCascade="Delete Cascade";e.DeleteCascadeOutgoingTooltip="The record in {0} will be removed after the removal of the related record from {1}.";e.DeleteCascadeIncomingTooltip="The related record in {0} will be removed after the removal of the record from {1}.";e.Nested="Nested";e.NestedTooltip="The DAC is defined within another class.";e.InternalApi="Internal";e.InternalApiTooltip="The DAC is supposed to be used only internally in Acumatica ERP. Do not use it in your reports, generic inquiries, or customizations.";e.DACIsNotFound="No description of the DAC is found";e.DACIsNotFoundApologies="Probably the DAC has been removed or the corresponding customization project has been unpublished";e.NotLoggedInLogIn="You are currently logged off. Would you like to log in?";e.WaitForInitialization="Please wait while the DAC Schema Browser is getting ready";e=r.__decorate([i.localizable],e);return e}();t.ErrorMessages=n}));define("controls/global/dac-browser/qp-dac-browser",["require","exports","tslib","aurelia-framework","aurelia-fetch-client","aurelia-logging","aurelia-dialog","./qp-dac-dialog","./qp-dac-text-popup","apps/enhance/services/localization","apps/db-router/db-router","apps/enhance/services/control-helper","./messages","sql-formatter","sql-highlight","highlight.js","highlight.js/lib/languages/csharp"],(function(e,t,r,i,n,o,a,s,l,d,c,p,u,f,h,g,m){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpDacBrowserCustomElement=void 0;g=r.__importDefault(g);m=r.__importDefault(m);g.default.registerLanguage("csharp",m.default);var b=o.getLogger("dac-browser");var v=function(){function e(e,t,r,i,n){this.client=e;this.dialogService=t;this.translator=r;this.router=i;this.taskQueue=n;this.FullDACTree=undefined;this.DACTree=undefined;this.filter="";this.SelectedDAC="Uninitialized";this.highlightedID="";this.WaitForData=false;this.isTextMode=false;this.TextContent="";this.Msg=u.ErrorMessages}t=e;Object.defineProperty(e.prototype,"DACMsg",{get:function(){return u.ErrorMessages.DAC},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"NothingFound",{get:function(){return d.Format(t.NothingFoundMsg,{filter:"<span class='qp-dac-nothing-found-highlight'>"+this.filter+"</span>"})},enumerable:false,configurable:true});e.prototype.formatQuery=function(e){var r=f.format(e.sqlQuery,{language:"tsql"});for(var i in e.aliases){var n=e.aliases[i];var o=new RegExp("\\[ *"+i+" *\\]","g");var a=t.escapeNumbers(n.originalAlias);r=r.replace(o,"["+a+"]")}r=h.highlight(r,{html:true,classPrefix:"qp-dac-hl-"});for(var i in e.aliases){var n=e.aliases[i];if(!n.dac)continue;var a=t.escapeNumbers(n.originalAlias);var o=new RegExp("\\[ *"+a+" *\\]","g");r=r.replace(o,"[<a href='"+(n.dac._links.self||"")+"'>"+n.originalAlias+"</a>]")}return r};e.escapeNumbers=function(e){e=e.replace(/0/g,"__ZERO__");e=e.replace(/1/g,"__ONE__");e=e.replace(/2/g,"__TWO__");e=e.replace(/3/g,"__THREE__");e=e.replace(/4/g,"__FOUR__");e=e.replace(/5/g,"__FIVE__");e=e.replace(/6/g,"__SIX__");e=e.replace(/7/g,"__SEVEN__");e=e.replace(/8/g,"__EIGHT__");e=e.replace(/9/g,"__NINE__");return e};e.unescapeNumbers=function(e){e=e.replace(/__ZERO__/g,"0");e=e.replace(/__ONE__/g,"1");e=e.replace(/__TWO__/g,"2");e=e.replace(/__THREE__/g,"3");e=e.replace(/__FOUR__/g,"4");e=e.replace(/__FIVE__/g,"5");e=e.replace(/__SIX__/g,"6");e=e.replace(/__SEVEN__/g,"7");e=e.replace(/__EIGHT__/g,"8");e=e.replace(/__NINE__/g,"9")};e.prototype.activate=function(e){var t=this;if(!e)return;if(e.link){this.WaitForData=true;this.getData("/"+e.link).then((function(r){var i,n,o;if(r){if(r.status===404||r.status===400){t.SelectedDAC="Not found"}else if(r.sourceCode||r.sqlQuery){t.isTextMode=true;if(r.sourceCode){t.TextContent=g.default.highlight(r.sourceCode,{language:"csharp"}).value}else if(r.sqlQuery){t.TextContent=t.formatQuery(r)}t.WaitForData=false;return}else if(r.items){t.showDACTree(r.items);t.CurrentDAC=undefined;t.SelectedDAC=undefined}else if(!t.SelectedDAC||((n=(i=t.CurrentDAC)===null||i===void 0?void 0:i._links)===null||n===void 0?void 0:n.self)!==e.link){t.showDAC(r)}if(!t.FullDACTree&&((o=r===null||r===void 0?void 0:r._links)===null||o===void 0?void 0:o.index)){t.getData(r._links.index).then((function(e){t.showDACTree(e.items);t.syncTreeWithCurrentDAC(true)}))}}else t.SelectedDAC="Not found";t.syncTreeWithCurrentDAC(true);t.WaitForData=false}),(function(){t.WaitForData=false;t.SelectedDAC="Not found"}))}else{this.CurrentDAC=undefined;if(e.path)this.SelectedDAC="Not found"}};e.prototype.syncTreeWithCurrentDAC=function(e){var t=this;if(e===void 0){e=false}if(!this.CurrentDAC)return;if(!this.openLeaf(this.CurrentDAC.namespace,this.CurrentDAC.name)&&e){this.filter="";this.doFiltering();this.openLeaf(this.CurrentDAC.namespace,this.CurrentDAC.name)}this.taskQueue.queueTask((function(){if(!t.CurrentDAC)return;var e=document.getElementById(t.CurrentDAC._links.self)||document.getElementById("namespace_"+t.CurrentDAC.namespace);if(e&&!p.isInViewport(e))e.scrollIntoView()}))};e.prototype.openLeaf=function(e,t){var r,i;var n=(r=this.DACTree)===null||r===void 0?void 0:r.find((function(t){return t.name===e}));if(!n)return false;n.expanded=true;var o=n.dacs.find((function(e){return e.name===t}));if(!o)return false;n=(i=this.FullDACTree)===null||i===void 0?void 0:i.find((function(t){return t.name===e}));if(n)n.expanded=true;return true};e.prototype.attached=function(){var e;d.QpTranslator.FillInDefaultDictionary(DACDictionary);(e=document.getElementById("qp-filter-input"))===null||e===void 0?void 0:e.focus()};e.prototype.toggleLang=function(){var e=this.translator.lang;if(e==="en-US")e="ru-RU";else e="en-US";this.translator.SetLang(e)};e.prototype.getData=function(e){var t=this;return this.client.fetch(e,{method:"GET"}).then((function(e){if(e.status===200||e.status===404||e.status===400)return e.json();else if(e.status===401||e.status===403){if(e.status===403||window.confirm(t.Msg.NotLoggedInLogIn)){window.location.reload()}return new Promise((function(e,t){t()}))}else{return new Promise((function(e,t){e()}))}}),(function(){return new Promise((function(e,t){t()}))}))};e.prototype.showDACTree=function(e){this.FullDACTree=e;this.doSorting();this.doFiltering()};e.prototype.showDAC=function(e){var t=this;var i;this.CurrentDAC=e;if(this.CurrentDAC){this.CurrentDAC.dotNotatedFullName=r.__spreadArray(r.__spreadArray([],this.CurrentDAC.declaringTypes||[]),[this.CurrentDAC.name]).join(".");document.title=this.CurrentDAC.dotNotatedFullName+" - "+this.Msg.DacBrowserTitle;if(window.location.hash)setTimeout((function(){window.location.href=window.location.href}),0);else(i=document.getElementById("Definition"))===null||i===void 0?void 0:i.scrollIntoView();if(this.CurrentDAC.name&&this.CurrentDAC.namespace){this.SelectedDAC={link:this.CurrentDAC._links.self,namespace:this.CurrentDAC.namespace}}}this.taskQueue.queueTask((function(){return t.processScroll()}))};e.prototype.doSorting=function(){if(!this.FullDACTree)return;for(var e=0,t=this.FullDACTree;e<t.length;e++){var i=t[e];for(var n=0,o=i.dacs;n<o.length;n++){var a=o[n];a.dotNotatedFullName=r.__spreadArray(r.__spreadArray([],a.declaringTypes||[]),[a.name]).join(".")}i.dacs.sort((function(e,t){if(e.dotNotatedFullName===t.dotNotatedFullName)return 0;return e.dotNotatedFullName<t.dotNotatedFullName?-1:1}))}};e.prototype.doFiltering=function(){this.DACTree=[];if(!this.FullDACTree)return;for(var e=0,t=this.FullDACTree;e<t.length;e++){var i=t[e];var n=this.filter.toLocaleLowerCase();var o=r.__assign({},i);if(!n){o.expanded=false;this.DACTree.push(o);continue}else if(i.name.toLocaleLowerCase().indexOf(n)>=0){o.filteredName=i.name.replace(new RegExp(n,"ig"),"<span class='qp-dac-highlight'>$&</span>");o.expanded=false;this.DACTree.push(o);continue}o.expanded=true;o.dacs=[];for(var a=0,s=i.dacs;a<s.length;a++){var l=s[a];var d=r.__assign({},l);if(d.dotNotatedFullName.toLocaleLowerCase().indexOf(n)>=0){d.filteredName=d.dotNotatedFullName.replace(new RegExp(n,"ig"),"<span class='qp-dac-highlight'>$&</span>");o.dacs.push(d)}else if(l.displayName&&l.displayName.toLocaleLowerCase().indexOf(n)>=0){d.filteredDisplayName=l.displayName.replace(new RegExp(n,"ig"),"<span class='qp-dac-highlight'>$&</span>");o.dacs.push(d)}}if(o.dacs.length>0)this.DACTree.push(o)}this.syncTreeWithCurrentDAC()};e.prototype.selectContent=function(){var e=document.getElementById("qp-filter-input");e===null||e===void 0?void 0:e.setSelectionRange(0,e.value.length)};e.prototype.toggleNS=function(e){var t,r;var i=(t=this.DACTree)===null||t===void 0?void 0:t.find((function(t){return t.name===e}));if(i){var n=!i.expanded;i.expanded=n;i=(r=this.FullDACTree)===null||r===void 0?void 0:r.find((function(t){return t.name===e}));if(i)i.expanded=n}return false};e.prototype.showColumnDetails=function(e,t){var r=this;var i;if(!((i=this.CurrentDAC)===null||i===void 0?void 0:i.name))return;this.getData(t).then((function(e){var t={parent:r,data:e};r.dialogService.open({viewModel:s.DACDialog,model:t,lock:false}).whenClosed((function(){}))}))};e.prototype.showSourceCode=function(){var e=this;var t;if(!((t=this.CurrentDAC)===null||t===void 0?void 0:t.name)||!this.CurrentDAC._links.sourceCode)return;this.getData(this.CurrentDAC._links.sourceCode).then((function(t){if(!e.CurrentDAC)return;var r=t.dacSourceCodes.map((function(e){return e.sourceCode})).join("\n\n\n\n");var i=g.default.highlight(r,{language:"csharp"}).value;var n={name:e.CurrentDAC.dotNotatedFullName||e.CurrentDAC.name,title:e.Msg.SourceCode,link:e.CurrentDAC._links.sourceCode||"",text:i};e.dialogService.open({viewModel:l.TextDialog,model:n,lock:false}).whenClosed((function(){}))}))};e.prototype.showSQLQuery=function(){var e=this;var t;if(!((t=this.CurrentDAC)===null||t===void 0?void 0:t.name)||!this.CurrentDAC._links.sql)return;this.getData(this.CurrentDAC._links.sql).then((function(t){if(!e.CurrentDAC)return;var r={name:e.CurrentDAC.dotNotatedFullName||e.CurrentDAC.name,title:e.Msg.DacQuery,link:e.CurrentDAC._links.sql||"",text:e.formatQuery(t)};e.dialogService.open({viewModel:l.TextDialog,model:r,lock:false}).whenClosed((function(){}))}))};e.prototype.customizationToolTipShown=function(e){var t;this.CurrentField=undefined;var r=parseInt(e.target.dataset["tooltip"]||"");if(isNaN(r))return;var i=(t=this.CurrentDAC)===null||t===void 0?void 0:t.fields[r];if(!i)return;this.CurrentField=i};e.prototype.toolTipShown=function(e){this.tooltip=e.target.dataset["tooltip"]};e.prototype.processClickInTextMode=function(e){var t;if(((t=e.target)===null||t===void 0?void 0:t.nodeName)==="A")this.isTextMode=false;return true};e.prototype.openLinkInPopup=function(e,t){var r=window.screenX+50;var i=window.screenY+50;var n=700,o=1e3;if(i>=600)i=50;if(r>=1e3)r=50;window.open(t,e,"resizable,scrollbars,status,location=yes,toolbar=yes,height="+n+",width="+o+",left="+r+",top="+i);return false};e.prototype.isVisible=function(e){var t=e.getBoundingClientRect();var r=t.top;var i=t.height;var n=e.parentNode;if(t.bottom<0)return false;if(r>document.documentElement.clientHeight)return false;do{t=n.getBoundingClientRect();if(r<=t.bottom===false)return false;if(r+i<=t.top)return false;n=n.parentNode}while(n&&n!=document.body);return true};e.prototype.highlightLink=function(e){var t=this.rootElement.querySelector("#"+e+"-Header");var r=this.rootElement.querySelector("#"+e+"-Link");if(t&&this.isVisible(t))r===null||r===void 0?void 0:r.classList.add("qp-dac-content-visible");else r===null||r===void 0?void 0:r.classList.remove("qp-dac-content-visible")};e.prototype.processScroll=function(){this.highlightLink("Definition");this.highlightLink("Fields");this.highlightLink("Incoming-References");this.highlightLink("Outgoing-References")};var t;e.NothingFoundMsg="No entries found for {filter}";r.__decorate([i.computedFrom("Msg.DAC"),r.__metadata("design:type",Object),r.__metadata("design:paramtypes",[])],e.prototype,"DACMsg",null);r.__decorate([i.computedFrom("filter","translator.lang"),r.__metadata("design:type",Object),r.__metadata("design:paramtypes",[])],e.prototype,"NothingFound",null);r.__decorate([d.localizable,r.__metadata("design:type",String)],e,"NothingFoundMsg",void 0);e=t=r.__decorate([i.customElement("qp-dac-browser"),i.autoinject,r.__metadata("design:paramtypes",[n.HttpClient,a.DialogService,d.QpTranslator,c.DBRouter,i.TaskQueue])],e);return e}();t.QpDacBrowserCustomElement=v}));define("text!controls/global/dac-browser/qp-dac-browser.css",[],(function(){return'qp-dac-browser {\r\n\toverflow: hidden;\r\n}\r\n\r\n.qp-dac-browser {\r\n\tbackground: white;\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n\tfont-family: Arial,"Helvetica Neue",Helvetica,sans-serif;\r\n\theight: 100%;\r\n\toverflow: hidden;\r\n}\r\n\r\n.qp-dac-browser.qp-dac-busy {\r\n\tposition: absolute;\r\n\tcursor: wait;\r\n\tz-index: 10000;\r\n\tbackground-color: transparent;\r\n\twidth: 100vw;\r\n\theight: 100vh;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\t-webkit-box-sizing: border-box;\r\n\t        box-sizing: border-box;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-left-pane {\r\n\twidth: 250px;\r\n\t-ms-flex-negative: 0;\r\n\t    flex-shrink: 0;\r\n\tfont-size: 13px;\r\n\tline-height: 23px;\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n\t-webkit-box-orient: vertical;\r\n\t-webkit-box-direction: normal;\r\n\t    -ms-flex-direction: column;\r\n\t        flex-direction: column;\r\n\tpadding-bottom: 5px;\r\n\tbackground-color: #F6F6F6;\r\n\tpadding: 16px 0 0 16px;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-tree {\r\n\t-webkit-box-flex: 1;\r\n\t    -ms-flex: 1;\r\n\t        flex: 1;\r\n\toverflow: auto;\r\n\tpadding-right: 5px;\r\n\r\n\tscrollbar-width: thin;\r\n  scrollbar-color: rgba(0, 0, 0, 0.15) transparent;\r\n}\r\n\r\n.qp-dac-tree::-webkit-scrollbar-thumb {\r\n\tbackground: transparent;\r\n\tborder-radius: 5px;\r\n\t/* border-left: 5px solid white; */\r\n}\r\n.qp-dac-tree:hover::-webkit-scrollbar-thumb {\r\n\tbackground: rgba(0,0,0,0.15);\r\n}\r\n.qp-dac-tree::-webkit-scrollbar-track {\r\n\t/* -webkit-box-shadow: inset 0 0 6px rgb(0 0 0 / 30%); */\r\n\t/* border-left: 5px solid white; */\r\n}\r\n\r\n.qp-dac-tree::-webkit-scrollbar {\r\n\twidth: 8px;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-namespace {\r\n\tmargin-top: 4px;\r\n}\r\n\r\n.qp-dac-ns-frame {\r\n\tposition: relative;\r\n\tcursor: pointer;\r\n}\r\n\r\n.qp-dac-namespace {\r\n\tfont-size: 13px;\r\n\tline-height: 23px;\r\n\theight: 23px;\r\n\toverflow: hidden;\r\n\ttext-overflow: ellipsis;\r\n\t-webkit-box-shadow: none;\r\n\t        box-shadow: none;\r\n\tmargin-left: 20px;\r\n}\r\n\r\n.qp-dac-ns-opener {\r\n\tdisplay: inline-block;\r\n\twidth: 23px;\r\n\theight: 23px;\r\n\tposition: absolute;\r\n\tfont: normal normal normal 18px/1 \'FontAwesome\';\r\n\tcolor: rgba(0, 0, 0, 0.6);\r\n}\r\n\r\n.qp-dac-ns-opener.qp-dac-ns-expanded::before {\r\n\tcontent: "\\e9c6";\r\n\tline-height: 23px;\r\n}\r\n\r\n.qp-dac-ns-opener.qp-dac-ns-collapsed::before {\r\n\tcontent: "\\e9be";\r\n\tline-height: 23px;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-leaf {\r\n\tcursor: pointer;\r\n\tpadding-left: 5px;\r\n\theight: 23px;\r\n\tmargin: 1px 0 1px 25px;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-leaf:hover {\r\n\t background: #e4e4e4;\r\n}\r\n.qp-dac-browser .qp-dac-leaf .qp-dac-leaf-text {\r\n\twidth: 100%;\r\n\toverflow: hidden;\r\n\ttext-overflow: ellipsis;\r\n}\r\n\r\n.qp-dac-leaf-text {\r\n\tdisplay: inline-block;\r\n\tfont-size: 13px;\r\n\tline-height: 23px;\r\n\theight: 23px;\r\n\t-webkit-box-shadow: none;\r\n\t        box-shadow: none;\r\n\ttext-decoration: none;\r\n\tcolor: #000;\r\n}\r\n\r\n.extention-cord.qp-dac-namespace,\r\n.extention-cord.qp-dac-leaf-text {\r\n\tbackground: #e4e4e4;\r\n\tborder-left: 5px solid #e4e4e4;\r\n\tmargin-left: -5px;\r\n\tpadding-right: 5px;\r\n\t-webkit-box-sizing: border-box;\r\n\t        box-sizing: border-box;\r\n\tfont-family: Arial,"Helvetica Neue",Helvetica,sans-serif !important;\r\n}\r\n\r\n.extention-cord.qp-dac-namespace.qp-dac-active,\r\n.extention-cord.qp-dac-leaf-text.qp-dac-active {\r\n\tborder-left: none;\r\n\tborder-right: none;\r\n\tmargin-left: -5px;\r\n\tpadding-left: 5px;\r\n\tfont-weight: bold;\r\n\tfont-family: Arial,"Helvetica Neue",Helvetica,sans-serif !important;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-tree .qp-dac-nothing-found-highlight {\r\n\tfont-weight: bold;\r\n}\r\n\r\n.qp-dac-highlight {\r\n\tbackground-color: rgba(0, 0, 0, .25);\r\n\tborder-top: 3px solid transparent;\r\n\tborder-bottom: 3px solid transparent;\r\n}\r\n\r\n.qp-dac-namespace .qp-dac-highlight,\r\n.qp-dac-leaf-text .qp-dac-highlight {\r\n\tbackground-color: #CBEAFF;\r\n\tbackground-color: var(--highlight-color, #CBEAFF);\r\n}\r\n\r\n.qp-dac-leaf-text.qp-dac-active,\r\n.qp-dac-browser .qp-dac-leaf.qp-dac-active {\r\n\tfont-weight: bold;\r\n\tbackground-color: #E4E4E4;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-namespace.qp-dac-active {\r\n\tfont-weight: bold;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-filter {\r\n\tdisplay: inline-table;\r\n\tvertical-align: middle;\r\n\tbackground-color: #fff;\r\n\tpadding: 3px 5px 3px 3px;\r\n\tborder: 1px solid #E1E1E1;\r\n\tborder-radius: 5px;\r\n\tmargin: 0 13px 14px 0px;\r\n\t-webkit-box-sizing: border-box;\r\n\t        box-sizing: border-box;\r\n\tline-height: 18px;\r\n}\r\n\r\n.qp-dac-browser .qp-filter-input {\r\n\tdisplay: table-cell;\r\n\tcolor: #555;\r\n\tborder: none;\r\n\tfont-size: 15px;\r\n\tline-height: 20px;\r\n\tmargin: 0;\r\n\toutline: none;\r\n\twidth: 100%;\r\n\tbackground-color: transparent;\r\n\tpadding: 1px 2px 1px 6px;\r\n\t-webkit-box-sizing: border-box;\r\n\t        box-sizing: border-box;\r\n}\r\n\r\ninput.qp-filter-input::-webkit-input-placeholder {\r\n\tfont-style: normal;\r\n\tcolor: rgba(0, 0, 0, .4);\r\n}\r\n\r\ninput.qp-filter-input::-moz-placeholder {\r\n\tfont-style: normal;\r\n\tcolor: rgba(0, 0, 0, .4);\r\n}\r\n\r\ninput.qp-filter-input:-ms-input-placeholder {\r\n\tfont-style: normal;\r\n\tcolor: rgba(0, 0, 0, .4);\r\n}\r\n\r\ninput.qp-filter-input::-ms-input-placeholder {\r\n\tfont-style: normal;\r\n\tcolor: rgba(0, 0, 0, .4);\r\n}\r\n\r\ninput.qp-filter-input::placeholder {\r\n\tfont-style: normal;\r\n\tcolor: rgba(0, 0, 0, .4);\r\n}\r\n\r\n.qp-dac-browser .qp-filter-button {\r\n\tdisplay: table-cell;\r\n\tvertical-align: middle;\r\n\ttext-align: center;\r\n\twhite-space: nowrap;\r\n\twidth: 1%;\r\n}\r\n\r\n.qp-dac-browser .qp-filter-image {\r\n\tfont: normal normal normal 14px/1 \'FontAwesome\';\r\n\tfont-size: 19px;\r\n\tcolor: rgba(0, 0, 0, .4);\r\n\tcursor: pointer;\r\n\tvertical-align: middle;\r\n}\r\n\r\n.qp-dac-browser .qp-filter-image:before {\r\n\tcontent: "\\e91a";\r\n}\r\n\r\n.qp-dac-browser .qp-dac-body {\r\n\t-webkit-box-flex: 1;\r\n\t    -ms-flex: 1;\r\n\t        flex: 1;\r\n\toverflow: auto;\r\n\tpadding-right: 5px;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-welcome-text.qp-dac-initializing {\r\n\tbackground: white;\r\n\twidth: 100vw;\r\n\theight: 100vh;\r\n\tposition: absolute;\r\n\tpadding: 0;\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n\t-webkit-box-pack: center;\r\n\t    -ms-flex-pack: center;\r\n\t        justify-content: center;\r\n}\r\n.qp-dac-browser .qp-dac-welcome-text.qp-dac-initializing > span {\r\n\t-ms-flex-item-align: center;\r\n\t    align-self: center;\r\n\tmax-width: 550px;\r\n}\r\n\r\n@-webkit-keyframes waiter {\r\n  0% { content: "" }\r\n  25% { content: "." }\r\n  50% { content: ".." }\r\n  75% { content: "..."}\r\n}\r\n\r\n@keyframes waiter {\r\n  0% { content: "" }\r\n  25% { content: "." }\r\n  50% { content: ".." }\r\n  75% { content: "..."}\r\n}\r\n\r\n.qp-dac-browser .qp-dac-welcome-text.qp-dac-initializing > span::after {\r\n\tcontent: "...";\r\n\tposition: absolute;\r\n\tanimation: waiter 3s linear infinite;\r\n\t-webkit-animation: waiter 3s linear infinite;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-welcome-text {\r\n\t-ms-flex-preferred-size: 100%;\r\n\t    flex-basis: 100%;\r\n\ttext-align: center;\r\n\tpadding: 0 30px;\r\n\tfont-size: 35px;\r\n\t-ms-flex-item-align: center;\r\n\t    align-self: center;\r\n\tcolor: rgba(0, 0, 0, .2);\r\n}\r\n.qp-dac-browser .qp-dac-welcome-text > span {\r\n\tmax-width: 500px;\r\n\tdisplay: inline-block;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-not-found-icon qp-icon {\r\n\twidth: 70px;\r\n\ttext-align: center;\r\n\theight: 90px;\r\n\tdisplay: inline-block;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-not-found {\r\n\tcolor: #222;\r\n\twidth: 410px;\r\n\tdisplay: inline-block;\r\n\tmargin-bottom: 15px;\r\n}\r\n.qp-dac-browser .qp-dac-apologies {\r\n\tfont-size: 28px;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-details {\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n\t-webkit-box-orient: vertical;\r\n\t-webkit-box-direction: normal;\r\n\t    -ms-flex-direction: column;\r\n\t        flex-direction: column;\r\n\t-webkit-box-flex: 1;\r\n\t    -ms-flex-positive: 1;\r\n\t        flex-grow: 1;\r\n\t-webkit-box-sizing: border-box;\r\n\t        box-sizing: border-box;\r\n\tpadding: 16px 5px 0 32px;\r\n\tcolor: #222;\r\n\theight: 100%;\r\n\toverflow: auto;\r\n\tfont-size: 13px;\r\n}\r\n\r\nux-dialog-container.active {\r\n\tbackground: rgba(0, 0, 0, .3);\r\n\t-webkit-transition: opacity .15s linear;\r\n\ttransition: opacity .15s linear;\r\n}\r\nux-dialog.qp-dac-dialog {\r\n\tfont-family: Arial,"Helvetica Neue",Helvetica,sans-serif !important;\r\n\t-webkit-transform: scale(.8);\r\n\t        transform: scale(.8);\r\n\t-webkit-transition: all .15s ease-out;\r\n\ttransition: all .15s ease-out; \r\n}\r\nux-dialog-container.active ux-dialog.qp-dac-dialog {\r\n\t-webkit-transform: scale(1);\r\n\t        transform: scale(1);\r\n}\r\n\r\nux-dialog.qp-dialog > ux-dialog-header > button {\r\n\tmargin: 0;\r\n\twidth: 16px;\r\n\theight: 16px;\r\n}\r\nux-dialog.qp-dialog > ux-dialog-header > button:focus {\r\n\tborder: none;\r\n}\r\n\r\n.dialog.qp-dialog {\r\n\tborder: none;\r\n\tborder-radius: 10px;\r\n\tpadding: 20px 20px 25px;\r\n}\r\n\r\n.dialog.qp-dialog ux-dialog-header {\r\n\tpadding: 0;\r\n\theight: 22px;\r\n\tline-height: 22px;\r\n\tmargin-bottom: 20px;\r\n\tfont-size: 19px;\r\n\tfont-weight: bold;\r\n}\r\n.dialog.qp-dac-dialog ux-dialog-body {\r\n\tfont-size: 13px;\r\n\tline-height: 24px;\r\n\tpadding: 0;\r\n\tmax-width: calc( 100vw - 72px);\r\n\toverflow: auto;\r\n\tmax-height: calc( 100vh - 150px );\r\n\tmargin-right: -15px;\r\n}\r\n\r\n.dialog.qp-dac-dialog ux-dialog-body .qp-dac-description {\r\n\tpadding: 15px 0 0 0;\r\n\tmax-width: 50vw;\r\n}\r\n.dialog.qp-dac-dialog ux-dialog-body .qp-dac-description p {\r\n\tmargin: 0;\r\n}\r\n\r\n.qp-dac-dialog.qp-dialog .qp-dac-title {\r\n\t-ms-flex-flow: nowrap;\r\n\t    flex-flow: nowrap;\r\n\t-webkit-box-align: center;\r\n\t    -ms-flex-align: center;\r\n\t        align-items: center;\r\n}\r\n.qp-dac-dialog.qp-dialog .qp-dac-title .dialog-header-content {\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n\t-webkit-box-align: center;\r\n\t    -ms-flex-align: center;\r\n\t        align-items: center;\r\n\tmargin-right: 50px;\r\n}\r\n\r\n.qp-dac-dialog .qp-dac-header {\r\n\tfont-size: 19px;\r\n\tfont-weight: bold;\r\n\tline-height: 22px;\r\n\tcolor: #222;\r\n\tmargin: 10px 0 10px 0;\r\n}\r\n\r\n\r\n\r\n.qp-dac-browser .qp-dac-details-header {\r\n\tmargin-bottom: 22px;\r\n}\r\n\r\n\r\n.qp-dac-browser .qp-dac-left-pane .qp-dac-header {\r\n\tfont-size: 18px;\r\n\tline-height: 18px;\r\n\tcolor: #222;\r\n\tmargin-bottom: 13px;\r\n}\r\n.qp-dac-browser .qp-dac-body .qp-dac-header {\r\n\tfont-size: 19px;\r\n\tfont-weight: bold;\r\n\tline-height: 19px;\r\n\tcolor: #222;\r\n\tmargin: 30px 0 10px 0;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-table-header {\r\n\tposition: sticky;\r\n\ttop: 0;\r\n\tbackground: #fff;\r\n\tz-index: 1;\r\n\tborder-collapse: separate;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-title {\r\n\tfont-size: 19px;\r\n\tline-height: 19px;\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n\t-ms-flex-flow: nowrap;\r\n\t    flex-flow: nowrap;\r\n\t-webkit-box-align: center;\r\n\t    -ms-flex-align: center;\r\n\t        align-items: center;\r\n\tmargin-bottom: 12px;\r\n\tfont-weight: bold;\r\n\tcolor: #222;\r\n}\r\n\r\n.qp-dac-dialog .qp-dac-title .qp-dac-type,\r\n.qp-dac-browser .qp-dac-title .qp-dac-type {\r\n\tcolor: #aaa;\r\n\tpadding: 0 10px;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-title .qp-dac-preview{\r\n\tfont-size: 13px;\r\n\t-webkit-box-flex: 1;\r\n\t    -ms-flex-positive: 1;\r\n\t        flex-grow: 1;\r\n\ttext-align: right;\r\n\twhite-space: nowrap;\r\n\tpadding: 0 8px;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-title .qp-dac-preview a,\r\n.qp-dac-browser .qp-dac-title .qp-dac-preview span {\r\n\tcolor: #007ACC;\r\n\tcolor: var(--primary-color, #007ACC);\r\n\ttext-decoration: none;\r\n\twhite-space: nowrap;\r\n\tcursor: pointer;\r\n\tmargin-left: 20px;\r\n}\r\n\r\n\r\n.qp-dac-browser .qp-dac-quick-refs {\r\n\tfont-size: 13px;\r\n\twhite-space: nowrap;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-quick-refs a {\r\n\tcolor: #027ACC;\r\n\tcolor: var(--primary-color, #007ACC);\r\n\ttext-decoration: none;\r\n\tmargin-right: 32px;\r\n}\r\n\r\n.qp-dac-dialog .qp-dac-info {\r\n\tmax-width: 600px;\r\n}\r\n.qp-dac-browser .qp-dac-names {\r\n\tfont-size: 13px;\r\n\tline-height: 24px;\r\n\tmargin-bottom: 20px;\r\n\tmax-width: 600px;\r\n}\r\n\r\n.qp-dac-field-row {\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n}\r\n\r\n.qp-dac-dialog .qp-dac-label,\r\n.qp-dac-browser .qp-dac-label {\r\n\twidth: 150px;\r\n\tdisplay: inline-block;\r\n\t-ms-flex-negative: 0;\r\n\t    flex-shrink: 0;\r\n}\r\n\r\n.qp-dac-dialog .qp-dac-info > span,\r\n.qp-dac-browser .qp-dac-info > span {\r\n\twhite-space: nowrap;\r\n}\r\n\r\nqp-tooltip a {\r\n\tcolor: inherit;\r\n\ttext-decoration: underline;\r\n\t-webkit-text-decoration-style: dotted;\r\n\t        text-decoration-style: dotted;\r\n}\r\n\r\n.qp-dac-dialog .qp-dac-info a,\r\n.qp-dac-browser .qp-dac-info a {\r\n\t\ttext-decoration: none;\r\n\tcolor: #007ACC;\r\n\tcolor: var(--primary-color, #007ACC);\r\n}\r\n\r\n.qp-dac-dialog .qp-dac-box,\r\n.qp-dac-browser .qp-dac-box {\r\n\tpadding: 1px 8px;\r\n\tmargin-left: 5px;\r\n\theight: 16px;\r\n\tline-height: 16px;\r\n\tborder-radius: 5px;\r\n\tdisplay: inline-block;\r\n\tfont-size: 12px;\r\n}\r\n\r\n.qp-dac-dialog .qp-dac-box qp-tooltip,\r\n.qp-dac-browser .qp-dac-box qp-tooltip {\r\n\ttext-transform: none;\r\n}\r\n\r\n.qp-dac-dialog .qp-dac-box.qp-dac-obsolete,\r\n.qp-dac-browser .qp-dac-box.qp-dac-obsolete {\r\n\tcolor: #FF000B;\r\n\tbackground-color: #FFE5E7;\r\n}\r\n\r\n.qp-dac-dialog .qp-dac-box.qp-dac-internalApi,\r\n.qp-dac-browser .qp-dac-box.qp-dac-internalApi {\r\n\tcolor: #FF000B;\r\n\tbackground-color: #FFE5E7;\r\n}\r\n\r\n.qp-dac-dialog .qp-dac-box.qp-dac-hidden,\r\n.qp-dac-browser .qp-dac-box.qp-dac-hidden {\r\n\tcolor: #775400;\r\n\tbackground-color: #FFEBBA;\r\n}\r\n.qp-dac-browser .qp-dac-box.qp-dac-delete-cascade {\r\n\tcolor: #775400;\r\n\tbackground-color: #FFEBBA;\r\n}\r\n.qp-dac-browser .qp-dac-box.qp-dac-nested {\r\n\tcolor: #775400;\r\n\tbackground-color: #FFEBBA;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-box.qp-dac-proj {\r\n\tcolor: #016FBB;\r\n\tbackground-color: #EBF7FF;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-box.qp-dac-accumulator {\r\n\tcolor: #016FBB;\r\n\tbackground-color: #EBF7FF;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-box.qp-dac-row-level-security {\r\n\tcolor: #016FBB;\r\n\tbackground-color: #EBF7FF;\r\n}\r\n\r\n.qp-dac-dialog .qp-dac-box.qp-dac-customized,\r\n.qp-dac-browser .qp-dac-box.qp-dac-customized {\r\n\tcolor: #016FBB;\r\n\tbackground-color: #EBF7FF;\r\n}\r\n\r\n.qp-dac-dialog .qp-dac-box.qp-dac-udf,\r\n.qp-dac-browser .qp-dac-box.qp-dac-udf {\r\n\tcolor: #016FBB;\r\n\tbackground-color: #EBF7FF;\r\n}\r\n\r\n.qp-dac-dialog .qp-dac-box.qp-dac-nvp-field,\r\n.qp-dac-browser .qp-dac-box.qp-dac-nvp-field {\r\n\tcolor: #016FBB;\r\n\tbackground-color: #EBF7FF;\r\n}\r\n\r\n.qp-dac-dialog .qp-dac-box.qp-dac-field-default-navigation,\r\n.qp-dac-browser .qp-dac-box.qp-dac-field-default-navigation {\r\n\tcolor: #016FBB;\r\n\tbackground-color: #EBF7FF;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-description {\r\n\tmargin-bottom: 20px;\r\n\tmax-width: 600px;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-content-visible {\r\n\tborder-bottom: 1px solid;\r\n}\r\n.qp-dac-browser .qp-dac-table {\r\n\tfont-size: 13px;\r\n\tline-height: 29px;\r\n\tmargin-bottom: 22px;\r\n\tmin-width: 700px;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-table table {\r\n\tborder-collapse: separate;\r\n\twidth: 100%;\r\n\tborder-spacing: 0px;\r\n\twhite-space: nowrap;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-table tr {\r\n\theight: 29px;\r\n}\r\n.qp-dac-browser .qp-dac-table tr:nth-child(even) {\r\n\tbackground-color: #F6F7F8;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-table th {\r\n\ttext-align: left;\r\n\tfont-weight: bold;\r\n\tborder-bottom: 1px solid #E2E2E2;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-table td {\r\n\twhite-space: normal;\r\n\tline-height: 15px;\r\n\tpadding: 7px 10px 7px 0;\r\n\tvertical-align: baseline;\r\n\tborder-bottom: 1px solid #E2E2E2;\r\n}\r\n.qp-dac-browser .qp-dac-table td span {\r\n\twhite-space: normal;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-table th.qp-dac-key {\r\n\twidth: 26px;\r\n\tmin-width: 26px;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-table .qp-dac-main-key-fields,\r\n.qp-dac-browser .qp-dac-table .qp-dac-name {\r\n\twidth: 30%;\r\n}\r\n\r\n\r\n.qp-dac-browser .qp-dac-table .qp-dac-parent,\r\n.qp-dac-browser .qp-dac-table .qp-dac-type,\r\n.qp-dac-browser .qp-dac-table .qp-dac-disp-name {\r\n\twidth: 25%;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-table .qp-dac-key-fields {\r\n\twidth: 45%;\r\n}\r\n.qp-dac-browser .qp-dac-table .qp-dac-ref-header {\r\n\twidth: 20%;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-table td.qp-dac-disp-name {\r\n\twhite-space: normal;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-ref,\r\n.qp-dac-dialog .qp-dac-ref {\r\n\tcolor: #007ACC;\r\n\tcolor: var(--primary-color, #007ACC);\r\n\tcursor: pointer;\r\n\ttext-decoration: none;\r\n}\r\n\r\n.qp-dac-browser qp-icon {\r\n\tdisplay: block;\r\n\toverflow: hidden;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-columns qp-icon {\r\n\twidth: 15px;\r\n\theight: 20px;\r\n\tmargin: 0 6px;\r\n\tposition: absolute;\r\n\ttop: 5px;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-columns qp-icon.qp-dac-pk.qp-dac-double-key {\r\n\tleft: -3px;\r\n}\r\n.qp-dac-browser .qp-dac-columns qp-icon.qp-dac-fk.qp-dac-double-key {\r\n\tleft: 3px;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-columns qp-icon.qp-dac-pk svg {\r\n\tfill: #FFAD62;\r\n}\r\n.qp-dac-browser .qp-dac-columns qp-icon.qp-dac-fk svg {\r\n\tfill: #616161;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-columns .qp-dac-key {\r\n\tpadding: 0;\r\n\tposition: relative;\r\n}\r\n\r\n.qp-dac-browser .qp-dac-columns td.qp-dac-name {\r\n\tcursor: pointer;\r\n}\r\n.qp-dac-browser .qp-dac-columns td.qp-dac-name:hover {\r\n\tcolor: #027ACC;\r\n}\r\n\r\npre.qp-dac-sql {\r\n\twhite-space: pre-wrap;\r\n\tfont-family: \'Consolas\', "Courier New", \'Courier\', \'monospace\';\r\n\tfont-size: 13px;\r\n\tcolor: #222;\r\n\tline-height: 16px;\r\n\tmargin: 0;\r\n\tpadding: 1em;\r\n}\r\n\r\n.qp-dac-dialog .qp-dac-sql {\r\n\twhite-space: pre-wrap;\r\n\tfont-family: \'Consolas\', "Courier New", \'Courier\', \'monospace\';\r\n\tfont-size: 13px;\r\n\tcolor: #222;\r\n\tline-height: 16px;\r\n\tpadding-right: 15px;\r\n}\r\n\r\n.qp-dac-sql a {\r\n\tcolor: #007ACC;\r\n\tcolor: var(--primary-color, #007ACC);\r\n\ttext-decoration: none;\r\n}\r\n\r\n.qp-dac-dialog .qp-tab-opener {\r\n\tposition: absolute;\r\n\tright: 55px;\r\n\ttop: 20px;\r\n\theight: 16px;\r\n\twidth: 16px;\r\n\toverflow: hidden;\r\n\topacity: 0.6;\r\n\tcursor: pointer;\r\n}\r\n.qp-dac-dialog .qp-dialog-close {\r\n\tposition: absolute;\r\n\tright: 20px;\r\n\ttop: 20px;\r\n\theight: 16px;\r\n\twidth: 16px;\r\n\toverflow: hidden;\r\n\topacity: 0.6;\r\n\tcursor: pointer;\r\n}\r\n\r\n\r\n.qp-dac-dialog .qp-dialog-close:hover,\r\n.qp-dac-dialog .qp-tab-opener:hover {\r\n\t\topacity: 1;\r\n}\r\n\r\n.qp-dac-hl-keyword {\r\n\tcolor: blue;\r\n}\r\n\r\n.qp-dac-hl-function {\r\n\tcolor: magenta;\r\n}\r\n\r\n.qp-dac-hl-number {\r\n\tcolor: green;\r\n}\r\n\r\n.qp-dac-hl-string {\r\n\tcolor: red;\r\n}\r\n\r\n.qp-dac-hl-special {\r\n\tcolor: darkgrey;\r\n\tfont-weight: 900;\r\n}\r\n\r\n.qp-dac-hl-bracket {\r\n\tcolor: darkgrey;\r\n\tfont-weight: 900;\r\n}\r\n\r\n/* C# syntax highlighting for highlight.js*/\r\n.hljs-comment {\r\n\tcolor: #008000;\r\n}\r\n\r\n.hljs-pscommand,\r\n.hljs-keyword,\r\n.hljs-selector-tag,\r\n.hljs-built_in,\r\n.hljs-name,\r\n.hljs-string .hljs-subst,\r\n.hljs-tag {\r\n\tcolor: #0101fd;\r\n}\r\n\r\n.hljs-literal {\r\n\t/* color: darken(#09885a, 5%); */\r\n\tcolor: #09885a;\r\n}\r\n\r\n.hljs-string .hljs-subst,\r\n.hljs-attr {\r\n\tcolor: #0451a5;\r\n}\r\n\r\n.hljs-string,\r\n.hljs-string .hljs-subst .hljs-string,\r\n.hljs-section,\r\n.hljs-template-tag,\r\n.hljs-template-variable,\r\n.hljs-deletion,\r\n.hljs-code {\r\n\tcolor: #a31515;\r\n}\r\n\r\n.hljs-parameter,\r\n.hljs-type,\r\n.hljs-attribute,\r\n.hljs-title,\r\n.hljs-addition,\r\n.hljs-selector-attr,\r\n.hljs-selector-pseudo,\r\n.hljs-meta {\r\n\t/* color: darken(#007d9a, 5%); */\r\n\tcolor: #007d9a;\r\n}\r\n\r\n.hljs-doctag {\r\n\t/* color: darken(#737373, 5%); */\r\n\tcolor: #737373;\r\n}\r\n\r\n.hljs-control {\r\n\tcolor: #af00db;\r\n}\r\n\r\n.hljs-helper {\r\n\tcolor: #795e26;\r\n}\r\n\r\n.hljs-symbol,\r\n.hljs-bullet,\r\n.hljs-link {\r\n\tcolor: #0071e1;\r\n\t/* color: darken(#0071e1, 5%); */\r\n}\r\n\r\n.hljs-emphasis {\r\n\tfont-style: italic;\r\n}\r\n\r\n.hljs-strong {\r\n\tfont-weight: bold;\r\n}\r\n\r\n.hljs-reserved,\r\n.hljs-constant {\r\n\tcolor: #cd3131;\r\n}\r\n'}));define("text!controls/global/dac-browser/qp-dac-browser.html",[],(function(){return'<template><require from="./qp-dac-browser.css"></require><div if.bind="!isTextMode" class="qp-dac-browser" ref="rootElement"><div class="qp-dac-left-pane"><div class="qp-dac-header">${Msg.DacBrowserTitle}</div><div class="qp-dac-filter"><input type="text" class="qp-filter-input" id="qp-filter-input" placeholder="${Msg.Search}" autocomplete="new-password" value.bind="filter" blur.delegate="doFiltering()" focus.capture="selectContent()" input.delegate="doFiltering() & debounce:500"><div class="qp-filter-button"><span class="qp-filter-image"></span></div></div><div class="qp-dac-tree"><div click.delegate="toggleLang()" if.bind="DACTree.length===0" innerhtml="${NothingFound}"></div><div repeat.for="ns of DACTree" class="qp-dac-ns-frame"><div class="qp-dac-ns-opener ${ns.expanded ? \'qp-dac-ns-expanded\': \'qp-dac-ns-collapsed\'}" click.delegate="toggleNS(ns.name)"></div><div click.delegate="toggleNS(ns.name)" id="namespace_${ns.name}" class="qp-dac-namespace ${SelectedDAC.namespace===ns.name ? \'qp-dac-active\' : \'\'}" innerhtml="${ns.filteredName || ns.name | sanitizeHTML}" extention-cord></div><div if.bind="ns.expanded" class="qp-dac-pane"><div class="qp-dac-leaf ${(SelectedDAC.link===dac._links.self && SelectedDAC.namespace===ns.name) ? \'qp-dac-active\' : \'\'}" repeat.for="dac of ns.dacs" id="${dac._links.self}"><a class="qp-dac-leaf-text ${(SelectedDAC.link===dac._links.self && SelectedDAC.namespace===ns.name) ? \'qp-dac-active\' : \'\'} ${dac.filteredDisplayName || dac.displayName ? \'qp-dac-leaf-tooltipable\' : \'\'}" data-tooltip="${dac.filteredDisplayName || dac.displayName}" extention-cord innerhtml="${dac.filteredName || dac.dotNotatedFullName | sanitizeHTML}" href="${dac._links.self}"></a></div></div></div><qp-tooltip rule.bind="\'.qp-dac-leaf-tooltipable\'" on-show.call="toolTipShown(opts)"><div innerhtml="${tooltip | sanitizeHTML}"></div></qp-tooltip></div></div><div class="qp-dac-details" if.bind="CurrentDAC"><div class="qp-dac-details-header"><div class="qp-dac-title"><span>${CurrentDAC.dotNotatedFullName}</span><span class="qp-dac-type">${DACMsg}</span><span class="qp-dac-box qp-dac-obsolete" if.bind="CurrentDAC.isObsolete"> ${Msg.Obsolete} <qp-tooltip>${Msg.ObsoleteDacTooltip}</qp-tooltip></span><span class="qp-dac-box qp-dac-internalApi" if.bind="CurrentDAC.isInternalApi"> ${Msg.InternalApi} <qp-tooltip>${Msg.InternalApiTooltip}</qp-tooltip></span><span class="qp-dac-box qp-dac-customized" if.bind="CurrentDAC.dacExtensions.length>0"> ${Msg.Customized} </span><span class="qp-dac-box qp-dac-hidden" if.bind="CurrentDAC.isHidden"> ${Msg.Hidden} <qp-tooltip>${Msg.HiddenTooltip}</qp-tooltip></span><span class="qp-dac-box qp-dac-hidden" if.bind="!CurrentDAC.existsInDb"> ${Msg.Virtual} <qp-tooltip>${Msg.VirtualDacTooltip}</qp-tooltip></span><span class="qp-dac-box qp-dac-proj" if.bind="CurrentDAC.isProjection"> ${Msg.Projection} <qp-tooltip>${Msg.ProjectionTooltip}</qp-tooltip></span><span class="qp-dac-box qp-dac-accumulator" if.bind="CurrentDAC.isAccumulator"> ${Msg.Accumulator} <qp-tooltip>${Msg.AccumulatorTooltip}</qp-tooltip></span><span class="qp-dac-box qp-dac-row-level-security" if.bind="CurrentDAC.hasRowLevelSecurity"> ${Msg.RowLevelSecurity} <qp-tooltip>${Msg.RowLevelSecurityTooltip}</qp-tooltip></span><span class="qp-dac-box qp-dac-nested" if.bind="CurrentDAC.declaringTypes.length>0"> ${Msg.Nested} <qp-tooltip>${Msg.NestedTooltip}</qp-tooltip></span><span class="qp-dac-preview"><span if.bind="CurrentDAC._links.sourceCode" click.delegate="showSourceCode()">${Msg.ViewSourceCode}</span><span if.bind="CurrentDAC._links.sql" click.delegate="showSQLQuery()">${Msg.ViewDacQuery}</span><a href="${CurrentDAC._links.previewData}" show.bind="CurrentDAC._links.previewData" target="_blank">${Msg.PreviewSourceData}</a></span></div><div class="qp-dac-quick-refs"><a id="Definition-Link" href="${CurrentDAC._links.self}#Definition" router-ignore>${Msg.Definition}</a><a id="Fields-Link" href="${CurrentDAC._links.self}#Fields" router-ignore>${Msg.Fields}</a><a id="Incoming-References-Link" href="${CurrentDAC._links.self}#Incoming-References" router-ignore>${Msg.IncomingReferences}</a><a id="Outgoing-References-Link" href="${CurrentDAC._links.self}#Outgoing-References" router-ignore>${Msg.OutgoingReferences}</a></div></div><div scroll.trigger="processScroll($event)" class="qp-dac-body"><a id="Definition"></a><div id="Definition-Header"><div class="qp-dac-names"><div class="qp-dac-field-row" if.bind="CurrentDAC.baseDac"><span class="qp-dac-label">${Msg.BaseDAC}:</span> <a class="qp-dac-info qp-dac-ref" href="${CurrentDAC.baseDac._links.self}">${CurrentDAC.baseDac.name}</a></div><div class="qp-dac-field-row" if.bind="CurrentDAC.displayName"><span class="qp-dac-label">${Msg.DisplayName}:</span> <span class="qp-dac-info">${CurrentDAC.displayName}</span></div><div class="qp-dac-field-row"><span class="qp-dac-label">${Msg.Namespace}:</span> <span class="qp-dac-info">${CurrentDAC.namespace}</span></div><div class="qp-dac-field-row" show.bind="CurrentDAC.primaryScreens && CurrentDAC.primaryScreens.length"><span if.bind="CurrentDAC.primaryScreens.length===1" class="qp-dac-label">${Msg.PrimaryScreen}:</span> <span else class="qp-dac-label">${Msg.PrimaryScreens}:</span> <span class="qp-dac-info"><template repeat.for="screen of CurrentDAC.primaryScreens"><span>${screen.title} (<a href="${screen._links.self}" target="_blank">${screen.screenId}</a>)${$last ? \'\' : \',&#160;\'}</span>&#32;</template></span></div><div class="qp-dac-field-row" if.bind="CurrentDAC.dacExtensions.length"><span class="qp-dac-label">${Msg.AppliedCustomization}:</span> <span class="qp-dac-info"><template repeat.for="extension of CurrentDAC.dacExtensions"><span>${extension.extensionName} (${extension.assemblyName}<template if.bind="extension.customizationProject">&#160;from <a href="javascript:void%200" click.delegate="openLinkInPopup(extension.customizationProject.name, extension.customizationProject._links.self)">${extension.customizationProject.name}</a></template>)${$last ? \'\' : \',&#160;\'}</span>&#32;</template></span></div></div><div class="qp-dac-description" show.bind="CurrentDAC.documentation.summary"><div class="qp-dac-header">${Msg.Summary}</div><p>${CurrentDAC.documentation.summary}</p></div><div class="qp-dac-description" show.bind="CurrentDAC.documentation.remarks"><div class="qp-dac-header">${Msg.Remarks}</div><p>${CurrentDAC.documentation.remarks}</p></div></div><div class="qp-dac-table qp-dac-columns"><a id="Fields"></a><div class="qp-dac-header">${Msg.Fields}</div><table><tr id="Fields-Header" class="qp-dac-table-header"><th class="qp-dac-key"></th><th class="qp-dac-name">${Msg.Name}</th><th class="qp-dac-type">${Msg.Type}</th><th class="qp-dac-disp-name">${Msg.DisplayName}</th><th class="qp-dac-ref-header">${Msg.ForeignReference}</th></tr><tr repeat.for="field of CurrentDAC.fields"><td class="qp-dac-key" title="${ (field.foreignDacReferences && field.foreignDacReferences.length && field.isKey) ? Msg.PrimaryForeignKey : (field.foreignDacReferences && field.foreignDacReferences.length ? Msg.ForeignKey : (field.isKey ? Msg.PrimaryKey : \'\'))}"><qp-icon class="qp-dac-pk ${field.foreignDacReferences && field.foreignDacReferences.length ? \'qp-dac-double-key\' : \'\'}" show.bind="field.isKey" imagesrc="svg:main@filledKey"></qp-icon><qp-icon class="qp-dac-fk ${field.isKey ? \'qp-dac-double-key\' : \'\'}" if.bind="field.foreignDacReferences && field.foreignDacReferences.length" imagesrc="svg:main@filledKey"></qp-icon></td><td class="qp-dac-name" click.delegate="showColumnDetails(field.name, field._links && field._links.self)"> ${field.name} <span class="qp-dac-box qp-dac-obsolete" if.bind="field.isObsolete"> ${Msg.Obsolete} <qp-tooltip>${Msg.ObsoleteFieldTooltip}</qp-tooltip></span><span class="qp-dac-box qp-dac-hidden" if.bind="!field.existsInDb"> ${Msg.Virtual} <qp-tooltip>${Msg.VirtualFieldTooltip}</qp-tooltip></span><span class="qp-dac-box qp-dac-udf" if.bind="field.kind === \'udf\'"> ${Msg.UDF} <qp-tooltip>${Msg.UDFTooltip}</qp-tooltip></span><span class="qp-dac-box qp-dac-nvp-field" if.bind="field.kind === \'nameValuePair\'"> ${Msg.NameValuePairField} <qp-tooltip>${Msg.NameValuePairFieldTooltip}</qp-tooltip></span><span class="qp-dac-box qp-dac-field-default-navigation" if.bind="field.hasDefaultNavigation"> ${Msg.DefaultNavigation} <qp-tooltip>${Msg.DefaultNavigationTooltip}</qp-tooltip></span><span class="qp-dac-box qp-dac-customized qp-dac-customized-tooltipable" data-tooltip="${$index}" if.bind="field.dacFieldExtensions.length"> ${Msg.Customized} </span></td><td class="qp-dac-type">${field.sqlType}</td><td class="qp-dac-disp-name">${field.displayName}</td><td class="qp-dac-fk-ref"><template repeat.for="ref of field.foreignDacReferences"><a class="qp-dac-ref qp-dac-ref-tooltipable" href="${ref.foreignDac._links.self}" data-tooltip="${ref.foreignDac.fullName}">${ref.foreignDac.name}</a>${$last ? \'\' : \', \'} </template></td></tr></table><qp-tooltip rule.bind="\'.qp-dac-customized-tooltipable\'" on-show.call="customizationToolTipShown(opts)"><template repeat.for="extension of CurrentField.dacFieldExtensions"><div>${extension.customizationType === "created" ? Msg.Created+\' \' : Msg.Modified+\' \'}${extension.extensionName} (${extension.assemblyName}<template if.bind="extension.customizationProject">&#160;from <a href="javascript:void%200" click.delegate="openLinkInPopup(extension.customizationProject.name, extension.customizationProject._links.self)">${extension.customizationProject.name}</a></template>)${$last ? \'\' : \',&#160;\'}</div></template></qp-tooltip></div><div class="qp-dac-table qp-dac-columns"><a id="Incoming-References"></a><div class="qp-dac-header">${Msg.IncomingReferences}</div><table if.bind="CurrentDAC.incomingReferences && CurrentDAC.incomingReferences.length"><tr id="Incoming-References-Header" class="qp-dac-table-header"><th class="qp-dac-key"></th><th class="qp-dac-main-key-fields">${Msg.ParentKeyFields}</th><th class="qp-dac-parent">${Msg.ChildDAC}</th><th class="qp-dac-key-fields">${Msg.ChildKeyFields}</th></tr><tr repeat.for="ref of CurrentDAC.incomingReferences"><td class="qp-dac-key"></td><td><span>${ref.dacFieldNames.join(\', \')}</span></td><td class="qp-dac-fk-ref"><a class="qp-dac-ref qp-dac-ref-tooltipable" href="${ref.foreignDac._links.self}" data-tooltip="${ref.foreignDac.fullName}">${ref.foreignDac.name}</a></td><td><span>${ref.foreignDacFieldNames.join(\', \')}</span><span class="qp-dac-box qp-dac-delete-cascade" if.bind="ref.hasCascadeDeletion"> ${Msg.DeleteCascade} <qp-tooltip>${Msg.Format(Msg.DeleteCascadeIncomingTooltip, ref.foreignDac.name, CurrentDAC.name)}</qp-tooltip></span></td></tr></table><div else class="qp-dac-description">${Msg.NoIncomingReferences}</div></div><div class="qp-dac-table qp-dac-columns"><a id="Outgoing-References"></a><div class="qp-dac-header">${Msg.OutgoingReferences}</div><table if.bind="CurrentDAC.outgoingReferences && CurrentDAC.outgoingReferences.length"><tr id="Outgoing-References-Header" class="qp-dac-table-header"><th class="qp-dac-key"></th><th class="qp-dac-main-key-fields">${Msg.ChildKeyFields}</th><th class="qp-dac-parent">${Msg.ParentDAC}</th><th class="qp-dac-key-fields">${Msg.ParentKeyFields}</th></tr><tr repeat.for="ref of CurrentDAC.outgoingReferences"><td class="qp-dac-key"></td><td><span>${ref.dacFieldNames.join(\', \')}</span><span class="qp-dac-box qp-dac-delete-cascade" if.bind="ref.hasCascadeDeletion"> ${Msg.DeleteCascade} <qp-tooltip>${Msg.Format(Msg.DeleteCascadeOutgoingTooltip, CurrentDAC.name, ref.foreignDac.name)}</qp-tooltip></span></td><td class="qp-dac-fk-ref"><a class="qp-dac-ref qp-dac-ref-tooltipable" href="${ref.foreignDac._links.self}" data-tooltip="${ref.foreignDac.fullName}">${ref.foreignDac.name}</a></td><td><span>${ref.foreignDacFieldNames.join(\', \')}</span></td></tr></table><div else class="qp-dac-description">${Msg.NoOutgoingReferences}</div></div></div><qp-tooltip rule.bind="\'.qp-dac-ref-tooltipable\'" on-show.call="toolTipShown(opts)"><div innerhtml="${tooltip | sanitizeHTML}"></div></qp-tooltip></div><div else class="qp-dac-welcome-text ${SelectedDAC===\'Uninitialized\' ? \'qp-dac-initializing\' : \'\'}"><span if.bind="SelectedDAC===\'Not found\'"><div class="qp-dac-not-found-icon"><qp-icon imagesrc="svg:main@ladderFromWell"></qp-icon></div><div class="qp-dac-not-found">${Msg.DACIsNotFound}</div><div class="qp-dac-apologies">${Msg.DACIsNotFoundApologies}</div></span><span if.bind="SelectedDAC===\'Uninitialized\'">${Msg.WaitForInitialization}</span><span if.bind="SelectedDAC===undefined">${Msg.DACBrowserWelcomeText}</span></div></div><pre else innerhtml="${TextContent}" class="qp-dac-sql" click.delegate="processClickInTextMode($event)">\r\n\t</pre><div if.bind="WaitForData" class="qp-dac-browser qp-dac-busy"></div></template>'}));define("controls/global/dac-browser/qp-dac-dialog",["require","exports","tslib","aurelia-framework","aurelia-logging","aurelia-dialog","controls/global/base-dialog/base-dialog","./messages"],(function(e,t,r,i,n,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DACDialog=void 0;var l=n.getLogger("dac-dialog");var d=function(e){r.__extends(t,e);function t(t){var r=e.call(this,t)||this;r.controller=t;r.config={};r.Msg=s.ErrorMessages;return r}t.prototype.activate=function(e){this.parent=e.parent;this.data=e.data};t.prototype.deactivate=function(e){if(!e.wasCancelled&&e.output===undefined){}};t.prototype.hide=function(){this.controller.cancel();return true};t=r.__decorate([i.autoinject,r.__metadata("design:paramtypes",[o.DialogController])],t);return t}(a.BaseDialog);t.DACDialog=d}));define("text!controls/global/dac-browser/qp-dac-dialog.html",[],(function(){return'<template><require from="controls/global/base-dialog/base-dialog.css"></require><require from="./qp-dac-browser.css"></require><ux-dialog class="dialog qp-dac-dialog qp-dialog"><ux-dialog-header class="qp-dac-title" show-close-button.bind="false"><span>${data.name}</span><span class="qp-dac-type">${Msg.Field}</span><span class="qp-dac-box qp-dac-obsolete" if.bind="data.isObsolete"> ${Msg.Obsolete} <qp-tooltip>${Msg.ObsoleteFieldTooltip}</qp-tooltip></span><span class="qp-dac-box qp-dac-internalApi" if.bind="data.isInternalApi"> ${Msg.InternalApi} <qp-tooltip>${Msg.InternalApiTooltip}</qp-tooltip></span><span class="qp-dac-box qp-dac-hidden" if.bind="!data.existsInDb"> ${Msg.Virtual} <qp-tooltip>${Msg.VirtualFieldTooltip}</qp-tooltip></span><span class="qp-dac-box qp-dac-udf" if.bind="data.kind === \'udf\'"> ${Msg.UDF} <qp-tooltip>${Msg.UDFTooltip}</qp-tooltip></span><span class="qp-dac-box qp-dac-nvp-field" if.bind="data.kind === \'nameValuePair\'"> ${Msg.NameValuePairField} <qp-tooltip>${Msg.NameValuePairFieldTooltip}</qp-tooltip></span><span class="qp-dac-box qp-dac-field-default-navigation" if.bind="data.hasDefaultNavigation"> ${Msg.DefaultNavigation} <qp-tooltip>${Msg.DefaultNavigationTooltip}</qp-tooltip></span><span class="qp-dac-box qp-dac-customized" if.bind="data.dacFieldExtensions.length>0"> ${Msg.Customized} </span><qp-icon class="qp-dialog-close" imagesrc="svg:main@close" click.delegate="hide()"></qp-icon></ux-dialog-header><ux-dialog-body><div class="qp-dac-field-row" if.bind="data.displayName"><span class="qp-dac-label">${Msg.DisplayName}:</span> <span class="qp-dac-info">${data.displayName}</span></div><div class="qp-dac-field-row"><span class="qp-dac-label">${Msg.DAC}:</span> <span class="qp-dac-info">${data.dacName}</span></div><div class="qp-dac-field-row"><span class="qp-dac-label">${Msg.Type}:</span> <span class="qp-dac-info">${data.sqlType}</span></div><div class="qp-dac-field-row" if.bind="data.dacFieldExtensions.length"><span class="qp-dac-label">${Msg.AppliedCustomization}:</span> <span class="qp-dac-info"><template repeat.for="extension of data.dacFieldExtensions"><span>${extension.customizationType === "created" ? Msg.Created+\' \' :\'\'}${extension.extensionName} (${extension.assemblyName}<template if.bind="extension.customizationProject">&#160;from <a href="javascript:void%200" click.delegate="parent.openLinkInPopup(extension.customizationProject.name, extension.customizationProject._links.self)">${extension.customizationProject.name}</a></template>)${$last ? \'\' : \',&#160;\'}</span>&#32;</template></span></div><div class="qp-dac-field-row" show.bind="data.foreignDacReferences && data.foreignDacReferences.length"><span class="qp-dac-label">${Msg.ForeignReference}:</span> <span class="qp-dac-info"><template repeat.for="ref of data.foreignDacReferences"><a class="qp-dac-ref" href="${ref.foreignDac._links.self}" click.delegate="hide()">${ref.foreignDac.name}</a>${$last ? \'\' : \',&nbsp; \'} </template></span></div><div class="qp-dac-description" if.bind="data.documentation.summary"><div class="qp-dac-header">${Msg.Summary}</div><p>${data.documentation.summary}</p></div><div class="qp-dac-description" if.bind="data.documentation.value"><div class="qp-dac-header">${Msg.Value}</div><p>${data.documentation.value}</p></div><div class="qp-dac-description" if.bind="data.documentation.remarks"><div class="qp-dac-header">${Msg.Remarks}</div><p>${data.documentation.remarks}</p></div><div class="qp-dac-field-row" if.bind="data.dacExtensions.length>0"><span class="qp-dac-label">${Msg.Customized}:</span> <span class="qp-dac-info"><span repeat.for="ext of data.dacExtensions">${ext.extensionName}</span></span></div></ux-dialog-body></ux-dialog></template>'}));define("controls/global/dac-browser/qp-dac-text-popup",["require","exports","tslib","aurelia-framework","aurelia-logging","aurelia-dialog","controls/global/base-dialog/base-dialog","./messages"],(function(e,t,r,i,n,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TextDialog=void 0;var l=n.getLogger("dac-dialog");var d=function(e){r.__extends(t,e);function t(t){var r=e.call(this,t)||this;r.controller=t;r.config={};r.Msg=s.ErrorMessages;return r}t.prototype.activate=function(e){this.params=e};t.prototype.deactivate=function(e){if(!e.wasCancelled&&e.output===undefined){}};t.prototype.hide=function(){this.controller.cancel();return true};t.prototype.processClick=function(e){var t;if(((t=e.target)===null||t===void 0?void 0:t.nodeName)==="A")this.hide();return true};t.prototype.openInNewTab=function(){var e,t,r;this.hide();if((e=this.params)===null||e===void 0?void 0:e.link)(r=window.open((t=this.params)===null||t===void 0?void 0:t.link,"_blank"))===null||r===void 0?void 0:r.focus()};t=r.__decorate([i.autoinject,r.__metadata("design:paramtypes",[o.DialogController])],t);return t}(a.BaseDialog);t.TextDialog=d}));define("text!controls/global/dac-browser/qp-dac-text-popup.html",[],(function(){return'<template><require from="controls/global/base-dialog/base-dialog.css"></require><require from="./qp-dac-browser.css"></require><ux-dialog class="dialog qp-dac-dialog qp-dialog"><ux-dialog-header class="qp-dac-title" show-close-button.bind="false"><span>${params.name}</span><span class="qp-dac-type">${params.title}</span><qp-icon class="qp-tab-opener" imagesrc="svg:main@external" click.delegate="openInNewTab()"></qp-icon><qp-icon class="qp-dialog-close" imagesrc="svg:main@close" click.delegate="hide()"></qp-icon></ux-dialog-header><ux-dialog-body><div class="qp-dac-sql" click.delegate="processClick($event)" innerhtml="${params.text | sanitizeHTML}"></div></ux-dialog-body></ux-dialog></template>'}));define("controls/global/date-editor/qp-datetime-edit",["require","exports","tslib","aurelia-framework","apps/enhance/services/control-helper","../base-field-editor","aurelia-logging"],(function(e,t,r,i,n,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TextRange=t.QpDatetimeEditCustomElement=t.MAX_DAYS_IN_MONTH=t.MONTHS_IN_YEAR=t.MAX_YEAR=t.MIN_YEAR=t.DateUTCValueConverter=void 0;var s=a.getLogger("qp-datetime-edit");var l=function(){function e(){}e.prototype.toView=function(e){if(!e)return null;if(e instanceof Date||e.constructor.name==="Date")return e;return new Date(e)};e.prototype.fromView=function(e){if(!e)return null;if(e instanceof Date){return new Date(e.getTime()-e.getTimezoneOffset()*6e4)}return e};return e}();t.DateUTCValueConverter=l;var d=29;t.MIN_YEAR=1900;t.MAX_YEAR=9999;t.MONTHS_IN_YEAR=12;t.MAX_DAYS_IN_MONTH=31;var c=127;var p="0".charCodeAt(0);var u="9".charCodeAt(0);var f=0;var h=1;var g=2;var m=function(e){r.__extends(o,e);function o(t,r,i){var n=e.call(this)||this;n.element=t;n.taskQueue=i;n.value=null;n.oldValue=null;n.focused=false;n.todayDate=new Date;n.durationMode=false;n.fullDOW=false;n.fullMonth=false;n.selectOnFocus=false;n.allowStrings=false;n.roundUpTime=false;n.required=false;n.hideEnterKey=false;n.promptChar="_";n.emptyChar=" ";n.valueMode=0;n.validateExp="";n.asciiCharSet=false;n.dropDownOpen=false;n.inlineEditor=false;n.outerClickSubscription=undefined;n.allowRepaintText=true;n.hasFocus=false;n.lockMouseUp=false;n.mouseClicked=false;n.trackSelection=true;n.trackPosition=false;n.selStart=0;n.selEnd=0;n.field0ID=new Array;n.field1ID=new Array;n.mask=undefined;n.maskExclude=undefined;n.maskInclude=undefined;n.emptyText=undefined;n.AM="AM";n.PM="PM";n.lengthAmPm=n.AM.length>n.PM.length?n.AM.length:n.PM.length;n.yearFix=0;n.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December",""];n.dowNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];n.validateEdit=true;n.allowMouseDownFlag=false;n.eventManager=r;n.value=null;n.addConfigSetter("minValue",(function(e){return new Date(e)}));n.addConfigSetter("maxValue",(function(e){return new Date(e)}));return n}a=o;o.createDate=function(e,t,r){var i=new Date(e,t,r);i.setFullYear(e,t,r);return i};o._trimEnd=function(e){return e.replace(/\s+$/,"")};o._filter=function(e,t,r,i,n,o){if(r>=t.length)return i;var a=t.charCodeAt(r);var s=t.charAt(r);if(a<21||n&&n.indexOf(s)!==-1)return i;if(o&&o.indexOf(s)!==-1)return s;var l=Math.floor((e-1)/6);switch(l){case 0:break;case 1:if(a>=p&&a<=u)return s;case 2:if(a>255||s.toUpperCase()!==s.toLowerCase())break;return i;case 3:return a>=p&&a<=u?s:i}e=Math.floor((e-1)/2)%3;if(e===0)return s;s=e===2?s.toLowerCase():s.toUpperCase();if(n&&n.indexOf(s)!==-1)return i;return s};o.format=function(e,t,r,i){if(i==null)i=0;if(t==null)t="";var n="";var o;var s=0;var l=a.split(e);var d=l[0];var c=l[1];var p=l[2];for(var u=0;u<d.length;u++){o=d.charCodeAt(u);if(o<21){var f=void 0;if(s<t.length){f=a._filter(o,t,s,"",c,p);s++}n+=f?f:r}else{n+=d.charAt(u);if(i>0)s++}}return n};o.encode=function(e){var t;var r;var i=0;var n="";var o=a.split(e);var s=o[0];var l=o[1];var d=o[2];for(var c=0;c<s.length;c++){r=s.charAt(c);t=a._flag(r,i);if(t!==0){if(t<0){i=i===-t?0:-t;continue}n+=String.fromCharCode(t)}else if(r==="\\"&&c+1<s.length){r=s.charAt(c+1);if(a._flag(r,0)!==0){n+=r;c++}}else n+=r}if(l)n+="|"+l;if(d){if(!l)n+="|";n+="|"+d}return n};o.split=function(e){var t=e.split("|");if(t.length===1)t[h]="";if(t.length===2)t[g]="";return t};o._flag=function(e,t){var r=0;switch(e){case">":return-1;case"<":return-2;case"&":r=1;break;case"C":r=2;break;case"A":r=7;break;case"a":r=8;break;case"L":r=13;break;case"?":r=14;break;case"#":case"0":return 19;case"9":return 20;default:return 0}return r+t*2};Object.defineProperty(o.prototype,"isEditLink",{get:function(){return false},enumerable:false,configurable:true});Object.defineProperty(o.prototype,"ROMode",{get:function(){return this.config&&(this.config.readOnly||!this.config.enabled)},enumerable:false,configurable:true});Object.defineProperty(o.prototype,"textValue",{get:function(){return this._textValue||""},set:function(e){this._textValue=e;if(this.elemText)this.elemText.value=e},enumerable:false,configurable:true});o.prototype.detached=function(){var e,t;(e=this.editMaskObserver)===null||e===void 0?void 0:e.dispose();(t=this.displayMaskObserver)===null||t===void 0?void 0:t.dispose()};o.prototype.acceptDateFromCalendar=function(e){var t=this;s.info("acceptDateFromCalendar");var r=e.detail&&e.detail.value;if(r)this.setValue(r);this.hideDropDown();e.preventDefault();e.stopPropagation();this.fireEvent("valuechanged");setTimeout((function(){t.elemText.focus()}),0)};o.prototype.configChanged=function(e,t){var r=this;var i,o;if(!this.config)this.config={};n.applyDefaultValues(this.config,a.defaultConfig);(i=this.editMaskObserver)===null||i===void 0?void 0:i.dispose();(o=this.displayMaskObserver)===null||o===void 0?void 0:o.dispose();this.editMaskObserver=this.bindingEngine.propertyObserver(this.config,"editMask").subscribe((function(e,t){return r.initEditMask()}));this.displayMaskObserver=this.bindingEngine.propertyObserver(this.config,"displayMask").subscribe((function(e,t){return r.initDisplayMask()}));this.AM=n.dateFormatInfo.am||"AM";this.PM=n.dateFormatInfo.pm||"PM";this.lengthAmPm=Math.max(this.AM.length,this.PM.length);this.yearFix=n.dateFormatInfo.yearFix||0;if(this.config){this.monthNames=this.config.fullMonth?n.dateFormatInfo.monthNames.split(","):n.dateFormatInfo.abbrMonthNames.split(",");this.dowNames=this.config.fullDOW?n.dateFormatInfo.dayNames.split(","):n.dateFormatInfo.abbrDayNames.split(",");this._initializeMask();this.taskQueue.queueMicroTask((function(){if(r.config.value)r.value=new Date(r.config.value)}))}};o.prototype.attached=function(){this.trange=new x(this.elemText)};o.prototype.getValue=function(e){if(e===void 0){e=false}if(this.value===null||e){var t=this._getTypedValue(this.textValue,true);if(this.allowStrings||t==null||t instanceof Date&&!isNaN(t.getTime())&&!n.equals(this.value,t)){this.value=t}}return this.value};o.prototype.getValueOrToday=function(){var e=this.getValue(true);if(e==null)e=new Date;return e};o.prototype.setValue=function(e){var t=this._parseInvariant(e);if(this.allowStrings||t instanceof Date&&!isNaN(t.getTime())&&n.equals(this._checkLimits(t),t)){this.value=t;this.oldValue=t;if(this.hasFocus){this.textValue=this.getEditText(this.value);if(n.isVisible(this.elemText))this.select(this.selStart)}else this.textValue=this.getDisplayText(this.value)}};o.prototype.valueChanged=function(e,t){if(!this.config)return;if(this.config.allowCustomItems&&e!=null)this._setAllowStrings(e);if(this.hasFocus){this.textValue=this.getEditText(this.value);if(n.isVisible(this.elemText)){this.trange&&this.trange.refreshSelection()}}else if(e==null)this.textValue=this.getDisplayText(null);else this.textValue=this.getDisplayText(this.value)};o.prototype.updateValue=function(e){var t=e===undefined?this.getValue(true):e;if(!n.equals(t,this.oldValue)){var r=this.fireEvent("valuechanging");if(r){this.setValue(this.oldValue);return false}var i=new Object;var o=this.oldValue;e!==undefined?this.setValue(t):this.repaintText(t);this.oldValue=t;this.fireEvent("valuechanged");return true}};o.prototype.getReadOnly=function(){return this.config.readOnly};o.prototype.getEnabled=function(){return this.elemText.getAttribute==null||!this.elemText.getAttribute("enabled")};o.prototype.getDisabled=function(){return!this.getEnabled()||this.getReadOnly()};o.prototype.doTrackSelection=function(){if(this.elemText.tagName==="INPUT"&&this.trackSelection||this.trackPosition){this.getSelectedText()}};o.prototype.selectContent=function(e){var t=this;if(e===void 0){e=true}if(!n.isVisible(this.elemText))return;if((this.selectOnFocus||this.getDisabled())&&this.elemText.select){this.select();this.lockMouseUp=true;if(this.mouseClicked&&n.browser.isEdge)setTimeout((function(){t.select()}),0)}else if(this.elemText.tagName==="INPUT"||this.trackPosition){var r=e?this.selStart:0;var i=e?this.selEnd:0;if(n.browser.isIE)this.select(r,i);else setTimeout((function(){t.select(r,i)}),0)}};o.prototype.processFocus=function(e){this.hasFocus=true;this.oldValue=this.getValue();if(!this.getDisabled()&&this.allowRepaintText&&!this.isEditLink){var t=this.getEditText(this.getValue());if(this.textValue!==t)this.textValue=t}this.selectContent(this.trackPosition);this.getSelectedText();if(this.allowRepaintText)this.fireEvent("activated")};o.prototype.processBlur=function(e){this.hasFocus=false;this.onBlur(e);if(this.allowRepaintText&&!this.isEditLink){this.updateValue();var t=this.getDisplayText(this.getValue());if(t!==this.textValue)this.textValue=t}};o.prototype.onBlur=function(e){if(this.allowStrings||this.getDisabled()||!this.focused)return;var t=this.textValue;var r=this._fields1(t,true);var i=this.separate(t);if(this.emptyText!==t&&r.some((function(e){return!e}))){var n=new Date;if(this.roundUpTime){n.setHours(23);n.setMinutes(59);n.setSeconds(59);n.setMilliseconds(999)}else{n.setHours(0);n.setMinutes(0);n.setSeconds(0);n.setMilliseconds(0)}for(var o=0;o<r.length;o++){var s=r[o];if(this._isDatePart(o)&&!s){r[o]=this._fieldValue(this.field0ID[o],n,true,"0")}else if(a.between(10,this.field0ID[o],13)&&!s&&!this.isZeroTime(r,i,o)){r[o]=n.getHours()}else if(a.between(16,this.field0ID[o],17)&&!s&&!this.isZeroTime(r,i,o)){r[o]=n.getMinutes()}}var l=function(e,t,r){return e.some((function(e){return e>=t&&e<=r}))};var d=this.getMergedDateTime(r.slice());if(d!==undefined){if(!l(this.field0ID,10,13))d.setHours(n.getHours());if(!l(this.field0ID,16,17))d.setMinutes(n.getMinutes());if(!l(this.field0ID,18,19))d.setSeconds(n.getSeconds());if(!l(this.field0ID,22,28))d.setMilliseconds(n.getMilliseconds());this.textValue=this.getEditText(d)}}};o.prototype.processKeyDown=function(e){this.doTrackSelection();switch(e.key){case"Backspace":if(this.getReadOnly()){e.preventDefault();e.stopPropagation()}break;case"Esc":case"Escape":e.preventDefault();break;case"Enter":if(!e.shiftKey){if(this.hideEnterKey){e.preventDefault();e.stopPropagation();if(this.allowRepaintText){this.updateValue()}}this.fireEvent("valuechanged")}break}if(!this.onKeyDown(e)){e.preventDefault();e.stopPropagation();return false}switch(e.key){case"Backspace":case"Delete":case"Del":if(this.getDisabled()){e.preventDefault();e.stopPropagation();break}if(n.browser.isAnyIE||n.browser.isSafari||n.browser.isFirefoxFrom65){if(!this.onKeyPress(e)){e.preventDefault();e.stopPropagation()}}break}if((e.code=="KeyS"||e.keyCode==83)&&e.ctrlKey){this.processBlur();this.processFocus()}return true};o.prototype.onButtonClick=function(e){if(this.dropDownOpen){this.hideDropDown();this.focus()}else this.showDropDown()};o.prototype.onKeyDown=function(e){var t=!(e.ctrlKey||e.metaKey||e.altKey);switch(e.key){case"Down":case"ArrowDown":case"-":case"F3":if(!this.config.timeMode&&(e.key==="F3"||e.altKey)){this.onButtonClick();return false}if(e.key!=="F3"&&!e.shiftKey&&!this.inlineEditor&&!this.allowStrings){this.incrementActivePart(-1);return false}break;case"Up":case"ArrowUp":case"+":if(t&&!this.inlineEditor&&!this.allowStrings){this.incrementActivePart(1);return false}break;case"Right":case"ArrowRight":if(t&&!e.shiftKey&&!this.allowStrings){this.selectActivePart(this.getActivePartIndex()+1);return false}break;case"Left":case"ArrowLeft":if(t&&!e.shiftKey&&!this.allowStrings){this.selectActivePart(this.getActivePartIndex()-1);return false}break;case".":case"/":if(t&&!this.allowStrings){if(e.shiftKey){this.selectActivePart(this.getActivePartIndex()-1)}else{this.selectActivePart(this.getActivePartIndex()+1)}return false}break}return true};o.prototype.processKeyPress=function(e){this.doTrackSelection();if(this.getDisabled()){if(!e.ctrlKey){e.preventDefault();e.stopPropagation();return false}}return this.onKeyPress(e)};o.prototype.onKeyPress=function(e){if(!this.mask||!this.validateEdit)return true;var t=this.textValue;var r=t.length;var i=this.selStart;var n=this.selEnd;var o=this.emptyChar.charCodeAt(0);if(i!==n){while(--n>=i){var a=this.promptChar;if(this.mask.charCodeAt(n)>=21)a=this.mask.charAt(n);t=t.substring(0,n)+a+t.substring(n+1)}n++}else{switch(e.key){case"Del":case"Delete":case"Space":while(n<r&&this.mask.charCodeAt(n)>=21)n++;if(n>=r)return false;t=t.substring(0,n)+this.promptChar+t.substring(n+1);n++;break;case"Backspace":while(n>0&&this.mask.charCodeAt(n-1)>=21)n--;if(n--<1)return false;t=t.substring(0,n)+this.promptChar+t.substring(n+1)}}if(e.key.length===1&&e.key!==" "&&n<r){var s=e.key.toUpperCase();var l=[t];i=this.insertCharAt(l,s,n);t=l[0];if(i<0)return false;n=this.locatePromptPos(i)}this.textValue=t;this.select(n);this.fireEvent("usertyping");return false};o.prototype.processBeforePaste=function(e){e.returnValue=false};o.prototype.processSelectStart=function(e){if(!this.selectOnFocus){e.preventDefault();e.stopPropagation()}};o.prototype.processInput=function(e){if(this.allowStrings)this.textValue=this.elemText.value;if(n.isVisible(this.elemText))this.fireEvent("usertyping")};o.prototype.processPaste=function(e){if(this.getDisabled()){e.preventDefault();e.stopPropagation();return false}var t=e.clipboardData;if(t!=null){var r=t.getData("Text");var i=this.text;var n=this.processPasteValue(r);if(r&&(!n||i!==this.text))this.fireEvent("usertyping");if(n){e.preventDefault();e.stopPropagation()}}else this.fireEvent("usertyping");return true};o.prototype.initInlineEditor=function(e){this.config=e.config;this._initializeMask()};o.prototype.repaintText=function(e){var t=this.hasFocus?this.getEditText(e):this.getDisplayText(e);if(t!==this.text)this.text=t};o.prototype.getDisplayText=function(e){if(this.config.allowNull&&e==null)return this.config.nullText;return this._getFormattedText(e,false)};o.prototype.getEditText=function(e){return this._getFormattedText(e,true)};o.prototype.getVisible=function(){return this.elemText.style.display!=="none"};o.prototype.select=function(e,t){if(this.getVisible()&&this.trange){this.trange.select(e,t);this.selStart=this.trange.selStart;this.selEnd=this.trange.selEnd}};o.prototype.getSelectedText=function(){if(!this.trange)return"";var e=this.trange.getSelectedText();this.selStart=this.trange.selStart;this.selEnd=this.trange.selEnd;return e};o.prototype.fireEvent=function(e,t){var r={};switch(e){case"keydown":case"keypress":case"keyup":var i=t;if(i&&i.key)r.key=i.key;break;case"valuechanging":r.oldValue=this.oldValue;r.value=this.getValue();break;case"valuechanged":r.value=this.getValue();break}var n=new CustomEvent(e,{bubbles:true,detail:r});this.elemText.dispatchEvent(n);if(n.detail.cancel===true)return true;return false};o.prototype._getFormattedText=function(e,t){if(this.allowStrings&&!(e instanceof Date)){return e!=null?e.toString():""}if(e==null||e===""||typeof e==="string")return this.getDisplayValue("",1);var r="";var i=t?this.mask||"":this.mask1;var n=t?this.field0ID:this.field1ID;var o;var a;var s=-1;var l=0;while(++s<i.length){o=i.charAt(s);a=i.charCodeAt(s);if(a<21){r+=this._fieldValue(n[l++],e,t,o);if(t){while(s+1<i.length){if(i.charCodeAt(s+1)===a)s++;else break}}}else r+=o}return t?this.getDisplayValue(r,1):r};o.prototype.focus=function(){try{this.elemText.focus()}catch(e){}};o.prototype.validateValue=function(e){if(this.isNullValue(e)){e=this.config.allowNull?null:""}else if(this.validateExp){var t=new RegExp(this.validateExp);var r=t.exec(e||"");if(r!=null)e=r[0];else e=this.config.allowNull?null:""}if(this.asciiCharSet&&e){var i=e;e="";for(var n=0;n<i.length;n++){if(i.charCodeAt(n)<c)e+=i.charAt(n)}}return e};o.prototype.initEditMask=function(){this.mask0=this._dateMask(this.config.editMask,false);this._initEmptyText();this.setInputMask(this.mask0)};o.prototype.initDisplayMask=function(){this.mask1=this._dateMask(this.config.displayMask,true)};o.prototype._initializeMask=function(){this.initEditMask();this.initDisplayMask()};o.prototype._initEmptyText=function(){this.emptyText=this.mask0.replace(/[#LC]/g,this.promptChar)};o.prototype._setAllowStrings=function(e){this.allowStrings=e==null||e.constructor.name!=="Date";this.validateEdit=!this.allowStrings};o.prototype._dateMask=function(e,t){if(t){if(this.field1ID==null)this.field1ID=new Array;this.field1ID.length=0}else{if(this.field0ID==null)this.field0ID=new Array;this.field0ID.length=0}if(e==null)e="";var r;var i;var n=0;var o=-1;var a="";for(i=0;i<e.length;i++){r=e.charCodeAt(i);if(r<p||r>u){var s=e.charAt(i);if(t&&s==="\\"&&i+1<e.length){r=r=e.charAt(++i);if(r==="\\")continue;if("0"===r||"9"===r)a+=s;a+=r}else a+=s;continue}o=(r-p)*10+e.charCodeAt(++i)-p;if(t){this.field1ID[n++]=o;a+=""}else{this.field0ID[n++]=o;switch(o){case 14:a+="L";break;case 15:a+=Array(this.lengthAmPm+1).join("C");break;case 22:a+="#";break;default:a+="##";if(o===3)a+="##";while(o-- >23)a+="#"}}}return a};o.prototype.setInputMask=function(e){if(e==null)e="";if(this.rawMask===e)return;var t=this.mask?this.calculateValue(this.textValue,0,1):undefined;this.maskFull=a.encode(e);var r=a.split(this.maskFull);this.mask=r[f];this.maskExclude=r[h];this.maskInclude=r[g];if(t!=null){var i=this.getDisplayValue(t,0);this.textValue=i?a._trimEnd(i):"";this.value=null}this.rawMask=e};o.prototype.calculateValue=function(e,t,r){if(this.isNullValue(e))return this.config.allowNull?undefined:"";if(!this.mask)return e;var i=new RegExp("\\"+this.promptChar,"g");e=e.toString().replace(i,String.fromCharCode(0));var n=0;var o;var s;var l=true;var d="";for(var c=0;c<this.mask.length;c++){s=this.mask.charCodeAt(c);if(s<21){o=undefined;if(n<e.length){o=a._filter(s,e,n,"",this.maskExclude,this.maskInclude);n++}d+=o?o:this.emptyChar;if(o)l=false}else{if(r>0&&n<e.length){if(this.mask.charAt(c)!==e.charAt(n))return undefined;n++}if(t>0)d+=this.mask.charAt(c)}}return l?this.config.allowNull?undefined:"":a._trimEnd(d)};o.prototype.isNullValue=function(e){var t=String(e);if(e==null||t==="")return true;if(this.config.allowNull&&t===this.config.nullText)return true;return false};o.prototype.getDisplayValue=function(e,t,r){if(this.mask){if(r===undefined)r=this.promptChar;return a.format(this.maskFull,e,r,t)}return e!=null?e:""};o.prototype._fieldValue=function(e,t,r,i){var n;var o=(e&1)*2;if(e<4){n=t.getFullYear()+this.yearFix;if(e===3)o=4;else{n%=100;o=e===2?2:0}}else if(e<8){n=t.getMonth()+1;if(e>5){var a=this.monthNames[n-1];if(a.length>0)return a}}else if(e<10){n=t.getDate()}else if(e<16){n=t.getHours();if(e>13){var s=n<12?this.AM:this.PM;e-=13;o=s.length;if(e===o)return s;if(o<e)s+=" ";return e===1?s.substring(0,e):s}if(e<12){n%=12;if(n===0)n=12}}else if(e<18)n=t.getMinutes();else if(e<20)n=t.getSeconds();else if(e<22)return this.dowNames[t.getDay()];else{n=t.getMilliseconds();var l=o=e-21;while(l-- >3)n*=10;while(l++<2)n=Math.floor(n/10)}var d=n.toString();if(e<20){e=d.length;if(r){if(o===0)o=2;else r=false}if(o>0){if(o<e)d=d.substring(0,o);else while(e++<o)d=(r?i:"0")+d}}return d};o.prototype._checkLimits=function(e){if(!this.config.timeMode&&!this.allowStrings&&e!=null&&!isNaN(e.getTime())){var t=e.getTime();var r=void 0;var i=void 0;if(this.config.minValue!=null)r=this.config.minValue.getTime();if(this.config.maxValue!=null)i=this.config.maxValue.getTime();if(r!==undefined&&t<r){e=new Date(r)}if(i!==undefined&&t>i){e=new Date(i)}}return e};o.prototype._parseInvariant=function(e){var r=null;if(e==null||this.isNullValue(e)){if(this.config.allowNull)return null;r=new Date}else{if(e instanceof Date)r=e;else{if(this.config.timeMode||e.indexOf(":")>0){var i=Date.parse(e);if(!isNaN(i))r=new Date(i)}else{var n=e.split("/");if(n.length>=3){var o=parseInt(n[2]);var s=parseInt(n[0]);var l=parseInt(n[1]);if(!isNaN(o)&&!isNaN(s)&&!isNaN(l))r=a.createDate(o,s-1,l)}}}}if(this.config.timeMode&&r instanceof Date&&!isNaN(r.getTime())){r.setFullYear(t.MIN_YEAR);r.setMonth(0);if(!this.durationMode)r.setDate(1)}if(this.config.allowCustomItems)this._setAllowStrings(r);if(this.allowStrings&&(r==null||isNaN(r.getTime())))return e;return r};o.prototype._getTypedValue=function(e,t){var r;if(this.isNullValue(e)||e===this.emptyText){if(this.config.allowNull)return null;r=new Date}else{if(e instanceof Date)r=e;else{r=this._parseText(e,this.hasFocus,t);if(r==null)r=this._parseText(e,!this.hasFocus,t)}}if(this.config.timeMode&&r!=null){r.setFullYear(1900);r.setMonth(0);if(!this.durationMode)r.setDate(1)}if(this.config.allowCustomItems)this._setAllowStrings(r);if(this.allowStrings&&r==null)return e;if(r==null)return null;return t?this._checkLimits(r):r};o.prototype._parseText=function(e,t,r){var i=this._fields1(e,t);var n=0;var o=i.length;var a=-1;var s=-1;var l=-1;var c=-1;var p=-1;var u=-1;var f=-1;var h=-1;var g=-1;while(++g<o){var m=i[g];var b=t?this.field0ID[g]:this.field1ID[g];if(b<4){if(m>100&&m>this.yearFix)m-=this.yearFix;if(m<0)n++;else{a=m;var v=d;if(m<100){if(b<3&&v<0)v=29;if(v>=0)a+=m>v?1900:2e3}}}else if(b<8){if(m<1||m>12)n++;else s=m}else if(b<10){if(m<1||m>31)n++;else l=m}else if(b<14){if(m===24)m=0;if(b>11)h=-4;else{if(m===12)m=0;if(m>12)n++}if(m>23)n++;else c=m}else if(b<16){if(m>0)h++;continue}else if(b<18){if(m>59)n++;else p=m}else if(b<20){if(m>59)n++;else u=m}else if(b<22){continue}else{while(b++<24)m*=10;while(b-- >25)m=Math.floor(m/10);f=m}}if(h===0&&c>=0&&c<12)c+=12;var x=null;if(n===0){if(a>0&&s>0){x=new Date(a,s-1);x.setFullYear(a,s-1)}else x=new Date;if(x!=null){if(s>0)x.setMonth(s-1);if(l>0)x.setDate(l);x.setHours(c>=0?c:0);x.setMinutes(p>=0?p:0);x.setSeconds(u>=0?u:0);x.setMilliseconds(f>=0?f:0);if(a>0&&s>0&&l>0)x.setFullYear(a,s-1,l)}if(r)x=this._checkLimits(x)}return x};o.prototype._fields1=function(e,t){var r=t&&!this.getDisabled()?this.field0ID:this.field1ID;var i=r.length;var n=-1;var o=0;var a=0;var s=new Array(i);while(++n<i)s[n]=-1;if(e==null)return s;e=e.toUpperCase();n=-1;while(++n<e.length&&a<i){var l=e.charCodeAt(n)-48;var d=r[a];if(e.charAt(n)===this.promptChar)continue;if(20===d||21===d){d=r[++a]}if(14===d||15===d){if(l>=0&&l<=9){o=-1;a++;n--;continue}if(this.PM.charAt(0).toUpperCase()===e.charAt(n)){s[a++]=1;o=-1}}else if(d===6||d===7){o=-1;while(o-- >-3){for(l=0;l<12;l++){var c=this.monthNames[l].toUpperCase();d=c.length;if(d<1)continue;if(o===-3){if(d<4)continue;c=c.substring(0,3)}d=e.indexOf(c)-1;if(d>-2){if(d<0||e.charAt(d).toLowerCase()===e.charAt(d))break}}if(l<12){s[a]=l+1;break}}a++}else{if(l>=0&&l<=9){if(o<=0)o=l;else o=o*10+l}else if(o>=0){s[a++]=o;o=0}}}if(a<i)s[a]=o;return s};o.between=function(e,t,r){return e<=t&&r>=t};o.prototype.getMergedDateTime=function(e){var t=function(e){return e[0].toUpperCase()+e.substring(1).toLowerCase()};var r=-1;var i=-1;var n=-1;var o=0;var s=0;var l=0;var d=0;var c=-1;for(var p=0;p<e.length;p++){var u=e[p];var f=u;var h=u;if(h==null)h=parseInt(f,10);var g=this.field0ID[p];switch(g){case 1:case 2:case 3:r=h;break;case 4:case 5:i=h;break;case 6:case 7:i=this.monthNames.indexOf(t(f));break;case 8:case 9:n=h;break;case 10:case 11:case 12:case 13:o=h;break;case 14:case 15:c=f===this.PM||h===1?1:0;break;case 16:case 17:s=h;break;case 18:case 19:l=h;break;case 22:case 23:case 24:case 25:case 26:case 27:case 28:d=h;break}}if(c===0){if(o===12)o=0}else if(c===1){if(o<12)o+=12}var m=function(e){if(e%4)return false;if(e%100)return true;if(e%400)return false;return true};var b=1582;var v=275760;var x=false;if(a.between(b,r,v)&&a.between(1,i,12)){var y=31;switch(i){case 2:y=m(r)?29:28;break;case 4:case 6:case 9:case 11:y=30}if(a.between(1,n,y)){x=true}}var w=a.between(0,o,23)&&a.between(0,s,60)&&a.between(0,l,60)&&a.between(0,d,9999);if(x&&w)return new Date(r,i-1,n,o,s,l,d)};o.prototype._isDatePart=function(e){return this.field0ID[e]<10};o.prototype.isZeroTime=function(e,t,r){var i=e[r];if(i===0){var n=this.field0ID[r];var o=a.between(10,n,13)||a.between(16,n,28);if(o){var s=Array.prototype.slice.call(t[r]);while(s.length&&s[0]===this.promptChar)s.shift();s.reverse();while(s.length&&s[0]===this.promptChar)s.shift();s.reverse();return 0===parseInt(s.join(),10)}}return false};o.prototype.processPasteValue=function(e){if(!this.mask)return false;this.getSelectedText();var t=this.selStart;var r=this.selEnd;var i=this.textValue;i=this.clearMaskedContent(i,t,r);var n=[i];var o=t;for(var a=0;a<e.length;a++){if(this.mask.charCodeAt(o)<=20&&e.charAt(a)===this.promptChar){o++;continue}o=this.insertCharAt(n,e.charAt(a),o);if(o<0||o>=this.mask.length)break}this.textValue=n[0];this.select(r>0?r:t);return true};o.prototype.clearMaskedContent=function(e,t,r){if(!this.mask)return e;if(t==null||t<0)t=0;if(r==null||r>this.mask.length)r=this.mask.length;if(t>r){var i=r;r=t;t=i}if(t!==r){while(--r>=t){var n=this.promptChar;if(this.mask.charCodeAt(r)>=21)n=this.mask.charAt(r);e=e.substring(0,r)+n+e.substring(r+1)}r++}return e};o.prototype.separate=function(e){var t=function(e){return"\\/.:- ".indexOf(e)>-1};var r=function(e){var r=[];for(var i=0;i<e.length;i++){if(t(e[i]))r.push(i)}return r};var i=function(e,t,r,i){for(var n=0,o=i;n<o.length;n++){var a=o[n];var s=e.substr(t-a,r.length);if(s===r)return true}return false};var n=r(this.AM);var o=r(this.PM);var a=new Array;var s="";for(var l=0;l<e.length;l++){var d=e[l];if(t(d)&&!(i(e,l,this.AM,n)||i(e,l,this.PM,o))){a.push(s);s=""}else s+=d}if(s!=="")a.push(s);return a};o.prototype.getPartCount=function(e){return this.separate(e).length};o.prototype.getActivePartIndex=function(){var e=this.trange&&this.trange.selEnd;var t=this.textValue.substring(0,e);return this.getPartCount(t)-1};o.prototype.getPartLen=function(e){return this.separate(this.config.editMask)[e].length};o.prototype.selectActivePart=function(e){if(this.getDisabled())return;var t=function(e){return e.reduce((function(e,t){return e+t.length+1}),0)};var r=this.textValue;var i=this.getPartCount(r);if(e>=0&&e<i){var n=this.separate(r);var o=t(n.slice(0,e));var a=t(n.slice(0,e+1));if(a>0)a--;this.trange&&this.trange.select(o,a)}};o.prototype.incrementActivePart=function(e){if(this.getDisabled()||!this.trange)return;var t=this.trange.selStart;var r=this.trange.selEnd;var i=this.getActivePartIndex();if(!this.field0ID)return;var n=this.field0ID[this.getActivePartIndex()];var o=this._getTypedValue(this.textValue,true);if(!o)o=new Date;switch(n){case 1:case 2:case 3:o.setFullYear(o.getFullYear()+e);break;case 4:case 5:case 6:case 7:o.setMonth(o.getMonth()+e);break;case 8:case 9:o.setDate(o.getDate()+e);break;case 10:case 11:case 12:case 13:o.setHours(o.getHours()+e);break;case 16:case 17:o.setMinutes(o.getMinutes()+e);break;case 18:case 19:o.setSeconds(o.getSeconds()+e);break}this.textValue=this.getEditText(o);this.fireEvent("usertyping");this.trange.select(t,r)};o.prototype.locatePromptPos=function(e,t){if(t===void 0){t=false}var r=this.mask?this.mask.length:0;while(e>=0&&e<r&&this.mask&&this.mask.charCodeAt(e)>=21){if(t)e--;else e++}return e};o.prototype.insertCharAt=function(e,t,r){if(!this.mask)return-1;var i=this.mask.length;var n=r;var o=e[0];if(r<i){if(this.__checkField){var s=new v;s.txt=o;n=this.__checkField(t.charCodeAt(0),t,o,r,s);if(n>=0){o=s.txt;e[0]=o;return n}else return-1}else{if(this.mask.charCodeAt(n)>=21&&this.mask.charAt(n)===t)return++n;while(this.mask.charCodeAt(n)>=21)if(++n>=i)return-1;var l=a._filter(this.mask.charCodeAt(n),t,0,undefined,this.maskExclude,this.maskInclude);if(l===undefined){return-1}t=l;o=o.substring(0,n)+t+o.substring(n+1);e[0]=o;n++;return n}}return-1};o.prototype.__checkField=function(e,t,r,i,n){var o=r.length;var a=new b;var s=0;var l=this._curField(i,a);if(!this.mask)return-1;if(t===this.mask.charAt(i))return++i;if(i>=a.n1){i--;if(r.charAt(i)!==this.promptChar){return this.__checkField(e,t,r,i+2,n)}}if(l<0)return-1;if(l===5){if(i<a.n1){var d=this.PM;if(d.charAt(0).toUpperCase()!==t.toUpperCase())d=this.AM;if(a.n1===a.n0+1)d=d.charAt(0);else{o=d.length;if(o<this.lengthAmPm)d+=" ";else if(o>this.lengthAmPm)d=d.substring(0,this.lengthAmPm)}n.txt=r.substring(0,a.n0)+d+r.substring(a.n1)}return a.n1}if(e<48||e>57){if(e===46||e===58){i=a.n1;while(++i<o)if(this.mask.charCodeAt(i)<21)break;return i}return-1}e-=48;if(a.n0===i){var d=r.charAt(i+1)===this.promptChar?0:r.charCodeAt(i+1)-48;switch(l){case 4:e--;d-=2;case 3:case 1:if(e>1)s=1;else if(e===1&&d>2)s=2;break;case 2:if(e>3)s=1;else if(e===3&&d>1)s=2;break;case 6:case 7:if(e>5)s=1;break}}if(a.n0+1===i){var d=r.charAt(i-1)===this.promptChar?0:r.charCodeAt(i-1)-48;switch(l){case 4:d--;e-=2;case 3:case 1:if(d>1||d===1&&e>2)s=3;break;case 2:if(d>3||d===3&&e>1)s=3;break;case 6:case 7:if(d>6||d===6&&e>0)s=3;break}}if(s===1){r=r.substring(0,i)+this.promptChar+r.substring(i+1);i++}if(s===2){r=r.substring(0,i+1)+this.promptChar+r.substring(i+2)}if(s===3){while(++i<o)if(this.mask.charCodeAt(i)<21)break;if(i>=o)return-1;return this.__checkField(e+48,t,r,i,n)}n.txt=r.substring(0,i)+t+r.substring(i+1);return++i};o.prototype._curField=function(e,t){if(!this.mask)return-1;var r;var i=22;var n=t.n0=t.n1=-1;var o=0;for(;o<this.mask.length;o++){r=this.mask.charCodeAt(o);if(r>21===i>21){continue}if(r>21){if(o>=e)break}else{t.n0=o;n++}i=r}if(t.n0>=0)t.n1=o;n=this.field0ID[n];if(n==null)return-1;if(n<8)return n<4?0:1;if(n<20)return Math.floor((n-4)/2);return n>21?8:-1};o.prototype.toggleCalendar=function(e){this.dropDownOpen?this.hideDropDown():this.showDropDown();return false};o.prototype.showDropDown=function(){if(this.config.timeMode&&!this.dropDownOpen){this.createTimeItems();this.focus()}this.dropDownOpen=true};o.prototype.createTimeItems=function(){this.timeItems={allowMultiSelect:false,options:[]};var e=this.durationMode?15:30;for(var t=0;t<24;t++){for(var r=0;r<60;r+=e){var i=new Date(1900,0,1,t,r,0);var n={value:i,text:this.getDisplayText(i),selected:false};this.timeItems.options.push(n)}}};o.prototype.hideDropDown=function(){if(this.outerClickSubscription)this.outerClickSubscription.dispose();this.outerClickSubscription=undefined;if(!this.dropDownOpen)return;this.dropDownOpen=false};o.prototype.handleOuterClick=function(e){if(!e)return true;if(this.allowMouseDownFlag){this.allowMouseDownFlag=false;return true}e.stopPropagation();this.hideDropDown();return true};o.prototype.handleInnerClick=function(e){this.allowMouseDownFlag=true;return true};var a;o.defaultConfig={editMask:"04/08/03",displayMask:"04/08/03",nullText:"",allowNull:true,allowCustomItems:false,minValue:new Date(t.MIN_YEAR,0,1),maxValue:new Date(t.MAX_YEAR,t.MONTHS_IN_YEAR-1,t.MAX_DAYS_IN_MONTH),timeMode:false,enabled:true,firstDayOfWeek:0};r.__decorate([i.computedFrom("enabled","config.readOnly","linkCommand.command"),r.__metadata("design:type",Boolean),r.__metadata("design:paramtypes",[])],o.prototype,"isEditLink",null);r.__decorate([i.computedFrom("config.enabled","config.readOnly"),r.__metadata("design:type",Boolean),r.__metadata("design:paramtypes",[])],o.prototype,"ROMode",null);r.__decorate([i.bindable,r.__metadata("design:type",Object)],o.prototype,"config",void 0);r.__decorate([i.bindable({defaultBindingMode:i.bindingMode.twoWay}),r.__metadata("design:type",Object)],o.prototype,"value",void 0);o=a=r.__decorate([i.autoinject,i.customElement("qp-datetime-edit"),r.__metadata("design:paramtypes",[Element,i.EventManager,i.TaskQueue])],o);return o}(o.QpBaseFieldEditor);t.QpDatetimeEditCustomElement=m;var b=function(){function e(){this.n0=-1;this.n1=-1}return e}();var v=function(){function e(){}return e}();var x=function(){function e(e){this.element=e;this.selStart=0;this.selEnd=0}e.prototype.refreshSelection=function(){var e=this.element;e.selectionStart=this.selStart;e.selectionEnd=this.selEnd};e.prototype.select=function(e,t){var r=this.element;var i=r.value.length;if(e===undefined||e<0){e=0;t=i}else if(t===undefined){t=e}if(t>=i)t=i;else if(t<e)t=e;if(e>t)e=t;this.selStart=e;this.selEnd=t;if(r.selectionStart!=null){if(e===0&&t===i)r.select();else{r.selectionStart=e;r.selectionEnd=t}}else r.select()};e.prototype.getSelectedText=function(){var e="";var t=this.element;this.selStart=this.selEnd=0;if(t.selectionStart!=null&&t.selectionEnd!=null){this.selStart=t.selectionStart;this.selEnd=t.selectionEnd;if(this.selStart<this.selEnd){e=t.value.substring(this.selStart,this.selEnd)}}return e};return e}();t.TextRange=x}));define("controls/global/date-editor/qp-datetime-edit-utc",["require","exports","tslib","aurelia-framework"],(function(e,t,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpDatetimeEditUtcCustomElement=void 0;var n=function(){function e(){this.conversionInProgress=false}e.prototype.valueChanged=function(e){if(this.conversionInProgress)return;this.conversionInProgress=true;try{this.convertedDate=new Date(e)}catch(e){this.convertedDate=new Date}this.conversionInProgress=false};e.prototype.convertedDateChanged=function(e){if(this.conversionInProgress)return;this.conversionInProgress=true;try{if(!e)this.value="";if(e instanceof Date){this.value=new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString()}}catch(e){this.value=""}this.conversionInProgress=false};r.__decorate([i.bindable,r.__metadata("design:type",Object)],e.prototype,"config",void 0);r.__decorate([i.bindable,r.__metadata("design:type",Object)],e.prototype,"value",void 0);r.__decorate([i.observable({changeHandler:"convertedDateChanged"}),r.__metadata("design:type",Date)],e.prototype,"convertedDate",void 0);e=r.__decorate([i.customElement("qp-datetime-edit-utc")],e);return e}();t.QpDatetimeEditUtcCustomElement=n}));define("text!controls/global/date-editor/qp-datetime-edit-utc.html",[],(function(){return'<template><qp-datetime-edit config.bind="config" value.two-way="convertedDate" containerless></qp-datetime-edit></template>'}));define("text!controls/global/date-editor/qp-datetime-edit.css",[],(function(){return".qp-datetime__editor {\r\n\tbackground-color: #FFFFFF;\r\n\theight: 24px;\r\n\tposition: relative;\r\n\tcursor: default;\r\n\tborder: #D2D4D7 1px solid;\r\n\tbox-sizing: border-box;\r\n\t-webkit-box-sizing: border-box;\r\n\t-moz-box-sizing: border-box;\r\n\tfont-size: 13px;\r\n}\r\n\r\n.qp-datetime__editor .editorCont {\r\n\tposition: relative;\r\n\toverflow: hidden;\r\n\tmargin-right: 18px;\r\n\theight: 100%;\r\n}\r\n\r\n.qp-datetime__editor .editorWrap {\r\n\theight: 100%;\r\n\twhite-space: nowrap;\r\n\toverflow: hidden;\r\n\ttext-overflow: ellipsis;\r\n}\r\n\r\n.qp-datetime__editor input {\r\n\twidth: 100%;\r\n\theight: 100% !important;\r\n\tpadding: 0px 4px 0px 6px;\r\n\tborder-width: 0px !important;\r\n\t-webkit-box-shadow: none !important;\r\n\t        box-shadow: none !important;\r\n\tbackground-color: transparent;\r\n\r\n\tborder: #D2D4D7 1px solid;\r\n\tpadding: 3px 6px;\r\n\tmargin-bottom: 0px;\r\n\tmargin-top: 0px;\r\n\tbox-sizing: border-box;\r\n\t-webkit-box-sizing: border-box;\r\n\t-moz-box-sizing: border-box;\r\n}\r\n\r\n.qp-datetime__editor .buttonsCont {\r\n\tposition: absolute;\r\n\ttop: 0px;\r\n\tright: 1px;\r\n\theight: 100%;\r\n}\r\n\r\n.qp-datetime__editor .center:before {\r\n\tcontent: '';\r\n\tdisplay: inline-block;\r\n\theight: 100%;\r\n\tvertical-align: middle;\r\n}\r\n\r\n.qp-datetime__editor .sprite-icon {\r\n\tdisplay: inline-block;\r\n\tposition: relative;\r\n\ttext-align: left;\r\n\tvertical-align: middle;\r\n\toverflow: hidden;\r\n\tdirection: ltr;\r\n}\r\n\r\n.qp-datetime__editor .control-icon {\r\n\twidth: 14px;\r\n\theight: 15px;\r\n\tmargin-top: 2px;\r\n\tfont-size: 12px;\r\n}\r\n\r\n.qp-datetime__editor .sprite-icon .control-icon-img {\r\n\tfont-family: 'FontAwesome' !important;\r\n\tspeak: none;\r\n\tfont-style: normal;\r\n\tfont-weight: normal;\r\n\tfont-variant: normal;\r\n\ttext-transform: none;\r\n\tline-height: 1;\r\n\t-webkit-font-smoothing: antialiased;\r\n\t-moz-osx-font-smoothing: grayscale;\r\n\tposition: absolute;\r\n\ttop: 50%;\r\n\t-webkit-transform: translateY(-50%);\r\n\t        transform: translateY(-50%);\r\n\topacity: 0.64;\r\n\tcursor: pointer;\r\n}\r\n\r\n.qp-datetime__editor .control-icon-img:before {\r\n\tcontent: \"\\e9e0\";\r\n}\r\n\r\n.qp-datetime__editor.ReadOnly {\r\n\tbackground-color: transparent;\r\n\tborder-top-color: transparent;\r\n\tborder-left-color: transparent;\r\n\tborder-right-color: transparent;\r\n\tborder-bottom-color: #E0E4E8;\r\n\tborder-bottom-style: dotted;\r\n}"}));define("text!controls/global/date-editor/qp-datetime-edit.html",[],(function(){return'<template css="display: ${config.hidden ? \'none\': \'inline-block\'};"><require from="./qp-datetime-edit.css"></require><require from="../options/qp-options"></require><div id="${config.id}" class="${config.class} qp-datetime__editor dropDown ${hasFocus ? \'focus\' : \'\'} ${ROMode ? \'ReadOnly\' : \'\'}" buttons.bind="ROMode ? \'0\' : \'\' & attr" css="display: ${config.hidden ? \'none\': \'block\'}; ${config.width ? \'width: \'+config.width+\'px\' : \'\'}"><div class="editorCont"><div class="editorWrap"><input id="${config.id}_text" ref="elemText" name="${config.name}$text" type="text" tabindex="${config.tabIndex}" class="editor ${ROMode ? \'ReadOnly\' : \'\'}" keydown.capture="processKeyDown($event)" keypress.capture="processKeyPress($event)" focus.capture="processFocus($event)" blur.capture="processBlur($event)" beforepaste.delegate="processBeforePaste($event)" paste.delegate="processPaste($event)" selectstart.delegate="processSelectStart($event)" input.delegate="processInput($event)" value.to-view="textValue" focus.bind="focused"></div></div><div class="buttonsCont" mousedown.capture="toggleCalendar($event)"><span class="center"></span><div class="sprite-icon control-icon" icon="DropDownN" type="sel" css="${ROMode ? \'display: none;\' : \'\'}"><div class="control-icon-img control-DropDownN"></div></div></div></div><div if.bind="dropDownOpen" style="position:fixed;width:100vw;height:100vh;top:0;left:0;z-index:1000" mousedown.trigger="handleOuterClick($event)"><div glue-to.bind="elemText" style="background-color:#fff;z-index:1000;max-width:412px;max-height:269px" mousedown.trigger="handleInnerClick($event)"><qp-options if.bind="config.timeMode" config.bind="timeItems" value.to-view="[getValueOrToday()]" options-for.bind="element" valuechanged.delegate="acceptDateFromCalendar($event)"></qp-options><qp-calendar else config.to-view="{\'customItems\': config.customItems, \'firstDayOfWeek\': config.firstDayOfWeek}" value.to-view="getValueOrToday()" valuechanged.delegate="acceptDateFromCalendar($event)"></qp-calendar></div></div></template>'}));define("controls/global/drop-down/qp-drop-down",["require","exports","tslib","aurelia-framework","aurelia-event-aggregator","aurelia-logging","apps/enhance/services/control-helper","aurelia-pal","../base-field-editor","plugins/happeded-on-body"],(function(e,t,r,i,n,o,a,s,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DDElement=t.QpDropDownCustomElement=void 0;var c=o.getLogger("drop-down");var p=1e3;var u=10;var f=function(e){r.__extends(t,e);function t(t,i,n){var o=e.call(this)||this;o.element=t;o.taskQueue=i;o.eventAggregator=n;o.value=null;o.valueArray=[];o.searchString="";o.searchTimeout=undefined;o.prepareHighlightIdx=undefined;o.showOptions=false;o.hasFocus=false;o.valueText="";o.highlightedIndex=undefined;o.autoSuggest=false;o.currentImageUrl=undefined;o.addConfigSetter("options",(function(e){var t=o.config.options;t.splice.apply(t,r.__spreadArray([0,t.length],e))}));o.addConfigSetter("multiSelect","allowMultiSelect");o.addConfigSetter("type","valueType");o.addConfigSetter("exclusiveValues",(function(e){return o.config.allowEdit=!e}));o.addConfigSetter("nullable","allowNull");return o}o=t;t.prototype.detached=function(){if(this.optionsObserver)this.optionsObserver.dispose()};t.prototype.attached=function(){var e;if(this.config){this.options=undefined;this.autoSuggest=this.config.autoSuggest==null?((e=this.config.options)===null||e===void 0?void 0:e.length)>u:this.config.autoSuggest;this.subscribeToOptionsChange()}};Object.defineProperty(t.prototype,"ROMode",{get:function(){return this.config&&(this.config.readOnly||!this.config.enabled)},enumerable:false,configurable:true});t.prototype.configChanged=function(e,t){var r,i;if(!this.config)this.config={};(r=this.optionsObserver)===null||r===void 0?void 0:r.dispose();a.applyDefaultValues(this.config,o.defaultConfig);if(!this.config.options)this.config.options=[];if(t===undefined){if(this.config.value)this.value=this.config.value}this.autoSuggest=this.config.autoSuggest==null?((i=this.config.options)===null||i===void 0?void 0:i.length)>u:this.config.autoSuggest;this.subscribeToOptionsChange();this.options=undefined};t.prototype.syncValueTextWithValue=function(){var e=this;if(!this.config)return;if(typeof this.value==="string"){var t=this.config.valuesSeparator;this.valueArray=!this.config.allowMultiSelect?[this.value]:this.value.split(t)}else if(this.value!=null)this.valueArray=[this.value.toString()];else this.valueArray=[];var r=this.valueText;this.valueText="";if(this.config){this.valueArray.forEach((function(t){var i=e.config.options.find((function(e,i){if(e.value===t&&e.text===r){e.selected=true;return true}return false}));if(!i){i=e.config.options.find((function(e,r){if(e.value===t){e.selected=true;return true}return false}))}if(i){if(e.valueText)e.valueText+=", ";e.valueText+=i.text}else if(e.config.allowEdit){e.valueText=e.value||""}}))}};t.prototype.valueChanged=function(e,t){var r=this;var i;this.config&&this.config.options&&this.config.options.forEach((function(e){return e.selected=false}));this.syncValueTextWithValue();this.options=undefined;this.currentImageUrl=this.config&&this.config.options&&((i=this.config.options.find((function(e){return e.value==r.value})))===null||i===void 0?void 0:i.imageUrl);if(this.config&&this.config.allowMultiSelect){this.options=this.getOptions();this.options.forEach((function(e){r.config.options.find((function(t,r){if(t.value===e.value){e.selected=t.selected;return true}return false}))}))}};t.prototype.enterHighlight=function(e){this.prepareHighlightIdx=e};t.prototype.commitHighlight=function(e){if(this.prepareHighlightIdx===e){this.highlight(e);this.prepareHighlightIdx=undefined}};t.prototype.highlight=function(e){if(this.showOptions)this.highlightedIndex=e};t.prototype.select=function(e,t){this.appendValue(e.value);if(!this.config.allowMultiSelect){this.valueText=e.text;this.hide()}t&&t.stopPropagation()};t.prototype.clearSelection=function(e){e.preventDefault();e.stopImmediatePropagation();this.value=null;return false};t.prototype.toggleSelector=function(e){if(this.ROMode)return true;e.preventDefault();e.stopImmediatePropagation();this.inputElement.focus();if(this.showOptions){this.hide()}else{this.show(true)}return false};t.prototype.show=function(e){var t=this;if(e===void 0){e=false}this.showOptions=true;if(!e&&(this.config.allowEdit||this.autoSuggest))this.filter(this.valueText);var r=this.getOptions();var i=function(e){var t=r[e];var i=n.valueArray.find((function(e){return e===t.value}));if(i){n.highlight(e);return"break"}};var n=this;for(var o=0;o<r.length;++o){var a=i(o);if(a==="break")break}this.eventAggregator.publish(d.MOUSE_DOWN_REACHED_BODY);this.taskQueue.queueTask((function(){t.scrollIntoView();t.documentMouseDownSubscription=t.eventAggregator.subscribe(d.MOUSE_DOWN_REACHED_BODY,(function(){return t.hide()}))}))};t.prototype.unsubscribeFromMouseDownOnDocument=function(){var e;(e=this.documentMouseDownSubscription)===null||e===void 0?void 0:e.dispose();this.documentMouseDownSubscription=undefined};t.prototype.hide=function(){this.unsubscribeFromMouseDownOnDocument();this.showOptions=false;this.highlightedIndex=undefined};t.prototype.advanceSelection=function(e){var t=this.getOptions();if(this.highlightedIndex==null){if(e>=0)this.highlightedIndex=-1;else this.highlightedIndex=t.length}this.highlightedIndex+=e;if(this.highlightedIndex<0)this.highlightedIndex=0;else if(this.highlightedIndex>=t.length)this.highlightedIndex=t.length-1;if(this.optionsPane){this.scrollIntoView()}};t.prototype.ignoreClicks=function(e){e.preventDefault();e.stopImmediatePropagation()};t.prototype.onFocus=function(){if(this.config.allowEdit||this.autoSuggest){this.inputElement.select()}return true};t.prototype.onBlur=function(){this.hide();if(this.config.allowNull&&!this.valueText){this.value=null}else if(this.config.allowEdit){var e=this.findElementByText(this.valueText);if(e)this.value=e.value;else this.value=this.valueText}else if(this.autoSuggest){var e=this.findElementByText(this.valueText);if(e)this.value=e.value;else this.syncValueTextWithValue()}return true};t.prototype.onPaste=function(e){if(this.config.allowEdit||this.autoSuggest)return true;return false};t.prototype.onInput=function(e){this.filter(this.valueText);if(!this.showOptions&&this.autoSuggest)this.show();return false};t.prototype.onKeyPress=function(e){var t=this;this.searchString=this.searchString+e.key;if(this.searchTimeout!==undefined)s.PLATFORM.global.clearTimeout(this.searchTimeout);if(this.config.allowEdit||this.autoSuggest){if(!this.showOptions)this.show();return true}this.search(this.searchString);this.searchTimeout=s.PLATFORM.global.setTimeout((function(){t.searchString="";t.searchTimeout=undefined}),p);return false};t.prototype.onKeyDown=function(e){var t=false;switch(e.key){case"Down":case"ArrowDown":if(!this.showOptions){this.show(true);if(this.highlightedIndex==null)this.advanceSelection(1)}else this.advanceSelection(1);t=true;break;case"Up":case"ArrowUp":if(!this.showOptions){this.show(true);if(this.highlightedIndex==null)this.advanceSelection(-1)}else this.advanceSelection(-1);t=true;break;case"Enter":if(this.highlightedIndex!==undefined)this.select(this.getOptions()[this.highlightedIndex]);break;case"Esc":case"Escape":this.hide();t=true;break}if(!(this.config.allowEdit||this.autoSuggest)){switch(e.key){case" ":if(this.highlightedIndex!==undefined){this.select(this.getOptions()[this.highlightedIndex]);t=true}break;case"Backspace":if(this.config.allowMultiSelect)this.value="";if(this.config.allowNull)this.value=null;t=true;break}}if(t){e.stopPropagation();if(this.searchTimeout!==undefined)clearTimeout(this.searchTimeout);return false}return true};t.prototype.scrollIntoView=function(){var e,t;if(this.highlightedIndex!=null){if("scrollBehavior"in document.documentElement.style){(e=this.optionsPane.children[this.highlightedIndex])===null||e===void 0?void 0:e.scrollIntoView({block:"nearest"})}else{(t=this.optionsPane.children[this.highlightedIndex])===null||t===void 0?void 0:t.scrollIntoView(false)}}};t.prototype.cloneOptions=function(e){this.options=e.map((function(e){var t=e.selected,r=e.value,i=e.imageUrl,n=e.text,o=e.enabled;return{selected:t,value:r,imageUrl:i,text:n,enabled:o}}))};t.prototype.getOptions=function(){if(!this.options){this.cloneOptions(this.config.options)}return this.options||[]};t.prototype.subscribeToOptionsChange=function(){var e=this;this.optionsObserver&&this.optionsObserver.dispose();if(!this.config.options)this.config.options=[];this.optionsObserver=this.bindingEngine.collectionObserver(this.config.options).subscribe((function(){e.options=undefined;e.autoSuggest=e.config.autoSuggest==null?e.config.options.length>u:e.config.autoSuggest;e.syncValueTextWithValue()}))};t.prototype.filter=function(e){this.highlightedIndex=0;if(!this.autoSuggest||!e||!this.config.options||this.config.options.length===0){this.cloneOptions(this.config.options);return}var t=e.toLocaleLowerCase();var r=new Array;this.config.options.forEach((function(e){if(e.text.toLocaleLowerCase().indexOf(t)>=0){r.push(e)}}));this.cloneOptions(r)};t.prototype.search=function(e){var t=this;e=e.toLocaleLowerCase();this.getOptions().find((function(r,i){if(r.text.toLocaleLowerCase().indexOf(e)===0){t.highlight(i);t.select(r);return true}return false}))};t.prototype.findElementByText=function(e){var t=this;e=e.toLocaleLowerCase();return this.getOptions().find((function(r,i){if(e&&r.text.toLocaleLowerCase()===e||!e&&!r.text){t.highlight(i);t.select(r);return true}return false}))};t.prototype.appendValue=function(e){var t=this.valueArray.indexOf(e);if(this.config.allowMultiSelect){if(t===-1){this.valueArray.push(e)}else{this.valueArray.splice(t,1)}var r=this.config.valuesSeparator;this.value=this.valueArray.join(r)}else{this.value=a.netTypeConvert(e,this.config.valueType)}};var o;t.defaultConfig={enabled:true,required:false,valueType:a.NetType.String,autoSuggest:null,allowNull:true,valuesSeparator:",",colorMode:false,options:null};r.__decorate([i.bindable,r.__metadata("design:type",Object)],t.prototype,"config",void 0);r.__decorate([i.bindable,r.__metadata("design:type",Object)],t.prototype,"value",void 0);r.__decorate([i.computedFrom("config.enabled","config.readOnly"),r.__metadata("design:type",Boolean),r.__metadata("design:paramtypes",[])],t.prototype,"ROMode",null);t=o=r.__decorate([i.customElement("qp-drop-down"),i.autoinject,r.__metadata("design:paramtypes",[Element,i.TaskQueue,n.EventAggregator])],t);return t}(l.QpBaseFieldEditor);t.QpDropDownCustomElement=f;var h=function(){function e(){this.selected=false;this.enabled=true}return e}();t.DDElement=h}));define("text!controls/global/drop-down/qp-drop-down.css",[],(function(){return".qp-drop-down,\r\n.qp-drop-down * {\r\n  -webkit-box-sizing: border-box;\r\n          box-sizing: border-box;\r\n}\r\n\r\nqp-drop-down {\r\n\tdisplay: block;\r\n\tborder: 0;\r\n}\r\n\r\nqp-drop-down.GridCellEditor div.drop-down__editor {\r\n\theight: 100%;\r\n\t-webkit-box-sizing: content-box;\r\n\t        box-sizing: content-box;\r\n\twidth: 100%;\r\n}\r\n\r\n\r\n.drop-down__editor {\r\n\tbackground-color: #FFFFFF;\r\n\theight: 24px;\r\n\tposition: relative;\r\n\tcursor: default;\r\n\tborder: #D2D4D7 1px solid;\r\n\tbox-sizing: border-box;\r\n\t-webkit-box-sizing: border-box;\r\n\t-moz-box-sizing: border-box;\r\n\tfont-size: 13px;\r\n}\r\n\r\n.drop-down__editor.ReadOnly {\r\n\tbackground-color: transparent;\r\n\t-webkit-box-shadow: none;\r\n\t        box-shadow: none;\r\n\tborder-color: transparent;\r\n\tborder-bottom-color: #E0E4E8;\r\n\tborder-bottom-style: dotted;\r\n\tborder-width: 1px;\r\n}\r\n\r\n.drop-down__editor.focus {\r\n\tborder: 1px solid #007ACC;\r\n\tborder: 1px solid var(--primary-color, #007ACC);\r\n\t-webkit-box-shadow: 0px 0px 2px 0px #007ACC;\r\n\t        box-shadow: 0px 0px 2px 0px #007ACC;\r\n\t-webkit-box-shadow: 0px 0px 2px 0px var(--primary-color, #007ACC);\r\n\t        box-shadow: 0px 0px 2px 0px var(--primary-color, #007ACC);\r\n}\r\n\r\n.drop-down__editor .drop-down__display-text.drop-down__invisible + span + span.drop-down__text {\r\n\tdisplay: inline;\r\n\tline-height: 22px;\r\n}\r\n\r\n.drop-down__editor .drop-down__text {\r\n\tvertical-align: middle;\r\n\tpadding: 0px 6px 0px 6px;\r\n\tdisplay: none;\r\n}\r\n\r\n.drop-down__editor .editorCont {\r\n\tposition: relative;\r\n\toverflow: hidden;\r\n\tmargin-right: 18px;\r\n\theight: 100%;\r\n}\r\n\r\n.drop-down__editor .editorWrap {\r\n\theight: 100%;\r\n\twhite-space: nowrap;\r\n\toverflow: hidden;\r\n\ttext-overflow: ellipsis;\r\n}\r\n\r\n.drop-down__editor .buttonsCont {\r\n\tposition: absolute;\r\n\ttop: 0px;\r\n\tright: 1px;\r\n\theight: 100%;\r\n}\r\n\r\n.drop-down__editor .center:before {\r\n\tcontent: '';\r\n\tdisplay: inline-block;\r\n\theight: 100%;\r\n\tvertical-align: middle;\r\n}\r\n\r\n.drop-down__editor .sprite-icon {\r\n\tdisplay: inline-block;\r\n\tposition: relative;\r\n\ttext-align: left;\r\n\tvertical-align: middle;\r\n\toverflow: hidden;\r\n\tdirection: ltr;\r\n}\r\n\r\n.drop-down__editor .control-icon {\r\n\twidth: 14px;\r\n\theight: 15px;\r\n\tmargin-top: 2px;\r\n\tfont-size: 12px;\r\n}\r\n\r\n.drop-down__editor .sprite-icon .control-icon-img {\r\n\tfont-family: 'FontAwesome' !important;\r\n\tspeak: none;\r\n\tfont-style: normal;\r\n\tfont-weight: normal;\r\n\tfont-variant: normal;\r\n\ttext-transform: none;\r\n\tline-height: 1;\r\n\t-webkit-font-smoothing: antialiased;\r\n\t-moz-osx-font-smoothing: grayscale;\r\n\tposition: absolute;\r\n\ttop: 50%;\r\n\t-webkit-transform: translateY(-50%);\r\n\t        transform: translateY(-50%);\r\n\topacity: 0.64;\r\n\tcursor: pointer;\r\n}\r\n\r\n.drop-down__editor .control-icon-img.control-DropDownN:before {\r\n\tcontent: \"\\e9e0\";\r\n}\r\n\r\n.drop-down__display-text {\r\n  pointer-events: none;\r\n\r\n  margin: 0;\r\n  border: 0;\r\n  padding: 0 4px 0 6px;\r\n  line-height: 24px;\r\n\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n\ttext-overflow: ellipsis;\r\n\t\r\n\twidth: 100%;\r\n\theight: 100% !important;\r\n\tpadding: 0px 4px 0px 6px;\r\n\tborder-width: 0px !important;\r\n\t-webkit-box-shadow: none !important;\r\n\t        box-shadow: none !important;\r\n\tbackground-color: transparent;\r\n}\r\n\r\n.drop-down__display-text.drop-down__invisible {\r\n\tposition: absolute;\r\n\ttop: -40px;\r\n\tbackground-color: transparent;\r\n}\r\n\r\n.drop-down__current-color {\r\n\theight: 14px;\r\n\twidth: 14px;\r\n\tdisplay: inline-block;\r\n\tvertical-align: middle;\r\n\tborder-radius: 4px;\r\n\tmargin: 0 5px 0 0;\r\n}\r\n\r\n.drop-down__current-image {\r\n\tmargin-right: 5px;\r\n\tfloat: none;\r\n\tvertical-align: middle;\r\n\tdisplay: inline-block;\r\n\twidth: 16px;\r\n\theight: 16px;\r\n\tfont-size: 15px;\r\n}\r\n\r\n.drop-down__image {\r\n\tfloat: none;\r\n\tvertical-align: middle;\r\n}\r\n\r\n.drop_down__color {\r\n\theight: 14px;\r\n\twidth: 14px;\r\n\tdisplay: inline-block;\r\n\tvertical-align: middle;\r\n\tborder-radius: 4px;\r\n\tmargin: 2px;\r\n}\r\n\r\n.drop-down__options-pane {\r\n  max-height: 210px;\r\n  overflow-y: auto;\r\n  position: absolute;\r\n  z-index: 10000;\r\n  height: initial;\r\n\tdisplay: block;\r\n\tfont-size: 13px;\r\n\r\n  border: #D2D4D7 1px Solid;\r\n  background-color: White;\r\n  box-shadow: 3px 3px 4px rgba(0, 0, 0, 0.64);\r\n  -webkit-box-shadow: 4px 4px 6px rgba(0, 0, 0, 0.64);\r\n\t-moz-box-shadow: 4px 4px 6px rgba(0, 0, 0, 0.64);\r\n\tbox-sizing: border-box;\r\n\t-webkit-box-sizing: border-box;\r\n\t-moz-box-sizing: border-box;\r\n}\r\n\r\n.drop-down__option {\r\n\tmin-height: 1em;\r\n\tpadding: 2px 4px;\r\n\tvertical-align: middle;\r\n\ttext-align: left;\r\n\twhite-space: nowrap;\r\n\tcursor: default;\r\n}\r\n\r\n.drop-down__option.ddItem {\r\n\tpadding: 2px 4px;\r\n\tvertical-align: middle;\r\n\ttext-align: left;\r\n\twhite-space: nowrap;\r\n\tcursor: default;\r\n}\r\n \r\n.drop-down__option.ddSelection {\r\n\tbackground-color: #007ACC;\r\n\tbackground-color: var(--primary-color, #007ACC);\r\n\tcolor: #FFFFFF;\r\n}\r\n\r\nqp-options .ddItemDisabled {\r\n\tcursor: default;\r\n\tbackground-color: white;\r\n\tcolor: rgba(0, 0, 0, 0.87);\r\n\topacity: 0.26 !important;\r\n}\r\n \r\n "}));define("text!controls/global/drop-down/qp-drop-down.html",[],(function(){return'<template enabled.bind="!!config.enabled & attr" class="${ROMode ? \'ReadOnly\' : \'\'}"><require from="./qp-drop-down.css"></require><div id="${config.id}" tabindex="-1" class="drop-down__editor ${config.class} ${hasFocus ? \'focus\':\'\'} ${ROMode ? \'ReadOnly\' : \'\'} size-${config.size}" ref="editorWrap" css="display: ${config.hidden ? \'none\': \'block\'};" mousedown.trigger="toggleSelector($event)" buttons.bind="ROMode ? \'0\' : \'\' & attr"><div class="editorCont"><div class="editorWrap" title=""><input name="${config.name}$text" type="text" id="${config.id}_text" ref="inputElement" value.bind="valueText" tabindex="${config.tabIndex}" keydown.capture="onKeyDown($event)" keypress.delegate="onKeyPress($event)" input.delegate="onInput($event)" focus.bind="hasFocus" focus.capture="onFocus()" blur.capture="onBlur()" paste.delegate="onPaste($event)" class="drop-down__display-text ${ROMode ? \'ReadOnly\' : \'\'} ${config.allowEdit || (autoSuggest && hasFocus) ? \'\' : \'drop-down__invisible\'}" readonly.bind="ROMode ? \'readonly\' : null & attr"><span class="center"></span><span class="drop-down__text"><div if.bind="config.colorMode" class="drop-down__current-color" css="${\'background: \'+value}"></div><qp-icon if.bind="currentImageUrl" imagesrc.bind="currentImageUrl" height="100%" width="100%" class="drop-down__current-image"></qp-icon>${valueText}</span></div></div><div class="buttonsCont"><span class="center"></span><div if.bind="config.clearButton && !ROMode" class="sprite-icon control-icon" icon="ClearN" type="clear" mousedown.trigger="clearSelection($event)"><div class="control-icon-img control-ClearN"></div></div><div class="sprite-icon control-icon" icon="DropDownN" type="sel" css="${ROMode ? \'display: none;\' : \'\'}"><div class="control-icon-img control-DropDownN"></div></div></div></div><div if.bind="showOptions" id="${config.id}_dd" class="drop-down__options-pane ${config.class}" ref="optionsPane" glue-to.bind="editorWrap" css="width: auto; min-width: ${editorWrap.clientWidth}px; max-width: 50vw;" mousedown.capture="ignoreClicks($event)"><div repeat.for="op of options" click.capture="select(op,$event)" class="drop-down__option ddItem ${highlightedIndex === $index ? \'ddSelection\':\'\'}" mouseenter.capture="enterHighlight($index)" mousemove.capture="commitHighlight($index) & throttle:100"><div if.bind="config.allowMultiSelect" class="sprite-icon control-icon" icon.bind="op.selected ? \'GridCheck\' : \'GridUncheck\' & attr" data-type="check" style="margin-left:2px;margin-right:5px"><div class="control-icon-img control-${op.selected ? \'GridCheck\' : \'GridUncheck\'}"></div></div><qp-icon if.bind="op.imageUrl" imagesrc.bind="op.imageUrl" class="drop-down__image"></qp-icon><div if.bind="config.colorMode" class="drop_down__color" css="${\'background: \'+op.value}"></div> ${op.text || \'&nbsp;\'} </div></div></template>'}));define("controls/global/field-editor/qp-field-editor",["require","exports","tslib","aurelia-framework","aurelia-dependency-injection","plugins/selector-service/selector-service","aurelia-logging","../base-field-editor","descriptors/fieldstate","aurelia-dialog"],(function(e,t,r,i,n,o,a,s,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpFieldEditorCustomElement=void 0;var c=a.getLogger("qp-field-editor");var p=function(e){r.__extends(t,e);function t(t,r,i,n,o){var a=e.call(this)||this;a.element=t;a.selectorService=r;a.container=i;a.dialogService=n;a.tq=o;a.showSelector=false;a.suggesterOpen=false;a.displayMode="both";var s=["graph","viewName"];s.forEach((function(e){a.addConfigSetter(e,(function(t){return a.setSuggesterProperty(e,t)}))}));s=["valueField","descriptionName"];s.forEach((function(e){a.addConfigSetter(e,(function(t){return a.setSuggesterProperty(e,t,true)}))}));a.addConfigSetter("selectorMode",(function(e){return a.setSelectorMode(e)}));a.addConfigSetter("fieldList",(function(e,t){return e===null||e===void 0?void 0:e.forEach((function(e){return a.addSuggesterField(e)}))}));return a}t.prototype.setSelectorMode=function(e){if((e&l.PXSelectorMode.DisplayMode)===l.PXSelectorMode.DisplayMode){this.displayMode="both"}else if(e&l.PXSelectorMode.DisplayModeText){this.displayMode="text"}else if(e&l.PXSelectorMode.DisplayModeValue){this.displayMode="id"}};t.prototype.detached=function(){var e,t;(e=this.valueIdSubscr)===null||e===void 0?void 0:e.dispose();(t=this.valueTextSubscr)===null||t===void 0?void 0:t.dispose();this.valueIdSubscr=this.valueTextSubscr=undefined};t.prototype.setSuggesterProperty=function(e,t,r){if(r===void 0){r=false}this.ensureSuggester();var i=this.config.suggester;i[e]=t;if(this.gridConfig)this.gridConfig[e==="viewName"?"view":e]=t;if(r&&t)this.addSuggesterField(t)};t.prototype.addSuggesterField=function(e){if(!e)return;this.ensureSuggester();var t=this.config.suggester;if(!t.fields)t.fields=[];var r=t.fields.findIndex((function(t){var r;return((r=t.id)===null||r===void 0?void 0:r.toLowerCase())===(e===null||e===void 0?void 0:e.toLowerCase())}));if(r>=0)t.fields.splice(r,1);t.fields.push({id:e,filter:true,type:"String"});if(this.gridConfig)this.gridConfig.columns=this.suggesterFieldsToColumns(t.fields)};t.prototype.suggesterFieldsToColumns=function(e){return e===null||e===void 0?void 0:e.map((function(e){return{field:e.id,caption:e.label,width:100}}))};t.prototype.ensureSuggester=function(){if(!this.config.suggester){this.config.suggester={inlineArgs:true}}};t.prototype.configChanged=function(e){if(e){this.ensureSuggester();var t=e.suggester,r=t.viewName,i=t.graph;var n=this.suggesterFieldsToColumns(e.suggester.fields);this.gridConfig={dialogCaptionPrefix:e.dialogCaptionPrefix,selectButtonCaption:e.selectButtonCaption,graph:i,view:r,columns:n,valueField:e.suggester.valueField,descriptionName:e.suggester.descriptionName,displayName:e.suggester.displayName,showFilterBar:false,topBarItems:{select:{config:{action:"select",text:"Select",connotation:"Success"}}},adjustPageSize:true,pageSize:20,panel_id:e.id+"_pnl_gr",panel_tlb_id:e.id+"_pnl_tlb",id:e.id+"_grid"}}};t.prototype.displayModeChanged=function(){this.writeEditorValue()};t.prototype.editModeChanged=function(){var e=this;if(this.editMode){this.writeEditorValue();this.tq.queueMicroTask((function(){return e.editor.select()}))}};t.prototype.writeEditorValue=function(){var e;if(((e=this.value)===null||e===void 0?void 0:e.id)==null){this.editorValue="";return}var t=this.value.id.trim?this.value.id.trim():this.value.id;var r=this.value.text?this.value.text.trim():"";if(this.editMode){if(this.displayMode==="both"||this.displayMode==="id")this.editorValue=t;else this.editorValue=r;return}var i;switch(this.displayMode){case"both":if(r&&t!=r)i=t+" - "+r;else i=t;break;case"id":i=t;break;case"text":i=r}this.editorValue=i};t.prototype.editorValueChanged=function(){var e;if(((e=this.config)===null||e===void 0?void 0:e.suggester)&&this.displayMode==="text")this.config.suggester.suggestOnBlur=true};t.prototype.valueChanged=function(){var e=this;var t,r,i;(t=this.valueIdSubscr)===null||t===void 0?void 0:t.dispose();(r=this.valueTextSubscr)===null||r===void 0?void 0:r.dispose();this.valueIdSubscr=this.valueTextSubscr=undefined;this.writeEditorValue();if((i=this.config)===null||i===void 0?void 0:i.suggester)this.config.suggester.suggestOnBlur=false;if(this.value){this.valueIdSubscr=this.bindingEngine.propertyObserver(this.value,"id").subscribe((function(t){e.value={id:t,text:""};e.writeEditorValue()}));this.valueTextSubscr=this.bindingEngine.propertyObserver(this.value,"text").subscribe((function(t){e.writeEditorValue()}))}};t.prototype.openEditor=function(){var e=this;this.dialogService.open({viewModel:i.PLATFORM.moduleName("controls/global/screen-dialog/screen-dialog"),model:{screen:this.config.suggester.editScreen,selector:this.editor},lock:false,ignoreTransitions:true,position:function(t){var r=t;var i=e.editor.getBoundingClientRect(),n=i.bottom,o=i.left;r.style.left=o-30+"px";r.style.top=n-30+"px"}})};t.prototype.openSelector=function(e){var t,i,n;return r.__awaiter(this,void 0,void 0,(function(){var o,a;return r.__generator(this,(function(r){switch(r.label){case 0:if(!((i=(t=this.config)===null||t===void 0?void 0:t.suggester)===null||i===void 0?void 0:i.simpleSelect))return[3,1];this.editor.focus();this.suggesterOpen=!this.suggesterOpen;return[3,4];case 1:r.trys.push([1,3,,4]);return[4,this.selectorService.getSelectorValue(this.gridConfig,this.element,this.container,(n=this.value)===null||n===void 0?void 0:n.id)];case 2:o=r.sent();if(o){this.value=o}return[3,4];case 3:a=r.sent();return[3,4];case 4:e===null||e===void 0?void 0:e.preventDefault();e===null||e===void 0?void 0:e.stopImmediatePropagation();return[2,false]}}))}))};t.prototype.handleKeyDown=function(e){var t=this;if(e.key==="F3"){e.preventDefault();e.stopImmediatePropagation();this.openSelector();return false}else if(e.key==="Enter"){this.tq.queueTask((function(){var e=new KeyboardEvent("keydown",{key:"Tab",keyCode:9,composed:true,bubbles:true,cancelable:true});t.editor.dispatchEvent(e)}))}return true};t.prototype.onBlur=function(){var e;if(!this.editorValue){this.value=null;return true}if(this.displayMode==="text"){}else{if(this.editorValue!=((e=this.value)===null||e===void 0?void 0:e.id)){this.value={id:this.editorValue,text:""}}}this.editMode=false;this.writeEditorValue();return true};t.prototype.setSuggestedValue=function(e,t,r){var i;if(!e){this.value=null}else if(((i=this.value)===null||i===void 0?void 0:i.id)==e){this.value.text=t;this.writeEditorValue()}else this.value={id:e,text:t}};r.__decorate([i.bindable,r.__metadata("design:type",Object)],t.prototype,"config",void 0);r.__decorate([i.bindable,r.__metadata("design:type",Object)],t.prototype,"value",void 0);r.__decorate([i.observable,r.__metadata("design:type",Boolean)],t.prototype,"editMode",void 0);r.__decorate([i.observable,r.__metadata("design:type",String)],t.prototype,"displayMode",void 0);r.__decorate([i.observable,r.__metadata("design:type",String)],t.prototype,"editorValue",void 0);t=r.__decorate([i.autoinject,i.customElement("qp-selector"),r.__metadata("design:paramtypes",[Element,o.SelectorService,n.Container,d.DialogService,i.TaskQueue])],t);return t}(s.QpBaseFieldEditor);t.QpFieldEditorCustomElement=p;function u(e,t){if(e===null||e===void 0?void 0:e.trim)e=e.trim();if(t===null||t===void 0?void 0:t.trim)t=t.trim();return e==t}}));define("text!controls/global/field-editor/qp-field-editor.css",[],(function(){return'.qp-field-editor,\r\n.qp-field-editor * {\r\n\t-webkit-box-sizing: border-box;\r\n\t        box-sizing: border-box;\r\n}\r\n\r\nqp-selector {\r\n\tdisplay: block;\r\n}\r\n.qp-field-editor{\r\n\tbackground-color: #fff;\r\n\tborder: #D2D4D7 1px solid;\r\n}\r\n.err-l .qp-field-editor {\r\n\tborder: #f00 1px solid;\r\n}\r\n\r\n.war-l .qp-field-editor {\r\n\tborder: #FFC109 1px solid;\r\n}\r\n\r\n.qp-field-editor.editor{\r\n\tdisplay:-webkit-box;\r\n\tdisplay:-ms-flexbox;\r\n\tdisplay:flex;\r\n\tpadding:0;\r\n\tposition:relative;\r\n}\r\n\r\n.qp-field-editor.qp-field-editor-readonly {\r\n\tbackground-color: transparent;\r\n\tborder-color: transparent;\r\n\tborder-bottom-color: #E0E4E8;\r\n\tborder-bottom-style: dotted;\r\n}\r\n\r\n.qp-field-editor.focus {\r\n\tborder: 1px solid #007ACC;\r\n\tborder: 1px solid var(--primary-color, #007ACC);\r\n\t-webkit-box-shadow: 0px 0px 2px 0px #007ACC;\r\n\t        box-shadow: 0px 0px 2px 0px #007ACC;\r\n\t-webkit-box-shadow: 0px 0px 2px 0px var(--primary-color, #007ACC);\r\n\t        box-shadow: 0px 0px 2px 0px var(--primary-color, #007ACC);\r\n}\r\n\r\n.qp-field-editor input.editor-input {\r\n\tmargin: 0;\r\n\tborder: 0;\r\n\t-webkit-box-shadow: none !important;\r\n\t        box-shadow: none !important;\r\n\toutline: none;\r\n\twidth: 20px;\r\n\t-webkit-box-flex:1;\r\n\t    -ms-flex:1 1 auto;\r\n\t        flex:1 1 auto;\r\n\tpadding:0 4px 0 6px;\r\n\tbackground-color: transparent;\r\n\theight: 22px;\r\n}\r\n\r\n.qp-field-editor.qp-field-editor-readonly input.editor-input {\r\n\tdisplay: none;\r\n}\r\n\r\n/* .qp-field-editor input.editor-input[enabled="false"], .qp-field-editor input.editor-input[disabled] {\r\n\tbackground-color: transparent;\r\n\tbox-shadow: none;\r\n\tborder-color: transparent;\r\n\tborder-bottom-color: #E0E4E8;\r\n\tborder-bottom-style: dotted;\r\n\tborder-width: 1px;\r\n}*/\r\n/* .qp-field-editor input.editor-input[readonly] {\r\n\tbackground-color: #F5F7F8 !important;\r\n\tborder-top-color: transparent;\r\n\tborder-left-color: transparent;\r\n\tborder-right-color: transparent;\r\n\t\r\n\tborder-width: 1px;\r\n}  */\r\n\r\n.qp-field-editor input.editor-input[readonly]:focus {\r\n\tborder-width: 1px;\r\n\t-webkit-box-shadow: 0px 0px 0px 0px transparent;\r\n\t        box-shadow: 0px 0px 0px 0px transparent;\r\n\tborder-bottom-color: #D2D4D7;\r\n\r\n\tbackground-color: #F5F7F8;\r\n\tborder-top-color: transparent;\r\n\tborder-left-color: transparent;\r\n\tborder-right-color: transparent;\r\n}\r\n\r\n\r\n.qp-field-editor__display-text {\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\tright: 26px;\r\n\theight: 100%;\r\n\tpointer-events: none;\r\n\r\n\tmargin: 0;\r\n\tborder: 0;\r\n\tpadding: 0 4px 0 6px;\r\n\tline-height: 24px;\r\n\r\n\twhite-space: nowrap;\r\n\toverflow: hidden;\r\n\ttext-overflow: ellipsis;\r\n}\r\n\r\n.qp-field-editor__button {\r\n\tmargin: 2px 4px 2px 0;\r\n\tbackground: #fff;\r\n\tborder: 0;\r\n\twidth: 20px;\r\n\theight: 18px;\r\n\tcolor: #000;\r\n\tcursor: pointer;\r\n\tpadding: 1px 6px;\r\n}\r\n.qp-field-editor__button:focus {\r\n\tborder: 0;\r\n}\r\n\r\n.qp-field-editor__button > .buttonsCont {\r\n\tvertical-align: unset;\r\n\twidth: 16px;\r\n\theight: 16px;\r\n}\r\n\r\n.edit-mode .qp-field-editor__display-text {\r\n\tvisibility: hidden;\r\n}\r\n\r\n.edit-mode input.editor-input {\r\n\tcolor: initial;\r\n}\r\n\r\n.dialog-container{\r\n\tbackground:white;\r\n\tz-index: 1000;\r\n\t/* position: absolute; */\r\n\tmax-height: 500px;\r\n\r\n}\r\n.dialog-container.hide-selector{\r\n\tdisplay: none;\r\n}\r\n'}));define("text!controls/global/field-editor/qp-field-editor.html",[],(function(){return'<template class="qp-field-editor"><require from="./qp-field-editor.css"></require><require from="../suggester/elements/qp-suggester"></require><div class="editor qp-field-editor ${editMode?\'focus edit-mode\':\'\'} ${config.readOnly || !config.enabled ? \'qp-field-editor-readonly\' : \'\'}" ref="editorDiv" id="${config.id}" tabindex="-1"><input class="editor-input" id="${config.id}_text" name="${config.name}" tabindex="${config.tabIndex}" value.two-way="editorValue" ref="editor" blur.trigger="onBlur()" autocomplete="off" autocorrect="off" focus.from-view="editMode" keydown.delegate="handleKeyDown($event)" enabled.bind="config.enabled ? null : false & attr" readonly="${config.readOnly || !config.enabled ? true : null}" disabled="${config.readOnly || !config.enabled ? true : null}"> <button if.bind="!config.readOnly && !config.disabled && !config.enabled == false" type="button" mousedown.capture="openSelector($event)" class="qp-field-editor__button" tabindex="-1"><div class="buttonsCont sprite-icon control-icon" icon="SelectorN" type="sel"><div class="control-icon-img control-SelectorN"></div></div></button><div if.bind="config && config.suggester && config.suggester.editScreen" class="editBtnCont" click.trigger="openEditor()"><div><div class="sprite-icon control-icon" icon="EditN" type="edit"><div class="control-icon-img control-EditN"></div></div></div></div></div><qp-suggester if.bind="config.suggester && editor" config.bind="config.suggester" editor.two-way="editor" rect-element.bind="editorDiv" force-open.two-way="suggesterOpen" set-editor-value.call="setSuggestedValue(value,display,useUpdateValue)"></qp-suggester></template>'}));define("controls/global/grid/api-client",["require","exports","tslib","aurelia-framework","aurelia-fetch-client"],(function(e,t,r,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GridApiClient=void 0;var o=function(){function e(e){this.client=e;e.configure((function(e){e.rejectErrorResponses().withInterceptor({responseError:function(e){if(e instanceof Response){return e.json().then((function(e){console.error(e.ExceptionMessage);return Promise.reject(e)}))}return Promise.reject(e)}})}))}e.prototype.getGridData=function(e){return this.client.fetch("ui/grid",{method:"POST",body:n.json(e)}).then((function(e){return e.json()}))};e.prototype.saveGridLayout=function(e){return this.client.fetch("ui/grid/saveLayout",{method:"POST",body:n.json(e)}).then((function(e){return e.json()}))};e.prototype.resetGridLayout=function(e){return this.client.fetch("ui/grid/resetLayout",{method:"POST",body:n.json(e)}).then((function(e){return e.json()}))};e.prototype.saveGridFilter=function(e){return this.client.fetch("ui/grid/saveFilter",{method:"POST",body:n.json(e)}).then((function(e){return e.json()}))};e.prototype.removeGridFilter=function(e){return this.client.fetch("ui/grid/removeFilter",{method:"POST",body:n.json(e)}).then((function(e){return e.json()}))};e=r.__decorate([i.autoinject,r.__metadata("design:paramtypes",[n.HttpClient])],e);return e}();t.GridApiClient=o}));define("controls/global/grid/dialogs/columns-dialog",["require","exports","tslib","aurelia-framework","aurelia-dialog","controls/global/grid/qp-grid","controls/global/base-dialog/base-dialog"],(function(e,t,r,i,n,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ColumnsDialog=void 0;var s=function(e){r.__extends(t,e);function t(t){var r=e.call(this,t)||this;r.controller=t;r.minHeight=300;r.maxHeight=500;return r}t.prototype.activate=function(e){this.config=e;this.columns=r.__spreadArray([],e.columns);this.columns.forEach((function(e){return e.tag={visible:e.visible,skipTab:e.skipTab}}));this.cancelConfig={text:"Cancel"};this.okConfig={text:"Ok"};this.resetConfig={text:"Reset",enabled:!!e.hasSavedLayout}};t.prototype.deactivate=function(e){if(!e.wasCancelled){this.columns.forEach((function(e){e.visible=e.tag.visible;e.skipTab=e.tag.skipTab;delete e.tag}))}};t.prototype.getColumnIndex=function(e){return this.config.columns.findIndex((function(t){return t.field===e}))};t.prototype.getDragOverClass=function(e,t){if(this.dragInfo==null||t==null)return null;var r=this.getColumnIndex(e.field);var i=this.getColumnIndex(this.dragInfo.column.field);if(r===t)return"dragover "+(r>i?"after":"before")};t.prototype.processInput=function(e){var t;var i=this.elemText.value.toLowerCase();var n=this.config.columns.filter((function(e){var t=e.caption||e.field;return t&&t.toLowerCase().indexOf(i)>=0}));(t=this.columns).splice.apply(t,r.__spreadArray([0,this.columns.length],n))};t.prototype.processColClick=function(e,t){if(t.allowShowHide===o.GridColumnShowHideMode.True)t.tag.visible=!t.tag.visible};t.prototype.processSkipTabClick=function(e,t){t.tag.skipTab=!t.tag.skipTab;e.stopPropagation()};t.prototype.processSelectStart=function(e){e.preventDefault()};t.prototype.processDragStart=function(e,t){this.dragInfo={column:t,targetIndex:undefined};return true};t.prototype.processDragOver=function(e,t){if(this.dragInfo&&this.dragInfo.column!==t){var r=e.target.getBoundingClientRect();var i=2;var n=e.clientY<r.top+r.height/i;var o=this.getColumnIndex(t.field)+(n?0:1);var a=this.getColumnIndex(this.dragInfo.column.field);if(o>a)o--;this.dragInfo.targetIndex=o===a?undefined:o}else if(this.dragInfo){this.dragInfo.targetIndex=undefined}};t.prototype.processDragLeave=function(e){if(this.dragInfo&&!this.elemColsList.contains(e.relatedTarget)){this.dragInfo.targetIndex=undefined}};t.prototype.processDrop=function(e,t){if(this.dragInfo){var i=this.dragInfo.targetIndex;var n=this.getColumnIndex(this.dragInfo.column.field);var o=this.config.columns;if(i!==undefined){o.splice(i,0,o.splice(n,1)[0]);this.columns=r.__spreadArray([],o)}this.dragInfo=undefined}};r.__decorate([i.bindable,r.__metadata("design:type",String)],t.prototype,"filter",void 0);r.__decorate([i.bindable,r.__metadata("design:type",Object)],t.prototype,"dragInfo",void 0);t=r.__decorate([i.autoinject,r.__metadata("design:paramtypes",[n.DialogController])],t);return t}(a.BaseDialog);t.ColumnsDialog=s}));define("text!controls/global/grid/dialogs/columns-dialog.css",[],(function(){return".columns-dialog .cols-list\r\n{\r\n\toverflow-y: auto;\r\n\theight: 100%;\r\n}\r\n.columns-dialog .cols-list > div\r\n{\r\n\tpadding: 4px;\r\n\tcursor: pointer;\r\n}\r\n.columns-dialog .cols-list > div:hover\r\n{\r\n\tbackground-color: #e0e0e0;\r\n}\r\n.columns-dialog .cols-list > div.dragover.before\r\n{\r\n\tborder-top: 1px solid red;\r\n\tpadding-top: 3px;\r\n}\r\n.columns-dialog .cols-list > div.dragover.after\r\n{\r\n\tborder-bottom: 1px solid red;\r\n\tpadding-bottom: 3px;\r\n}\r\n\r\n.columns-dialog .cols-list .field-name\r\n{\r\n\tdisplay: inline-block;\r\n\tfont-size: 12px;\r\n\tfont-weight: bold;\r\n\tcolor: RGBA(0, 0, 0, 0.7);\r\n\tpadding-left: 3px;\r\n\tvertical-align: middle;\r\n\tmax-width: 215px;\r\n\tline-height: 24px;\r\n}\r\n\r\n.columns-dialog .cols-list .tab-switch \r\n{\r\n\tfloat: right;\r\n}\r\n.columns-dialog .cols-list .tab-switch.ac-TabOn\r\n{\r\n\tdisplay: none;\r\n}\r\n.columns-dialog .cols-list > div:hover .tab-switch\r\n{\r\n\tdisplay: inline-block;\r\n}\r\n.columns-dialog .cols-list i.visible-fixed\r\n{\r\n\topacity: 0.4;\r\n}\r\n\r\n.columns-dialog .cols-list i.ac\r\n{\r\n\tfont-size: 16px;\r\n\tvertical-align: middle;\r\n\tcolor: RGBA(0, 0, 0, 0.54);\r\n}\r\n.columns-dialog .cols-list i.ac-check_box\r\n{\r\n\tcolor: #007ACC;\r\n}\r\n\r\n.columns-dialog .cols-list > div:not([draggable]) i.drag-icon\r\n{\r\n\topacity: 0.2;\r\n}\r\n\r\n.columns-dialog .search-box\r\n{\r\n\tborder: 1px solid #007ACC;\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n\tmargin-bottom: 10px;\r\n}\r\n.columns-dialog .search-box input\r\n{\r\n\twidth:  100%;\r\n\tborder-width: 0px;\r\n\tpadding: 4px 6px;\r\n}\r\n.columns-dialog .search-box i.ac\r\n{\r\n\tfont-size: 18px;\r\n\tcolor: RGBA(0, 0, 0, 0.54);\r\n}\r\n.columns-dialog .search-box div.search-btn\r\n{\r\n\tpadding: 2px;\r\n\tpadding-bottom: 0px;\r\n}\r\n"}));define("text!controls/global/grid/dialogs/columns-dialog.html",[],(function(){return'<template><require from="controls/global/base-dialog/base-dialog.css"></require><require from="./columns-dialog.css"></require><ux-dialog class="dialog columns-dialog"><ux-dialog-body><div class="search-box"><input type="text" placeholder="Search..." attach-focus value.bind="filter" ref="elemText" input.delegate="processInput($event) & debounce:300"><div class="search-btn"><i class="ac ac-search"></i></div></div><div class="cols-list" ref="elemColsList" selectstart.delegate="processSelectStart($event)"><div repeat.for="col of columns" draggable.bind="filter ? null : true & attr" class="${getDragOverClass(col, dragInfo ? dragInfo.targetIndex : null)}" mouseup.delegate="processColClick($event, col)" dragstart.delegate="processDragStart($event, col)" dragover.delegate="processDragOver($event, col)" drop.delegate="processDrop($event, col)" dragleave.delegate="processDragLeave($event)"><i class="ac drag-icon ac-more_vert"></i> <i class="ac ac-check_box${col.tag.visible ? \'\' : \'_outline_blank\'} ${col.allowShowHide != 1 ? \'visible-fixed\' : \'\'}"></i> <span class="field-name">${col.caption || col.field}</span><span if.bind="config.allowSkipTabs && col.tag.visible" class="tab-switch ac ac-2x ac-Tab${col.tag.skipTab ? \'Off\' : \'On\'}" mouseup.delegate="processSkipTabClick($event, col)"></span></div></div></ux-dialog-body><ux-dialog-footer><qp-button click.trigger="controller.ok(\'reset\')" config.bind="resetConfig" style="float:left">Reset</qp-button><qp-button click.trigger="controller.ok(config.columns)" config.bind="okConfig">Ok</qp-button><qp-button click.trigger="controller.cancel()" config.bind="cancelConfig">Cancel</qp-button></ux-dialog-footer></ux-dialog></template>'}));define("controls/global/grid/dialogs/columns-list-dialog",["require","exports","tslib","aurelia-framework","aurelia-dialog","controls/global/base-dialog/base-dialog"],(function(e,t,r,i,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ColumnsListDialog=void 0;var a=function(e){r.__extends(t,e);function t(t){var r=e.call(this,t)||this;r.controller=t;r.minHeight=250;r.maxHeight=450;return r}t.prototype.activate=function(e){this.config=e;this.columns=r.__spreadArray([],e.columns)};t.prototype.processFilter=function(e){var t;var i=this.config.columns.filter((function(t){var r=t.caption||t.field;return r&&r.toLowerCase().indexOf(e)>=0}));(t=this.columns).splice.apply(t,r.__spreadArray([0,this.columns.length],i))};t.prototype.attached=function(){if(this.elemFilterBox){var e=this.elemFilterBox.querySelector("input");if(e)e.focus()}};t.prototype.processColClick=function(e,t){this.controller.ok(t)};t.prototype.processSelectStart=function(e){e.preventDefault()};t=r.__decorate([i.autoinject,r.__metadata("design:paramtypes",[n.DialogController])],t);return t}(o.BaseDialog);t.ColumnsListDialog=a}));define("text!controls/global/grid/dialogs/columns-list-dialog.css",[],(function(){return".columns-list-dialog\r\n{\r\n\tmin-width: 250px;\r\n\tborder-radius: 5px;\r\n}\r\n.columns-list-dialog .cols-list\r\n{\r\n\toverflow-y: auto;\r\n\theight: 100%;\r\n}\r\n.columns-list-dialog .cols-list > div\r\n{\r\n\tpadding: 4px;\r\n\tcursor: pointer;\r\n}\r\n.columns-list-dialog .cols-list > div:hover\r\n{\r\n\tbackground-color: #e0e0e0;\r\n}\r\n\r\n.columns-list-dialog .cols-list .field-name\r\n{\r\n\tdisplay: inline-block;\r\n\tfont-size: 12px;\r\n\tfont-weight: bold;\r\n\tcolor: RGBA(0, 0, 0, 0.7);\r\n\tpadding-left: 1px;\r\n\tvertical-align: middle;\r\n\tmax-width: 215px;\r\n\tline-height: 22px;\r\n}\r\n\r\n.columns-list-dialog .header\r\n{\r\n\tpadding: 4px;\r\n\tpadding-bottom: 13px;\r\n}\r\n.columns-list-dialog .header > span\r\n{\r\n\tfont-weight: bold;\r\n}\r\n.columns-list-dialog .header > a\r\n{\r\n\tfloat: right;\r\n\tcolor: #027ACC;\r\n\ttext-decoration: none;\r\n}\r\n.columns-list-dialog .filter-box\r\n{\r\n\tmargin-bottom: 10px;\r\n\twidth: 100%;\r\n\tborder: 1px solid #007ACC;\r\n}\r\n"}));define("text!controls/global/grid/dialogs/columns-list-dialog.html",[],(function(){return'<template><require from="controls/global/base-dialog/base-dialog.css"></require><require from="./columns-list-dialog.css"></require><require from="../elements/qp-filter-box"></require><ux-dialog class="dialog columns-list-dialog"><ux-dialog-body><div class="header"><span>Filters</span> <a if.bind="config.showAdvancedLink" href="javasript:void 0" click.trigger="controller.ok(true)">Advanced filter</a></div><qp-filter-box on-filter.call="processFilter(filter)" ref="elemFilterBox"></qp-filter-box><div class="cols-list" selectstart.delegate="processSelectStart($event)"><div repeat.for="col of columns" click.delegate="processColClick($event, col)"><span class="field-name">${col.caption || col.field}</span></div></div></ux-dialog-body></ux-dialog></template>'}));define("controls/global/grid/dialogs/filter-dialog",["require","exports","tslib","aurelia-framework","controls/global/base-dialog/base-dialog","aurelia-dialog","../qp-grid","apps/enhance/services/control-helper","../grid-helper"],(function(e,t,r,i,n,o,a,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FilterDialogResult=t.FilterDialog=void 0;var d=function(e){r.__extends(t,e);function t(t){var r=e.call(this,t)||this;r.controller=t;r.items=[];r.allText=l.filterAllMsg;r.maxHeight=600;t.settings.keyboard=["Enter","Escape"];return r}n=t;t.prototype.activate=function(e){this.config=e;this.col=e.column;this.filter=e.filter?r.__assign({},e.filter):new l.GridFilterRow;this.filter.field=this.col.field;if(e.showSortItems==null)e.showSortItems=true;this.okConfig={text:"Ok"};this.cancelConfig={text:"Cancel"};var t=!!this.col.maxLength&&!this.col.format?this.col.maxLength:0;this.txtConfig={class:"editor auto-size",maxLength:t,inputMask:this.col.format};this.numConfig={class:"editor auto-size",valueType:this.col.dataType,decimals:this.col.decimals,textAlign:3,allowNull:true};this.dateConfig={class:"dropDown auto-size",editMask:this.col.dateMask,displayMask:this.col.dateMask,allowCustomItems:!this.col.timeMode};if(!this.filter.condition){var i=this.col.dataType;if(i===s.NetType.DateTime||s.isNumeric(i))this.filter.condition="BETWEEN";else if(i===s.NetType.String)this.filter.condition="LIKE";else this.filter.condition="EQ"}if(this.hasValueItems){var n=null;if(this.col.valueItems.emptyPossible&&this.filter.condition==="ISNULL"){this.filter.value=l.filterNullValue;this.filter.condition="IN";n=[l.filterNullValue]}else if(this.filter.value){n=this.filter.value.split(",")}for(var o=0,a=this.col.valueItems.items;o<a.length;o++){var d=a[o];var c=!n||n.indexOf(d.value)>=0;this.items.push({value:d.value,text:d.text,selected:c})}if(this.col.valueItems.emptyPossible){var c=!n||n.indexOf(l.filterNullValue)>=0;this.items.push({value:l.filterNullValue,text:l.filterEmptyMsg,selected:c})}this.calcSelectionState()}};t.prototype.deactivate=function(e){if(!e.wasCancelled&&e.output===undefined){e.output=this.getDialogResult(this.getFilter())}};t.prototype.calcSelectionState=function(){if(this.hasValueItems){if(this.items.every((function(e){return!e.selected})))this.selectionState=0;else this.selectionState=this.items.some((function(e){return!e.selected}))?-1:1}};t.prototype.getDialogResult=function(e,t,r){return new c(e,t,r)};t.prototype.attached=function(){if(this.elemEditorsCont){var e=this.elemEditorsCont.querySelector("input");if(e)e.focus()}};t.prototype.getFilter=function(){var e=this.filter;if(this.hasValueItems){var t=this.items.filter((function(e){return e.selected})).map((function(e){return e.value}));if(t.length>0&&t.length<this.items.length){this.filter.condition="IN";this.filter.value=t.join(",")}else e=undefined}else{var r=this.filter;if(r.condition==null||n.valueFilters.indexOf(r.condition)>=0&&r.value==null||r.condition==="BETWEEN"&&(r.value==null||r.value2==null)){e=undefined}}if(e)e.text=l.getFilterRowDisplayText(e,this.col);return e};Object.defineProperty(t.prototype,"conditions",{get:function(){var e=n.stringFilters;var t=this.col.dataType;if(t===s.NetType.Boolean)e=n.boolFilters;else if(t===s.NetType.DateTime)e=n.dateFilters;else if(s.isNumeric(t))e=n.numberFilters;var r=new Array;for(var i=0,o=e;i<o.length;i++){var a=o[i];var d=l.FilterConditions[a];r.push({value:a,text:d!=null?d:a})}return r},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"hasValueItems",{get:function(){return this.col.valueItems!=null},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"isDateTime",{get:function(){return this.col.dataType===s.NetType.DateTime},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"isNumeric",{get:function(){return s.isNumeric(this.col.dataType)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"isBoolean",{get:function(){return this.col.dataType===s.NetType.Boolean},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"isString",{get:function(){return this.col.dataType===s.NetType.String},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"isBetween",{get:function(){return this.filter.condition==="BETWEEN"},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"selectionIcon",{get:function(){switch(this.selectionState){case 0:return"check_box_outline_blank";case 1:return"check_box_filled"}return"minus_square_filled"},enumerable:false,configurable:true});t.prototype.preventSelection=function(e){e.preventDefault()};t.prototype.preventFocus=function(e){e.preventDefault()};t.prototype.processConditionClick=function(e,t){if(n.boolFilters.indexOf(t)>=0){this.filter.value=t===this.filter.value?undefined:t;this.filter.condition=this.filter.value!=null?"EQ":undefined}else this.filter.condition=t};t.prototype.processItemClick=function(e,t){t.selected=!t.selected;this.calcSelectionState()};t.prototype.processSortClick=function(e,t){var r=t;if(this.col.sortDirection===t)r=a.SortDirection.None;this.controller.ok(this.getDialogResult(undefined,r))};t.prototype.processSelectClick=function(){var e=this.selectionState!==1;this.items.forEach((function(t){return t.selected=e}));this.calcSelectionState()};t.prototype.processClearClick=function(e){this.controller.ok(this.getDialogResult(undefined))};t.prototype.processRemoveClick=function(e){this.controller.ok(this.getDialogResult(undefined,undefined,true))};var n;t.boolFilters=["True","False"];t.stringFilters=["EQ","NE","ISNULL","ISNOTNULL","LIKE","RLIKE"];t.numberFilters=["EQ","NE","GT","GE","LT","LE","BETWEEN"];t.dateFilters=["EQ","NE","GT","GE","LT","LE","BETWEEN","TODAY","THIS_MONTH"];t.valueFilters=["EQ","NE","GT","GE","LT","LE","BETWEEN","LIKE","RLIKE"];t.emptyValueFilters=["ISNULL","ISNOTNULL","TODAY","THIS_MONTH","True","False"];r.__decorate([i.bindable,r.__metadata("design:type",Array)],t.prototype,"items",void 0);r.__decorate([i.computedFrom("config.column.dataType"),r.__metadata("design:type",Object),r.__metadata("design:paramtypes",[])],t.prototype,"conditions",null);r.__decorate([i.computedFrom("config.column.valueItems"),r.__metadata("design:type",Object),r.__metadata("design:paramtypes",[])],t.prototype,"hasValueItems",null);r.__decorate([i.computedFrom("config.column.dataType"),r.__metadata("design:type",Object),r.__metadata("design:paramtypes",[])],t.prototype,"isDateTime",null);r.__decorate([i.computedFrom("config.column.dataType"),r.__metadata("design:type",Object),r.__metadata("design:paramtypes",[])],t.prototype,"isNumeric",null);r.__decorate([i.computedFrom("config.column.dataType"),r.__metadata("design:type",Object),r.__metadata("design:paramtypes",[])],t.prototype,"isBoolean",null);r.__decorate([i.computedFrom("config.column.dataType"),r.__metadata("design:type",Object),r.__metadata("design:paramtypes",[])],t.prototype,"isString",null);r.__decorate([i.computedFrom("filter.condition"),r.__metadata("design:type",Object),r.__metadata("design:paramtypes",[])],t.prototype,"isBetween",null);r.__decorate([i.computedFrom("selectionState"),r.__metadata("design:type",Object),r.__metadata("design:paramtypes",[])],t.prototype,"selectionIcon",null);t=n=r.__decorate([i.autoinject,r.__metadata("design:paramtypes",[o.DialogController])],t);return t}(n.BaseDialog);t.FilterDialog=d;var c=function(){function e(e,t,r){this.filter=e;this.sort=t;this.removeFilter=r}return e}();t.FilterDialogResult=c}));define("text!controls/global/grid/dialogs/filter-dialog.css",[],(function(){return".filter-dialog\r\n{\r\n\tmin-width: 240px;\r\n\twidth: 240px;\r\n\tborder-radius: 5px;\r\n}\r\n\r\n.filter-dialog .items-list > div\r\n{\r\n\tpadding: 7px 4px;\r\n\tcursor: pointer;\r\n}\r\n.filter-dialog .items-list > div:not([class*=disabled]):hover\r\n{\r\n\tbackground-color: #e0e0e0;\r\n}\r\n.filter-dialog .items-list > div.disabled\r\n{\r\n\topacity: 0.5;\r\n}\r\n\r\n.filter-dialog .items-list .text\r\n{\r\n\tfont-size: 13px;\r\n\tcolor: RGBA(0, 0, 0, 0.87);\r\n\tmargin-left: 24px;\r\n\tmargin-right: 20px;\r\n}\r\n\r\n.filter-dialog .items-list > div i.ac\r\n{\r\n\tfloat: left;\r\n\tcolor: #027ACC;\r\n\tfont-size: 16px;\r\n}\r\n.filter-dialog .items-list > div i.ac[class*=outline_blank]\r\n{\r\n\tcolor: #CCCCCC;\r\n}\r\n\r\n.filter-dialog .items-list.items, .filter-dialog .items-list.conditions\r\n{\r\n\toverflow-y: auto;\r\n\theight: 100%;\r\n}\r\n\r\n.filter-dialog .separator\r\n{\r\n\tpadding-top: 2px;\r\n\theight: 3px;\r\n}\r\n.filter-dialog .separator > div\r\n{\r\n\tfont-size: 0px;\r\n\tborder-top: 1px solid #E0E4E8\r\n}\r\n\r\n.filter-dialog .editors\r\n{\r\n\tpadding-top: 5px;\r\n\tposition: relative;\r\n}\r\n.filter-dialog .editors .auto-size, .filter-dialog .editors .dropDown\r\n{\r\n\twidth: 100%;\r\n}\r\n\r\n.filter-dialog .label-cont\r\n{\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n}\r\n.filter-dialog .label-cont.second\r\n{\r\n\tmargin-top: 9px;\r\n}\r\n.filter-dialog .label-cont label\r\n{\r\n\twidth: 80px;\t\r\n\tline-height: 20px;\r\n}\r\n"}));define("text!controls/global/grid/dialogs/filter-dialog.html",[],(function(){return'<template><require from="controls/global/base-dialog/base-dialog.css"></require><require from="./filter-dialog.css"></require><ux-dialog class="dialog filter-dialog"><ux-dialog-body><div mousedown.delegate="preventFocus($event)" selectstart.delegate="preventSelection($event)"><div class="items-list" if.bind="config.showSortItems"><div click.delegate="processSortClick($event, 1)"><i class="ac control-MenuCheck" if.bind="col.sortDirection == 1"></i><div class="text">Sort Ascending</div></div><div click.delegate="processSortClick($event, 2)"><i class="ac control-MenuCheck" if.bind="col.sortDirection == 2"></i><div class="text">Sort Descending</div></div></div><div class="separator" if.bind="config.showSortItems"><div>&nbsp;</div></div><div class="items-list"><div if.bind="config.showRemoveItem" click.delegate="processRemoveClick($event)"><div class="text">Remove Filter</div></div><div class="${config.filter && config.filter.condition ? \'\' : \'disabled\'}" click.delegate="processClearClick($event)"><div class="text">Clear Filter</div></div></div><div class="separator"><div>&nbsp;</div></div><div class="items-list conditions" if.bind="!hasValueItems"><div repeat.for="cond of conditions" click.delegate="processConditionClick($event, cond.value)"><i class="ac control-MenuCheck" if.bind="(isBoolean && filter.value == cond.value) || filter.condition == cond.value"></i><div class="text">${cond.text}</div></div></div><div class="items-list items" if.bind="hasValueItems"><div click.delegate="processSelectClick()"><i class="ac ac-${selectionIcon}"></i><div class="text">${allText}</div></div><div repeat.for="item of items" click.delegate="processItemClick($event, item)"><i class="ac ac-${item.selected ? \'check_box_filled\' : \'check_box_outline_blank\'}"></i><div class="text">${item.text || item.value || \'&nbsp;\'}</div></div></div></div><div class="editors" if.bind="!hasValueItems && !isBoolean" ref="elemEditorsCont"><let label-text.bind="isBetween ? \'From:\' : \'Value:\'"></let><qp-mask-editor if.bind="isString" class="large" value.two-way="filter.value" config.bind="txtConfig"></qp-mask-editor><div class="label-cont" if.bind="isNumeric"><label for="filter_dialog_num1">${labelText}</label><qp-number-editor id="filter_dialog_num1" value.two-way="filter.value" config.bind="numConfig"></qp-number-editor></div><div class="label-cont second" if.bind="isNumeric && isBetween"><label for="filter_dialog_num2">To:</label><qp-number-editor id="filter_dialog_num2" value.two-way="filter.value2" config.bind="numConfig"></qp-number-editor></div><div class="label-cont" if.bind="isDateTime"><label for="filter_dialog_date1">${labelText}</label><qp-datetime-edit id="filter_dialog_date1" value.two-way="filter.value | dateUTC" config.bind="dateConfig"></qp-datetime-edit></div><div class="label-cont second" if.bind="isDateTime && isBetween"><label for="filter_dialog_date2">To:</label><qp-datetime-edit id="filter_dialog_date2" value.two-way="filter.value2 | dateUTC" config.bind="dateConfig"></qp-datetime-edit></div></div></ux-dialog-body><ux-dialog-footer><qp-button click.trigger="controller.ok()" config.bind="okConfig">Ok</qp-button><qp-button click.trigger="controller.cancel()" config.bind="cancelConfig">Cancel</qp-button></ux-dialog-footer></ux-dialog></template>'}));define("controls/global/grid/dialogs/filter-editor-dialog",["require","exports","tslib","aurelia-dialog","aurelia-framework","controls/global/base-dialog/base-dialog"],(function(e,t,r,i,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FilterEditorDialog=void 0;var a=function(e){r.__extends(t,e);function t(t){var r=e.call(this,t,false)||this;r.controller=t;return r}t.prototype.activate=function(e){var t;this.config=e;this.filterRows=(t=this.config.filterRows)===null||t===void 0?void 0:t.map((function(e){return r.__assign({},e)}));this.cancelConfig={text:"Cancel"};this.okConfig={text:"Ok"}};t=r.__decorate([n.autoinject,r.__metadata("design:paramtypes",[i.DialogController])],t);return t}(o.BaseDialog);t.FilterEditorDialog=a}));define("text!controls/global/grid/dialogs/filter-editor-dialog.css",[],(function(){return".filter-editor-dialog\r\n{\r\n\tmin-width: 450px;\r\n\tmax-width: 800px;\r\n\tmax-height: 700px;\r\n}\r\n\r\n.filter-editor-dialog ux-dialog-body\r\n{\r\n\tmin-height: 300px;\r\n\toverflow: auto;\r\n}\r\n"}));define("text!controls/global/grid/dialogs/filter-editor-dialog.html",[],(function(){return'<template><require from="controls/global/base-dialog/base-dialog.css"></require><require from="./filter-editor-dialog.css"></require><require from="../qp-filter-editor"></require><ux-dialog class="dialog filter-editor-dialog"><ux-dialog-header show-close-button.bind="true">Advanced Filter</ux-dialog-header><ux-dialog-body><qp-filter-editor filter-rows.bind="filterRows" columns.bind="config.columns"></qp-filter-editor></ux-dialog-body><ux-dialog-footer><qp-button click.trigger="controller.ok(filterRows)" config.bind="okConfig">Ok</qp-button><qp-button click.trigger="controller.cancel()" config.bind="cancelConfig">Cancel</qp-button></ux-dialog-footer></ux-dialog><template></template></template>'}));define("controls/global/grid/dialogs/filter-setup-dialog",["require","exports","tslib","aurelia-dialog","aurelia-framework","../grid-helper","controls/global/base-dialog/base-dialog"],(function(e,t,r,i,n,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FilterSetupDialog=void 0;var s=function(e){r.__extends(t,e);function t(t){var r=e.call(this,t,false)||this;r.controller=t;return r}t.prototype.activate=function(e){this.config=e;this.filter=e.filter?r.__assign({},e.filter):new o.GridFilter;if(!this.config.isSharedEditable)this.filter.isShared=false;this.cancelConfig={text:"Cancel"};this.okConfig={text:"Ok",enabled:!!this.filter.filterName};this.txtNameConfig={id:"edFilterName",class:"editor auto-size"};this.chkSharedConfig={id:"chkShared",class:"checkBox",label:"Shared",enabled:!!this.config.isSharedEditable};this.chkDefaultConfig={id:"chkDefault",class:"checkBox",label:"Default"}};t.prototype.attached=function(){var e=this.elemContent.querySelector("input");if(e)e.focus()};t.prototype.processNameInput=function(e){var t=e.target;this.okConfig.enabled=!!t.value};t=r.__decorate([n.autoinject,r.__metadata("design:paramtypes",[i.DialogController])],t);return t}(a.BaseDialog);t.FilterSetupDialog=s}));define("text!controls/global/grid/dialogs/filter-setup-dialog.css",[],(function(){return".filter-setup\r\n{\r\n\tmin-width: 400px;\r\n\twidth: 400px;\r\n}\r\n"}));define("text!controls/global/grid/dialogs/filter-setup-dialog.html",[],(function(){return'<template><require from="controls/global/base-dialog/base-dialog.css"></require><require from="./filter-setup-dialog.css"></require><ux-dialog class="dialog filter-setup"><ux-dialog-header show-close-button.bind="true">Filter Settings</ux-dialog-header><ux-dialog-body><div class="stack-vert" ref="elemContent"><div class="label-group"><label for.bind="txtNameConfig.id">Name:</label><qp-text-editor config.bind="txtNameConfig" value.two-way="filter.filterName" input.delegate="processNameInput($event)"></qp-text-editor></div><div class="empty-label-group"><qp-check-box config.bind="chkSharedConfig" value.two-way="filter.isShared"></qp-check-box></div><div class="empty-label-group"><qp-check-box config.bind="chkDefaultConfig" value.two-way="filter.isDefault"></qp-check-box></div></div></ux-dialog-body><ux-dialog-footer><qp-button click.trigger="controller.ok(filter)" config.bind="okConfig">Ok</qp-button><qp-button click.trigger="controller.cancel()" config.bind="cancelConfig">Cancel</qp-button></ux-dialog-footer></ux-dialog></template>'}));define("controls/global/grid/elements/qp-filter-box",["require","exports","tslib","aurelia-framework"],(function(e,t,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpFilterBoxCustomElement=void 0;var n=function(){function e(){}e.prototype.applyFastFilter=function(e){if(this.onFilter)this.onFilter({filter:e})};r.__decorate([i.bindable,r.__metadata("design:type",Function)],e.prototype,"onFilter",void 0);e=r.__decorate([i.autoinject],e);return e}();t.QpFilterBoxCustomElement=n}));define("text!controls/global/grid/elements/qp-filter-box.css",[],(function(){return".filter-box\r\n{\r\n  border: 1px solid #D2D4D7;\r\n  border-radius: 5px;\r\n  display: inline-block;\r\n  width: 200px;\r\n  background-color: white;\r\n}\r\n\r\n.filter-box > div\r\n{\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-align: center;\r\n      -ms-flex-align: center;\r\n          align-items: center;\r\n}\r\n\r\n.filter-box .text\r\n{\r\n  padding: 6px;\r\n  -webkit-box-flex: 1;\r\n      -ms-flex: 1;\r\n          flex: 1;\r\n  border: none;\r\n  border-radius: 5px;\r\n}\r\n.filter-box .button\r\n{\r\n  opacity: 0.7;\r\n  margin-right: 2px;\r\n}\r\n.filter-box .button i.ac\r\n{\r\n  font-size: 18px;\r\n  color: RGBA(0, 0, 0, 0.54);\r\n}\r\n"}));define("text!controls/global/grid/elements/qp-filter-box.html",[],(function(){return'<template class="filter-box"><require from="./qp-filter-box.css"></require><div><input type="text" class="text" placeholder="Filter..." input.delegate="applyFastFilter($event.target.value) & debounce:500"><div class="button"><i class="ac ac-search"></i></div></div></template>'}));define("controls/global/grid/elements/qp-filter-button",["require","exports","tslib","aurelia-dialog","aurelia-framework","../dialogs/filter-dialog"],(function(e,t,r,i,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpFilterButtonCustomElement=void 0;var a=function(){function e(e,t){this.element=e;this.dialogService=t}Object.defineProperty(e.prototype,"hasFilter",{get:function(){var e=this.config.filter;return e!=null&&!(e.condition==null||e.condition==="EQ"&&e.value==null)},enumerable:false,configurable:true});e.prototype.processClick=function(e,t){var r=this;if(e.button!==0)return;var i=e.target;if(i.tagName.length<10)i=i.parentElement;var n={attachTo:i,column:this.config.column,filter:this.config.filter,showSortItems:this.config.showSortItems,showRemoveItem:this.config.showRemoveItem};this.dialogService.open({viewModel:o.FilterDialog,model:n,lock:false}).whenClosed((function(e){if(!e.wasCancelled){var t=e.output;if(t.sort!=null){if(r.onSort)r.onSort({col:r.config.column,sort:t.sort})}else if(t.removeFilter!=null){if(r.onFilterRemove)r.onFilterRemove({col:r.config.column})}else if(r.onFilter)r.onFilter({col:r.config.column,filter:t.filter})}}))};r.__decorate([n.bindable,r.__metadata("design:type",Object)],e.prototype,"config",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Function)],e.prototype,"onSort",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Function)],e.prototype,"onFilter",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Function)],e.prototype,"onFilterRemove",void 0);r.__decorate([n.computedFrom("config.filter","config.filter.condition","config.filter.value"),r.__metadata("design:type",Boolean),r.__metadata("design:paramtypes",[])],e.prototype,"hasFilter",null);e=r.__decorate([n.autoinject,r.__metadata("design:paramtypes",[Element,i.DialogService])],e);return e}();t.QpFilterButtonCustomElement=a}));define("text!controls/global/grid/elements/qp-filter-button.css",[],(function(){return"\r\n.filter-button\r\n{\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n\t-webkit-box-align: center;\r\n\t    -ms-flex-align: center;\r\n\t        align-items: center;\r\n\tpadding: 3px;\r\n\tborder: 1px solid #E0E4E8;\r\n\tborder-radius: 5px;\r\n\tcursor: pointer;\r\n\twhite-space: nowrap;\r\n}\r\n\r\n.filter-button:hover\r\n{\r\n\tbackground-color: #E0E4E8;\r\n}\r\n.filter-button.filtered\r\n{\r\n\tborder: 1px solid #D7EFFF;\r\n\tbackground-color: #D7EFFF;\r\n}\r\n.filter-button.filtered:hover\r\n{\r\n\tbackground-color: #C2E5FD;\r\n\tborder-color: #C2E5FD;\r\n}\r\n\r\n.filter-button span.text\r\n{\r\n\tdisplay: inline-block;\r\n\tpadding: 3px 5px;\t\r\n\tline-height: 16px;\r\n\twhite-space: nowrap;\r\n\toverflow: hidden;\r\n\ttext-overflow: ellipsis;\r\n\tmax-width: 220px;\r\n}\r\n\r\n.filter-button i.ac\r\n{\r\n\tfont-size: 16px;\r\n}"}));define("text!controls/global/grid/elements/qp-filter-button.html",[],(function(){return'<template class="filter-button ${hasFilter ? \'filtered\' : \'\'}" click.delegate="processClick($event)"><require from="./qp-filter-button.css"></require><span class="text">${config.column.caption}: ${config.filter.text}</span><i class="ac ac-keyboard_arrow_down"></i></template>'}));define("controls/global/grid/elements/qp-filter-node",["require","exports","tslib","aurelia-dialog","aurelia-framework","../dialogs/columns-list-dialog","../grid-helper","../qp-filter-editor"],(function(e,t,r,i,n,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpFilterNodeCustomElement=void 0;var l=function(){function e(e){this.dialogService=e}e.prototype.getColumn=function(e){return this.columns.find((function(t){return t.field===e}))};e.prototype.isFilterNode=function(e){return e instanceof s.FilterNode};e.prototype.processHierarchyChanged=function(){if(this.onHierarchyChanged)this.onHierarchyChanged()};e.prototype.processConditionDelete=function(e){if(this.onFilterRowDelete)this.onFilterRowDelete({filter:e})};e.prototype.processNodeDelete=function(e){if(this.onFilterNodeDelete)this.onFilterNodeDelete({node:e})};e.prototype.processFilterRowInsert=function(e,t,r){if(this.onFilterRowInsert){this.onFilterRowInsert({filter:e,col:t,closeBrackets:r})}};e.prototype.processNodeMouseMove=function(e,t){if(this.onNodeMouseMove)this.onNodeMouseMove({elem:e,mouseLeave:t})};e.prototype.processMouseEnter=function(e,t){this.processNodeMouseMove(e.target,false)};e.prototype.processMouseLeave=function(e,t){this.processNodeMouseMove(e.target,true)};e.prototype.processConditionClick=function(e){e.orOperator=!e.orOperator};e.prototype.processConditionNodeClick=function(e){e.orOperator=!e.orOperator;e.getLastCondition().orOperator=e.orOperator};e.prototype.addBrackets=function(e){if(this.node.items.length<3)return;var t=this.node.items.indexOf(e);if(t>=0&&t<this.node.items.length-1){var r=this.isFilterNode(e)?e.getFirstCondition():e;var i=this.node.items[t+1];var n=this.isFilterNode(i)?i.getLastCondition():i;r.openBrackets=r.openBrackets?++r.openBrackets:1;n.closeBrackets=n.closeBrackets?++n.closeBrackets:1;this.processHierarchyChanged()}};e.prototype.processBracketsClick=function(e){this.addBrackets(e)};e.prototype.processBracketsNodeClick=function(e){this.addBrackets(e)};e.prototype.processDeleteBracketsClick=function(e){var t=e.getFirstCondition();if(t&&t.openBrackets&&t.openBrackets>0)t.openBrackets-=1;t=e.getLastCondition();if(t&&t.closeBrackets&&t.closeBrackets>0)t.closeBrackets-=1;this.processHierarchyChanged()};e.prototype.processFilterRowApplied=function(e,t,r){a.copyFilterRow(r,t)};e.prototype.processFilterRowDeleted=function(e,t){this.node.items.splice(this.node.items.indexOf(t),1);this.processConditionDelete(t)};e.prototype.processDeleteNodeClick=function(e){this.processNodeDelete(e)};e.prototype.showInsertDialog=function(e,t,r){var i=this;var n;var a=e.target;if(a.tagName!=="DIV")a=a.parentElement;var s=((n=a.parentElement)===null||n===void 0?void 0:n.classList.contains("right-actions"))?a.parentElement:a;s.setAttribute("force-visible","");var l={attachTo:a,columns:this.columns};this.dialogService.open({viewModel:o.ColumnsListDialog,model:l,lock:false}).whenClosed((function(e){if(!e.wasCancelled&&e.output){i.processFilterRowInsert(t,e.output,r)}s.removeAttribute("force-visible")}))};e.prototype.processNewItemClick=function(e,t){this.showInsertDialog(e,t,t.closeBrackets)};e.prototype.processNewItemNodeClick=function(e,t){var r=t.getLastCondition();var i=0;var n=t.parent;while(n&&n.parent&&n.getLastCondition()===r){i++;n=n.parent}this.showInsertDialog(e,r,i)};r.__decorate([n.bindable,r.__metadata("design:type",s.FilterNode)],e.prototype,"node",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Array)],e.prototype,"columns",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Function)],e.prototype,"onHierarchyChanged",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Function)],e.prototype,"onFilterRowDelete",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Function)],e.prototype,"onFilterNodeDelete",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Function)],e.prototype,"onFilterRowInsert",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Function)],e.prototype,"onNodeMouseMove",void 0);e=r.__decorate([n.autoinject,r.__metadata("design:paramtypes",[i.DialogService])],e);return e}();t.QpFilterNodeCustomElement=l}));define("text!controls/global/grid/elements/qp-filter-node.css",[],(function(){return"\r\n.filter-node\r\n{\r\n\tdisplay: block;\r\n}\r\n\r\n.filter-node .button-container, .filter-node .node-container\r\n{\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n}\r\n.filter-node .button-container:not(:last-child),\r\n.filter-node .node-container:not(:last-child)\r\n{\r\n\tmargin-bottom: 8px;\r\n}\r\n.filter-node .node-container > .filter-node\r\n{\r\n\tmargin-top: 8px;\r\n\tmargin-bottom: 8px;\r\n\tmargin-left: -6px;\r\n}\r\n\r\n.filter-node .btn-new, .filter-node .btn-delete\r\n{\r\n\tpadding: 5px 7px;\r\n\tcursor: pointer;\r\n}\r\n.filter-node i.ac\r\n{\r\n\tfont-size: 16px;\r\n}\r\n.filter-node i.ac[class*=keyboard_arrow]\r\n{\r\n\tfont-size: 20px;\r\n}\r\n\r\n.filter-node .btn-brackets\r\n{\r\n\tposition: relative;\r\n\tpadding: 4px 2px;\r\n\tcursor: pointer;\r\n}\r\n\r\n.filter-node .btn-condition\r\n{\r\n\tcursor: pointer;\r\n\tposition: relative;\r\n\tpadding-right: 5px;\r\n}\r\n.filter-node .btn-condition .text\r\n{\r\n\tdisplay: inline-block;\r\n\tfont-size: 12px;\r\n\tbackground-color: #8ef29e;\r\n\tborder-radius: 5px;\r\n\tpadding: 6px 3px;\r\n\t-webkit-box-sizing: border-box;\r\n\t        box-sizing: border-box;\r\n\twidth: 32px;\r\n}\r\n.filter-node .btn-condition .text.or\r\n{\r\n\tbackground-color: #f5ba5b;\r\n\tpadding: 6px 7px;\r\n}\r\n\r\n.filter-node .node-container > .btn-brackets\r\n{\r\n\t-ms-flex-item-align: end;\r\n\t    align-self: flex-end;\r\n\t-webkit-transform: translateY(18px);\r\n\t        transform: translateY(18px);\r\n}\r\n.filter-node .node-container > .btn-brackets.aurelia-hide\r\n{\r\n\t-webkit-transform: none;\r\n\t        transform: none;\r\n}\r\n.filter-node .node-container:only-child > .btn-brackets\r\n{\r\n\tdisplay: none !important;\r\n}\r\n\r\n.filter-node .node-container .left-actions\r\n{\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n\t-webkit-box-orient: vertical;\r\n\t-webkit-box-direction: normal;\r\n\t    -ms-flex-direction: column;\r\n\t        flex-direction: column;\r\n}\r\n.filter-node .node-container .left-actions .btn-delete-brackets\r\n{\r\n\tcursor: pointer;\r\n\tposition: relative;\r\n\ttop: 50%;\r\n\t-webkit-transform: translateY(-50%);\r\n\t        transform: translateY(-50%);\r\n\tpadding-bottom: 2px;\r\n\tpadding-left: 10px;\r\n}\r\n.filter-node .node-container .left-actions .btn-condition\r\n{\r\n\tposition: relative;\r\n\ttop: 16px;\r\n\tmargin-top: auto;\r\n}\r\n.filter-node .node-container .left-actions .btn-condition.aurelia-hide\r\n{\r\n\ttop: 0px;\r\n}\r\n\r\n.filter-node .node-container .left-bracket, .filter-node .node-container .right-bracket\r\n{\r\n\tborder: 2px solid;\r\n\twidth: 10px;\r\n}\r\n.filter-node .node-container .left-bracket\r\n{\r\n\tborder-radius: 8px 0px 0px 8px;\t\r\n\tborder-right: none;\r\n\t\r\n}\r\n.filter-node .node-container .right-bracket\r\n{\r\n\tmargin-left: -6px;\r\n\tborder-radius: 0px 8px 8px 0px;\t\r\n\tborder-left: none;\r\n}\r\n.filter-node .node-container .right-actions\r\n{\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n\t-webkit-box-orient: vertical;\r\n\t-webkit-box-direction: normal;\r\n\t    -ms-flex-direction: column;\r\n\t        flex-direction: column;\r\n\t-webkit-box-pack: justify;\r\n\t    -ms-flex-pack: justify;\r\n\t        justify-content: space-between;\r\n}\r\n\r\n.filter-node .button-container .btn-brackets\r\n{\r\n\ttop: 18px;\r\n}\r\n.filter-node .button-container .btn-brackets.aurelia-hide\r\n{\r\n\ttop: 0px;\r\n}\r\n.filter-node .button-container .btn-condition\r\n{\r\n\ttop: 19px;\r\n}\r\n.filter-node .button-container .btn-condition.aurelia-hide\r\n{\r\n\ttop: 0px;\r\n}\r\n\r\n.filter-node .button-container .btn-brackets, .filter-node .button-container .btn-new\r\n{\r\n\tvisibility: hidden;\r\n}\r\n.filter-node .button-container:hover .btn-brackets, .filter-node .button-container:hover > .btn-new,\r\n.filter-node .button-container > .btn-new[force-visible]\r\n{\r\n\tvisibility: visible;\r\n}\r\n\r\n.filter-node .node-container .left-actions .btn-delete-brackets, \r\n.filter-node .node-container .right-actions, .filter-node .node-container .btn-brackets\r\n{\r\n\tvisibility: hidden;\r\n}\r\n.filter-node .node-container:hover[mouse-hover] > .left-actions > .btn-delete-brackets, \r\n.filter-node .node-container:hover[mouse-hover] > .btn-brackets, .filter-node \r\n.node-container:hover[mouse-hover] > .right-actions, \r\n.filter-node .node-container > .right-actions[force-visible]\r\n{\r\n\tvisibility: visible;\r\n}\r\n\r\n.filter-node .aurelia-hide\r\n{\r\n\tdisplay: block !important;\r\n\tvisibility: hidden !important;\r\n}\r\n"}));define("text!controls/global/grid/elements/qp-filter-node.html",[],(function(){return'<template class="filter-node"><require from="./qp-filter-node.css"></require><require from="./qp-filter-button"></require><template repeat.for="item of node.items"><div if.bind="isFilterNode(item)" class="node-container" mouseenter.trigger="processMouseEnter($event, item)" mouseleave.trigger="processMouseLeave($event, item)"><div class="btn-brackets" show.bind="!$last && node.items.length > 2" click.delegate="processBracketsNodeClick(item)"><i class="ac ac-keyboard_arrow_right"></i></div><div class="left-actions"><div class="btn-delete-brackets" click.delegate="processDeleteBracketsClick(item)"><i class="ac ac-keyboard_arrow_left"></i></div><div class="btn-condition" show.bind="!$last" click.delegate="processConditionNodeClick(item)"><span class="text ${item.orOperator ? \'or\' : \'\'}">${item.orOperator ? \'OR\' : \'AND\'}</span></div></div><div class="left-bracket">&nbsp;</div><qp-filter-node node.bind="item" columns.bind="columns" on-hierarchy-changed.call="processHierarchyChanged()" on-filter-row-delete.call="processConditionDelete(filter)" on-filter-node-delete.call="processNodeDelete(node)" on-filter-row-insert.call="processFilterRowInsert(filter, col, closeBrackets)" on-node-mouse-move.call="processNodeMouseMove(elem, mouseLeave)"></qp-filter-node><div class="right-bracket">&nbsp;</div><div class="right-actions"><div class="btn-delete" click.delegate="processDeleteNodeClick(item)"><i class="ac ac-delete"></i></div><div class="btn-new" click.delegate="processNewItemNodeClick($event, item)"><i class="ac ac-add"></i></div></div></div><div else class="button-container"><let col.bind="getColumn(item.field)"></let><div class="btn-brackets" show.bind="!$last && node.items.length > 2" click.delegate="processBracketsClick(item)"><i class="ac ac-keyboard_arrow_right"></i></div><div class="btn-condition" show.bind="!$last" click.delegate="processConditionClick(item)"><span class="text ${item.orOperator ? \'or\' : \'\'}">${item.orOperator ? \'OR\' : \'AND\'}</span></div><qp-filter-button config.bind="{filter: item, column: col, showRemoveItem: true, showSortItems: false}" on-filter.call="processFilterRowApplied(col, filter, item)" on-filter-remove.call="processFilterRowDeleted(col, item)"></qp-filter-button><div class="btn-new" click.delegate="processNewItemClick($event, item)"><i class="ac ac-add"></i></div></div></template></template>'}));define("controls/global/grid/grid-helper",["require","exports","apps/enhance/services/control-helper","apps/enhance/services/mask-helper"],(function(e,t,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getColumnDisplayText=t.getFilterRowDisplayText=t.getFilterDisplayText=t.isAdvancedFilter=t.isEmptyFilter=t.copyFilterRow=t.clearFilterRow=t.GridFilterRow=t.GridFilter=t.filterAllMsg=t.filterEmptyMsg=t.filterNullValue=t.FilterConditions=void 0;t.FilterConditions={EQ:"Equals",NE:"Does Not Equal",GT:"Is Greater Than",GE:"Is Greater Than or Equal To",LT:"Is Less Than",LE:"Is Less Than or Equal To",BETWEEN:"Is Between",LIKE:"Contains",LLIKE:"Ends With",RLIKE:"Starts With",NOTLIKE:"Does Not Contain",ISNULL:"Is Empty",ISNOTNULL:"Is Not Empty",TODAY:"Today",OVERDUE:"Overdue",TODAY_OVERDUE:"Today+Overdue",TOMMOROW:"Tomorrow",THIS_WEEK:"This Week",NEXT_WEEK:"Next Week",THIS_MONTH:"This Month",NEXT_MONTH:"Next Month"};var n=["EQ","NE","GT","GE","LT","LE","BETWEEN","LIKE","NOTLIKE","LLIKE","RLIKE"];var o=["TODAY","OVERDUE","TODAY_OVERDUE","TOMMOROW","THIS_WEEK","NEXT_WEEK","THIS_MONTH","NEXT_MONTH"];t.filterNullValue="<null>";t.filterEmptyMsg="Is Empty";t.filterAllMsg="All";var a=function(){function e(){}return e}();t.GridFilter=a;var s=function(){function e(){}return e}();t.GridFilterRow=s;function l(e){e.condition=e.orOperator=undefined;e.value=e.value2=undefined;e.openBrackets=e.closeBrackets=undefined;e.text=t.filterAllMsg}t.clearFilterRow=l;function d(e,t){l(e);if(t)Object.assign(e,t);return e}t.copyFilterRow=d;function c(e){return e==null||(e.condition==null||e.condition==="EQ"&&e.value==null)}t.isEmptyFilter=c;function p(e){if(e){var t=e[e.length-1];return e===null||e===void 0?void 0:e.some((function(e){return!!e.orOperator&&e!==t}))}return false}t.isAdvancedFilter=p;function u(e,t){var r=e[e.length-1];var i="";var n=function(e){var n=t.find((function(t){return t.field===e.field}));if(!n)return"continue";if(e.openBrackets)i+="(".repeat(e.openBrackets);i+="<b>"+e.field+"</b> ";if(c(e)||o.indexOf(e.condition)>=0)i+="= ";else if(e.condition==="BETWEEN")i+="Between ";else if(e.condition==="IN")i+=e.condition+" ";var a=f(e,n);if(e.condition==="IN")i+="("+a+")";else if(e.condition==="BETWEEN")i+=a.replace("-","and");else i+=a;if(e.closeBrackets)i+=")".repeat(e.closeBrackets);if(e!==r){i+='<span class="'+(e.orOperator?"or":"and")+'"> '+(e.orOperator?"OR":"AND")+" </span>"}};for(var a=0,s=e;a<s.length;a++){var l=s[a];n(l)}return i}t.getFilterDisplayText=u;function f(e,i){var o,a;var s=e.value;var l=h(i,m(i,e.value2,i.dataType,true)).trimEnd();var d="";var c=(((a=(o=i.valueItems)===null||o===void 0?void 0:o.items)===null||a===void 0?void 0:a.length)||0)>0;var p=i.dataType===r.NetType.String;if(c&&s){s=s.split(",").map((function(e){return e===t.filterNullValue?t.filterEmptyMsg:h(i,e)})).join(", ")}else{s=h(i,m(i,s,i.dataType,true)).trimEnd();if(p)s=s?"'"+s+"'":""}if(p)l=l?"'"+l+"'":"";var u=e.condition;if(u==="EQ"&&!e.value)u=undefined;switch(u){case"IN":d+=s;break;case"EQ":d+="= "+s;break;case"NE":d+="!= "+s;break;case"GT":d+="> "+s;break;case"LT":d+="< "+s;break;case"GE":d+=">= "+s;break;case"LE":d+="<= "+s;break;default:if(u){d+=e.condition==="BETWEEN"?"":t.FilterConditions[u];if(n.indexOf(u)>=0)d+=" "+s+(l?" - "+l:"")}else d+=t.filterAllMsg;break}return d}t.getFilterRowDisplayText=f;function h(e,t){var n;var o="";if(t==null)return o;var a=e.valueItems;if((((n=a===null||a===void 0?void 0:a.items)===null||n===void 0?void 0:n.length)||0)>0){if(a&&a.multiSelect){var s=t.split(",");var l=new Array;for(var d=0,c=s;d<c.length;d++){var p=c[d];var u=g(e,p,a,e.dataType);if(u!=null)l.push(u.text)}o=l.join(", ")}else{var u=g(e,t,a,e.dataType);if(u!=null)o=u.text||""}}else if(e.format){if(r.isNumeric(e.dataType)){if(t.format)o=t.format(e.format,r.numberFormatInfo);else o=r.formatNumber(t,e.decimals,r.numberFormatInfo)}else if(e.dataType===r.NetType.DateTime)o=r.formatDate(t,e.format,r.dateFormatInfo);else if(e.dataType===r.NetType.String)o=i.formatByMask(i.encodeMask(e.format),t," ");else o=r.getInvariantText(t)}else{if(r.isNumeric(e.dataType)){o=r.formatNumber(t,e.decimals,r.numberFormatInfo)}else if(e.dataType===r.NetType.DateTime){o=r.formatDate(t,e.timeMode?"t":"d",r.dateFormatInfo)}else o=r.getInvariantText(t)}return o}t.getColumnDisplayText=h;function g(e,t,r,i){if((r===null||r===void 0?void 0:r.items)==null||t==null)return null;for(var n=0,o=r.items;n<o.length;n++){var a=o[n];if(t===m(e,a.value,i))return a}return r.exclusive?null:{value:t,text:String(t)}}function m(e,t,i,n){if(n===void 0){n=false}if(t==null)return t;var o=typeof t==="string";var a=t;if(e.allowNull&&o&&t==="")t=null;else{if(i===r.NetType.String&&t instanceof Date)t=r.getInvariantText(t);else{t=r.netTypeConvert(t,i);if(n&&isNaN(t))t=r.getInvariantText(a)}}return t}}));define("controls/global/grid/qp-filter-bar",["require","exports","tslib","aurelia-dialog","aurelia-framework","aurelia-pal","aurelia-event-aggregator","./dialogs/filter-setup-dialog","plugins/happeded-on-body","./dialogs/filter-editor-dialog","./grid-helper","./dialogs/columns-list-dialog"],(function(e,t,r,i,n,o,a,s,l,d,c,p){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpFilterBarCustomElement=void 0;var u=function(){function e(e,t,r){this.element=e;this.eventAggregator=t;this.dialogService=r;this.btnFilterSaveOptions=[{type:"MenuButton",text:"Save As",commandName:"SaveAsFilter"},{type:"MenuButton",text:"Advanced Filter",commandName:"Advanced"},{type:"MenuButton",text:"Filter Settings",commandName:"Setup"},{type:"MenuButton",text:"Remove Filter",commandName:"Remove"}];this.btnFilterSaveConfig={images:{normal:"main@Save"},commandName:"Save",disabled:!this.isFilterRetained(),options:this.btnFilterSaveOptions};this.btnAddFilterConfig={imageUrl:"fa@filter_list"}}t=e;e.prototype.raiseOnFilterEvent=function(){if(this.onFilterChanged)this.onFilterChanged({fastFilter:this.fastFilter,filterID:this.filterId})};e.prototype.setCommandsState=function(){this.btnFilterSaveConfig.disabled=!this.isFilterRetained();var e=!this.isClientFilter()&&this.isCurrentFilterEditable();var t=this.btnFilterSaveConfig.options;t[2].disabled=t[3].disabled=!e};e.prototype.filterIdChanged=function(e,t){this.setCommandsState()};e.prototype.filtersChanged=function(){this.setCommandsState()};e.prototype.filterRowsChanged=function(){this.filterText=this.isAdvancedFilter()?c.getFilterDisplayText(this.filterRows,this.config.columns):""};e.prototype.isDirtyFilterChanged=function(e,t){this.btnFilterSaveConfig.disabled=!this.isFilterRetained()};e.prototype.dragColumnChanged=function(e){this.dragInfo=e?{field:e.field,targetIndex:undefined}:undefined};e.prototype.onSortApplied=function(e,t){if(this.onSortChanged)this.onSortChanged({col:e,sort:t})};e.prototype.onFilterRowApplied=function(e,t){var r;var i=this.getFilterRow(e.field);if(i)t=c.copyFilterRow(i,t);else if(t)(r=this.filterRows)===null||r===void 0?void 0:r.push(t);if(this.onFilterRowChanged)this.onFilterRowChanged({col:e,filter:t})};e.prototype.onFilterRowDeleted=function(e){var t;var r=this.getFilterRow(e.field);if(r!=null)(t=this.filterRows)===null||t===void 0?void 0:t.splice(this.filterRows.indexOf(r),1);if(this.onFilterRowRemoved)this.onFilterRowRemoved({col:e})};e.prototype.onFilterRowsSetChanged=function(e){if(e===void 0){e=false}this.isDirtyFilter=true;if(this.onRowsSetChanged)this.onRowsSetChanged({refresh:e})};e.prototype.getActiveFilter=function(){var e=this;var t;return(t=this.filters)===null||t===void 0?void 0:t.find((function(t){return t.filterID===e.filterId}))};e.prototype.isClientFilter=function(e){var r=!!e?e:this.filterId;return!r||r<=t.minFilterID};e.prototype.isFilterRetained=function(){return this.isClientFilter()||this.isDirtyFilter};e.prototype.isCurrentFilterEditable=function(){var e=this.getActiveFilter();if(e&&!this.isClientFilter(e.filterID)){return!e.isSystem&&(!e.isShared||this.config.isSharedEditable===true)}return false};e.prototype.getColumn=function(e){var t;return(t=this.config.columns)===null||t===void 0?void 0:t.find((function(t){return t.field===e}))};e.prototype.getFilterRow=function(e){var t;return(t=this.filterRows)===null||t===void 0?void 0:t.find((function(t){return t.field===e}))};e.prototype.getFilterRowIndex=function(e){var t;var r=this.getFilterRow(e);return r?(t=this.filterRows)===null||t===void 0?void 0:t.indexOf(r):-1};e.prototype.setFilterID=function(e){if(this.filterId!==e){this.filterId=e;this.raiseOnFilterEvent()}};e.prototype.isAdvancedFilter=function(e){if(!e)e=this.filterRows;return c.isAdvancedFilter(e)};e.prototype.removeFiltersBrackets=function(e){if(!e)e=this.filterRows;e===null||e===void 0?void 0:e.forEach((function(e){return e.openBrackets=e.closeBrackets=undefined}))};e.prototype.processFilterMenu=function(e){switch(e.detail.commandName){case"SaveAsFilter":case"Setup":this.showFilterSettings(e.detail.commandName==="SaveAsFilter");break;case"Remove":if(this.onFilterRemove&&o.PLATFORM.global.confirm(t.msgRemoveFilter)){this.onFilterRemove({filterID:this.filterId})}break;case"Save":var r=this.getActiveFilter();if(this.onFilterSave&&r){if(this.isClientFilter(r.filterID))this.showFilterSettings(true);else this.onFilterSave({filter:r,createNew:false})}break;case"Advanced":this.showAdvancedFilter();break}};e.prototype.showFilterSettings=function(e){var t=this;var i=this.getActiveFilter();if(this.isClientFilter(i===null||i===void 0?void 0:i.filterID)){i=r.__assign({},i);i.filterName=""}var n={filter:i,attachTo:undefined,isSharedEditable:this.config.isSharedEditable};this.dialogService.open({viewModel:s.FilterSetupDialog,model:n}).whenClosed((function(r){if(!r.wasCancelled&&t.onFilterSave){t.onFilterSave({filter:r.output,createNew:e})}}))};e.prototype.showAdvancedFilter=function(){var e=this;var t={attachTo:undefined,columns:this.config.columns,filterRows:this.filterRows};this.dialogService.open({viewModel:d.FilterEditorDialog,model:t}).whenClosed((function(t){var i;if(!t.wasCancelled){var n=t.output;if(!e.isAdvancedFilter(n))e.removeFiltersBrackets(n);(i=e.filterRows).splice.apply(i,r.__spreadArray([0,e.filterRows.length],n));e.filterRowsChanged();e.onFilterRowsSetChanged(true)}}))};e.prototype.processFastFilter=function(e){this.fastFilter=e;this.raiseOnFilterEvent()};e.prototype.processFilterHeaderClick=function(e,t){this.setFilterID(t.filterID)};e.prototype.processAddFilterClick=function(e){var t=this;var r=e.target;while(r.tagName!=="BUTTON")r=r.parentElement;var i={attachTo:r,columns:this.config.columns,showAdvancedLink:true};this.dialogService.open({viewModel:p.ColumnsListDialog,model:i,lock:false}).whenClosed((function(e){if(!e.wasCancelled&&e.output){var r=e.output;if(r&&typeof r==="object"){if(!t.filterRows.find((function(e){return e.field===r.field}))){t.filterRows.push({field:r.field,text:c.filterAllMsg});t.onFilterRowsSetChanged()}}else t.showAdvancedFilter()}}))};e.prototype.processDragStart=function(e,t){var r=this;this.dragInfo={field:t.field,targetIndex:undefined};this.bodyDropSubscription=this.eventAggregator.subscribe(l.DROP_ON_BODY,(function(e){return r.processDropOnBody(e)}));return true};e.prototype.processDragOver=function(e,t){this.createColDragInfo();if(this.dragInfo&&this.dragInfo.field!==t.field){var r=this.elemFiltersWrap.querySelectorAll("qp-filter-button");var i=r[this.filterRows.indexOf(t)];var n=i.getBoundingClientRect();var a=2;var s=e.clientX<n.left+n.width/a;var l=this.getFilterRowIndex(t.field)+(s?0:1);var d=this.getFilterRowIndex(this.dragInfo.field);if(d>=0&&l>d)l--;var c=(s?n.left:n.right)-this.elemArrowDown.offsetWidth/a;if(l>0){var p=o.PLATFORM.global.getComputedStyle(i);if(p.marginLeft||p.marginRight){var u=(p.marginLeft?parseInt(p.marginLeft):0)+(p.marginRight?parseInt(p.marginRight):0);c+=(s?-u:u)/a}}this.elemArrowUp.style.left=this.elemArrowDown.style.left=c+"px";this.dragInfo.targetIndex=l===d?undefined:l}else if(this.dragInfo){this.dragInfo.targetIndex=undefined}e.stopPropagation()};e.prototype.processDragOverBar=function(e){var t;if(!this.dragInfo||this.dragInfo.targetIndex==null){this.createColDragInfo();if(((t=this.filterRows)===null||t===void 0?void 0:t.length)===0){this.dragInfo.targetIndex=0;this.elemArrowUp.style.left=this.elemArrowDown.style.left=this.elemArrowDown.offsetWidth+"px"}else this.processDragOver(e,this.filterRows[this.filterRows.length-1])}};e.prototype.processDragLeave=function(e){if(this.dragInfo&&!this.elemFiltersWrap.contains(e.relatedTarget)){this.dragInfo.targetIndex=undefined}};e.prototype.processDrop=function(e){if(this.dragInfo){var t=this.dragInfo.targetIndex;var r=this.dragInfo.field;var i=this.getFilterRowIndex(r);if(t!==undefined){if(i<0)this.filterRows.splice(t,0,{field:r,text:c.filterAllMsg});else this.filterRows.splice(t,0,this.filterRows.splice(i,1)[0]);this.onFilterRowsSetChanged()}this.dragInfo=undefined}};e.prototype.processDropOnBody=function(e){var t;if(!this.elemFiltersWrap.contains(e.target)&&this.dragInfo){var r=this.getColumn(this.dragInfo.field);if(r)this.onFilterRowDeleted(r)}(t=this.bodyDropSubscription)===null||t===void 0?void 0:t.dispose();this.bodyDropSubscription=undefined};e.prototype.createColDragInfo=function(){if(!this.dragInfo&&this.dragColumn){this.dragInfo={field:this.dragColumn.field,targetIndex:undefined}}};Object.defineProperty(e.prototype,"showDragArrows",{get:function(){return!!this.dragInfo&&this.dragInfo.targetIndex!==undefined},enumerable:false,configurable:true});var t;e.clientFilterID="00000000-0000-0000-0000-000000000000";e.minFilterID="00000000-0000-0000-0000-000000000010";e.msgRemoveFilter="The current filter with all conditions will be deleted";r.__decorate([n.bindable,r.__metadata("design:type",Object)],e.prototype,"config",void 0);r.__decorate([n.bindable,r.__metadata("design:type",String)],e.prototype,"filterId",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Array)],e.prototype,"filters",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Array)],e.prototype,"filterRows",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Boolean)],e.prototype,"isDirtyFilter",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Object)],e.prototype,"dragColumn",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Function)],e.prototype,"onSortChanged",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Function)],e.prototype,"onFilterChanged",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Function)],e.prototype,"onFilterSave",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Function)],e.prototype,"onFilterRemove",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Function)],e.prototype,"onFilterRowChanged",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Function)],e.prototype,"onFilterRowRemoved",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Function)],e.prototype,"onRowsSetChanged",void 0);r.__decorate([n.computedFrom("dragInfo","dragInfo.targetIndex"),r.__metadata("design:type",Boolean),r.__metadata("design:paramtypes",[])],e.prototype,"showDragArrows",null);e=t=r.__decorate([n.autoinject,r.__metadata("design:paramtypes",[Element,a.EventAggregator,i.DialogService])],e);return e}();t.QpFilterBarCustomElement=u}));define("text!controls/global/grid/qp-filter-bar.css",[],(function(){return".filter-bar\r\n{\r\n\tdisplay: block;\r\n}\r\n\r\n.filters-headers\r\n{\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n}\r\n.filters-headers .headers-wrap\r\n{\r\n  -webkit-box-flex: 1;\r\n      -ms-flex: 1;\r\n          flex: 1;\r\n  overflow: hidden;\r\n  border-bottom: 1px solid #E0E4E8;\r\n  margin-right: 6px;\r\n}\r\n.filters-headers .headers-wrap > ul\r\n{\r\n  display: table;\r\n  white-space: nowrap;\r\n\r\n  list-style: none outside none;\r\n  margin: 0px;\r\n  padding: 0px;\r\n  border-spacing: 0px;\r\n}\r\n.filters-headers .headers-wrap > ul > li\r\n{\r\n  display: table-cell;\r\n  padding: 6px 16px;\r\n  text-align: center;\r\n  text-transform: uppercase;\r\n  height: 24px;\r\n  line-height: 24px;\r\n  opacity: 0.5;\r\n}\r\n.filters-headers .headers-wrap > ul > li:hover\r\n{\r\n  cursor: pointer;\r\n  background-color: #E0E4E8;\r\n  opacity: 1;\r\n}\r\n.filters-headers .headers-wrap > ul > li.selected\r\n{\r\n  color: #027ACC;\r\n  border-bottom: 2px solid #027ACC;\r\n  padding-bottom: 4px;\r\n  opacity: 1;\r\n}\r\n.filters-headers .filter-box-wrap\r\n{\r\n  padding-right: 5px;\r\n  -ms-flex-item-align: end;\r\n      align-self: flex-end;\r\n}\r\n\r\n.filters-strip\r\n{\r\n  position: relative;\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  padding-top: 3px;\r\n  padding-bottom: 5px;\r\n}\r\n.filters-strip .filters-wrap\r\n{\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n\t-ms-flex-wrap: wrap;\r\n\t    flex-wrap: wrap;\r\n\tgap: 6px;\r\n}\r\n.filters-strip .filters-wrap, .filters-strip .advanced-filter\r\n{\r\n  -webkit-box-flex: 1;\r\n      -ms-flex: 1;\r\n          flex: 1;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.filters-strip .buttons-wrap\r\n{\r\n  padding: 2px 5px;\r\n}\r\n\r\n.filters-strip .advanced-filter .filter-button span.text\r\n{\r\n  max-width: none;\r\n  -webkit-box-flex: 1;\r\n      -ms-flex: 1;\r\n          flex: 1;\r\n}\r\n.filters-strip .advanced-filter .filter-button span.and\r\n{\r\n  color: #419622;\r\n}\r\n.filters-strip .advanced-filter .filter-button span.or\r\n{\r\n  color: #df9a2b;\r\n}\r\n\r\n.filters-strip .filters-wrap .filter-drop-tip\r\n{\r\n  -webkit-box-flex: 1;\r\n      -ms-flex: 1;\r\n          flex: 1;\r\n  white-space: nowrap;\r\n  height: 30px;\r\n  font-style: italic;\r\n  border: 1px dashed #C8C8C8;\r\n  border-radius: 5px;\r\n  padding: 6px 5px;\r\n  color: #8F8F8F;\r\n}\r\n.filters-strip .filters-wrap .add-filter button\r\n{\r\n  font-size: 16px;\r\n  border-radius: 3px;\r\n  min-width: 50px;\r\n  height: 30px;\r\n  padding-top: 3px;\r\n  background-color: #ECEDF0;\r\n  border-color: #ECEDF0;\r\n}\r\n.filters-strip .filters-wrap .add-filter i.ac\r\n{\r\n  padding-right: 0px !important;\r\n}\r\n\r\n.filters-strip i.arrow-down, .filters-strip i.arrow-up\r\n{\r\n  position: absolute;\r\n  z-index: 10000;\r\n}\r\n.filters-strip i.arrow-down\r\n{\r\n  top: 0px;\r\n  -webkit-transform: translateY(-100%);\r\n          transform: translateY(-100%);\r\n}\r\n.filters-strip i.arrow-up\r\n{\r\n  bottom: 0px;\r\n  -webkit-transform: translateY(100%);\r\n          transform: translateY(100%);\r\n}\r\n"}));define("text!controls/global/grid/qp-filter-bar.html",[],(function(){return'<template class="filter-bar"><require from="./qp-filter-bar.css"></require><require from="./elements/qp-filter-box"></require><require from="./elements/qp-filter-button"></require><div class="filters-headers" if.bind="!config.hideHeaders"><div class="headers-wrap"><ul><li repeat.for="f of filters" class="${filterId == f.filterID ? \'selected\' : \'\'}" click.delegate="processFilterHeaderClick($event, f)"> ${f.filterName} </li></ul></div><div class="filter-box-wrap"><qp-filter-box on-filter.call="processFastFilter(filter)"></qp-filter-box></div></div><div class="filters-strip"><div class="filters-wrap" show.bind="!filterText" ref="elemFiltersWrap" dragleave.delegate="processDragLeave($event)" drop.delegate="processDrop($event)" dragover.delegate="processDragOverBar($event)"><qp-filter-button repeat.for="fr of filterRows" config.bind="{filter: fr, column: getColumn(fr.field), showRemoveItem: true}" on-filter.call="onFilterRowApplied(col, filter)" on-sort.call="onSortApplied(col, sort)" on-filter-remove.call="onFilterRowDeleted(col)" draggable="true" dragstart.delegate="processDragStart($event, fr)" dragover.delegate="processDragOver($event, fr)"></qp-filter-button><qp-button if.bind="filterRows != null" config.bind="btnAddFilterConfig" class="add-filter" click.delegate="processAddFilterClick($event)"></qp-button><div class="filter-drop-tip">Drop column here to set filter</div></div><div if.bind="filterText" class="advanced-filter"><div class="filter-button" click.delegate="showAdvancedFilter()"><span class="text" innerhtml.bind="filterText | sanitizeHTML"></span> <i class="ac ac-keyboard_arrow_down"></i></div></div><div class="buttons-wrap" if.bind="!config.hideHeaders"><qp-menu config.bind="btnFilterSaveConfig" menuselected.delegate="processFilterMenu($event)"></qp-menu></div><i class="ac control-RedArrowDown arrow-down" ref="elemArrowDown" show.bind="showDragArrows"></i> <i class="ac control-RedArrowUp arrow-up" ref="elemArrowUp" show.bind="showDragArrows"></i></div></template>'}));define("controls/global/grid/qp-filter-editor",["require","exports","tslib","aurelia-dialog","aurelia-framework","./dialogs/columns-list-dialog","./grid-helper"],(function(e,t,r,i,n,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FilterNode=t.QpFilterEditorCustomElement=void 0;var s=function(){function e(e){this.dialogService=e;this.hoverNodes=[]}e.prototype.filterRowsChanged=function(){this.buildFilterRowsTree()};e.prototype.processHierarchyChanged=function(){this.buildFilterRowsTree()};e.prototype.buildFilterRowsTree=function(){var e=this.rootNode;if(e==null)e=this.rootNode=new l;e.items.splice(0,e.items.length);if(!this.filterRows)return;this.normalizeBrackets();for(var t=0,r=this.filterRows;t<r.length;t++){var i=r[t];if(i.openBrackets>0){var n=i.openBrackets;while(n-- >0)e.items.push(e=new l(e));e.items.push(i)}else if(i.closeBrackets>0){var n=i.closeBrackets;e.items.push(i);while(n-- >0&&!!e.parent){if(n===0)e.orOperator=i.orOperator;e=e.parent}}else e.items.push(i)}};e.prototype.normalizeBrackets=function(){var e=new Array;var t=this.filterRows[0];var r=this.filterRows[this.filterRows.length-1];for(var i=0,n=this.filterRows;i<n.length;i++){var o=n[i];this.reduceBrackets(o);if(o.openBrackets>0){e.push({fr:o,opened:o.openBrackets})}else if(o.closeBrackets>0){var a=e.pop();if(!a){o.closeBrackets=undefined;continue}var s=o.closeBrackets;while(a&&s>0){if(s>=a.opened){if(a.fr.openBrackets===a.opened&&a.opened>1){o.closeBrackets-=a.opened-1;a.fr.openBrackets=a.opened=s=1}if(o===r&&a.fr===t){o.closeBrackets-=s;a.fr.openBrackets-=s}s-=a.opened;if(s>0)a=e.pop()}else{a.opened-=s;e.push(a);s=0}}}}for(var l=0,d=e;l<d.length;l++){var a=d[l];a.fr.openBrackets-=a.opened}};e.prototype.addOpenBrackets=function(e,t){if(!e.openBrackets)e.openBrackets=0;e.openBrackets+=t};e.prototype.addCloseBrackets=function(e,t){if(!e.closeBrackets)e.closeBrackets=0;e.closeBrackets+=t};e.prototype.reduceBrackets=function(e){if(e&&e.openBrackets&&e.closeBrackets){while(e.openBrackets&&e.closeBrackets){e.openBrackets--;e.closeBrackets--}}};e.prototype.copyRemovedFilterRowBrackets=function(e){var t;var r=this.filterRows.indexOf(e);if(e.openBrackets){t=this.filterRows[r+1];if(t)this.addOpenBrackets(t,e.openBrackets)}else if(e.closeBrackets){t=this.filterRows[r-1];if(t)this.addCloseBrackets(t,e.closeBrackets)}if(t)this.reduceBrackets(t)};e.prototype.processFilterRowDelete=function(e){this.copyRemovedFilterRowBrackets(e);this.filterRows.splice(this.filterRows.indexOf(e),1);this.buildFilterRowsTree()};e.prototype.processFilterNodeDelete=function(e){var t=e.getFirstCondition();var r=e.getLastCondition();var i=this.filterRows.indexOf(t);var n=this.filterRows.indexOf(r);var o=0;var a=0;for(var s=i;s<=n;s++){var d=this.filterRows[s];if(d.openBrackets)o+=d.openBrackets;if(d.closeBrackets)a+=d.closeBrackets}var c=o>a?o-a:0;var p=a>o?a-o:0;if(c>0||p>0){var u=e.parent.items;if(c>0){var f=u[u.indexOf(e)+1];var h=f instanceof l?f.getFirstCondition():f;if(h){this.addOpenBrackets(h,c);this.reduceBrackets(h)}}if(p>0){var g=u[u.indexOf(e)-1];var m=g instanceof l?g.getLastCondition():g;if(m){this.addCloseBrackets(m,p);this.reduceBrackets(m)}}}this.filterRows.splice(i,n-i+1);this.buildFilterRowsTree()};e.prototype.processFilterRowInsert=function(e,t,r){var i=e?this.filterRows.indexOf(e):-1;var n=new a.GridFilterRow;n.field=t.field;n.text=a.getFilterRowDisplayText(n,t);if(r&&(e===null||e===void 0?void 0:e.closeBrackets)){n.closeBrackets=r;e.closeBrackets-=r}this.filterRows.splice(i+1,0,n);this.buildFilterRowsTree()};e.prototype.processNewItemClick=function(e){var t=this;var r=e.target;if(r.tagName!=="DIV")r=r.parentElement;var i={attachTo:r,columns:this.columns};this.dialogService.open({viewModel:o.ColumnsListDialog,model:i,lock:false}).whenClosed((function(e){if(!e.wasCancelled&&e.output){t.processFilterRowInsert(undefined,e.output)}}))};e.prototype.processNodeMouseMove=function(e,t){var r=this.hoverNodes;var i="mouse-hover";if(t){e.removeAttribute(i);r.pop()}else{if(r.length)r[r.length-1].removeAttribute(i);r.push(e)}if(r.length)r[r.length-1].setAttribute(i,"")};r.__decorate([n.bindable,r.__metadata("design:type",Array)],e.prototype,"filterRows",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Array)],e.prototype,"columns",void 0);e=r.__decorate([n.autoinject,r.__metadata("design:paramtypes",[i.DialogService])],e);return e}();t.QpFilterEditorCustomElement=s;var l=function(){function e(e){this.items=[];this.parent=e}e.prototype.getFirstCondition=function(){var t=this;do{t=t.items[0]}while(t instanceof e);return t};e.prototype.getLastCondition=function(){var t=this;do{t=t.items[t.items.length-1]}while(t instanceof e);return t};e.prototype.getLevel=function(){var e=this.parent;var t=-1;while(e){e=e.parent;t++}return t};return e}();t.FilterNode=l}));define("text!controls/global/grid/qp-filter-editor.css",[],(function(){return"\r\n.filter-editor\r\n{\r\n\tdisplay: block;\r\n}\r\n\r\n.filter-editor > .btn-new\r\n{\r\n\tpadding: 5px 7px;\r\n\tcursor: pointer;\r\n\tfont-size: 20px;\r\n\tmargin-left: 10px;\r\n}\r\n"}));define("text!controls/global/grid/qp-filter-editor.html",[],(function(){return'<template class="filter-editor"><require from="./qp-filter-editor.css"></require><require from="./elements/qp-filter-node"></require><qp-filter-node if.bind="filterRows.length" node.bind="rootNode" columns.bind="columns" on-hierarchy-changed.call="processHierarchyChanged()" on-filter-row-delete.call="processFilterRowDelete(filter)" on-filter-node-delete.call="processFilterNodeDelete(node)" on-filter-row-insert.call="processFilterRowInsert(filter, col, closeBrackets)" on-node-mouse-move.call="processNodeMouseMove(elem, mouseLeave)"></qp-filter-node><div class="btn-new" else click.delegate="processNewItemClick($event)"><i class="ac ac-add"></i></div></template>'}));define("controls/global/grid/qp-filter-selector",["require","exports","tslib","aurelia-dialog","aurelia-pal","aurelia-framework","./grid-helper","./dialogs/filter-setup-dialog","./dialogs/filter-editor-dialog"],(function(e,t,r,i,n,o,a,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpFilterSelectorCustomElement=void 0;var d=function(){function e(e,t,r){this.element=e;this.bindingEngine=t;this.dialogService=r;this.cmbFilterOptions=[];this.btnFilterSaveOptions=[{type:"MenuButton",text:"Save As",commandName:"SaveAsFilter"},{type:"MenuButton",text:"Advanced Filter",commandName:"Advanced"},{type:"MenuButton",text:"Filter Settings",commandName:"Setup"},{type:"MenuButton",text:"Remove Filter",commandName:"Remove"}];this.btnFilterSaveConfig={images:{normal:"ac@more_horiz"},options:this.btnFilterSaveOptions,hideOpener:true};this.btnSaveConfig={imageUrl:"main@Save",hidden:!this.isFilterRetained()};this.cmbFilterConfig={options:this.cmbFilterOptions,allowNull:false}}t=e;e.prototype.detached=function(){var e;(e=this.filtersObserver)===null||e===void 0?void 0:e.dispose()};e.prototype.raiseOnFilterEvent=function(){if(this.onFilterChanged)this.onFilterChanged({fastFilter:this.fastFilter,filterID:this.filterId})};e.prototype.setCommandsState=function(){this.btnSaveConfig.hidden=!this.isFilterRetained();var e=!this.isClientFilter()&&this.isCurrentFilterEditable();var t=this.btnFilterSaveConfig.options;t[2].disabled=t[3].disabled=!e};e.prototype.filterIdChanged=function(e,t){this.setCommandsState();if(t)this.raiseOnFilterEvent()};e.prototype.filtersChanged=function(){var e=this;var t;(t=this.filtersObserver)===null||t===void 0?void 0:t.dispose();this.filtersObserver=this.bindingEngine.collectionObserver(this.filters).subscribe((function(){return e.fillFilterOptions()}));this.fillFilterOptions();this.setCommandsState()};e.prototype.isDirtyFilterChanged=function(e,t){this.btnSaveConfig.hidden=!this.isFilterRetained()};e.prototype.onFilterRowsSetChanged=function(e){if(e===void 0){e=false}this.isDirtyFilter=true;if(this.onRowsSetChanged)this.onRowsSetChanged({refresh:e})};e.prototype.fillFilterOptions=function(){var e=this;this.cmbFilterOptions.splice(0,this.cmbFilterOptions.length);this.filters.forEach((function(t){return e.cmbFilterOptions.push({value:t.filterID,text:t.filterName})}))};e.prototype.getActiveFilter=function(){var e=this;var t;return(t=this.filters)===null||t===void 0?void 0:t.find((function(t){return t.filterID===e.filterId}))};e.prototype.isClientFilter=function(e){var r=!!e?e:this.filterId;return!r||r<=t.minFilterID};e.prototype.isFilterRetained=function(){return this.isClientFilter()||this.isDirtyFilter};e.prototype.isCurrentFilterEditable=function(){var e=this.getActiveFilter();if(e&&!this.isClientFilter(e.filterID)){return!e.isSystem&&(!e.isShared||this.config.isSharedEditable===true)}return false};e.prototype.isAdvancedFilter=function(e){if(!e)e=this.filterRows;return a.isAdvancedFilter(e)};e.prototype.removeFiltersBrackets=function(e){if(!e)e=this.filterRows;e===null||e===void 0?void 0:e.forEach((function(e){return e.openBrackets=e.closeBrackets=undefined}))};e.prototype.processFilterMenu=function(e){switch(e.detail.commandName){case"SaveAsFilter":case"Setup":this.showFilterSettings(e.detail.commandName==="SaveAsFilter");break;case"Remove":if(this.onFilterRemove&&n.PLATFORM.global.confirm(t.msgRemoveFilter)){this.onFilterRemove({filterID:this.filterId})}break;case"Save":this.processSaveFilter();break;case"Advanced":this.showAdvancedFilter();break}};e.prototype.showFilterSettings=function(e){var t=this;var i=this.getActiveFilter();if(this.isClientFilter(i===null||i===void 0?void 0:i.filterID)){i=r.__assign({},i);i.filterName=""}var n={filter:i,attachTo:undefined,isSharedEditable:this.config.isSharedEditable};this.dialogService.open({viewModel:s.FilterSetupDialog,model:n}).whenClosed((function(r){if(!r.wasCancelled&&t.onFilterSave){t.onFilterSave({filter:r.output,createNew:e})}}))};e.prototype.showAdvancedFilter=function(){var e=this;var t={attachTo:undefined,columns:this.config.columns,filterRows:this.filterRows};this.dialogService.open({viewModel:l.FilterEditorDialog,model:t}).whenClosed((function(t){var i;if(!t.wasCancelled){var n=t.output;if(!e.isAdvancedFilter(n))e.removeFiltersBrackets(n);(i=e.filterRows).splice.apply(i,r.__spreadArray([0,e.filterRows.length],n));e.onFilterRowsSetChanged(true)}}))};e.prototype.processSaveFilter=function(){var e=this.getActiveFilter();if(this.onFilterSave&&e){if(this.isClientFilter(e.filterID))this.showFilterSettings(true);else this.onFilterSave({filter:e,createNew:false})}};e.prototype.processFastFilter=function(e){this.fastFilter=e;this.raiseOnFilterEvent()};var t;e.minFilterID="00000000-0000-0000-0000-000000000010";e.msgRemoveFilter="The current filter with all conditions will be deleted";r.__decorate([o.bindable,r.__metadata("design:type",Object)],e.prototype,"config",void 0);r.__decorate([o.bindable,r.__metadata("design:type",String)],e.prototype,"filterId",void 0);r.__decorate([o.bindable,r.__metadata("design:type",Array)],e.prototype,"filters",void 0);r.__decorate([o.bindable,r.__metadata("design:type",Array)],e.prototype,"filterRows",void 0);r.__decorate([o.bindable,r.__metadata("design:type",Boolean)],e.prototype,"isDirtyFilter",void 0);r.__decorate([o.bindable,r.__metadata("design:type",Function)],e.prototype,"onFilterChanged",void 0);r.__decorate([o.bindable,r.__metadata("design:type",Function)],e.prototype,"onFilterSave",void 0);r.__decorate([o.bindable,r.__metadata("design:type",Function)],e.prototype,"onFilterRemove",void 0);r.__decorate([o.bindable,r.__metadata("design:type",Function)],e.prototype,"onRowsSetChanged",void 0);e=t=r.__decorate([o.autoinject,r.__metadata("design:paramtypes",[Element,o.BindingEngine,i.DialogService])],e);return e}();t.QpFilterSelectorCustomElement=d}));define("text!controls/global/grid/qp-filter-selector.css",[],(function(){return".filter-selector\r\n{\r\n\tdisplay: block;\r\n}\r\n\r\n.filter-selector .items-wrap\r\n{\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n\tgap: 8px;\r\n\t-ms-flex-wrap: wrap;\r\n\t    flex-wrap: wrap;\r\n\tpadding: 5px 0px;\r\n}\r\n\r\n.filter-selector .items-wrap button.qp-button\r\n{\r\n\theight: 100%;\r\n\tbackground-color: #ECEDF0;\r\n\tborder-color: #ECEDF0;\r\n\tborder-radius: 5px;\r\n\tmin-width: 36px;\r\n}\r\n.filter-selector .items-wrap .qp-menu\r\n{\r\n\tbackground-color: #ECEDF0;\r\n\tborder-radius: 5px;\r\n}\r\n\r\n.filter-selector .items-wrap .drop-down__editor\r\n{\r\n\theight: 100%;\r\n\twidth: 160px;\r\n\tbackground-color: #ECEDF0;\r\n\tborder-color: #ECEDF0;\r\n\tborder-radius: 5px;\r\n}\r\n.filter-selector .items-wrap .drop-down__option\r\n{\r\n\tpadding: 7px 4px;\r\n}\r\n\r\n"}));define("text!controls/global/grid/qp-filter-selector.html",[],(function(){return'<template class="filter-selector"><require from="./qp-filter-selector.css"></require><require from="./elements/qp-filter-box"></require><div class="items-wrap"><qp-drop-down config.bind="cmbFilterConfig" value.two-way="filterId" if.bind="config.allowStoredFilters"></qp-drop-down><qp-button config.bind="btnSaveConfig" if.bind="config.allowStoredFilters" click.delegate="processSaveFilter($event)"></qp-button><qp-menu config.bind="btnFilterSaveConfig" menuselected.delegate="processFilterMenu($event)" if.bind="config.allowStoredFilters"></qp-menu><qp-filter-box on-filter.call="processFastFilter(filter)"></qp-filter-box></div></template>'}));define("controls/global/grid/qp-grid",["require","exports","tslib","aurelia-framework","aurelia-event-aggregator","./api-client","apps/enhance/services/control-helper","apps/enhance/services/mark-highlights","aurelia-dialog","./dialogs/columns-dialog","./dialogs/filter-dialog","./qp-filter-bar","./grid-helper","plugins/happeded-on-body","descriptors/customization","services/screen-service"],(function(e,t,r,i,n,o,a,s,l,d,c,p,u,f,h,g){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpGridActionEventArgs=t.QpGridEventArgs=t.QpGridCustomElement=t.GridColumnShowHideMode=t.GridColumnType=t.GridColumnGeneration=t.TextAlign=t.SortDirection=t.GridPagerMode=void 0;var m;(function(e){e[e["InfiniteScroll"]=0]="InfiniteScroll";e[e["NextPrevFirstLast"]=1]="NextPrevFirstLast";e[e["Numeric"]=2]="Numeric"})(m=t.GridPagerMode||(t.GridPagerMode={}));var b;(function(e){e[e["None"]=0]="None";e[e["Ascending"]=1]="Ascending";e[e["Descending"]=2]="Descending"})(b=t.SortDirection||(t.SortDirection={}));var v;(function(e){e[e["NotSet"]=0]="NotSet";e[e["Left"]=1]="Left";e[e["Center"]=2]="Center";e[e["Right"]=3]="Right";e[e["Justify"]=4]="Justify"})(v=t.TextAlign||(t.TextAlign={}));var x;(function(e){e[e["None"]=0]="None";e[e["Append"]=1]="Append";e[e["Recreate"]=2]="Recreate";e[e["AppendDynamic"]=3]="AppendDynamic";e[e["Selector"]=4]="Selector"})(x=t.GridColumnGeneration||(t.GridColumnGeneration={}));var y;(function(e){e[e["NotSet"]=0]="NotSet";e[e["Icon"]=1]="Icon";e[e["HyperLink"]=2]="HyperLink"})(y=t.GridColumnType||(t.GridColumnType={}));var w;(function(e){e[e["False"]=0]="False";e[e["True"]=1]="True";e[e["Server"]=2]="Server"})(w=t.GridColumnShowHideMode||(t.GridColumnShowHideMode={}));var q=function(){function e(e,t,r,i,n,o,a,s){this.element=e;this.screenService=t;this.tq=i;this.bindingEngine=n;this.dialogService=o;this.eventAggregator=a;this.debounceState={delay:336,timeoutId:undefined};this.subscriptions=new Array;this.loadingStatus="in-sync";this.layoutLoaded=false;this.filtersLoaded=false;this.hasSavedLayout=false;this.pageAdjusted=false;this.visibleCols=new Array;this.activeRowIndex=0;this.activeCellIndex=0;this.visibleChanged=new Set;this.refeshButtonConfig={imageUrl:"ac@refresh"};this.resizeButtonConfig={imageUrl:"main@Adjust"};this.topBarConfig={items:{refresh:{config:{action:"refresh",imageUrl:"main@Refresh"}}},styleChanged:false,changed:false};this.pagerBarConfig={items:{first:{config:{action:"firstPage",imageUrl:"main@PageFirst",disabled:true}},prev:{config:{action:"prevPage",imageUrl:"main@PagePrev",disabled:true}},next:{config:{action:"nextPage",imageUrl:"main@PageNext",disabled:true}},last:{config:{action:"lastPage",imageUrl:"main@PageLast",disabled:true}}},styleChanged:false};this.apiClient=r;this.templateColumns=s.elementInstruction.columns;if(t.isValid){this.viewName=this.element.getAttribute("view.bind")||undefined;if(this.viewName)t.registerDataComponent(this.viewName,this)}}t=e;e.prototype.bind=function(e,i){var n;if(!this.config)this.config={};if(!this.config.columns)this.config.columns=[];if(this.linkedWithView()&&((n=this.view)===null||n===void 0?void 0:n.config))Object.assign(this.config,this.view.config);a.applyDefaultValues(this.config,t.defaultConfig);var o=this.config.columns;if(this.templateColumns)o.splice.apply(o,r.__spreadArray([o.length,0],this.templateColumns));this.columns=o.map((function(e){return r.__assign({},e)}));this.columns.forEach((function(e){return a.applyDefaultValues(e,t.defaultColumnConfig)}));this.filterSelectorConfig={columns:this.columns,isSharedFiltersEditable:this.isSharedFiltersEditable,allowStoredFilters:this.config.allowStoredFilters};this.filterBarConfig={columns:this.columns,isSharedFiltersEditable:this.isSharedFiltersEditable,hideHeaders:true};if(this.config.topBarItems){this.topBarConfig.items=r.__assign(r.__assign({},this.config.topBarItems),this.topBarConfig.items);this.topBarConfig.changed=true}this.fillVisibleColumns();this.createSubscriptions();if(!this.linkedWithView())this.refresh()};e.prototype.attached=function(){var e=this;if(!this.rowsPromise&&!this.linkedWithView())this.refresh();if(a.browser.isAnyIE){this.tq.queueTask((function(){e.createSubscriptions();a.applyDefaultValues(e.config,t.defaultConfig)}))}};e.prototype.dettached=function(){this.clearSubscriptions()};e.prototype.createSubscriptions=function(){var e=this;this.clearSubscriptions();var t=function(){return e.fillVisibleColumns()};this.columns.forEach((function(r){var i=e.bindingEngine.propertyObserver(r,"visible").subscribe(t);e.subscriptions.push(i)}));var r=this.bindingEngine.collectionObserver(this.columns).subscribe(t);this.subscriptions.push(r)};e.prototype.clearSubscriptions=function(){this.subscriptions.forEach((function(e){return e.dispose()}));this.subscriptions=[]};e.prototype.getScreenID=function(){var e;if((e=this.screenService)===null||e===void 0?void 0:e.isValid)return this.screenService.screenID;return a.getScreenID()};e.prototype.getViewName=function(){var e;return((e=this.config)===null||e===void 0?void 0:e.view)||this.viewName};e.prototype.getGraphName=function(){var e,t;return((e=this.config)===null||e===void 0?void 0:e.graph)||((t=this.screenService.getGraphInfo())===null||t===void 0?void 0:t.graphType)};e.prototype.linkedWithView=function(){return!!this.viewName&&this.screenService.isValid};e.prototype.getRows=function(e){if(e===void 0){e=false}return r.__awaiter(this,void 0,void 0,(function(){var t,i;var n=this;return r.__generator(this,(function(r){if(this.rowsPromise||!this.config)return[2,this.rowsPromise];t=this.config;i=this.getQueryParams(e);this.loadingStatus="loading";this.rowsPromise=this.apiClient.getGridData(i).then((function(e){n.applyQueryResult(e)})).then((function(e){n.loadingStatus="in-sync";delete n.rowsPromise}));return[2,this.rowsPromise]}))}))};e.prototype.refresh=function(e){if(e===void 0){e=false}return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){if(e)this.rows=[];return[2,this.getRows()]}))}))};e.prototype.getQueryParams=function(e){var t=this;if(e===void 0){e=false}var r=this.columns.map((function(e){var r=t.visibleChanged.has(e.field)?e.visible:undefined;var i=t.layoutLoaded?undefined:e.width;return{field:e.field,key:e.key,sortDirection:e.sortDirection,generated:e.generated,visible:r,width:i}}));var i=e?this.rows.length:0;var n=this.config;var o=n.allowStoredFilters?undefined:this.columns.filter((function(e){return e.filter!=null})).map((function(e){return e.filter}));var a=false;if(this.needAdjustPage()){if(!this.pageAdjusted){a=true;var s=this.eventAggregator.subscribe(f.RESIZE_WINDOW,(function(){return t.adjustPageTimeout()}));this.subscriptions.push(s)}else this.adjustPageSize()}var l={graph:this.getGraphName(),view:this.getViewName(),screenId:this.getScreenID(),columns:r,refreshColumns:!this.layoutLoaded,generateColumns:n.generateColumns,suppressSelection:a,pagerMode:n.pagerMode,startRow:i,searchValue:this.searchValue,searchField:this.searchField,pageIndex:this.pageIndex,pageSize:n.pageSize,parameters:n.parameters,refreshFilters:n.allowStoredFilters!==false&&!this.filtersLoaded,fastFilter:this.fastFilter,filterID:this.filterID,filterRows:o,quickFilterFields:this.isAllRecordsFilter()?n.quickFilterFields:undefined};return l};e.prototype.applyQueryResult=function(e,t){var r=this;var i,n,o;if(t===void 0){t=false}var a=this.config;var s=this.columns;if(e.columns){this.syncColumnsState(e.columns);this.layoutLoaded=true}else if(e.colsProps){e.colsProps.forEach((function(e){var t=s.find((function(t){return t.field===e.field}));if(t)r.copyColumnProps(t,e)}))}if(e.allowStoredFilters!==undefined&&a.allowStoredFilters!==false){a.allowStoredFilters=e.allowStoredFilters;this.filterSelectorConfig.allowStoredFilters=e.allowStoredFilters}if(e.dataKeyNames)this.dataKeyNames=e.dataKeyNames;this.hasSavedLayout=e.hasSavedLayout;if(a.allowStoredFilters)this.syncFiltersState(e);if(this.needAdjustPage()&&!this.pageAdjusted){this.adjustPageSize();this.tq.queueTask((function(){return r.getRows()}));return}this.totalRowCount=e.totalRowCount;this.pageIndex=e.pageIndex;this.isFirstPage=e.isFirstPage;this.isLastPage=e.isLastPage;this.setPagerButtonsState();this.rows=t?this.rows.concat(e.rows):e.rows;this.adjustActiveRowIndex();if(this.searchValue&&(this.pageIndex===0||this.pageIndex===-1)){var l=this.getSearchField();if(l)this.findRow(l,this.searchValue)}if(e.clearSearch)this.clearSearch();if(this.linkedWithView()){(i=this.view)===null||i===void 0?void 0:i.setRows(this.rows);(n=this.view)===null||n===void 0?void 0:n.setActiveRow((o=this.getActiveRow())===null||o===void 0?void 0:o.id)}this.fireActiveRowChanged();this.tq.flushMicroTaskQueue();this.tq.flushTaskQueue()};e.prototype.syncFiltersState=function(e){var t=this;if(e.filters){this.filters=e.filters;this.isSharedFiltersEditable=e.isSharedFiltersEditable;this.filtersLoaded=true;if(this.filterBarConfig)this.filterBarConfig.isSharedEditable=this.isSharedFiltersEditable;if(this.filterSelectorConfig)this.filterSelectorConfig.isSharedEditable=this.isSharedFiltersEditable}if(e.filterID!=null)this.filterID=e.filterID;if(this.filterID==null&&this.filters.length>0)this.filterID=this.filters[0].filterID;this.isDirtyFilter=e.isDirtyFilter;this.filterRows=e.filterRows||[];this.isAdvancedFilter=u.isAdvancedFilter(this.filterRows);this.columns.forEach((function(e){var r;var i=(r=t.filterRows)===null||r===void 0?void 0:r.find((function(t){return t.field===e.field}));e.filter=t.isEmptyFilter(i)?undefined:i}))};e.prototype.syncColumnsState=function(e){var r=this;var i=this.columns;var n=this.config.generateColumns;if(n===x.Recreate||n===x.Selector){i.splice(0,i.length)}e.forEach((function(e,o){var s=i.find((function(t){return t.field===e.field}));a.applyDefaultValues(e,t.defaultColumnConfig);if(s){var l=i.indexOf(s);if(l!==o){if(o>l)o--;i.splice(o,0,i.splice(l,1)[0])}r.copyColumnInitialProps(s,e);r.copyColumnProps(s,e)}else if(n!==x.None){i.splice(o>i.length?i.length:o,0,e)}}))};e.prototype.copyColumnInitialProps=function(e,t){if(t.caption!==undefined)e.caption=t.caption;if(t.dataType!==undefined)e.dataType=t.dataType;if(t.width!==undefined)e.width=t.width;if(t.textAlign!==undefined)e.textAlign=t.textAlign;if(t.timeMode!==undefined)e.timeMode=t.timeMode;if(t.dateMask!==undefined)e.dateMask=t.dateMask;if(t.viewName!==undefined)e.viewName=t.viewName;if(t.maxLength!==undefined)e.maxLength=t.maxLength;if(t.valueItems!==undefined)e.valueItems=t.valueItems;if(t.allowNull!==undefined)e.allowNull=t.allowNull;if(t.allowFastFilter!==undefined)e.allowFastFilter=t.allowFastFilter;if(t.generated!==undefined)e.generated=t.generated;if(t.skipTab!==undefined)e.skipTab=t.skipTab};e.prototype.copyColumnProps=function(e,t){if(t.visible!==undefined)e.visible=t.visible;if(t.required!==undefined)e.required=t.required;if(t.allowUpdate!==undefined)e.allowUpdate=t.allowUpdate;if(t.format!==undefined)e.format=t.format;if(t.decimals!==undefined)e.decimals=t.decimals;if(t.sortDirection!==undefined)e.sortDirection=t.sortDirection};e.prototype.getMoreRows=function(e,t,r){if(this.config.pagerMode===m.InfiniteScroll){if(t&&!this.isLastPage)this.getRows(true)}};e.prototype.rowsChanged=function(){var e=this;var t=this.elemContentWrap;this.tq.queueMicroTask((function(){return e.hasVScroll=t.scrollHeight>t.offsetHeight}))};e.prototype.adjustActiveRowIndex=function(){if(this.rows&&this.rows.length>0&&this.activeRowIndex>=this.rows.length){this.setActiveRowIndex(this.rows.length-1)}};e.prototype.setActiveRowIndex=function(e){var t,r;if(e!==this.activeRowIndex){this.activeRowIndex=e;if(this.linkedWithView())(t=this.view)===null||t===void 0?void 0:t.setActiveRow((r=this.getActiveRow())===null||r===void 0?void 0:r.id);this.fireActiveRowChanged()}};e.prototype.getActiveRow=function(){var e;if(!this.rows||((e=this.rows)===null||e===void 0?void 0:e.length)<=0){return undefined}return this.rows[this.activeRowIndex]};e.prototype.getActiveCell=function(){var e;var t=this.visibleCols[this.activeCellIndex];return(e=this.getActiveRow())===null||e===void 0?void 0:e.cells[t.field]};e.prototype.getColumn=function(e){return this.columns.find((function(t){return t.field===e}))};e.prototype.getColumnIndex=function(e){return this.columns.findIndex((function(t){return t.field===e}))};e.prototype.getColumnVisibleIndex=function(e){return this.visibleCols.findIndex((function(t){return t.field===e}))};e.prototype.focus=function(){this.elemContentWrap.focus()};e.prototype.setSortDirection=function(e,t){this.columns.forEach((function(t){if(t!==e)t.sortDirection=undefined}));e.sortDirection=t;this.refresh()};e.prototype.getLayoutQueryParams=function(e){var t=this;var r=e===null||e===void 0?void 0:e.map((function(e){var r=t.visibleChanged.has(e.field)?e.visible:undefined;return{field:e.field,key:e.key,width:e.width,visible:r,sortDirection:e.sortDirection,skipTab:e.skipTab}}));var i={graph:this.getGraphName(),view:this.getViewName(),screenId:this.getScreenID(),generateColumns:this.config.generateColumns,columns:r||[]};return i};e.prototype.saveLayout=function(){var e=this;this.apiClient.saveGridLayout(this.getLayoutQueryParams(this.columns)).then((function(t){e.hasSavedLayout=t}))};e.prototype.resetLayout=function(){var e=this;this.apiClient.resetGridLayout(this.getLayoutQueryParams(this.config.columns)).then((function(t){if(t!=null){var r=t.map((function(e){return{field:e.field,key:e.key,visible:e.visible,width:e.width,sortDirection:e.sortDirection,skipTab:e.skipTab?e.skipTab:false}}));e.syncColumnsState(r);e.hasSavedLayout=false}}))};e.prototype.getColHeaderIcon=function(e,t){if(t!=null){var r="control-Filter";switch(e){case b.Ascending:r+="SortAsc";break;case b.Descending:r+="SortDesc";break}return r}else if(e!=null&&e!==b.None){return e===b.Ascending?"control-SortAsc":"control-SortDesc"}return""};e.prototype.getColAlign=function(e){switch(e){case v.Center:return"center";case v.Right:return"right";case v.Justify:return"justify"}return null};e.prototype.fillVisibleColumns=function(){var e;if(this.columns===undefined)return;var t=this.columns.filter((function(e){return e.visible!==false}));(e=this.visibleCols).splice.apply(e,r.__spreadArray([0,this.visibleCols.length],t))};e.prototype.markFilterText=function(e,t){return s.markHighlights(e.allowFastFilter?this.fastFilter:"",t)};e.prototype.getColumnCellIndex=function(e){var t=typeof e==="string";var r=t?this.getColumnVisibleIndex(e):e;return this.config.showRowSelectors?r+1:r};e.prototype.getRowElem=function(e){return this.elemRows.querySelector('tr[data-index="'+e+'"]')};e.prototype.getColHeaderElem=function(e){var t=this.elemHeaderTable.tHead.rows[0].cells;var r=e;return t[this.getColumnCellIndex(r!=null?r.field:e)]};e.prototype.scrollIntoView=function(e,t){if(t===void 0){t=a.ScrollMode.Both}if(e)a.scrollToView(this.elemContentWrap,e,t)};e.prototype.fireDefaultAction=function(){if(this.onDefaultAction)this.onDefaultAction({args:new C(this)})};e.prototype.isCellLeftPart=function(e){var t=e.target;if(t.tagName!=="TH")t=t.parentElement;var r=t.getBoundingClientRect();return e.clientX<r.left+r.width/2};e.prototype.createFakeRow=function(){var e={cells:{},fake:true};this.columns.forEach((function(t){e.cells[t.field]={value:"1",text:"abc",readOnly:true}}));this.rows=[e];return e};e.prototype.clearSearch=function(){this.searchValue=undefined};e.prototype.getSearchField=function(){if(this.searchField)return this.searchField;if(this.dataKeyNames)return this.dataKeyNames[this.dataKeyNames.length-1]};e.prototype.findRow=function(e,t){if(!e||!this.rows)return-1;var r=this.getColumn(e);if(!r)return-1;var i=a.netTypeConvert(t,r.dataType);var n=false;var o=r.dataType===a.NetType.String;var s=0;for(;s<this.rows.length;s++){var l=this.rows[s].cells[e];var d=a.netTypeConvert(l.value,r.dataType);n=o?a.compareStrings(i,d,true):n=a.equals(i,d);if(n)break}if(n){this.setActiveRowIndex(s);this.scrollIntoView(this.getRowElem(s),a.ScrollMode.Vertical);return s}return-1};e.prototype.getActiveFilter=function(){var e=this;var t;return(t=this.filters)===null||t===void 0?void 0:t.find((function(t){return t.filterID===e.filterID}))};e.prototype.isClientFilter=function(e){var t=!!e?e:this.filterID;return!t||t<=p.QpFilterBarCustomElement.minFilterID};e.prototype.isAllRecordsFilter=function(e){var t=!!e?e:this.filterID;return!t||t===p.QpFilterBarCustomElement.clientFilterID};e.prototype.getFilterRow=function(e){var t;return(t=this.filterRows)===null||t===void 0?void 0:t.find((function(t){return t.field===e}))};e.prototype.isEmptyFilter=function(e){return e==null||(e.condition==null||e.condition==="EQ"&&e.value==null)};e.prototype.applyFastFilter=function(e){var t=this;this.loadingStatus="will-load";clearTimeout(this.debounceState.timeoutId);this.debounceState.timeoutId=setTimeout((function(){t.fastFilter=e;t.refresh()}),this.debounceState.delay)};e.prototype.applyFilterRow=function(e,t){var r;if(this.config.allowStoredFilters){var i=this.getFilterRow(e.field);if(i)t=u.copyFilterRow(i,t);else if(t)(r=this.filterRows)===null||r===void 0?void 0:r.push(t)}this.onFilterRowApplied(e,t)};e.prototype.onFilterApplied=function(e,t){this.fastFilter=e;this.filterID=t;if(e){this.setPageIndex(0);this.clearSearch()}this.refresh()};e.prototype.onSortApplied=function(e,t){this.setSortDirection(e,t)};e.prototype.onFilterSave=function(e,t){this.saveFilter(t,false,e)};e.prototype.onFilterRemove=function(e){this.removeFilter(e)};e.prototype.onFilterRowApplied=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(r){switch(r.label){case 0:e.filter=this.isEmptyFilter(t)?undefined:t;if(!this.config.allowStoredFilters)return[3,2];return[4,this.saveFilter(false,true)];case 1:r.sent();r.label=2;case 2:this.refresh();return[2]}}))}))};e.prototype.onFilterRowRemoved=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:e.filter=undefined;return[4,this.saveFilter(false,true)];case 1:t.sent();this.refresh();return[2]}}))}))};e.prototype.onFilterRowsSetChanged=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this.saveFilter(false,true)];case 1:t.sent();if(e)this.refresh();return[2]}}))}))};e.prototype.saveFilter=function(e,t,i){if(e===void 0){e=false}if(t===void 0){t=false}return r.__awaiter(this,void 0,void 0,(function(){var n,o,a;var s=this;return r.__generator(this,(function(l){if(i==null)i=this.getActiveFilter();if(i==null)return[2];n=e||!t;o=n?i.filterName:undefined;a={graph:this.getGraphName(),view:this.getViewName(),screenId:this.getScreenID(),filterID:i.filterID,filterName:o,isDefault:i.isDefault,isShared:i.isShared,isHidden:i.isHidden,createNew:e,filterRows:t||e?this.filterRows:undefined};return[2,this.apiClient.saveGridFilter(a).then((function(t){if(e){var o=r.__assign({},i);s.filters.push(o);s.filterID=o.filterID=t}else{var a=s.getActiveFilter();if(a!=null)Object.assign(a,i)}if(n)s.isDirtyFilter=false}))]}))}))};e.prototype.removeFilter=function(e){var t=this;if(this.isClientFilter(e))return;var r={graph:this.getGraphName(),view:this.getViewName(),screenId:this.getScreenID(),filterID:e};this.apiClient.removeGridFilter(r).then((function(r){if(r){var i=t.filters.findIndex((function(t){return t.filterID===e}));if(i>=0){t.filters.splice(i,1);t.setFilterID(t.filters[0].filterID)}}}))};e.prototype.setFilterID=function(e){if(this.filterID!==e){this.filterID=e;this.refresh()}};e.prototype.fireActiveRowChanged=function(){if(this.onActiveRowChanged){this.onActiveRowChanged({args:new C(this)})}};e.prototype.processRowsScroll=function(e){this.elemHeaderWrap.scrollLeft=this.elemContentWrap.scrollLeft};e.prototype.processSelectStart=function(e){e.preventDefault()};e.prototype.processHeaderCornerClick=function(e){var t=this;var i=this.columns;var n={attachTo:this.elemHeaderTable,columns:r.__spreadArray([],i),hasSavedLayout:this.hasSavedLayout,allowSkipTabs:!!this.config.allowSkipTabs};var o=new Map(i.map((function(e){return[e.field,e.visible]})));this.dialogService.open({viewModel:d.ColumnsDialog,model:n,lock:false}).whenClosed((function(e){if(e.wasCancelled)return undefined;if(e.output==="reset"){t.resetLayout()}else{i.splice.apply(i,r.__spreadArray([0,i.length],e.output));i.forEach((function(e){if(e.visible!==o.get(e.field))t.visibleChanged.add(e.field)}));t.focus();t.saveLayout()}}))};e.prototype.processHeadMouseOver=function(e,t){this.setResizeHandlePosition(t)};e.prototype.processHeadMouseMove=function(e,t){this.columnToFilter=!this.isAdvancedFilter&&this.isCellLeftPart(e)?t:undefined;return true};e.prototype.processHeadMouseOut=function(e,t){this.columnToFilter=undefined};e.prototype.processHeadClick=function(e,t){var r=this;if(e.button!==0)return;var i=e.target;if(i.tagName!=="TH")i=i.parentElement;if(!this.isAdvancedFilter&&this.isCellLeftPart(e)){var n={attachTo:i,column:t,filter:t.filter};this.dialogService.open({viewModel:c.FilterDialog,model:n,lock:false}).whenClosed((function(e){if(!e.wasCancelled&&e.output){var i=e.output;if(i.sort!=null)r.onSortApplied(t,i.sort);else r.applyFilterRow(t,i.filter)}}));return}var o=t.sortDirection;switch(t.sortDirection){case b.Ascending:o=b.Descending;break;case b.Descending:o=b.None;break;default:o=b.Ascending;break}this.setSortDirection(t,o)};e.prototype.processCellClick=function(e,t,r){var i=e.target;this.scrollIntoView(i);var n=this.rows.indexOf(r);if(n!==this.activeRowIndex){this.setActiveRowIndex(n)}this.activeCellIndex=t};e.prototype.processCellDblClick=function(e,t,r){if(this.onDoubleClick)this.onDoubleClick({sender:this});this.fireDefaultAction()};e.prototype.processRowSelectorClick=function(e,t){this.scrollIntoView(e.target);this.setActiveRowIndex(this.rows.indexOf(t))};e.prototype.processKeyDown=function(e){var t=this;var r=this.activeRowIndex;var i=this.activeCellIndex;var n=false;var o=this.visibleCols;if(this.onKeyDown)this.onKeyDown({sender:this,event:e});switch(e.key){case"Down":case"ArrowDown":if(r<this.rows.length-1)r++;break;case"Up":case"ArrowUp":if(r>0)r--;break;case"Right":case"ArrowRight":if(i<o.length-1)i++;break;case"Left":case"ArrowLeft":if(i>0)i--;break;case"Home":i=0;break;case"End":i=o.length-1;break;case"Enter":if(!e.ctrlKey&&!e.altKey)this.fireDefaultAction();break}var s=this.getRowElem(this.activeRowIndex);var l=function(e){t.scrollIntoView(e,a.ScrollMode.Vertical);if(a.browser.isAnyIE)s.cells[t.getColumnCellIndex(i)].focus()};if(this.activeRowIndex!==r){var d=this.getRowElem(r);var c=r<this.activeRowIndex;this.setActiveRowIndex(r);if(!d&&s&&c){this.elemContentWrap.scrollTop-=s.offsetHeight;this.tq.queueMicroTask((function(){d=t.getRowElem(r);l(d)}))}if(d)l(d);n=true}if(this.activeCellIndex!==i&&s){var p=s.cells[i===0?0:this.getColumnCellIndex(i)];this.scrollIntoView(p);this.activeCellIndex=i;n=true}return!n};e.prototype.setResizeHandlePosition=function(e){var t=this.getColHeaderElem(e);if(t){var r=t.getBoundingClientRect();var i=this.elemHeaderWrap.getBoundingClientRect();var n=this.elemResizeHandle.offsetWidth;var o=this.elemHeaderWrap.scrollLeft;this.elemResizeHandle.style.left=r.right+o-i.left-n+"px";this.elemResizeHandle.setAttribute("data-index",this.getColumnVisibleIndex(e.field).toString())}};e.prototype.setResizerPosition=function(e){var t=this.resizeInfo;if(t!==undefined){var r=this.elemHeaderWrap.getBoundingClientRect();var i=e.pageX-r.left;if(t.left<0)t.left=i;var n=t.width+(i-t.left);var o=20;if(n>=o)this.elemResizeIndicator.style.left=i+"px";return n>o?n:o}};e.prototype.processResizerMouseDown=function(e){var t=this.elemResizeHandle.getAttribute("data-index");if(t!=null){var r=this.visibleCols[parseInt(t)];this.resizeInfo={left:-1,column:r,width:r.width||0};this.setResizerPosition(e)}};e.prototype.processResizerMouseMove=function(e){if(this.resizeInfo!==undefined)this.setResizerPosition(e)};e.prototype.processResizerMouseUp=function(e){var t=this;var r=this.resizeInfo;if(r!==undefined){var i=this.setResizerPosition(e);if(i){r.column.width=i;if(this.config.autoSaveLayout)this.saveLayout()}this.tq.queueMicroTask((function(){return t.setResizeHandlePosition(r.column)}));this.resizeInfo=undefined}};e.prototype.processResizerMouseLeave=function(e){this.resizeInfo=undefined};e.prototype.processDragStart=function(e,t){this.dragInfo={column:t,targetIndex:undefined};return true};e.prototype.processDragOver=function(e,t){if(this.dragInfo&&this.dragInfo.column!==t){var r=this.getColHeaderElem(t);var i=r.getBoundingClientRect();var n=2;var o=e.clientX<i.left+i.width/n;var a=(o?i.left:i.right)-this.elemArrowDown.offsetWidth/n;this.elemArrowUp.style.left=this.elemArrowDown.style.left=a+"px";var s=this.getColumnIndex(t.field)+(o?0:1);var l=this.getColumnIndex(this.dragInfo.column.field);if(s>l)s--;this.dragInfo.targetIndex=s===l?undefined:s}else if(this.dragInfo){this.dragInfo.targetIndex=undefined}};e.prototype.processDragLeave=function(e){if(this.dragInfo&&!this.elemHeaderWrap.contains(e.relatedTarget)){this.dragInfo.targetIndex=undefined}};e.prototype.processDrop=function(e,t){var r;if(this.dragInfo){var i=(r=this.dragInfo)===null||r===void 0?void 0:r.targetIndex;var n=this.getColumnIndex(this.dragInfo.column.field);var o=this.columns;if(i!==undefined)o.splice(i,0,o.splice(n,1)[0]);this.dragInfo=undefined;if(this.config.autoSaveLayout)this.saveLayout()}};Object.defineProperty(e.prototype,"showDragArrows",{get:function(){return!!this.dragInfo&&this.dragInfo.targetIndex!==undefined},enumerable:false,configurable:true});e.prototype.processToolBarClick=function(e){var t;var r=(t=e.detail)===null||t===void 0?void 0:t.config;var i=r===null||r===void 0?void 0:r.action;switch(i){case"refresh":this.refresh(true);break;default:this.fireActionEvent(i);break}};e.prototype.fireActionEvent=function(e){if(this.onAction&&e)this.onAction({args:new k(this,e)})};e.prototype.processPagerButtonClick=function(e){var t;var r=(t=e.detail)===null||t===void 0?void 0:t.config;switch(r===null||r===void 0?void 0:r.action){case"firstPage":this.clearSearch();this.setPage(0);break;case"lastPage":var i=this.getPagesCount();this.clearSearch();this.setPage(i>0?i-1:-1);break;case"nextPage":this.setPage(this.pageIndex+1);break;case"prevPage":this.setPage(this.pageIndex-1);break}};e.prototype.setPage=function(e){if(this.allowPaging()){var t=this.getPagesCount();if(t>0&&(e<0||e>=t))return;if(this.config.pagerMode===m.Numeric)this.clearSearch();this.pageIndex=e;this.getRows()}};e.prototype.setPageIndex=function(e){if(this.allowPaging())this.pageIndex=e};e.prototype.getPagesCount=function(){var e=this.getPageSize();if(this.totalRowCount===0||e<=0)return 1;if(this.totalRowCount>0){var t=this.totalRowCount+e-1;return Math.floor(t<0?1:t/e)}return-1};e.prototype.getPageSize=function(){return this.config.pageSize||0};e.prototype.setPagerButtonsState=function(){if(this.allowPaging()){var e=this.pagerBarConfig.items;e.first.config.disabled=!!this.isFirstPage;e.prev.config.disabled=!!this.isFirstPage;e.last.config.disabled=!!this.isLastPage;e.next.config.disabled=!!this.isLastPage;this.pagerBarConfig.styleChanged=true}};e.prototype.adjustPageSize=function(){if(!this.rows||this.rows.length===0){this.createFakeRow();this.tq.flushMicroTaskQueue()}var e=0;if(this.elemRows&&a.isVisible(this.elemRows)){var t=this.elemRows.tBodies[0].rows;for(var r=0;r<t.length;r++){var i=t[r];if(i.offsetHeight>0){e=i.offsetHeight;break}}}if(e>0){var n=Math.floor(this.elemContentWrap.clientHeight/e);this.config.pageSize=n}this.pageAdjusted=true;return this.config.pageSize};e.prototype.adjustPage=function(){if(this.needAdjustPage()){var e=this.config.pageSize;if(this.adjustPageSize()!==e)this.getRows()}};e.prototype.adjustPageTimeout=function(){var e=this;var t=100;clearTimeout(this.adjustTimeoutID);this.adjustTimeoutID=setTimeout((function(){return e.adjustPage()}),t)};e.prototype.allowPaging=function(){return this.config.pagerMode!==m.InfiniteScroll&&this.getPageSize()>0};e.prototype.needAdjustPage=function(){return this.allowPaging()&&this.config.adjustPageSize};var t;e.defaultConfig={pagerMode:m.NextPrevFirstLast,pageSize:100,showRowSelectors:true,autoSaveLayout:true,allowSkipTabs:true,showFilterBar:true};e.defaultColumnConfig={type:y.NotSet,textAlign:v.NotSet,allowNull:true,allowUpdate:true,allowSort:true,allowResize:true,allowShowHide:w.True};r.__decorate([i.bindable,r.__metadata("design:type",h.BaseViewModelCollection)],e.prototype,"view",void 0);r.__decorate([i.bindable,r.__metadata("design:type",Object)],e.prototype,"config",void 0);r.__decorate([i.bindable,r.__metadata("design:type",Array)],e.prototype,"rows",void 0);r.__decorate([i.bindable,r.__metadata("design:type",String)],e.prototype,"searchValue",void 0);r.__decorate([i.bindable,r.__metadata("design:type",String)],e.prototype,"searchField",void 0);r.__decorate([i.bindable,r.__metadata("design:type",Function)],e.prototype,"onDoubleClick",void 0);r.__decorate([i.bindable,r.__metadata("design:type",Function)],e.prototype,"onKeyDown",void 0);r.__decorate([i.bindable,r.__metadata("design:type",Function)],e.prototype,"onDefaultAction",void 0);r.__decorate([i.bindable,r.__metadata("design:type",Function)],e.prototype,"onAction",void 0);r.__decorate([i.bindable,r.__metadata("design:type",Function)],e.prototype,"onActiveRowChanged",void 0);r.__decorate([i.observable,r.__metadata("design:type",Object)],e.prototype,"columnToFilter",void 0);r.__decorate([i.computedFrom("dragInfo","dragInfo.targetIndex"),r.__metadata("design:type",Boolean),r.__metadata("design:paramtypes",[])],e.prototype,"showDragArrows",null);e=t=r.__decorate([i.processContent((function(e,t,r,i){var n=r.querySelector("columns");var o=n?n.querySelectorAll("column"):undefined;var s={field:"a",key:"a",type:1,caption:"a",dataType:1,width:1,textAlign:1,visible:true,required:true,timeMode:true,sortDirection:1,generated:true,skipTab:true,format:"a",dateMask:"a",decimals:1,viewName:"a",maxLength:1,allowNull:true,allowUpdate:true,allowFastFilter:true,allowSort:true,allowResize:true,allowCheckAll:true,allowShowHide:1};var l=[];o===null||o===void 0?void 0:o.forEach((function(e){var t=e.getAttributeNames();var r={};t===null||t===void 0?void 0:t.forEach((function(t){var i=t.replace(/-([a-z])/gi,(function(e){return e[1].toUpperCase()}));var n=s[i];if(n){var o=e.getAttribute(t);var l=o;if(typeof n==="boolean")l=a.netTypeConvert(o,a.NetType.Boolean);else if(typeof n==="number")l=a.netTypeConvert(o,a.NetType.Int32);r[i]=l}}));if(r.field||r.key)l.push(r)}));if(l.length>0){i.columns=l;r.innerHTML=""}})),i.customElement("qp-grid"),i.autoinject,r.__metadata("design:paramtypes",[Element,g.ScreenService,o.GridApiClient,i.TaskQueue,i.BindingEngine,l.DialogService,n.EventAggregator,i.TargetInstruction])],e);return e}();t.QpGridCustomElement=q;var C=function(){function e(e){this.activeRow=undefined;this.activeCell=undefined;this.activeRow=e.getActiveRow();this.activeCell=e.getActiveCell()}e.prototype.getCell=function(e){if(this.activeRow&&e){var t=e.toLowerCase();for(var r in this.activeRow.cells){if(r.toLowerCase()===t)return this.activeRow.cells[r]}}};return e}();t.QpGridEventArgs=C;var k=function(e){r.__extends(t,e);function t(t,r){var i=e.call(this,t)||this;i.action=r;return i}return t}(C);t.QpGridActionEventArgs=k}));define("text!controls/global/grid/qp-grid.css",[],(function(){return"::-webkit-input-placeholder {\r\n  font-style: italic;\r\n}\r\n::-moz-placeholder {\r\n  font-style: italic;\r\n}\r\n:-ms-input-placeholder {\r\n  font-style: italic;\r\n}\r\n\r\nqp-grid, qp-grid * \r\n{\r\n  -webkit-box-sizing: border-box;\r\n          box-sizing: border-box;\r\n}\r\nqp-grid\r\n{\r\n  position: relative;\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-box-direction: normal;\r\n      -ms-flex-direction: column;\r\n          flex-direction: column;\r\n  font-size: 13px;\r\n}\r\nqp-grid i.ac\r\n{\r\n  position: relative;\r\n}\r\n\r\n.grid-top-bar\r\n{\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n}\r\n.grid-top-bar .toolbar-cont\r\n{\r\n\t-webkit-box-flex: 1;\r\n\t    -ms-flex: 1;\r\n\t        flex: 1;\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n\t-webkit-box-align: center;\r\n\t    -ms-flex-align: center;\r\n\t        align-items: center;\r\n}\r\n.grid-top-bar div.qp-tool-bar\r\n{\r\n\tmargin: 0px;\r\n\theight:  auto;\r\n}\r\n\r\n.grid-header\r\n{\r\n  position: relative;\r\n  background-color: #F5F7F8;\r\n  border: 1px solid #E0E4E8;\r\n}\r\n.grid-header.scroll-margin\r\n{\r\n  padding-right: 17px;\r\n}\r\n.grid-header i.arrow-down, .grid-header i.arrow-up\r\n{\r\n  position: absolute;\r\n  z-index: 10000;\r\n}\r\n.grid-header i.arrow-down\r\n{\r\n  top: 0px;\r\n  -webkit-transform: translateY(-100%);\r\n          transform: translateY(-100%);\r\n}\r\n.grid-header i.arrow-up\r\n{\r\n  bottom: 0px;\r\n  -webkit-transform: translateY(100%);\r\n          transform: translateY(100%);\r\n}\r\n\r\n.grid-resize-handle\r\n{\r\n  position: absolute;\r\n  top: 0px; bottom: 0px;\r\n  cursor: col-resize;\r\n  width: 4px;\r\n  z-index: 1000;\r\n}\r\n.grid-resize-area\r\n{\r\n  position: absolute;\r\n  top: 0px;\r\n  height: 100%;\r\n  width: 100%;\r\n  z-index: 20000;\r\n  cursor: col-resize;\r\n}\r\n.grid-resize-indicator\r\n{\r\n  width: 1px;  \r\n  border: 1px black solid;\r\n  position: absolute;\r\n  height: 100%;\r\n}\r\n\r\n.grid-header table, .grid-content table\r\n{\r\n  table-layout: fixed;\r\n  width: 0px;\r\n  margin: 0px;\r\n  padding: 0px;\r\n  border-collapse: separate;\r\n  border-width: 0px;\r\n  border-spacing: 0px;\r\n  outline: 0;\r\n}\r\n\r\n.grid-header th\r\n{\r\n  position: relative;\r\n  font-size: 12px;\r\n  color: rgba(0, 0, 0, 0.54);\r\n  font-weight: bold;\r\n  padding: 6px 4px;\r\n  padding-right: 20px;\r\n  border-right: 1px solid #E0E4E8;\r\n  overflow: hidden;\r\n  white-space: normal;\r\n  text-align: left;\r\n  vertical-align: top;\r\n}\r\n.grid-header th:hover\r\n{\r\n  background-color: #E0E4E8;\r\n  color: RGBA(0, 0, 0, 0.87);\r\n  cursor: pointer;\r\n}\r\n\r\n.grid-header th.align-right\r\n{\r\n  padding-right: 4px;\r\n  padding-left: 20px;\r\n}\r\n.grid-header th.filtered\r\n{\r\n  background-color: #E0E4E8;\r\n}\r\n\r\n.grid-header th.col-header i.ac\r\n{\r\n  position: absolute;\r\n  top: 6px; right: 4px;\r\n}\r\n.grid-header th.col-header.align-right i.ac\r\n{\r\n  right: auto;\r\n  left: 0px;\r\n}\r\n\r\n.grid-header .grid-header-text\r\n{\r\n  overflow: hidden;\r\n}\r\n\r\n.grid-header-wrap\r\n{\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n\r\n.grid-content .row-selector-col, .grid-header .row-selector-col\r\n{\r\n  width: 16px;\r\n}\r\n.grid-header th.row-selector, .grid-content-wrap td.row-selector\r\n{\r\n  padding: 0px;\r\n  color: rgba(0, 0, 0, 0.54);\r\n  text-align: center;\r\n}\r\n.grid-header th.row-selector\r\n{\r\n  padding-top: 6px;\r\n}\r\n.grid-content-wrap td.row-selector\r\n{\r\n  background-color: #F5F7F8 !important; \r\n  border-right: 1px solid #E0E4E8;\r\n}\r\n\r\n.grid-content\r\n{\r\n  position: relative;\r\n  height: 100%;\r\n  border: 1px solid #E0E4E8;\r\n  border-top: none;\r\n}\r\n.grid-content qp-loader-indicator\r\n{\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: white;\r\n  opacity: 0.5;\r\n  z-index: 100;\r\n}\r\n.grid-content qp-loader-indicator > *\r\n{\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 50%;\r\n  -webkit-transform: translate(-50%, -50%);\r\n          transform: translate(-50%, -50%);\r\n}\r\n\r\n.grid-content-wrap\r\n{\r\n  overflow: auto;\r\n  position: absolute;\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n.grid-content-wrap td\r\n{\r\n  line-height:  16px;\r\n  min-height: 17px;\r\n  border-bottom: 1px solid #E0E4E8;\r\n  overflow: hidden;\r\n  padding: 7px 8px 5px;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n  cursor: default;\r\n}\r\n\r\n.grid-content-wrap tr.alt-row td\r\n{\r\n  background-color: #F2F6FA;\r\n}\r\n/* \r\n.grid-content-wrap tr:hover td\r\n{\r\n  background-color: #E0E4E8;\r\n  color: RGBA(0, 0, 0, 0.87);\r\n  cursor: default;\r\n} */\r\n\r\n.grid-content-wrap tr.active td\r\n{\r\n  background-color: #E0E4E8;\r\n}\r\n.grid-content-wrap tr.active td.active\r\n{\r\n  background-color: #B5D7EF;\r\n}\r\n\r\n.grid-pager\r\n{\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n\t-webkit-box-orient: vertical;\r\n\t-webkit-box-direction: normal;\r\n\t    -ms-flex-flow: column;\r\n\t        flex-flow: column;\r\n}\r\n.grid-pager div.qp-tool-bar\r\n{\r\n\tmargin: 0px;\r\n\theight:  auto;\r\n\t-webkit-box-orient: horizontal;\r\n\t-webkit-box-direction: reverse;\r\n\t    -ms-flex-direction: row-reverse;\r\n\t        flex-direction: row-reverse;\r\n}"}));define("text!controls/global/grid/qp-grid.html",[],(function(){return'<template class="grid" id="${config.id}" css="display: ${config.hidden ? \'none\': \'\'};"><require from="./qp-grid.css"></require><require from="./qp-filter-selector"></require><require from="./qp-filter-bar"></require><require from="./elements/qp-filter-box"></require><div class="grid-top-bar"><div class="toolbar-cont"><qp-tool-bar config.bind="topBarConfig" buttonpressed.delegate="processToolBarClick($event)"></qp-tool-bar></div><qp-filter-selector filter-id.two-way="filterID" filters.bind="filters" filter-rows.bind="filterRows" is-dirty-filter.two-way="isDirtyFilter" config.bind="filterSelectorConfig" on-filter-changed.call="onFilterApplied(fastFilter, filterID)" on-filter-save.call="onFilterSave(filter, createNew)" on-filter-remove.call="onFilterRemove(filterID)" on-rows-set-changed.call="onFilterRowsSetChanged(refresh)"></qp-filter-selector></div><qp-filter-bar if.bind="config.showFilterBar && config.allowStoredFilters" drag-column.bind="dragInfo.column" filter-id.two-way="filterID" filters.bind="filters" filter-rows.bind="filterRows" is-dirty-filter.two-way="isDirtyFilter" config.bind="filterBarConfig" on-sort-changed.call="onSortApplied(col, sort)" on-filter-changed.call="onFilterApplied(fastFilter, filterID)" on-filter-save.call="onFilterSave(filter, createNew)" on-filter-remove.call="onFilterRemove(filterID)" on-filter-row-changed.call="onFilterRowApplied(col, filter)" on-filter-row-removed.call="onFilterRowRemoved(col)" on-rows-set-changed.call="onFilterRowsSetChanged(refresh)"></qp-filter-bar><div class="grid-resize-area" show.bind="resizeInfo != undefined" mousemove.delegate="processResizerMouseMove($event)" mouseup.delegate="processResizerMouseUp($event)" mouseleave.trigger="processResizerMouseLeave($event)"><div class="grid-resize-indicator" ref="elemResizeIndicator"></div></div><div class="grid-header ${hasVScroll ? \'scroll-margin\' : \'\'}" ref="elemHeader"><div class="grid-header-wrap" ref="elemHeaderWrap"><table ref="elemHeaderTable" if.bind="layoutLoaded"><colgroup><col if.bind="config.showRowSelectors" class="row-selector-col"><col repeat.for="col of visibleCols" css="width: ${col.width ? (col.width + \'px\'): null};"></colgroup><thead><tr><th if.bind="config.showRowSelectors" class="row-selector" click.delegate="processHeaderCornerClick($event)"><i class="ac control-LocalMenu"></i></th><th repeat.for="col of visibleCols" css="text-align:${getColAlign(col.textAlign)}" class="col-header ${col.textAlign == 3 ? \'align-right\' : \'\'} ${col.filter ? \'filtered\' : \'\'}" key.bind="col.field || col.key & attr" mouseup.delegate="processHeadClick($event, col)" mouseover.delegate="processHeadMouseOver($event, col)" mousemove.delegate="processHeadMouseMove($event, col)" mouseout.delegate="processHeadMouseOut($event, col)" draggable="true" dragstart.delegate="processDragStart($event, col)" dragover.delegate="processDragOver($event, col)" drop.delegate="processDrop($event, col)" dragleave.delegate="processDragLeave($event)"><div class="grid-header-text">${col.caption}</div><i if.bind="col.sortDirection > 0 || col.filter || columnToFilter == columnToFilter" class="ac ${col == columnToFilter ? \'control-ArrowDown\' : getColHeaderIcon(col.sortDirection, col.filter)}"></i></th></tr></thead></table><div class="grid-resize-handle" ref="elemResizeHandle" mousedown.delegate="processResizerMouseDown($event)">&nbsp;</div></div><i class="ac control-RedArrowDown arrow-down" ref="elemArrowDown" show.bind="showDragArrows"></i> <i class="ac control-RedArrowUp arrow-up" ref="elemArrowUp" show.bind="showDragArrows"></i></div><div class="grid-content"><qp-loader-indicator show.bind="loadingStatus != \'in-sync\'" loading-state.bind="loadingStatus" style="position:absolute;bottom:0;left:0;right:0;height:5px"></qp-loader-indicator><div class="grid-content-wrap" scroll.trigger="processRowsScroll($event)" ref="elemContentWrap" tabindex="${config.tabIndex}" keydown.delegate="processKeyDown($event)" selectstart.delegate="processSelectStart($event)"><table ref="elemRows" if.bind="rows != null"><colgroup><col if.bind="config.showRowSelectors" class="row-selector-col"><col repeat.for="col of visibleCols" css="width: ${col.width ? (col.width + \'px\'): null};"></colgroup><tbody><tr virtual-repeat.for="r of rows" infinite-scroll-next="getMoreRows" data-index="${$index}" class="${$odd ? \'alt-row\' : \'\'} ${activeRowIndex == $index ? \'active\' : \'\'}" css="visibility: ${r.fake ? \'hidden\' : \'\'}"><td if.bind="config.showRowSelectors" class="row-selector" click.delegate="processRowSelectorClick($event, r)"><i class="ac control-CurrentRow" if.bind="activeRowIndex == $index"></i><template else>&nbsp;</template></td><td repeat.for="col of visibleCols" class="${activeCellIndex == $index ? \'active\' : \'\'}" css="text-align:${getColAlign(col.textAlign)}" click.delegate="processCellClick($event, $index, $parent.r)" dblclick.delegate="processCellDblClick($event, $index, $parent.r)"><let cell.bind="$parent.r.cells[col.field]"></let><template if.bind="col.dataType == 3"><i class="ac control-Grid${cell.value ? \'Check\' : \'Uncheck\'}"></i></template><template else><template if.bind="!!cell.text"><template repeat.for="s of markFilterText(col, cell.text)"><mark if.bind="s.highlight">${s.text}</mark><template else>${s.text}</template></template></template><template else>&nbsp;</template></template></td></tr></tbody></table></div></div><div show.bind="config.pagerMode > 0" class="grid-pager"><qp-tool-bar config.bind="pagerBarConfig" buttonpressed.delegate="processPagerButtonClick($event)"></qp-tool-bar></div></template>'}));define("controls/global/icon/qp-hyper-icon",["require","exports","tslib","aurelia-framework","aurelia-logging"],(function(e,t,r,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpHyperIconCustomElement=void 0;var o=n.getLogger("qp-hyper-icon");var a=function(){function e(){this.disabled=false;this.currentMode="normal";this.pushed=false}t=e;e.prototype.disabledChanged=function(){if(this.disabled)this.currentMode="disabled";else this.currentMode="normal"};e.prototype.imagesChanged=function(e,t){if(!this.images.hover)this.images.hover=this.images.normal;if(!this.images.pushed)this.images.pushed=this.images.hover;if(!this.images.disabled)this.images.disabled=this.images.normal};e.prototype.OnMouseOver=function(){if(this.disabled)return;if(this.pushed)this.currentMode="pushed";else this.currentMode="hover"};e.prototype.OnMouseOut=function(){if(this.disabled)return;this.currentMode="normal";this.pushed=false};e.prototype.OnMouseDown=function(){if(this.disabled)return;this.currentMode="pushed";this.pushed=true};e.prototype.OnClick=function(){if(this.disabled)return;this.currentMode="normal";this.pushed=false};Object.defineProperty(e.prototype,"SpriteName",{get:function(){return this.images&&t.parseSpriteName(this.images[this.currentMode])},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"ImageName",{get:function(){return this.images&&t.parseImageName(this.images[this.currentMode])},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"ImageType",{get:function(){return this.images&&t.parseImageType(this.images[this.currentMode])},enumerable:false,configurable:true});e.parseSpriteName=function(e){var t=e.indexOf("@");if(t<0)return null;var r=e.indexOf("svg:");if(r>=0)return e.substring(r+"svg:".length,t);return e.substring(0,t)};e.parseImageName=function(e){var t=e.indexOf("@");if(t<0)return e;return e.substr(t+1)};e.parseImageType=function(e){var t=e.indexOf("svg:");if(t===0)return"svg";t=e.indexOf("@");if(t>=0)return"sprite";return"img"};var t;r.__decorate([i.bindable,r.__metadata("design:type",Object)],e.prototype,"images",void 0);r.__decorate([i.bindable,r.__metadata("design:type",Boolean)],e.prototype,"disabled",void 0);r.__decorate([i.computedFrom("images","currentMode"),r.__metadata("design:type",Object),r.__metadata("design:paramtypes",[])],e.prototype,"SpriteName",null);r.__decorate([i.computedFrom("images","currentMode"),r.__metadata("design:type",Object),r.__metadata("design:paramtypes",[])],e.prototype,"ImageName",null);r.__decorate([i.computedFrom("images","currentMode"),r.__metadata("design:type",Object),r.__metadata("design:paramtypes",[])],e.prototype,"ImageType",null);e=t=r.__decorate([i.autoinject,i.customElement("qp-hyper-icon")],e);return e}();t.QpHyperIconCustomElement=a}));define("text!controls/global/icon/qp-hyper-icon.html",[],(function(){return'<template><div class="qp-hyper-icon" mouseover.delegate="OnMouseOver()" mouseout.delegate="OnMouseOut()" mousedown.delegate="OnMouseDown()" click.delegate="OnClick()"><img if.bind="ImageType===\'img\'" src.bind="ImageName & attr" align="absmiddle"><div if.bind="ImageType!==\'img\'" class="sprite-icon ${SpriteName}-icon" icon.bind="ImageName & attr"><div if.bind="ImageType===\'sprite\'" class="${SpriteName}-icon-img ${SpriteName}-${ImageName}"></div><svg if.bind="ImageType===\'svg\'"><use href.bind="ImageName & attr"></use></svg></div></div></template>'}));define("controls/global/icon/qp-icon",["require","exports","tslib","apps/enhance/services/control-helper","aurelia-framework","aurelia-logging"],(function(e,t,r,i,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpIconCustomElement=void 0;var a=o.getLogger("qp-icon");var s=function(){function e(){this.imagesrc=null;this.spriteName=null;this.imageName=null;this.imageType=null;this.imageReady=false}e.prototype.attached=function(){};e.prototype.imgLoaded=function(){this.imageReady=true};e.prototype.imagesrcChanged=function(e,t){var r=e||"";var n=!r;if(n){this.spriteName=null;this.imageName=null;this.imageType=null;return}var o="@";var a="svg:";var s=r.indexOf(o);if(s<0){n=true}if(n){this.spriteName=null;this.imageName=r;this.imageType="img";return}var l=r.indexOf(a);if(l>=0)this.spriteName=r.substring(l+a.length,s);else this.spriteName=r.substring(0,s);this.imageName=r.substr(s+1);if(l===0){this.imageType="svg";var d=i.topWindow.__svg_icons_path;if(d)this.imageName=""+d+this.spriteName+".svg#"+this.imageName;else this.imageName=i.siteRoot+"/Content/svg_icons/"+this.spriteName+".svg#"+this.imageName}else{var c=r.split(o);if(c.length===2){if(c[0]==="fa")this.imageType="fa";else this.imageType="sprite"}else{this.imageType="img"}}};r.__decorate([n.bindable,n.observable({changeHandler:"imagesrcChanged"}),r.__metadata("design:type",Object)],e.prototype,"imagesrc",void 0);r.__decorate([n.bindable,r.__metadata("design:type",String)],e.prototype,"width",void 0);r.__decorate([n.bindable,r.__metadata("design:type",String)],e.prototype,"height",void 0);e=r.__decorate([n.autoinject,n.customElement("qp-icon")],e);return e}();t.QpIconCustomElement=s}));define("text!controls/global/icon/qp-icon.html",[],(function(){return'<template><img if.bind="imageType===\'img\'" class="${!imageReady ? \'qp-loader-indicator loading\' : \'\'}" src.bind="imageName & attr" align="absmiddle" load.bind="imgLoaded()" css="${width ? \'width: \'+width+\'; \' : \'\'} ${height ? \'height: \'+height+\'; \' : \'\'} "><div if.bind="imageType===\'sprite\'" class="sprite-icon ${spriteName}-icon" icon.bind="imageName & attr"><div if.bind="imageType===\'sprite\'" class="${spriteName}-icon-img ${spriteName}-${imageName}"></div></div><svg if.bind="imageType===\'svg\'"><use href.bind="imageName & attr"></use></svg> <i if.bind="imageType===\'fa\'" class="ac ac-${imageName}" icon.bind="imageName & attr" style="padding-right:5px"></template>'}));define("controls/global/index",["require","exports","./tooltip/qp-tooltip","./icon/qp-icon","./calendar/qp-calendar","./button/qp-button","./check-box/qp-check-box","./informer/qp-informer-rack","./color-picker/qp-color-picker","./suggester/qp-editor-wrapper","./text-editor/qp-text-editor","./number-editor/qp-number-editor","./mask-editor/qp-mask-editor","./date-editor/qp-datetime-edit","./date-editor/qp-datetime-edit-utc","./field-editor/qp-field-editor","./last-update/last-update","./long-run/qp-long-run","./tool-bar/qp-tool-bar","./grid/qp-grid","./loader-indicator/qp-loader-indicator","./drop-down/qp-drop-down","./tooltip/qp-extention-cord","./branch-selector/qp-branch-selector-3d","./dac-browser/qp-dac-browser","./splitter/qp-splitter","./menu/qp-menu","./icon/qp-hyper-icon","./tabbar/qp-tabbar","./tabbar/qp-tab","./screen-title/qp-screen-title","plugins/payment/qp-authorize-net","plugins/payment/qp-stripe","plugins/payment/qp-authorize-net-hosted-form","./customization/customizable","./uploader/qp-uploader"],(function(e,t,r,i,n,o,a,s,l,d,c,p,u,f,h,g,m,b,v,x,y,w,q,C,k,_,D,S,E,F,M,T,A,I,O,N){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.configure=void 0;function $(e){e.globalResources([i.QpIconCustomElement,n.QpCalendarCustomElement,o.QpButtonCustomElement,a.QpCheckBoxCustomElement,s.QpInformerRackCustomElement,C.QpBranchSelector3dCustomElement,l.QpColorPickerCustomElement,d.QpEditorWrapperCustomElement,c.QpTextEditorCustomElement,p.QpNumberEditorCustomElement,u.QpMaskEditorCustomElement,f.QpDatetimeEditCustomElement,h.QpDatetimeEditUtcCustomElement,f.DateUTCValueConverter,g.QpFieldEditorCustomElement,w.QpDropDownCustomElement,m.QpLastUpdateCustomElement,r.QpTooltipCustomElement,y.QpLoaderIndicatorCustomElement,q.QpExtentionCordCustomAttribute,b.QpLongRunCustomElement,v.QpToolBarCustomElement,x.QpGridCustomElement,"./text-editor/converter",D.QpMenuCustomElement,i.QpIconCustomElement,S.QpHyperIconCustomElement,k.QpDacBrowserCustomElement,T.QpAuthorizeNetCustomElement,A.QpStripeCustomElement,I.QpAuthorizeNetHostedFormCustomElement,D.QpMenuCustomElement,N.QpMultiUploadCustomElement,i.QpIconCustomElement,S.QpHyperIconCustomElement,_.QpSplitterCustomElement,E.QpTabbarCustomElement,F.QpTabCustomElement,M.QpScreenTitleCustomElement,O.CustomizableCustomElement])}t.configure=$}));define("controls/global/informer/qp-informer",["require","exports","tslib","aurelia-framework","apps/enhance/services/control-helper","./qp-informer-rack","aurelia-logging"],(function(e,t,r,i,n,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpInformerCustomElement=void 0;var s=a.getLogger("qp-informer");var l=function(){function e(e,t){this.element=e;this.bindingEngine=t;this.hidden=false}t=e;e.prototype.configChanged=function(e,r){var i=this;if(r===undefined){n.applyDefaultValues(e,t.defaultConfig);if(!this.statusObserver){this.statusObserver=this.bindingEngine.propertyObserver(this.config,"status").subscribe((function(e,t){i.hidden=false}))}}this.message=unescape(this.config.message)};e.prototype.detached=function(){if(this.statusObserver)this.statusObserver.dispose()};e.prototype.attached=function(){var e=this;setTimeout((function(){e.closeNotification()}),1e4)};e.prototype.closeNotification=function(){var e=this;this.closing="qp-closing";setTimeout((function(){var t;e.hidden=true;e.closing=undefined;o.hideInformer(e.config);(t=e.element.parentElement)===null||t===void 0?void 0:t.removeChild(e.element)}),300);return false};var t;e.defaultConfig={hidden:false};r.__decorate([i.bindable,r.__metadata("design:type",Object)],e.prototype,"config",void 0);e=t=r.__decorate([i.autoinject,i.customElement("qp-informer"),r.__metadata("design:paramtypes",[Element,i.BindingEngine])],e);return e}();t.QpInformerCustomElement=l}));define("controls/global/informer/qp-informer-rack",["require","exports","tslib","aurelia-framework","aurelia-logging"],(function(e,t,r,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpInformerRackCustomElement=t.hideInformer=t.showInformer=void 0;var o=n.getLogger("qp-informer-rack");function a(e,t){var r=l.singleRack;if(!r)return;t=t||"error";r.messages.push({message:e,status:t})}t.showInformer=a;function s(e){var t=l.singleRack;if(!t)return;for(var r=0;r<t.messages.length;++r){if(e===t.messages[r]){t.messages.splice(r,1)}}}t.hideInformer=s;var l=function(){function e(){this.messages=[];t.singleRack=this}t=e;var t;e=t=r.__decorate([i.customElement("qp-informer-rack"),i.autoinject,r.__metadata("design:paramtypes",[])],e);return e}();t.QpInformerRackCustomElement=l}));define("text!controls/global/informer/qp-informer-rack.html",[],(function(){return'<template><require from="./qp-informer"></require><div id="__qp-informers-rack" class="qp-informer-rack"><qp-informer repeat.for="msg of messages" config.bind="msg"></qp-informer></div></template>'}));define("text!controls/global/informer/qp-informer.css",[],(function(){return"\r\n.qp-informer-rack {\r\n\twidth: 0px;\r\n\theight: 0px;\r\n\tbackground: red;\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tright: 0;\r\n}\r\n\r\n.qp-infromer {\r\n\tposition: relative;\r\n\tz-index: 6000;\r\n\twidth: 260px;\r\n\tpadding: 15px 33px 17px 43px;\r\n\tleft: -355px;\r\n\tmargin-bottom: 12px;\r\n\tfont-size: 15px;\r\n\tfont-weight: 400;\r\n\tline-height: 17.25px;\r\n\ttop: 14px;\r\n\tright: 15px;\r\n\t\tbackground: white;\r\n\t-webkit-box-shadow: 0px 0px 30px rgba(0, 0, 0, 0.35);\r\n\t        box-shadow: 0px 0px 30px rgba(0, 0, 0, 0.35);\r\n\toverflow-wrap: break-word;\r\n}\r\n\r\n.qp-infromer {\r\n\t-webkit-animation-name: scale;\r\n\t        animation-name: scale;\r\n\t-webkit-animation-iteration-count: 1;\r\n\t        animation-iteration-count: 1;\r\n\t-webkit-animation-duration: .2s;\r\n\t        animation-duration: .2s;\r\n\t-webkit-animation-timing-function: cubic-bezier(.23,.86,.31,1.22);\r\n\t        animation-timing-function: cubic-bezier(.23,.86,.31,1.22);\r\n}\r\n\r\n@media (min-width: 320px) {\r\n  .qp-infromer {\r\n    left: -290px;\r\n  }\r\n}\r\n\r\n.qp-infromer.qp-closing {\r\n\t-webkit-transform: scale(0);\r\n\t        transform: scale(0);\r\n\t-webkit-transition: -webkit-transform .2s cubic-bezier(.53,-0.29,.37,.52);\r\n\ttransition: -webkit-transform .2s cubic-bezier(.53,-0.29,.37,.52);\r\n\ttransition: transform .2s cubic-bezier(.53,-0.29,.37,.52);\r\n\ttransition: transform .2s cubic-bezier(.53,-0.29,.37,.52), -webkit-transform .2s cubic-bezier(.53,-0.29,.37,.52);\r\n}\r\n\r\n\r\n.qp-infromer.qp-status-error {\r\n\tborder-left: 7px solid #f00;\r\n}\r\n.qp-infromer.qp-status-info {\r\n\tborder-left: 7px solid #47A824;\r\n}\r\n.qp-infromer.qp-status-warning {\r\n\tborder-left: 7px solid #F6C244;\r\n\tpadding-bottom: 65px;\r\n}\r\n\r\n\r\n.qp-infromer .qp-close-icon {\r\n\tposition: absolute;\r\n\tright: 12px;\r\n\ttop: 12px;\r\n\tcolor: rgba(0, 0, 0, 0.4);\r\n\tcursor: pointer;\r\n}\r\n\r\n@-webkit-keyframes scale {\r\n\t0% {-webkit-transform: scale(0);transform: scale(0)}\r\n\t100% {-webkit-transform: scale(1);transform: scale(1)}\r\n}\r\n\r\n@keyframes scale {\r\n\t0% {-webkit-transform: scale(0);transform: scale(0)}\r\n\t100% {-webkit-transform: scale(1);transform: scale(1)}\r\n}\r\n\r\n.qp-infromer .qp-status-icon {\r\n\tposition: absolute;\r\n\tleft: 11px;\r\n\ttop: 16px;\r\n\twidth: 16px;\r\n\theight: 16px;\r\n}\r\n\r\n.qp-infromer .qp-status-icon svg {\r\n\theight: 16px;\r\n\twidth: 16px;\r\n}\r\n\r\n.qp-infromer.qp-status-info .qp-status-icon svg {\r\n\tfill: #47A824;\r\n\theight: 20px;\r\n\twidth: 20px;\r\n}\r\n\r\n.qp-infromer.qp-status-error .qp-status-icon svg {\r\n\tfill: #f00;\r\n\theight: 19px;\r\n\twidth: 22px;\r\n}\r\n\r\n\r\n"}));define("text!controls/global/informer/qp-informer.html",[],(function(){return'<template><require from="./qp-informer.css"></require><div class="qp-infromer qp-status-error ${closing}" css="${config.hidden || hidden ? \'display: none;\' : \'\'}"><qp-icon class="qp-status-icon" imagesrc="svg:main@warnsign"></qp-icon><span>${message}</span><qp-icon click.delegate="closeNotification($event)" class="qp-close-icon" imagesrc="main@RecordDel"></qp-icon></div></template>'}));define("controls/global/last-update/last-update",["require","exports","tslib","aurelia-framework"],(function(e,t,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpLastUpdateCustomElement=void 0;var n=function(){function e(){}e.prototype.valueChanged=function(e){this.dateTime=new Date(e)};r.__decorate([i.bindable,r.__metadata("design:type",String)],e.prototype,"value",void 0);e=r.__decorate([i.customElement("qp-last-update")],e);return e}();t.QpLastUpdateCustomElement=n}));define("controls/global/last-update/last-update-value-converter",["require","exports","aurelia-binding","apps/enhance/services/localization"],(function(e,t,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AgoValueConverter=void 0;var n="ago-signal";var o=2e4;var a=60;var s=24;var l=7;var d=1e3;setInterval((function(){r.signalBindings(n)}),o);var c=i.LOCALIZED_STRINGS&&i.LOCALIZED_STRINGS.lastUpdate||{JustNow:"Updated just now",MinsAgo:"Updated {{mins}} min ago",HoursAgo:"Updated {{hours}} hr ago"},p=c.JustNow,u=c.MinsAgo,f=c.HoursAgo,h=c.DaysAgo,g=c.LongAgo;var m=function(){function e(){this.signals=[n]}e.prototype.toView=function(e){if(!e){return""}var t=new Date;var r=Math.floor((t.valueOf()-e.valueOf())/d);if(r<a){return p}var i=Math.floor(r/a);if(i<a){return u.replace("{{mins}}",i.toString())}var n=Math.floor(i/a);if(n<=s){return f.replace("{{hours}}",n.toString())}var o=Math.floor(n/s);if(o<=l){return h.replace("{{days}}",n.toString())}return g};return e}();t.AgoValueConverter=m}));define("text!controls/global/last-update/last-update.html",[],(function(){return'<template><require from="./last-update-value-converter"></require> ${dateTime | ago} </template>'}));define("controls/global/loader-indicator/qp-loader-indicator",["require","exports","tslib","aurelia-framework"],(function(e,t,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpLoaderIndicatorCustomElement=void 0;var n=function(){function e(){}Object.defineProperty(e.prototype,"loadingClass",{get:function(){return this.loadingState===true?"loading":this.loadingState?this.loadingState:"in-sync"},enumerable:false,configurable:true});r.__decorate([i.bindable,r.__metadata("design:type",Object)],e.prototype,"loadingState",void 0);r.__decorate([i.computedFrom("loadingState"),r.__metadata("design:type",Object),r.__metadata("design:paramtypes",[])],e.prototype,"loadingClass",null);e=r.__decorate([i.customElement("qp-loader-indicator")],e);return e}();t.QpLoaderIndicatorCustomElement=n}));define("text!controls/global/loader-indicator/qp-loader-indicator.css",[],(function(){return".loader-indicator-img {\r\n    color:#999999;\r\n    color:var(#999999, --primary-color);\r\n}\r\n\r\n.loader-indicator-img .progress {\r\n  stroke-width: 10;\r\n  stroke: currentColor;\r\n  stroke-linecap: square;  \r\n  -webkit-animation: dash 2.5s infinite;  \r\n          animation: dash 2.5s infinite;\r\n}\r\n\r\n\r\n@-webkit-keyframes dash {\r\n  0% {\r\n    stroke-dasharray: 0, 250;\r\n    stroke-dashoffset: 0;\r\n  }\r\n\r\n  25% {\r\n    stroke-dasharray: 250, 0;\r\n    stroke-dashoffset: 0;\r\n  }\r\n\r\n  50% {\r\n    stroke-dasharray: 0, 250;\r\n    stroke-dashoffset: -250;\r\n  }\r\n\r\n  75% {\r\n    stroke-dasharray: 250, 0;\r\n    stroke-dashoffset: 0;\r\n  }\r\n\r\n  100% {\r\n    stroke-dasharray: 0, 250;\r\n    stroke-dashoffset: 0;\r\n  }\r\n}\r\n\r\n\r\n@keyframes dash {\r\n  0% {\r\n    stroke-dasharray: 0, 250;\r\n    stroke-dashoffset: 0;\r\n  }\r\n\r\n  25% {\r\n    stroke-dasharray: 250, 0;\r\n    stroke-dashoffset: 0;\r\n  }\r\n\r\n  50% {\r\n    stroke-dasharray: 0, 250;\r\n    stroke-dashoffset: -250;\r\n  }\r\n\r\n  75% {\r\n    stroke-dasharray: 250, 0;\r\n    stroke-dashoffset: 0;\r\n  }\r\n\r\n  100% {\r\n    stroke-dasharray: 0, 250;\r\n    stroke-dashoffset: 0;\r\n  }\r\n}\r\n"}));define("text!controls/global/loader-indicator/qp-loader-indicator.html",[],(function(){return'<template class="qp-loader-indicator" class.bind="loadingClass"><require from="./qp-loader-indicator.css"></require><template if.bind="loadingState==\'in-sync\'"><template replaceable part="in-sync"></template></template><template if.bind="loadingState==\'will-load\'"><template replaceable part="will-load"></template></template><template if.bind="loadingState==\'loading\'"><template replaceable part="loading"><svg class="loader-indicator-img" height="3px" width="100%" viewBox="80 0 235 10" preserveAspectRatio="none"><path class="progress" stroke-width="4" d="M70,10 l250,0"></path></svg></template></template></template>'}));define("controls/global/long-run/qp-long-run",["require","exports","tslib","aurelia-framework","apps/enhance/services/control-helper","aurelia-logging"],(function(e,t,r,i,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpLongRunCustomElement=void 0;var a=o.getLogger("qp-long-run");var s=function(){function e(e,t){this.element=e;this.bindingEngine=t;this.hidden=false}t=e;Object.defineProperty(e.prototype,"LongRunMessages",{get:function(){return this.config&&this.config.longRunMessage&&this.config.longRunMessage.split("\n")||[]},enumerable:false,configurable:true});e.prototype.configChanged=function(e,r){var i=this;if(r===undefined){n.applyDefaultValues(e,t.defaultConfig);if(!this.statusObserver){this.statusObserver=this.bindingEngine.propertyObserver(this.config,"status").subscribe((function(e,t){i.hidden=false}))}}};e.prototype.detached=function(){if(this.statusObserver)this.statusObserver.dispose()};e.prototype.closeNotification=function(e){var t=this;this.closing="qp-closing";setTimeout((function(){t.hidden=true;t.closing=undefined}),300);return false};e.prototype.stopProcessing=function(e){if(this.config.status!=="inprocess")return true;var t={event:e};var r=new CustomEvent("cancel-long-run",{bubbles:true,detail:t});this.element.dispatchEvent(r);return false};var t;e.defaultConfig={hidden:true};r.__decorate([i.bindable,r.__metadata("design:type",Object)],e.prototype,"config",void 0);r.__decorate([i.computedFrom("config","longRunMessage"),r.__metadata("design:type",Object),r.__metadata("design:paramtypes",[])],e.prototype,"LongRunMessages",null);e=t=r.__decorate([i.autoinject,i.customElement("qp-long-run"),r.__metadata("design:paramtypes",[Element,i.BindingEngine])],e);return e}();t.QpLongRunCustomElement=s}));define("text!controls/global/long-run/qp-long-run.css",[],(function(){return'/* for backward compatibility only */\r\nqp-long-run.progressButton {\r\n\tdisplay: none;\r\n}\r\n\r\n.qp-lr {\r\n\tposition: absolute;\r\n\tz-index: 6000;\r\n\twidth: 200px;\r\n\tpadding: 15px 40px 17px 42px;\r\n\tfont-size: 16px;\r\n\tfont-weight: normal;\r\n\ttop: 10px;\r\n\tright: 10px;\r\n\tbackground: white;\r\n\t-webkit-box-shadow: 0px 0px 30px rgba(0, 0, 0, 0.35);\r\n\t        box-shadow: 0px 0px 30px rgba(0, 0, 0, 0.35);\r\n\toverflow-wrap: break-word;\r\n}\r\n\r\n.qp-lr {\r\n\t-webkit-animation-name: scale;\r\n\t        animation-name: scale;\r\n\t-webkit-animation-iteration-count: 1;\r\n\t        animation-iteration-count: 1;\r\n\t-webkit-animation-duration: .2s;\r\n\t        animation-duration: .2s;\r\n\t-webkit-animation-timing-function: cubic-bezier(.23,.86,.31,1.22);\r\n\t        animation-timing-function: cubic-bezier(.23,.86,.31,1.22);\r\n}\r\n\r\n.qp-lr.qp-closing {\r\n\t-webkit-transform: scale(0);\r\n\t        transform: scale(0);\r\n\t-webkit-transition: -webkit-transform .2s cubic-bezier(.53,-0.29,.37,.52);\r\n\ttransition: -webkit-transform .2s cubic-bezier(.53,-0.29,.37,.52);\r\n\ttransition: transform .2s cubic-bezier(.53,-0.29,.37,.52);\r\n\ttransition: transform .2s cubic-bezier(.53,-0.29,.37,.52), -webkit-transform .2s cubic-bezier(.53,-0.29,.37,.52);\r\n}\r\n\r\n\r\n.qp-lr.qp-status-aborted {\r\n\tborder-left: 7px solid #f00;\r\n}\r\n.qp-lr.qp-status-completed {\r\n\tborder-left: 7px solid #47A824;\r\n}\r\n.qp-lr.qp-status-inprocess {\r\n\tborder-left: 7px solid #F6C244;\r\n\tpadding-bottom: 65px;\r\n}\r\n\r\n.qp-lr .qp-lr-timer {\r\n\tposition: absolute;\r\n\tbottom: 45px;\r\n\tleft: 42px;\r\n\tcolor: rgba(0, 0, 0, .5);\r\n}\r\n\r\n.qp-lr .qp-lr-cancel {\r\n\tposition: absolute;\r\n\tbottom: 15px;\r\n\tright: 15px;\r\n\tpadding: 5px 13px;\r\n\tbackground: #ECEDF0;\r\n\ttext-transform: uppercase;\r\n\tfont-weight: 500;\r\n\tfont-size: 13px;\r\n\tcursor: pointer;\r\n}\r\n\r\n.qp-lr .qp-lr-cancel:hover:after {\r\n\tbackground-color: rgba(0, 0, 0, 0.1);\r\n\tcontent: "";\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tleft: 0;\r\n}\r\n\r\n.qp-lr .qp-close-icon {\r\n\tposition: absolute;\r\n\tright: 12px;\r\n\ttop: 12px;\r\n\tcolor: rgba(0, 0, 0, 0.4);\r\n\tcursor: pointer;\r\n}\r\n\r\n@-webkit-keyframes rotate {\r\n  25%   {-webkit-transform: rotate(90deg);transform: rotate(90deg);}\r\n  50%  {-webkit-transform: rotate(180deg);transform: rotate(180deg);}\r\n  75%  {-webkit-transform: rotate(270deg);transform: rotate(270deg);}\r\n  100% {-webkit-transform: rotate(360deg);transform: rotate(360deg);}\r\n}\r\n\r\n@keyframes rotate {\r\n  25%   {-webkit-transform: rotate(90deg);transform: rotate(90deg);}\r\n  50%  {-webkit-transform: rotate(180deg);transform: rotate(180deg);}\r\n  75%  {-webkit-transform: rotate(270deg);transform: rotate(270deg);}\r\n  100% {-webkit-transform: rotate(360deg);transform: rotate(360deg);}\r\n}\r\n\r\n@-webkit-keyframes scale {\r\n\t0% {-webkit-transform: scale(0);transform: scale(0)}\r\n\t100% {-webkit-transform: scale(1);transform: scale(1)}\r\n}\r\n\r\n@keyframes scale {\r\n\t0% {-webkit-transform: scale(0);transform: scale(0)}\r\n\t100% {-webkit-transform: scale(1);transform: scale(1)}\r\n}\r\n\r\n.qp-lr.qp-status-inprocess .qp-status-icon {\r\n\t-webkit-animation-name: rotate;\r\n\t        animation-name: rotate;\r\n\t-webkit-animation-iteration-count: infinite;\r\n\t        animation-iteration-count: infinite;\r\n\t-webkit-animation-duration: 1s;\r\n\t        animation-duration: 1s;\r\n\t-webkit-animation-timing-function: linear;\r\n\t        animation-timing-function: linear;\r\n}\r\n\r\n.qp-lr .qp-status-icon {\r\n\tposition: absolute;\r\n\tleft: 15px;\r\n\ttop: 14px;\r\n\twidth: 16px;\r\n\theight: 16px;\r\n}\r\n\r\n.qp-lr .qp-status-icon svg {\r\n\theight: 16px;\r\n\twidth: 16px;\r\n}\r\n\r\n.qp-lr.qp-status-completed .qp-status-icon svg {\r\n\tfill: #47A824;\r\n\theight: 20px;\r\n\twidth: 20px;\r\n}\r\n\r\n.qp-lr.qp-status-aborted .qp-status-icon svg {\r\n\tfill: #f00;\r\n\theight: 19px;\r\n\twidth: 22px;\r\n}\r\n\r\n.qp-lr-message {\r\n\twhite-space: pre-wrap;\r\n}\r\n\r\n'}));define("text!controls/global/long-run/qp-long-run.html",[],(function(){return'<template><require from="./qp-long-run.css"></require><div show.bind="config.status===\'inprocess\'" class="qp-lr qp-status-${config.status}" id="${config.id}" css="${config.hidden ? \'display: none;\' : \'\'}" ref="inprocElement"><qp-icon class="qp-status-icon" imagesrc="svg:main@spinner"></qp-icon><div repeat.for="message of LongRunMessages">${message}</div><div class="qp-lr-timer" ref="timeElement" id="${config.id}_timer">${config.longRunCompleted}</div><div class="qp-lr-cancel" id="${config.id}_cancel" click.delegate="stopProcessing($event)">Cancel</div></div><div if.bind="config.status===\'aborted\' || config.status===\'completed\'" class="qp-lr qp-status-${config.status} ${closing}" css="${config.hidden || hidden ? \'display: none;\' : \'\'}"><qp-icon class="qp-status-icon" imagesrc="svg:main@${config.status===\'completed\' ? \'checkmark\' : \'warnsign\'}"></qp-icon><span class="qp-lr-message">${config.longRunMessage}</span><qp-icon click.delegate="closeNotification($event)" class="qp-close-icon" imagesrc="main@RecordDel"></qp-icon></div></template>'}));define("controls/global/longrun-indicator/qp-longrun-indicator",["require","exports","tslib","aurelia-framework","aurelia-event-aggregator"],(function(e,t,r,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpLongrunIndicatorCustomElement=void 0;var o=function(){function e(e){var t=this;this.eventAggregator=e;this.showProgress=false;this.showSuccess=false;this.showError=false;e.subscribe("longrun-cleared",(function(){t.showProgress=false;t.showSuccess=false;t.showError=false}));e.subscribe("longrun-started",(function(){t.showProgress=true;t.showSuccess=false;t.showError=false}));e.subscribe("longrun-succeded",(function(e){t.successText=t.config.successedTextCallback?t.config.successedTextCallback():e;t.showProgress=false;t.showSuccess=true;t.showError=false}));e.subscribe("longrun-aborted",(function(e){t.errorText=t.config.errorTextCallback?t.config.errorTextCallback():e;t.showProgress=false;t.showSuccess=false;t.showError=true}))}e.prototype.closeNotification=function(e){var t=this;setTimeout((function(){t.showProgress=false;t.showSuccess=false;t.showError=false}),300);return false};e.prototype.stopProcessing=function(e){if(!this.showProgress)return true;if(this.config.cancelCallback)this.config.cancelCallback();return false};r.__decorate([i.bindable,r.__metadata("design:type",Object)],e.prototype,"config",void 0);e=r.__decorate([i.customElement("qp-longrun-indicator"),i.autoinject,r.__metadata("design:paramtypes",[n.EventAggregator])],e);return e}();t.QpLongrunIndicatorCustomElement=o}));define("text!controls/global/longrun-indicator/qp-longrun-indicator.css",[],(function(){return".qp-lri.qp-status-error {\r\n\tborder-left: 7px solid #f00;\r\n}\r\n.qp-lri.qp-status-success {\r\n\tborder-left: 7px solid #47A824;\r\n}\r\n.qp-lri .qp-status-icon {\r\n\tleft: 15px;\r\n\ttop: 14px;\r\n\twidth: 16px;\r\n\theight: 16px;\r\n}\r\n\r\n.qp-lri .qp-status-icon svg {\r\n\theight: 16px;\r\n\twidth: 16px;\r\n}\r\n\r\n.qp-lri.qp-status-success .qp-status-icon {\r\n\tfill: #47A824;\r\n\theight: 20px;\r\n\twidth: 20px;\r\n}\r\n\r\n.qp-lri.qp-status-error .qp-status-icon {\r\n\tfill: #f00;\r\n\theight: 19px;\r\n\twidth: 22px;\r\n}\r\n"}));define("text!controls/global/longrun-indicator/qp-longrun-indicator.html",[],(function(){return'<template><require from="./qp-longrun-indicator.css"></require><div id="${config.id}_progress" click.delegate="stopProcessing($event)" if.bind="showProgress" style="display:flex;align-items:center"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="background:#fff;display:block" width="32px" height="32px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><g transform="rotate(0 50 50)"><rect x="48.5" y="23" rx="0.2" ry="0.2" width="3" height="10" fill="#999999"><animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1.25s" begin="-1.1666666666666667s" repeatCount="indefinite"></animate></rect></g><g transform="rotate(24 50 50)"><rect x="48.5" y="23" rx="0.2" ry="0.2" width="3" height="10" fill="#999999"><animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1.25s" begin="-1.0833333333333333s" repeatCount="indefinite"></animate></rect></g><g transform="rotate(48 50 50)"><rect x="48.5" y="23" rx="0.2" ry="0.2" width="3" height="10" fill="#999999"><animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1.25s" begin="-1s" repeatCount="indefinite"></animate></rect></g><g transform="rotate(72 50 50)"><rect x="48.5" y="23" rx="0.2" ry="0.2" width="3" height="10" fill="#999999"><animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1.25s" begin="-0.9166666666666666s" repeatCount="indefinite"></animate></rect></g><g transform="rotate(96 50 50)"><rect x="48.5" y="23" rx="0.2" ry="0.2" width="3" height="10" fill="#999999"><animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1.25s" begin="-0.8333333333333334s" repeatCount="indefinite"></animate></rect></g><g transform="rotate(120 50 50)"><rect x="48.5" y="23" rx="0.2" ry="0.2" width="3" height="10" fill="#999999"><animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1.25s" begin="-0.75s" repeatCount="indefinite"></animate></rect></g><g transform="rotate(144 50 50)"><rect x="48.5" y="23" rx="0.2" ry="0.2" width="3" height="10" fill="#999999"><animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1.25s" begin="-0.6666666666666666s" repeatCount="indefinite"></animate></rect></g><g transform="rotate(168 50 50)"><rect x="48.5" y="23" rx="0.2" ry="0.2" width="3" height="10" fill="#999999"><animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1.25s" begin="-0.5833333333333334s" repeatCount="indefinite"></animate></rect></g><g transform="rotate(192 50 50)"><rect x="48.5" y="23" rx="0.2" ry="0.2" width="3" height="10" fill="#999999"><animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1.25s" begin="-0.5s" repeatCount="indefinite"></animate></rect></g><g transform="rotate(216 50 50)"><rect x="48.5" y="23" rx="0.2" ry="0.2" width="3" height="10" fill="#999999"><animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1.25s" begin="-0.4166666666666667s" repeatCount="indefinite"></animate></rect></g><g transform="rotate(240 50 50)"><rect x="48.5" y="23" rx="0.2" ry="0.2" width="3" height="10" fill="#999999"><animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1.25s" begin="-0.3333333333333333s" repeatCount="indefinite"></animate></rect></g><g transform="rotate(264 50 50)"><rect x="48.5" y="23" rx="0.2" ry="0.2" width="3" height="10" fill="#999999"><animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1.25s" begin="-0.25s" repeatCount="indefinite"></animate></rect></g><g transform="rotate(288 50 50)"><rect x="48.5" y="23" rx="0.2" ry="0.2" width="3" height="10" fill="#999999"><animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1.25s" begin="-0.16666666666666666s" repeatCount="indefinite"></animate></rect></g><g transform="rotate(312 50 50)"><rect x="48.5" y="23" rx="0.2" ry="0.2" width="3" height="10" fill="#999999"><animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1.25s" begin="-0.08333333333333333s" repeatCount="indefinite"></animate></rect></g><g transform="rotate(336 50 50)"><rect x="48.5" y="23" rx="0.2" ry="0.2" width="3" height="10" fill="#999999"><animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1.25s" begin="0s" repeatCount="indefinite"></animate></rect></g></svg> <span if.bind="config.text">${config.text}</span></div><div id="${config.id}_success" click.delegate="closeNotification($event)" if.bind="showSuccess" style="display:flex;align-items:center" class="qp-lri qp-status-success"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="qp-status-icon" style="background:#fff;display:block" width="20" height="20" viewBox="0 0 20 20" preserveAspectRatio="xMidYMid"><path d="M10 0.375C4.6375 0.375 0.375 4.6375 0.375 10C0.375 15.3625 4.6375 19.625 10 19.625C15.3625 19.625 19.625 15.3625 19.625 10C19.625 4.6375 15.3625 0.375 10 0.375ZM10 1.75C14.5375 1.75 18.25 5.4625 18.25 10C18.25 14.5375 14.5375 18.25 10 18.25C5.4625 18.25 1.75 14.5375 1.75 10C1.75 5.4625 5.4625 1.75 10 1.75ZM13.575 6.7L8.625 11.7875L6.425 9.45L5.325 10.55L8.625 13.7125L14.675 7.6625L13.575 6.7Z"/></svg> <span if.bind="successText">${successText}</span></div><div id="${config.id}_error" click.delegate="closeNotification($event)" if.bind="showError" style="display:flex;align-items:center" class="qp-lri qp-status-error"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="qp-status-icon" style="background:#fff;display:block" width="20" height="20" viewBox="0 0 20 20" preserveAspectRatio="xMidYMid"><path fill-rule="evenodd" clip-rule="evenodd" d="M19.0428 15.8464C19.3047 16.3047 18.9738 16.875 18.4459 16.875L3.55403 16.875C3.02615 16.875 2.69521 16.3047 2.95711 15.8464L10.4031 2.816C10.667 2.35413 11.333 2.35413 11.5969 2.816L19.0428 15.8464ZM9.80614 1.0892C10.334 0.165456 11.666 0.165457 12.1938 1.0892L20.8244 16.1928C21.3482 17.1095 20.6864 18.25 19.6306 18.25H2.36934C1.31359 18.25 0.651705 17.1095 1.17551 16.1928L9.80614 1.0892ZM11.4568 5.87499H10.543C10.4018 5.87499 10.2669 5.96048 10.1712 6.11077C10.0755 6.26105 10.0276 6.46241 10.0391 6.66605L10.4344 12.2501C10.4516 12.553 10.6266 12.7862 10.8368 12.7862H11.1631C11.3732 12.7862 11.5482 12.553 11.5655 12.2501L11.9607 6.66606C11.9723 6.46241 11.9244 6.26105 11.8287 6.11077C11.733 5.96048 11.5981 5.87499 11.4568 5.87499ZM10.9999 16.0503C11.5166 16.0503 11.9355 15.6193 11.9355 15.0877C11.9355 14.556 11.5166 14.125 10.9999 14.125C10.4832 14.125 10.0644 14.556 10.0644 15.0877C10.0644 15.6193 10.4832 16.0503 10.9999 16.0503Z"/></svg> <span if.bind="errorText">${errorText}</span></div></template>'}));define("controls/global/mask-editor/converter",["require","exports","apps/enhance/services/mask-helper","./qp-mask-editor"],(function(e,t,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MaskEditorValueConverter=void 0;var n=function(){function e(){}e.prototype.toView=function(e,t,r){if(r==null)return"";if(!r.enabled||r.readOnly)t=false;if(!t&&r.allowNull&&e==null)return r.nullText;return t?this.getEditText(e,r):this.getDisplayText(e,r)};e.prototype.fromView=function(e,t,r){if(r.allowNull&&(!e||e===r.nullText))return null;var i=this.calculateValue(e,r.valueMode,1,r);if(i===undefined&&t&&r.skipValidation){i=this.calculateValue(e,r.valueMode,0,r)}return i};e.prototype.getDisplayValue=function(e,t,i){this.initializeMask(t);if(t.inputMask){if(!i)i=t.promptChar;return r.formatByMask(this.maskParts.maskFull,e,i,t.valueMode)}return e!=null?e:""};e.prototype.getDisplayText=function(e,t){return this.getDisplayValue(e,t,t.emptyChar)};e.prototype.getEditText=function(e,t){if(t.skipValidation)return e!=null?e:"";return this.getDisplayValue(e,t)};e.prototype.calculateValue=function(e,t,n,o){if(!this.mask)return e;var a=new RegExp("\\"+o.promptChar,"g");e=e.toString().replace(a,String.fromCharCode(0));var s=0,l,d,c=true,p="";for(var u=0;u<this.mask.length;u++){if((d=this.mask.charCodeAt(u))<i.maxMaskCode){l=null;if(s<e.length){l=r.maskFilter(d,e,s,null,this.maskParts.maskExclude,this.maskParts.maskInclude);s++}p+=l?l:o.emptyChar;if(l)c=false}else{if(n>0&&s<e.length){if(this.mask.charAt(u)!==e.charAt(s))return undefined;s++}if(t>0)p+=this.mask.charAt(u)}}return c?o.allowNull?null:"":p.trimEnd()};e.prototype.initializeMask=function(e){if(!this.mask||e.inputMask!==this.rawMask){this.maskParts=r.getMaskParts(e.inputMask);this.mask=this.maskParts.mask;this.rawMask=e.inputMask}};return e}();t.MaskEditorValueConverter=n}));define("controls/global/mask-editor/qp-mask-editor",["require","exports","tslib","aurelia-framework","apps/enhance/services/control-helper","../text-editor/qp-text-editor","apps/enhance/services/mask-helper"],(function(e,t,r,i,n,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpMaskEditorCustomElement=t.maxMaskCode=void 0;t.maxMaskCode=21;var s=function(e){r.__extends(s,e);function s(t,r){var i=e.call(this,t,r)||this;i.element=t;i.tq=r;i.rawMask="";i.converter="mask";return i}l=s;s.prototype.detached=function(){if(this.maskObserver){this.maskObserver.dispose();delete this.maskObserver}};s.prototype.attached=function(){this.attachMaskObserver()};s.prototype.configChanged=function(e,t){if(t===undefined){n.applyDefaultValues(e,r.__assign(r.__assign({},o.QpTextEditorCustomElement.defaultConfig),l.defaultConfigM));this.attachMaskObserver();this.setInputMask(e.inputMask)}};s.prototype.attachMaskObserver=function(){var e=this;if(!this.maskObserver&&this.config){this.maskObserver=this.bindingEngine.propertyObserver(this.config,"inputMask").subscribe((function(t,r){return e.setInputMask(t)}));if(this.rawMask!==this.config.inputMask)this.setInputMask(this.config.inputMask)}};s.prototype.setInputMask=function(e){if(e==null)e="";if(this.rawMask===e)return;this.maskParts=a.getMaskParts(e);this.mask=this.maskParts.mask;this.rawMask=e};s.prototype.onKeyPress=function(e,r){if(!this.mask||this.config.skipValidation)return true;var i=7;var n=8;var o=32;if(r<i||r>n&&r<o)return false;var a=this.elemText.value;var s=a.length;var l=this.elemText.selectionStart||0;var d=this.elemText.selectionEnd||0;if(l!==d){while(--d>=l){var c=this.config.promptChar;if(this.mask.charCodeAt(d)>=t.maxMaskCode)c=this.mask.charAt(d);a=a.substring(0,d)+c+a.substring(d+1)}d++}else if(r===i||r===o){while(d<s&&this.mask.charCodeAt(d)>=t.maxMaskCode)d++;if(d>=s)return false;a=a.substring(0,d)+this.config.promptChar+a.substring(d+1);d++}else if(r===n){while(d>0&&this.mask.charCodeAt(d-1)>=t.maxMaskCode)d--;if(d--<1)return false;a=a.substring(0,d)+this.config.promptChar+a.substring(d+1)}if(r>n&&r!==o&&d<s){var p=String.fromCharCode(r);var u=[a];l=this.insertCharAt(u,p,d);a=u[0];if(l<0)return false;d=this.locatePromptPos(l,false)}this.elemText.value=a;this.select(d);this.sendInputEvent();return false};s.prototype.processPasteValue=function(e){if(!this.mask||this.config.skipValidation)return false;var r=this.elemText.selectionStart||0;var i=this.elemText.selectionEnd||0;var n=this.elemText.value;n=this.clearMaskedContent(n,r,i);var o=[n];var a=r;for(var s=0;s<e.length;s++){if(this.mask.charCodeAt(a)<t.maxMaskCode&&e.charAt(s)===this.config.promptChar){a++;continue}a=this.insertCharAt(o,e.charAt(s),a);if(a<0||a>=this.mask.length)break}this.elemText.value=o[0];this.select(i>0?i:r);this.sendInputEvent();return true};s.prototype.insertCharAt=function(e,r,i){var n=this.mask.length;var o=i;var s=e[0];if(i<n){if(this.mask.charCodeAt(o)>=t.maxMaskCode&&this.mask.charAt(o)===r)return++o;while(this.mask.charCodeAt(o)>=t.maxMaskCode)if(++o>=n)return-1;var l=void 0;if((l=a.maskFilter(this.mask.charCodeAt(o),r,0,null,this.maskParts.maskExclude,this.maskParts.maskInclude))==null){return-1}s=s.substring(0,o)+l+s.substring(o+1);e[0]=s;o++;return o}return-1};s.prototype.locatePromptPos=function(e,r){var i=this.mask.length;while(e>=0&&e<i&&this.mask.charCodeAt(e)>=t.maxMaskCode){if(r)e--;else e++}return e};s.prototype.clearMaskedContent=function(e,r,i){if(r==null||r<0)r=0;if(i==null||i>this.mask.length)i=this.mask.length;if(r>i){var n=i;i=r;r=n}if(r!==i){while(--i>=r){var o=this.config.promptChar;if(this.mask.charCodeAt(i)>=t.maxMaskCode)o=this.mask.charAt(i);e=e.substring(0,i)+o+e.substring(i+1)}i++}return e};var l;s.defaultConfigM={valueMode:0,promptChar:"_",emptyChar:" "};r.__decorate([i.bindable,r.__metadata("design:type",Object)],s.prototype,"config",void 0);s=l=r.__decorate([i.autoinject,i.customElement("qp-mask-editor"),i.useView("../text-editor/qp-text-editor.html"),r.__metadata("design:paramtypes",[Element,i.TaskQueue])],s);return s}(o.QpTextEditorCustomElement);t.QpMaskEditorCustomElement=s}));define("controls/global/menu/qp-menu",["require","exports","tslib","aurelia-framework","aurelia-event-aggregator","plugins/happeded-on-body","aurelia-logging"],(function(e,t,r,i,n,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpMenuCustomElement=void 0;var s=a.getLogger("qp-menu");var l=function(){function e(e){this.eventAggregator=e;this.menuOpened=false;this.showOpener=false}e.prototype.stopPropagation=function(e){e.stopPropagation();return false};e.prototype.attached=function(){if(i.PLATFORM.global.px)i.PLATFORM.global.px.setTitle(this.menuElement,this.config.toolTip)};e.prototype.configChanged=function(e,t){this.showOpener=this.config.options&&this.config.options.length&&!this.config.hideOpener};e.prototype.processMenuClick=function(e,t,r){var i=this.config.options.find((function(r){return r.type==="MenuButton"&&(e&&r.id===e||t&&r.commandName===t)}));if(!i||i.disabled)return false;this.hideMenu();var n={event:r,id:e,commandName:t};var o=new CustomEvent("menuselected",{bubbles:true,detail:n});this.menuElement.dispatchEvent(o);return false};e.prototype.processButtonMousedown=function(e){if(this.config.commandName&&!this.config.disabled)return true;return this.toggleMenu(e)};e.prototype.processButtonClick=function(e){if(this.config.commandName&&!this.config.disabled){this.hideMenu();var t={event:e,id:this.config.id,commandName:this.config.commandName};var r=new CustomEvent("menuselected",{bubbles:true,detail:t});this.menuElement.dispatchEvent(r);return false}return this.stopPropagation(e)};e.prototype.toggleMenu=function(e){var t;if(!((t=this.config.options)===null||t===void 0?void 0:t.length)){return true}if(this.menuOpened)this.hideMenu();else this.showMenu();e.preventDefault();e.stopImmediatePropagation();e.stopPropagation();return false};e.prototype.showMenu=function(){var e=this;this.eventAggregator.publish(o.MOUSE_DOWN_REACHED_BODY);this.menuElement.focus();this.documentMouseDownSubscription=this.eventAggregator.subscribe(o.MOUSE_DOWN_REACHED_BODY,(function(){return e.hideMenu()}));this.menuOpened=true};e.prototype.hideMenu=function(){this.unsubscribeFromMouseDownOnDocument();this.menuOpened=false};e.prototype.unsubscribeFromMouseDownOnDocument=function(){var e;(e=this.documentMouseDownSubscription)===null||e===void 0?void 0:e.dispose();this.documentMouseDownSubscription=undefined};r.__decorate([i.bindable,r.__metadata("design:type",Object)],e.prototype,"config",void 0);e=r.__decorate([i.autoinject,i.customElement("qp-menu"),r.__metadata("design:paramtypes",[n.EventAggregator])],e);return e}();t.QpMenuCustomElement=l}));define("text!controls/global/menu/qp-menu.css",[],(function(){return".qp-menu {\r\n\tmargin: 0;\r\n\tline-height: 24px;\r\n\tvertical-align: bottom;\r\n\tcursor: pointer;\r\n}\r\n\r\n.qp-menu.qp-selected,\r\n.qp-menu.qp-selected .qp-menu-button,\r\n.qp-menu.qp-selected .qp-menu-opener,\r\n.qp-menu:hover,\r\n.qp-menu:hover .qp-menu-button:not(.disabled),\r\n.qp-menu:hover .qp-menu-opener {\r\n\tcolor: #FFFFFF;\r\n\tfill: #fff;\r\n\tbackground-color: #007ACC;\r\n\tbackground-color: var(--primary-color, #007ACC);\r\n}\r\n\r\n.qp-menu .qp-menu-button {\r\n\tbackground: transparent;\r\n\tborder-width: 0 1px 0 0;\r\n\tborder-style: solid;\r\n\tborder-right-color: transparent;\r\n\tpadding: 5px 2px 5px 10px;\r\n\theight: 20px;\r\n\tline-height: 20px;\r\n\tcursor: pointer;\r\n\t-webkit-box-sizing: content-box;\r\n\t        box-sizing: content-box;\r\n}\r\n\r\n.qp-menu.qp-selected:not(.qp-menu-no-options) .qp-menu-button.qp-menu-action-button,\r\n.qp-menu:not(.qp-menu-no-options):hover .qp-menu-button.qp-menu-action-button {\r\n\t\tborder-right-color: #fff;\r\n}\r\n\r\n/* .qp-menu .qp-menu-button, */\r\n.qp-menu.qp-menu-no-options .qp-menu-button {\r\n\tpadding: 5px 10px;\r\n}\r\n\r\n.qp-menu.qp-menu-no-options .qp-menu-opener {\r\n\tdisplay: none;\r\n}\r\n\r\n.qp-menu .qp-menu-button.disabled {\r\n\topacity: 0.26;\r\n\tcursor: default;\r\n}\r\n\r\n.qp-menu .qp-menu-opener {\r\n\tbackground: transparent;\r\n\tborder: none;\r\n\tpadding: 5px 4px 5px 1px;\r\n\tcursor: pointer;\r\n}\r\n\r\n.qp-menu-options {\r\n\tcolor: #000;\r\n\tfill: #000;\r\n\r\n\tz-index: 1000;\r\n\tbackground-color: white;\r\n\tmax-height: 80vh;\r\n\toverflow-y: auto; /* for FF */\r\n\toverflow-y: overlay;\r\n\tmin-width: 50px !important;\r\n\t-webkit-box-shadow: 0px 0px 16px rgba(115, 115, 115, 0.7);\r\n\t        box-shadow: 0px 0px 16px rgba(115, 115, 115, 0.7);\r\n\t-webkit-box-sizing: border-box;\r\n\t        box-sizing: border-box;\r\n\tborder-radius: 0px;\r\n\tpadding: 1px 2px;\r\n\ttext-transform: none;\r\n\r\n\tscrollbar-width: thin;\r\n\tscrollbar-color: rgba(0, 0, 0, 0.15) transparent;\r\n}\r\n\r\n.qp-menu .qp-menu-container {\r\n\tpadding: 10px 0;\r\n\tmargin: 0;\r\n\tlist-style: none outside none;\r\n\toverflow: hidden;\r\n\tdisplay: -webkit-inline-box;\r\n\tdisplay: -ms-inline-flexbox;\r\n\tdisplay: inline-flex;\r\n\t-webkit-box-orient: horizontal;\r\n\t-webkit-box-direction: normal;\r\n\t    -ms-flex-flow: row nowrap;\r\n\t        flex-flow: row nowrap;\r\n}\r\n\r\n.qp-menu-options .qp-menu-item {\r\n\tmin-height: 18px;\r\n\tline-height: 18px;\r\n\topacity: 0.87;\r\n\tpadding: 5px 5px 5px 5px;\r\n\tfont-size: 13px;\r\n\tdisplay: block;\r\n\twhite-space: nowrap;\r\n\tmargin: 1px 0;\r\n\ttext-align: left;\r\n\tmax-width: 300px;\r\n\toverflow: hidden;\r\n\ttext-overflow: ellipsis;\r\n\tcursor: pointer;\r\n}\r\n\r\n.qp-menu-options .qp-menu-item:hover {\r\n\tbackground-color: #007ACC;\r\n\tbackground-color: var(--primary-color, #007ACC);\r\n\tcolor: #fff;\r\n}\r\n\r\n.qp-menu-options .qp-menu-item.disabled {\r\n\topacity: .3;\r\n\tcursor: auto;\r\n}\r\n\r\n.qp-menu-options .qp-menu-item.disabled:hover {\r\n\tcolor: #000;\r\n\tbackground-color: inherit;\r\n}\r\n\r\n.qp-menu-options .qp-menu-item .qp-menu-spacer{\r\n\tmargin: 0px 5px 1px 5px;\r\n}\r\n\r\n.qp-menu-options .qp-menu-item .qp-menu-icon {\r\n\tfloat: left;\r\n}\r\n\r\n\r\n.qp-menu-options .qp-menu-separator {\r\n\tdisplay: block;\r\n\tbackground-color: #aaa;\r\n\theight: 1px;\r\n\tmargin: 3px 0;\r\n\tcursor: auto;\r\n}"}));define("text!controls/global/menu/qp-menu.html",[],(function(){return'<template><require from="./qp-menu.css"></require><div ref="menuElement" class="qp-menu ${menuOpened ? \'qp-selected\': \'\'} ${(!showOpener) ? \'qp-menu-no-options\' : \'\'}"><button class="qp-menu-button ${config.commandName ? \'qp-menu-action-button\' : \'\'} ${(config.enabled == false || config.disabled) && config.commandName ? \'disabled\' : \'\'}" mousedown.trigger="processButtonMousedown($event)" click.capture="processButtonClick($event)"><qp-hyper-icon if.bind="config.images.normal" images.bind="config.images"></qp-hyper-icon><div else>${config.text}</div></button> <button if.bind="config.options && config.options.length" class="qp-menu-opener" mousedown.trigger="toggleMenu($event)" click.capture="stopPropagation($event)"><qp-icon imagesrc="control@ArrowDown" data-type="drop"></qp-icon></button></div><div glue-to.bind="menuElement" if.bind="menuOpened" class="qp-menu-options" mousedown.trigger="stopPropagation($event)"><div ref="optionsPane" class="qp-menu-container"><div repeat.for="op of config.options" id="${op.id}" class="qp-menu-item ${op.disabled ? \'disabled\' : \'\'}" data-cmd="${op.commandName}" click.capture="processMenuClick(op.id, op.commandName, $event)"><qp-hyper-icon if.bind="op.images && op.images.normal" images.bind="op.images" class="qp-menu-icon"></qp-hyper-icon><span if.bind="op.text" class="qp-menu-spacer">${op.text}</span></div></div></div></template>'}));define("controls/global/number-editor/converter",["require","exports","apps/enhance/services/control-helper"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.NumberEditorValueConverter=void 0;var i=function(){function e(){this.minusSymbol="-";this.dotSymbol=".";this.decimalSeparator=".";this.groupSeparator=",";this.getDecimals=function(e){return e.decimals<0?0:e.decimals};var e=r.numberFormatInfo;if(e){this.minusSymbol=e.negativeSign;this.decimalSeparator=e.number.decimalSeparator;this.groupSeparator=e.number.groupSeparator}}e.prototype.toView=function(e,t,i){if(i==null)return"";if(i.allowNull&&e==null)return t?"":i.nullText;if(!i.allowNull&&e==null){e=0}if(!i.enabled||i.readOnly){t=false}if(e.toFixed==null)e=this.parseFloat(e.toString());var n=t?i.editFormat:i.displayFormat;if(n){return e.format(n,r.numberFormatInfo)}return t?this.getEditText(e,i):this.getDisplayText(e,i)};e.prototype.fromView=function(e,t,r){if(r.allowNull&&(!e||e===r.nullText))return null;return this.checkLimits(this.parseValue(e,r),r)};e.prototype.getEditText=function(e,t){var r;try{r=e.toFixed(this.getDecimals(t))}catch(e){r=(0).toFixed(this.getDecimals(t))}return r.replace(this.dotSymbol,this.decimalSeparator)};e.prototype.getDisplayText=function(e,t){var i=t.valueType>=r.NetType.Single&&t.valueType<=r.NetType.Decimal;var n=this.getDecimals(t);var o=e.toLocaleString("en-US",{minimumFractionDigits:n,useGrouping:i});var a=o.split(this.dotSymbol);o=a[0].replace(/,/g,this.groupSeparator);return a.length>1?o+this.decimalSeparator+a[1]:o};e.prototype.checkLimits=function(e,t){if(e!=null&&!isNaN(e)){var r=t.minValue;var i=t.maxValue;if(r!=null&&e<r){return r}if(i!=null&&e>i){return i}}return e};e.prototype.parseValue=function(e,t){var i=0;var n="";if(this.decimalSeparator!==" "){e=e.replace(/\s/g,"")}else{e=e.replace(/[\t\n\r\f]/g,"")}for(var o=0;o<e.length;o++){var a=e.charAt(o);if(r.isDigit(a)||a===this.minusSymbol){n+=a}else if(a===this.decimalSeparator||a===this.dotSymbol&&this.groupSeparator!==this.dotSymbol){n+=this.dotSymbol}}i=this.parseFloat(n);return isNaN(i)?0:Number(i.toFixed(this.getDecimals(t)))};e.prototype.parseFloat=function(e){var t=e.length;var r=e.indexOf(this.decimalSeparator);var i=14;if(r<0){r=e.indexOf(this.dotSymbol)}if(r>=0){t=r}if(t>i){var n=t-i;return parseFloat(e.substr(n))}return parseFloat(e)};return e}();t.NumberEditorValueConverter=i}));define("controls/global/number-editor/qp-number-editor",["require","exports","tslib","aurelia-framework","apps/enhance/services/control-helper","./converter","../text-editor/qp-text-editor"],(function(e,t,r,i,n,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpNumberEditorCustomElement=void 0;var s=function(e){r.__extends(t,e);function t(t,r){var i=e.call(this,t,r)||this;i.element=t;i.tq=r;i.maxDecimals=null;i.conv=new o.NumberEditorValueConverter;i.subscribers=[];i.converter="numb";i.addConfigSetter("precision","decimals");i.addConfigSetter("minValue");i.addConfigSetter("maxValue");return i}a=t;t.prototype.configChanged=function(e,t){if(t===undefined){n.applyDefaultValues(e,r.__assign(r.__assign({},a.defaultConfig),a.defaultConfigN));if(this.config.decimals==null)this.config.decimals=0;if(!this.config.allowNull&&this.value==null&&this.config.value==null){this.value=0}}this.attachObservers()};t.prototype.detached=function(){this.detachObservers()};t.prototype.detachObservers=function(){this.subscribers.forEach((function(e){return e.dispose()}));this.subscribers.splice(0,this.subscribers.length)};t.prototype.attachObservers=function(){this.detachObservers();if(this.config){var e=["decimals","displayFormat","editFormat"];for(var t=0,r=e;t<r.length;t++){var n=r[t];var o=this.bindingEngine.propertyObserver(this.config,n).subscribe((function(){return i.signalBindings("format-changed")}));this.subscribers.push(o)}}};t.prototype.getDecimals=function(){return this.conv.getDecimals(this.config)};t.prototype.isMinus=function(e){var t=45;return e===this.conv.minusSymbol.charCodeAt(0)||e===t};t.prototype.processPasteValue=function(e){var t=e&&e.trim();var r=this.elemText.value;var i=new String(r);var n=this.elemText.selectionStart||0;var o=this.elemText.selectionEnd||0;t=t.replace(new RegExp(this.conv.groupSeparator,"g"),"");t=t.replace(new RegExp(" ","g"),"");t=t.replace(new RegExp("s","g"),"");t=t.replace(this.conv.decimalSeparator,this.conv.dotSymbol);t=t.replace(/\+/,"");var a=t.search(/[^0-9.\-]/);if(a>=0){return true}if(n!==0&&t.search(/[\-\+]/)>=0){return true}if(n>=0){r=r.substring(0,n)+t+r.substring(o)}else{r=t}var s=this.conv.parseValue(r,this.config);if(!isNaN(s)&&this.conv.checkLimits(s,this.config)===s){this.elemText.value=this.conv.getEditText(s,this.config)}else{this.elemText.value=i.toString()}this.sendInputEvent();return true};t.prototype.onKeyPress=function(e,t){var r=7;var i=8;var o=32;var a=15;if(t<r||t>i&&t<o){return false}var s=this.elemText.value;var l=s.length;var d=this.elemText.selectionStart||0;var c=this.elemText.selectionEnd||0;if(d!==c){s=s.substring(0,d)+s.substring(c);c=d;l=s.length}else if(t===r||t===i){return true}var p=0;var u=l;var f=false;if(this.config.editFormat){var h="";var g=void 0;for(var m=0;m<s.length;m++){g=s.charAt(m);if(n.isDigit(g)||g===this.conv.minusSymbol){h+=g}else if(g===this.conv.decimalSeparator){h+=this.conv.dotSymbol}else{l--;if(m<d){d--}if(m<c){c--;p++}}}s=h}if(t===this.conv.dotSymbol.charCodeAt(0)){t=this.conv.decimalSeparator.charCodeAt(0)}var b=s.indexOf(this.conv.decimalSeparator);if(t>i&&(!this.config.maxLength||this.config.maxLength<=0||this.config.maxLength>l)){var v=t===this.conv.decimalSeparator.charCodeAt(0);var x=n.isDigit(t)||v&&this.getDecimals()>0||d===0&&this.isMinus(t)&&this.config.minValue<0;if(!x){return false}if(l>0&&d===0&&this.isMinus(s.charCodeAt(0))){return false}if(v){if(b>=0){if(b===d||b===d-1){return false}l--;if(b<d){d=--c}s=s.substring(0,b)+s.substring(b+1)}if(l-d>this.getDecimals()){return false}}else if(this.getDecimals()>0&&b>=0){var y=l-b-1;if(y===this.getDecimals()&&d>b){f=true}}var w=String.fromCharCode(t);if(c>=l){if(f){s=s.substring(0,l-1)}s+=w}else{var q=f?c+1:c;s=s.substring(0,d)+w+s.substring(q)}}var C=s.length;b=s.indexOf(this.conv.decimalSeparator);if(b>=0){C=b;if(this.maxDecimals){var k=parseInt(s.substring(b+1));if(k>this.maxDecimals){return false}}}if(C<a){if(this.config.editFormat){var _=this.conv.parseFloat(s);if(!isNaN(_)){s=_.format(this.config.editFormat,n.numberFormatInfo);p+=s.length-u-(f?0:1)}}this.elemText.value=s;this.select(c+1+p);this.sendInputEvent()}return false};var a;t.defaultConfigN={allowNull:false,decimals:0,maxValue:999999999999,minValue:-999999999999,valueType:n.NetType.Int32};r.__decorate([i.bindable,r.__metadata("design:type",Object)],t.prototype,"config",void 0);t=a=r.__decorate([i.autoinject,i.customElement("qp-number-editor"),i.useView("../text-editor/qp-text-editor.html"),r.__metadata("design:paramtypes",[Element,i.TaskQueue])],t);return t}(a.QpTextEditorCustomElement);t.QpNumberEditorCustomElement=s}));define("controls/global/options/qp-options",["require","exports","tslib","aurelia-framework","aurelia-logging"],(function(e,t,r,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpOptionsCustomElement=void 0;var o=n.getLogger("qp-options");var a=function(){function e(e){this.element=e;this.value=[];this.prepareHighlightIdx=undefined;this.highlightedIndex=undefined}e.prototype.attached=function(){var e=this;if(this.optionsFor!=null){this.optionsPane.style.minWidth=this.optionsFor.clientWidth+"px"}if(!this.config.allowMultiSelect&&this.value.length>0){var t=this.config.options.findIndex((function(t){return e.value[0]<=t.value}));if(t>=0)this.highlightedIndex=t;if(this.highlightedIndex==null)this.highlightedIndex=0;if("scrollBehavior"in document.documentElement.style){this.optionsPane.children[this.highlightedIndex].scrollIntoView({block:"start"})}else{this.optionsPane.children[this.highlightedIndex].scrollIntoView(false)}}};e.prototype.commitSelection=function(){var e=undefined;if(this.config.allowMultiSelect)e=this.value;else if(this.value.length>0)e=this.value[0];var t=new CustomEvent("valuechanged",{bubbles:true,detail:{value:e}});this.element.dispatchEvent(t)};e.prototype.enterHighlight=function(e){this.prepareHighlightIdx=e};e.prototype.commitHighlight=function(e){if(this.prepareHighlightIdx===e){this.highlight(e);this.prepareHighlightIdx=undefined}};e.prototype.highlight=function(e){this.highlightedIndex=e};e.prototype.ignoreClicks=function(e){e.preventDefault();e.stopImmediatePropagation()};e.prototype.hide=function(){o.info("Hide")};e.prototype.select=function(e,t){if(e.value.enabled===false)return;this.appendValue(e.value);if(!this.config.allowMultiSelect)this.hide();this.commitSelection()};e.prototype.appendValue=function(e){if(this.config.allowMultiSelect){var t=this.value.indexOf(e);if(t===-1){this.value.push(e)}else{this.value.splice(t,1)}}else{this.value=[e]}};r.__decorate([i.bindable,r.__metadata("design:type",Object)],e.prototype,"config",void 0);r.__decorate([i.bindable,r.__metadata("design:type",Array)],e.prototype,"value",void 0);r.__decorate([i.bindable,r.__metadata("design:type",HTMLElement)],e.prototype,"optionsFor",void 0);e=r.__decorate([i.autoinject,i.customElement("qp-options"),r.__metadata("design:paramtypes",[Element])],e);return e}();t.QpOptionsCustomElement=a;var s=function(){function e(){this.selected=false}return e}()}));define("text!controls/global/options/qp-options.html",[],(function(){return'<template><require from="../drop-down/qp-drop-down.css"></require><div class="drop-down__options-pane ${config.class}" ref="optionsPane" mousedown.capture="ignoreClicks($event)"><div repeat.for="op of config.options" css="${ (op.value.visible===false || op.value.visible===0) ? \'display: none\' : \'\'}" click.delegate="select(op,$event)" class="ddItem ${highlightedIndex === $index ? \'ddSelection\':\'\'} ${op.value.enabled===false ? \'ddItemDisabled\' : \'\'}" mouseenter.capture="enterHighlight($index)" mousemove.capture="commitHighlight($index) & throttle:100" keydown.delegate="onKeyDown($event)" keypress.delegate="onKeyPress($event)" data-cmd="${op.value.command}"><div if.bind="config.allowMultiSelect" class="sprite-icon control-icon" icon.bind="op.selected ? \'GridCheck\' : \'GridUncheck\' & attr" data-type="check" style="margin-left:2px;margin-right:5px"><div class="control-icon-img control-${op.selected ? \'GridCheck\' : \'GridUncheck\'}"></div></div> ${op.text} </div></div></template>'}));define("controls/global/screen-dialog/screen-dialog",["require","exports","tslib","aurelia-framework","aurelia-dialog"],(function(e,t,r,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SelectorDialog=void 0;var o=function(){function e(e){this.controller=e;this.okConfig={text:"Select"}}e.prototype.activate=function(e){this.selectorElement=e.selector;this.screen=e.screen};e=r.__decorate([i.autoinject,r.__metadata("design:paramtypes",[n.DialogController])],e);return e}();t.SelectorDialog=o}));define("text!controls/global/screen-dialog/screen-dialog.css",[],(function(){return".selector-dialog {\r\n    background-color: #F5F7F8;\r\n\t\tmin-width: 320px;\r\n\t\t\r\n\t\tvisibility: hidden;\r\n\t\tdisplay: block;\r\n}\r\n.selector-dialog.grid-ready {\r\n\tvisibility: visible;\r\n}\r\n.selector-dialog qp-grid {\r\n    max-width:90vw;\r\n    \r\n    min-width: 280px;\r\n\r\n    max-height:80vh;\r\n    height:300px;\r\n    /* background-color:white; */\r\n}\r\n.selector-dialog ux-dialog-header{\r\n \r\n    padding: 14px 14px 7px;\r\n}\r\n.selector-dialog ux-dialog-body{\r\n padding: 0;   \r\n}\r\n.selector-dialog .grid-toolbar .qp-button {\r\n    height: 30px;\r\n    font-size: 14px;\r\n    padding-left: 10px;\r\n    padding-right: 10px;\r\n    border-radius: 5px;\r\n    margin-left: 4px;\r\n}\r\n@media screen and (max-width: 500px) {\r\n    .selector-dialog {\r\n        position: absolute;\r\n        top:0;\r\n        bottom: 0;\r\n        left: 0;\r\n        right: 0;\r\n        width: 100vw;\r\n        min-width: 0;\r\n    }\r\n    .selector-dialog qp-grid  {\r\n        height: 84vh;\r\n        width: 95vw;\r\n        min-width: 0;\r\n        min-width: none;\r\n    }\r\n}\r\n"}));define("text!controls/global/screen-dialog/screen-dialog.html",[],(function(){return'<template><require from="./screen-dialog.css"></require><ux-dialog style="max-width:720px" glue-to.bind="selectorElement"><ux-dialog-header show-close-button></ux-dialog-header><ux-dialog-body><compose view-model.bind="screen"></compose></ux-dialog-body></ux-dialog></template>'}));define("controls/global/screen-title/qp-screen-title",["require","exports","tslib","aurelia-framework","aurelia-logging","aurelia-fetch-client"],(function(e,t,r,i,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpScreenTitleCustomElement=void 0;var a=n.getLogger("screen-title");var s=function(){function e(e,t,r,i){this.element=e;this.http=t;this.taskQueue=r;this.bindingEngine=i;this.originalWidth=0;this.subscription=undefined}e.prototype.configChanged=function(e,t){var r=this;if(!this.resizeObserver&&i.PLATFORM.global.ResizeObserver){this.resizeObserver=new i.PLATFORM.global.ResizeObserver((function(e){if(!e||!e.length)return;r.updateWidth()}));this.resizeObserver.observe(this.element.parentElement)}this.subscription=this.bindingEngine.propertyObserver(this.config,"caption").subscribe((function(e,t){if(!e||!r.config.hasCaption)return;r.captionChanged(e)}));if(this.config.tooltipAddToFavorites){this.updateFavoritesTooltip()}};e.prototype.updateWidth=function(){if(this.originalWidth===0)return;this.captionElement.style.width=Math.min(this.element.parentElement.clientWidth,this.originalWidth)+"px"};e.prototype.toggleFavorites=function(e,t){this.config.isFavorite=!this.config.isFavorite;var r="frameset/screen/"+this.config.nodeID+"/"+(this.config.isFavorite?"favorite":"unfavorite");var n={};if(i.PLATFORM.global.px)n["X-XSRF-TOKEN"]=i.PLATFORM.global.px.GetAntiForgeryToken();else if(this.config.antiXsrfToken)n["X-XSRF-TOKEN"]=this.config.antiXsrfToken;this.http.fetch(r,{method:"POST",headers:n}).then((function(e){if(e.ok){if(i.PLATFORM.global.top.frameHelper)i.PLATFORM.global.top.frameHelper.needRefreshFav=true}else{alert("Error occured: "+e.statusText)}})).catch((function(e){return alert("Something went wrong. "+e.message)}));this.updateFavoritesTooltip()};e.prototype.updateFavoritesTooltip=function(){if(!i.PLATFORM.global.px)return;if(this.config.isFavorite){i.PLATFORM.global.px.setTitle(this.starElement,this.config.tooltipRemoveFromFavorites)}else{i.PLATFORM.global.px.setTitle(this.starElement,this.config.tooltipAddToFavorites)}};e.prototype.captionChanged=function(e){var t=this;if(e){this.captionElement.style.width="";this.originalWidth=0;this.taskQueue.queueTask((function(){var e=t.element.getClientRects();if(e.length){t.originalWidth=e[0].width;t.updateWidth()}}))}};e.prototype.detached=function(){var e;(e=this.resizeObserver)===null||e===void 0?void 0:e.dispose()};r.__decorate([i.bindable,r.__metadata("design:type",Object)],e.prototype,"config",void 0);r.__decorate([i.bindable,r.__metadata("design:type",HTMLElement)],e.prototype,"captionElement",void 0);r.__decorate([i.bindable,r.__metadata("design:type",HTMLElement)],e.prototype,"starElement",void 0);e=r.__decorate([i.customElement("qp-screen-title"),i.autoinject,r.__metadata("design:paramtypes",[Element,o.HttpClient,i.TaskQueue,i.BindingEngine])],e);return e}();t.QpScreenTitleCustomElement=s}));define("text!controls/global/screen-title/qp-screen-title.css",[],(function(){return"qp-screen-title {\r\n\tdisplay:block;\r\n\tfloat: left;\r\n}\r\n.rtl qp-screen-title {\r\n\tfloat: right;\r\n}\r\n\r\nqp-screen-title:hover .favoriteOff{\r\n\tvisibility: visible;\r\n}\r\n\r\nqp-screen-title a\r\n{\r\n\tfont-size: 19px;\r\n\ttext-decoration: none;\r\n\tcolor: RGBA(0,0,0,0.87);\r\n\tcursor: pointer;\r\n\tdisplay: inline-block;\r\n\tmargin-left: 5px;\r\n\tmargin-top: 12px;\r\n}\r\n\r\nqp-screen-title a:hover\r\n{\r\n\ttext-decoration: underline;\r\n}\r\nqp-screen-title i\r\n{\r\n\tmargin-left: 10px;\r\n}\r\n\r\n.star-container {\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n\t-webkit-box-align: baseline;\r\n\t    -ms-flex-align: baseline;\r\n\t        align-items: baseline;\r\n\theight: 45px;\r\n}\r\n\r\n.withCaption > a\r\n{\r\n\tfont-size: 13px;\r\n\tcolor: #027ACC;\r\n\tmargin-top: 6px;\r\n\r\n}\r\n.withCaption > span {\r\n\tfont-size: 18px;\r\n\tborder-width: 0px;\r\n\tdisplay: block;\r\n\tmargin-left: 5px;\r\n\tmargin-top: 3px;\r\n\tcolor: #000000;\r\n\tpointer-events: none;\r\n\ttext-overflow: ellipsis;\r\n\twhite-space: nowrap;\r\n\toverflow: hidden;\r\n}\r\nqp-screen-title span{\r\n\tdisplay: none;\r\n}\r\n\r\n.favoriteOff {\r\n\tcolor:#000000;\r\n\tvisibility: hidden;\r\n}\r\n.favoriteOn\r\n{ \r\n\tcolor:#f7ba08;\r\n}\r\n.no-star {\r\n\tdisplay: none;\r\n}"}));define("text!controls/global/screen-title/qp-screen-title.html",[],(function(){return'<template id="${config.id}" class="${config.class}"><require from="./qp-screen-title.css"></require><div id="usrScreenTitle" class="star-container"><div class="${config.hasCaption? \'withCaption\': \'\'}"><a id="usrTitle" href="${config.href}">${config.title}</a><span id="usrCaption" ref="captionElement">${config.caption}</span></div><div><i id="usrFavorite" ref="starElement" class="ac fav-icon ${config.isFavoritable? \'\': \'no-star\'} ${config.isFavorite? \'favoriteOn ac-star\': \'ac-star_border favoriteOff\'}" click.delegate="toggleFavorites(item.id, $event)"></i></div></div></template>'}));define("controls/global/splitter/qp-splitter",["require","exports","tslib","aurelia-framework","aurelia-logging"],(function(e,t,r,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpSplitterCustomElement=void 0;var o=n.getLogger("qp-splitter");var a=function(){function e(e){this.element=e;this.split="width";this.initialSplit="";this.style="";this.position="";this.dragMode=false}t=e;e.processParameters=function(e,t,r,i){var n,o;var a=document.createElement("template");a.setAttribute("replace-part","First");var s=document.createElement("template");s.setAttribute("replace-part","Second");var l=r.querySelector("First");var d=r.querySelector("Second");if(l){(n=a.content).append.apply(n,Array.from(l.childNodes));r.removeChild(l);r.append(a)}if(d){(o=s.content).append.apply(o,Array.from(d.childNodes));r.removeChild(d);r.append(s)}return true};e.prototype.bind=function(){if(this.initialSplit)this.position=this.initialSplit};e.prototype.startMoving=function(e){console.log("start "+e.x);this.draggerElement.setPointerCapture(e.pointerId);this.dragMode=true;return true};e.prototype.stopMoving=function(e){console.log("stop "+e.x);this.draggerElement.releasePointerCapture(e.pointerId);this.dragMode=false;return true};e.prototype.barDragged=function(e){if(!this.dragMode)return false;var t=this.draggerElement.getBoundingClientRect();var r=this.firstElement.getBoundingClientRect();var i=this.element.getBoundingClientRect();var n=NaN;var o=NaN;if(this.split==="height"){var a=parseInt(getComputedStyle(this.draggerElement).marginTop);n=e.y-(r.bottom-r.height+a+t.height/2);o=i.height-t.height-a*2}else{var a=parseInt(getComputedStyle(this.draggerElement).marginLeft);n=e.x-(r.right-r.width+a+t.width/2);o=i.width-t.width-a*2}if(n>=0&&n<=o)this.position=n+"px";return true};var t;r.__decorate([i.bindable,r.__metadata("design:type",String)],e.prototype,"split",void 0);r.__decorate([i.bindable,r.__metadata("design:type",String)],e.prototype,"initialSplit",void 0);r.__decorate([i.bindable,r.__metadata("design:type",String)],e.prototype,"style",void 0);e=t=r.__decorate([i.customElement("qp-splitter"),i.autoinject,i.processContent(t.processParameters),r.__metadata("design:paramtypes",[Element])],e);return e}();t.QpSplitterCustomElement=a}));define("text!controls/global/splitter/qp-splitter.css",[],(function(){return".qp-splitter {\r\n\tborder: 1px solid #ccc;\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n\t-webkit-box-align: stretch;\r\n\t    -ms-flex-align: stretch;\r\n\t        align-items: stretch;\r\n\t-webkit-box-sizing: border-box;\r\n\t        box-sizing: border-box;\r\n}\r\n\r\n.qp-splitter.qp-splitter-horizontal {\r\n\t-webkit-box-orient: horizontal;\r\n\t-webkit-box-direction: normal;\r\n\t    -ms-flex-direction: row;\r\n\t        flex-direction: row;\r\n}\r\n.qp-splitter.qp-splitter-vertical {\r\n\t-webkit-box-orient: vertical;\r\n\t-webkit-box-direction: normal;\r\n\t    -ms-flex-direction: column;\r\n\t        flex-direction: column;\r\n}\r\n\r\n.qp-splitter.qp-splitter-vertical > .qp-splitter-first {\r\n\toverflow-y: auto;\r\n}\r\n.qp-splitter.qp-splitter-vertical > .qp-splitter-second {\r\n\toverflow-y: auto;\r\n\t-ms-flex-preferred-size: 0;\r\n\t    flex-basis: 0;\r\n\t-webkit-box-flex: 1;\r\n\t    -ms-flex-positive: 1;\r\n\t        flex-grow: 1;\r\n}\r\n\r\n.qp-splitter.qp-splitter-horizontal > .qp-splitter-first {\r\n\toverflow-x: auto;\r\n}\r\n.qp-splitter.qp-splitter-horizontal > .qp-splitter-second {\r\n\toverflow-x: auto;\r\n\t-ms-flex-preferred-size: 0;\r\n\t    flex-basis: 0;\r\n\t-webkit-box-flex: 1;\r\n\t    -ms-flex-positive: 1;\r\n\t        flex-grow: 1;\r\n}\r\n\r\n.qp-splitter.qp-splitter-horizontal > .qp-splitter-bar {\r\n\twidth: 5px;\r\n\tbackground-color: #ccc;\r\n\tmargin: 0 5px;\r\n\tborder-left: 1px solid #eee;\r\n\tborder-right: 1px solid #bbb;\r\n\tcursor: ew-resize;\r\n}\r\n\r\n.qp-splitter.qp-splitter-vertical > .qp-splitter-bar {\r\n\theight: 5px;\r\n\tbackground-color: #ccc;\r\n\tmargin: 5px 0;\r\n\tborder-top: 1px solid #eee;\r\n\tborder-bottom: 1px solid #bbb;\r\n\tcursor: ns-resize;\r\n}"}));define("text!controls/global/splitter/qp-splitter.html",[],(function(){return'<template><require from="./qp-splitter.css"></require><div class="qp-splitter ${split===\'height\' ? \'qp-splitter-vertical\' : \'qp-splitter-horizontal\'}" css="${style}"><span class="qp-splitter-first" ref="firstElement" css="${position ? split+\': \'+position+\';\' : \'\'}"><template replaceable part="First">Provide First!</template></span><div class="qp-splitter-bar" ref="draggerElement" pointerdown.delegate="startMoving($event)" pointerup.delegate="stopMoving($event)" pointermove.delegate="barDragged($event)"></div><span class="qp-splitter-second"><template replaceable part="Second">Provide Second!</template></span></div></template>'}));define("controls/global/suggester/elements/qp-suggester",["require","exports","tslib","apps/enhance/services/localization","aurelia-event-aggregator","aurelia-framework","aurelia-logging","apps/enhance/services/suggestings-service","plugins/happeded-on-body"],(function(e,t,r,i,n,o,a,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpSuggesterCustomElement=void 0;var d=a.getLogger("qp-suggester");var c=2;var p=168;var u=32;var f=7;var h=24;var g=navigator.userAgent.toLowerCase();var m=g.indexOf("safari")!=-1&&g.indexOf("chrome")<0;var b=function(){function e(e,t,r,n){this.eventManager=e;this.suggestingServiceFabric=t;this.eventAggregator=r;this.taskQueue=n;this.debounceState={delay:336,timeoutId:undefined};this.eventSubscriptions=[];this.forceOpen=false;this.maxHeight=p;this.suggesting=false;this.serializedArgs="";this.localizedStrings=i.LOCALIZED_STRINGS}e.prototype.attached=function(){var e=this;this.eventSubscriptions.push(this.eventManager.addEventListener(this.editor,"input",(function(t){return e.handleEditorInput(t)}),o.delegationStrategy.capturing,true));this.eventSubscriptions.push(this.eventManager.addEventListener(this.editor,"keydown",(function(t){return e.handleEditorKeyDown(t)}),o.delegationStrategy.capturing,true));this.eventSubscriptions.push(this.eventManager.addEventListener(this.editor,"blur",(function(t){return e.handleEditorBlur(t)}),o.delegationStrategy.capturing,true));this.eventSubscriptions.push(this.eventManager.addEventListener(this.editor,"focus",(function(t){return e.handleEditorFocus(t)}),o.delegationStrategy.capturing,true));this.eventSubscriptions.push(this.eventManager.addEventListener(this.editor,"click",(function(t){return e.handleEditorClick(t)}),o.delegationStrategy.capturing,true));if(document.activeElement===this.editor){this.focused=true}var t=this.rectElement.getBoundingClientRect().width;this.minWidth=t};e.prototype.configChanged=function(){this.config.suggestAfter=this.config.suggestAfter||c;this.ensureFieldsToRequest()};e.prototype.ensureFieldsToRequest=function(){var e;var t=[this.config.valueField&&this.config.valueField.toLowerCase(),this.config.descriptionName&&this.config.descriptionName.toLowerCase()].filter((function(e){return e!=null}));this.fieldsToRequest=(e=this.config.fields)===null||e===void 0?void 0:e.filter((function(e){return e.id&&t.includes(e.id.toLowerCase())}))};e.prototype.forceOpenChanged=function(e,t){var r=this;this.focused=true;if(e){if(!this.suggesting){this.taskQueue.queueTask((function(){r.MoveHighligt(1)}))}}else{if(this.suggesting){this.hideSuggestions()}}};e.prototype.changeHighLight=function(e){if(!this.preventHoverHighlight){this.scrollSuggestionIntoView(e);this.taskQueue.flushTaskQueue();this.highlightedSugestionIndex=e}};e.prototype.debounceHoverHighlight=function(){var e=this;this.preventHoverHighlight=true;clearTimeout(this.preventHoverHighlightTimeout);this.preventHoverHighlightTimeout=setTimeout((function(){e.preventHoverHighlight=false}),u)};e.prototype.unsubscribeFromMouseDownOnDocument=function(){var e;(e=this.documentMouseDownSubscription)===null||e===void 0?void 0:e.dispose();this.documentMouseDownSubscription=undefined};e.prototype.detached=function(){this.unsubscribeFromMouseDownOnDocument();this.eventSubscriptions.forEach((function(e){return e.dispose()}));this.eventSubscriptions=[];this.loading=undefined};e.prototype.ensureSuggesterService=function(){var e=this;var t=this.suggestingsService===undefined||this.config.inlineArgs;var r=this.config.inlineArgs;var i;if(this.config.dependsOn&&this.config.dependsOn.length){try{i=this.config.dependsOn.map((function(t){var r;var i=t.id;var n=__px_all(e.editor)[t.controlID];var o=(r=n===null||n===void 0?void 0:n.element)===null||r===void 0?void 0:r.getBoundingClientRect(),a=o.width,s=o.height;var l;if(a>0&&s>0){l=n.getValue()}else{if(t.controlID.indexOf("_lv0_")>0){var d=t.controlID.split("_lv0_"),c=d[0],p=d[1];var u=e.editor;while(u&&u.id!==c){u=u.parentElement}if(u===null||u===void 0?void 0:u.object){var f=u.object;var h=f.levels[0].columns.find((function(e){return e.formEditorID===p})).index;l=f.activeRow.cells[h].getValue()}}else if((n===null||n===void 0?void 0:n.getValue)&&n.getValue()){l=n.getValue()}}if(l instanceof Object&&l.id){l=l.id}return{id:i,value:l}}));var n=JSON.stringify(i);if(this.serializedArgs!==n){t=true;this.serializedArgs=n}}catch(e){r=true}}if(t){this.ensureFieldsToRequest();this.suggestingsService=this.suggestingServiceFabric.getSuggestingService({args:i,descriptionName:this.config.descriptionName,fields:this.fieldsToRequest,graph:this.config.graph,graphStateId:this.config.graphStateId,inlineArgs:r,pageSize:7,serverFiltering:this.config.serverFiltering,valueField:this.config.valueField,viewName:this.config.viewName})}};e.prototype.handleEditorBlur=function(e){var t=this;var r;clearTimeout(this.debounceState.timeoutId);this.focused=false;if(this.suggestingsService){this.suggestingsService.abortRequest()}if((r=this.config)===null||r===void 0?void 0:r.suggestOnBlur){var i=this.editor.value;if(i.length>=this.config.suggestAfter){this.ensureSuggesterService();this.suggestingsService.getSuggestions(i).then((function(e){var r,i;t.suggesting=true;t.suggestions=e;if((i=(r=t.suggestions)===null||r===void 0?void 0:r.suggestionItems)===null||i===void 0?void 0:i.length)t.select(0);else t.setEditorValue({display:undefined,useUpdateValue:false,value:""});t.suggesting=false}))}}this.hideSuggestions();return true};e.prototype.handleEditorClick=function(e){if(e.altKey&&!e.ctrlKey){e.preventDefault();e.stopImmediatePropagation();this.MoveHighligt(1)}return true};e.prototype.handleEditorFocus=function(e){this.focused=true;return true};e.prototype.handleEditorInput=function(e){var t=this;this.loading=true;var r=this.editor.value;if(r.length>=this.config.suggestAfter||this.suggesting){clearTimeout(this.debounceState.timeoutId);this.debounceState.timeoutId=setTimeout((function(){t.ensureSuggesterService();t.suggestingsService.getSuggestions(r).then((function(e){t.suggestions=e;t.showSuggestions();t.loading=false;t.scrollSuggestionIntoView(0)})).catch((function(e){t.loading=false;if(e.name==="AbortError"){d.info("suggestions request aborted by user input")}else{throw e}}))}),this.debounceState.delay)}};e.prototype.handleEditorKeyDown=function(e){switch(e.key){case"Esc":case"Escape":if(this.suggesting){this.hideSuggestions();e.preventDefault();e.stopImmediatePropagation()}break;case"Enter":if(this.suggesting&&!this.loading){this.select(this.highlightedSugestionIndex)}return true;break;case"Up":case"ArrowUp":if(!!this.suggesting!==e.altKey){this.debounceHoverHighlight();e.preventDefault();e.stopImmediatePropagation();this.MoveHighligt(-1)}break;case"Down":case"ArrowDown":if(!!this.suggesting!==e.altKey){this.debounceHoverHighlight();e.preventDefault();e.stopImmediatePropagation();this.MoveHighligt(1)}break;case"PageDown":this.debounceHoverHighlight();e.preventDefault();e.stopImmediatePropagation();this.MoveHighligt(f);break;case"PageUp":this.debounceHoverHighlight();e.preventDefault();e.stopImmediatePropagation();this.MoveHighligt(-f);break;default:return true}};e.prototype.handleScroll=function(e){this.debounceHoverHighlight();var t=e.target;if(this.suggestions&&!this.suggestions.loading&&this.suggestions.haveMore&&this.suggestions.loadMore&&t.scrollTop+t.clientHeight+f*h>t.scrollHeight){this.suggestions.loadMore()}};e.prototype.hideSuggestions=function(){if(!this.suggesting){return}this.unsubscribeFromMouseDownOnDocument();this.suggesting=false;this.suggestions=undefined;if(this.forceOpen){this.forceOpen=false}};e.prototype.ignoreClicks=function(e){e.preventDefault();e.stopImmediatePropagation()};e.prototype.MoveHighligt=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;var i=this;return r.__generator(this,(function(r){switch(r.label){case 0:if(!!this.suggesting)return[3,3];if(!!this.suggestions)return[3,2];this.loading=true;this.ensureSuggesterService();return[4,this.suggestingsService.getSuggestions("").then((function(e){i.suggestions=e;i.loading=false})).catch((function(e){if(e.name==="AbortError"){d.info("suggestions request aborted by user input")}else{throw e}}))];case 1:r.sent();r.label=2;case 2:this.showSuggestions();return[2];case 3:t=this.highlightedSugestionIndex+e;if(t<0){t=0}if(t>this.suggestions.suggestionItems.length-1){t=this.suggestions.suggestionItems.length-1}this.scrollSuggestionIntoView(t);this.taskQueue.flushTaskQueue();this.highlightedSugestionIndex=t;return[2]}}))}))};e.prototype.scrollSuggestionIntoView=function(e){var t;var r;r="nearest";if(e===this.suggestions.suggestionItems.length-1){r="start"}var i=(t=this.suggestionsContainer)===null||t===void 0?void 0:t.querySelectorAll("qp-suggestion")[e];if(i){var n="scrollBehavior"in document.documentElement.style||m?{block:r}:undefined;i.scrollIntoView(n)}};e.prototype.select=function(e,t){if(t===void 0){t=undefined}var r=this.suggestions.suggestionItems[e];if(r)this.setEditorValue({display:r.display,useUpdateValue:!!t,value:r.value});if(t){t.preventDefault();t.stopImmediatePropagation()}this.hideSuggestions()};e.prototype.showSuggestions=function(){var e=this;if(!this.focused){return}if(!this.suggesting){this.suggesterWidth=undefined;this.documentMouseDownSubscription=this.eventAggregator.subscribe(l.MOUSE_DOWN_REACHED_BODY,(function(){return e.handleEditorBlur()}));this.suggesting=true;this.taskQueue.queueTask((function(){if(e.suggestionsContainer){var t=e.suggestionsContainer.getBoundingClientRect().width;e.suggesterWidth=t}}))}this.highlightedSugestionIndex=0};r.__decorate([o.bindable,r.__metadata("design:type",Object)],e.prototype,"config",void 0);r.__decorate([o.bindable,r.__metadata("design:type",HTMLElement)],e.prototype,"editor",void 0);r.__decorate([o.bindable,r.__metadata("design:type",HTMLElement)],e.prototype,"rectElement",void 0);r.__decorate([o.bindable,r.__metadata("design:type",Function)],e.prototype,"setEditorValue",void 0);r.__decorate([o.bindable,r.__metadata("design:type",Boolean)],e.prototype,"forceOpen",void 0);e=r.__decorate([o.autoinject,r.__metadata("design:paramtypes",[o.EventManager,s.SuggestingsServiceFabric,n.EventAggregator,o.TaskQueue])],e);return e}();t.QpSuggesterCustomElement=b}));define("text!controls/global/suggester/elements/qp-suggester.css",[],(function(){return"/* qp-editor-wrapper,\r\nqp-editor-wrapper * {\r\n  box-sizing: border-box;\r\n\r\n} */\r\n\r\nqp-suggester {\r\n  display: block;\r\n  position: absolute;\r\n  /* z-index: 1000; */\r\n  top: 100%;\r\n  /* overflow: hidden; */\r\n\r\n\r\n}\r\n\r\n.qp-suggester {\r\n\tbackground-color: #FFFFFF;\r\n\t-webkit-box-shadow: 3px 3px 4px rgba(0, 0, 0, 0.64);\r\n\t        box-shadow: 3px 3px 4px rgba(0, 0, 0, 0.64);\r\n\tz-index: 10000;\r\n}\r\n \r\n.qp-suggester.show-above {\r\n\t-webkit-box-shadow: 3px -1px 4px rgba(0, 0, 0, 0.64);\r\n\t        box-shadow: 3px -1px 4px rgba(0, 0, 0, 0.64);\r\n}\r\n \r\nqp-suggestion.suggestion-highlight {\r\n\tcolor: white;\r\n\tbackground-color: #007ACC;\r\n\tbackground-color: var(--primary-color, #007ACC);\r\n}\r\n \r\n@media screen and (-ms-high-contrast: active) {\r\n\tqp-suggestion.suggestion-highlight {\r\n\t  background-color: white;\r\n\t  color: black;\r\n\t}\r\n}\r\n \r\n.qp-suggester,\r\n.qp-suggester * {\r\n  -webkit-box-sizing: border-box;\r\n          box-sizing: border-box;\r\n}\r\n\r\n.qp-suggester {\r\n  max-width: 368px;\r\n}\r\n@media screen and (max-width: 400px) {\r\n  .qp-suggester {\r\n    max-width: calc(100vw - 18px);\r\n  }\r\n}\r\n\r\n.qp-suggester.loading{\r\n  -webkit-filter:grayscale(.5);\r\n          filter:grayscale(.5);\r\n}\r\n.qp-suggester.show-above {\r\n  -webkit-transform:translateY(-100%);\r\n          transform:translateY(-100%);\r\n  -webkit-transform:translateY(calc(-100% - 1px));\r\n          transform:translateY(calc(-100% - 1px));\r\n}\r\n\r\n.qp-suggester.show-left {\r\n  -webkit-transform:translateX(-100%);\r\n          transform:translateX(-100%);  \r\n}\r\n\r\n.qp-suggester.show-left.show-above {\r\n  -webkit-transform:translate(-100%,-100%);\r\n          transform:translate(-100%,-100%);  \r\n}\r\n\r\nqp-suggestion {\r\n  display: block;\r\n  height:24px;\r\n  padding: 4px 6px;\r\n  font-size: 13px;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  cursor: pointer;\r\n  max-width: 90vw;\r\n  \r\n}\r\n\r\n\r\n.loading-placeholder.loading {\r\n  position: relative;\r\n}\r\n.loading-placeholder.loading:before{\r\n  position: absolute;\r\n  top:2px;\r\n  left: 5px;\r\n  right:5px;\r\n  bottom: 2px;\r\n  content:'';\r\n  background-color: #ccc;\r\n}\r\n"}));define("text!controls/global/suggester/elements/qp-suggester.html",[],(function(){return'<template><require from="./qp-suggester.css"></require><div if.bind="suggesting && suggestions" ref="suggestionsContainer" glue-to.bind="rectElement" class="qp-suggester ${loading || suggestions.loading ?\'loading\':\'\'}" css="max-height:${maxHeight}px;overflow-y:auto; ${suggesterWidth?\'width:\'+suggesterWidth+\'px;\':\'\' } background-color:white;" scroll.trigger="handleScroll($event)" mousedown.capture="ignoreClicks($event)"><qp-suggestion repeat.for="i of suggestions.suggestionItems" extention-cord="force-show.bind: $index == highlightedSugestionIndex & debounce:32; manual-show-only:true" class="${$index==highlightedSugestionIndex?\'suggestion-highlight\':\'\'}" mouseenter.capture="changeHighLight($index)" mouseup.delegate="select($index,$event)"><template repeat.for="s of i.segments"><mark if.bind="s.highlight">${s.text}</mark><template else>${s.text}</template></template></qp-suggestion><qp-suggestion if.bind="suggestions.haveMore" repeat.for="i of 1" class="loading-placeholder ${suggestions.loading}">loading</qp-suggestion><div if.bind="suggestions.totalCount==0" style="padding:5px .5em;color:#888;font-size:13px;white-space:nowrap;text-overflow:ellipsis" class="no-results-found"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" style="vertical-align:bottom;margin-right:.5em" fill="currentColor"><g id="sad" stroke="none" stroke-width=".8" fill="none" fill-rule="evenodd"><g id="Group" fill="#c8930c"><circle cx="10.84" cy="5.68" r="1.03"></circle><circle cx="5.16" cy="5.68" r="1.03"></circle><path d="M8,0 C3.58177778,0 0,3.58177778 0,8 C0,12.4182222 3.58177778,16 8,16 C12.4182222,16 16,12.4182222 16,8 C16,3.58177778 12.4182222,0 8,0 Z M8,14.6671111 C4.31822222,14.6671111 1.33333333,11.6822222 1.33333333,8.00044444 C1.33333333,4.31844444 4.31822222,1.33333333 8,1.33333333 C11.6822222,1.33333333 14.6671111,4.31822222 14.6671111,8.00022222 C14.6671111,11.6822222 11.6822222,14.6671111 8,14.6671111 Z" fill-rule="nonzero"></path><path d="M11.1988131,12.3870968 C10.9618705,12.3870968 10.7318091,12.2666654 10.6093237,12.0538815 C10.0854351,11.1424204 9.08513805,10.5760202 7.99974353,10.5760202 C6.91411964,10.5760202 5.914052,11.1424204 5.39016335,12.0538815 C5.21125217,12.3649409 4.80250892,12.4785719 4.47748694,12.307248 C4.15223558,12.1363627 4.03342021,11.7454545 4.21233139,11.434395 C4.97247455,10.1118441 6.42394887,9.29032258 7.99997291,9.29032258 C9.57576756,9.29032258 11.0274713,10.1120635 11.7876144,11.434395 C11.9665256,11.7454545 11.8479396,12.1361433 11.5226882,12.307248 C11.4194703,12.3614311 11.3084536,12.3870968 11.1988131,12.3870968 Z"></path></g></g></svg> ${localizedStrings.noResultsFound} </div></div></template>'}));define("controls/global/suggester/qp-editor-wrapper",["require","exports","tslib","aurelia-framework","aurelia-logging"],(function(e,t,r,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpEditorWrapperCustomElement=void 0;var o=n.getLogger("qp-editor-wrapper");var a=function(){function e(e,t){this.element=e;this.tq=t}e.prototype.attached=function(){this.editor=this.element.querySelector(".editor");if(this.editor){this.editor.setAttribute("autocomplete","off");this.editor.setAttribute("autocorrect","off")}this.selector=this.element.querySelector(".selector");this.rectElement=this.selector||this.editor;if(!this.selector){o.warn("no selector",this.element)}else{if(!this.selector.object){o.error("no object",this.selector)}else{var e=this.selector.object;e.autoComplete=0;e.qpSuggester=true}}};e.prototype.setEditorValue=function(e,t,r){var i=this;var n;if(this.selector&&this.selector.object){var a=this.selector.object;if(this.editor!=null){var s=this.editor.value.trim();if(s===""||s!==e){a.setValue("","")}var l=a.hasHint?e+" - "+t:t;(n=this.editor)===null||n===void 0?void 0:n.setAttribute("unblock","1");a.updateValue(e,l);this.tq.queueTask((function(){var e;return(e=i.editor)===null||e===void 0?void 0:e.removeAttribute("unblock")}))}else{o.warn("no px object")}a.fireEvent(15,null,{select:true,complete:true})}};r.__decorate([i.bindable,r.__metadata("design:type",Object)],e.prototype,"config",void 0);e=r.__decorate([i.autoinject,i.customElement("qp-editor-wrapper"),r.__metadata("design:paramtypes",[Element,i.TaskQueue])],e);return e}();t.QpEditorWrapperCustomElement=a}));define("text!controls/global/suggester/qp-editor-wrapper.html",[],(function(){return'<template><require from="./elements/qp-suggester"></require><slot></slot><qp-suggester if.bind="config && config.suggester && editor" editor.two-way="editor" rect-element.bind="rectElement" set-editor-value.call="setEditorValue(value,display,useUpdateValue)" config.bind="config.suggester"></qp-suggester></template>'}));define("controls/global/tabbar/qp-tab",["require","exports","tslib","aurelia-framework","aurelia-logging"],(function(e,t,r,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpTabCustomElement=void 0;var o=n.getLogger("qp-tab");var a=function(){function e(e){this.element=e;this.visible=false;this.id=this.element.getAttribute("id")||""}t=e;e.processContent=function(e,t,r,i){var n=r.getAttribute("ref");if(!n)return true;var o=r;while(o.parentNode)o=o.parentNode;var a=o.querySelector("#"+n);if(!a)return true;for(var s=0;s<r.childNodes.length;++s){r.removeChild(r.childNodes[s])}r.append(a.content);return true};var t;r.__decorate([i.bindable,r.__metadata("design:type",String)],e.prototype,"header",void 0);r.__decorate([i.bindable,r.__metadata("design:type",Boolean)],e.prototype,"visible",void 0);e=t=r.__decorate([i.customElement("qp-tab"),i.autoinject,i.inlineView("<template show.bind='visible'><slot></slot></template>"),i.processContent(t.processContent),r.__metadata("design:paramtypes",[Element])],e);return e}();t.QpTabCustomElement=a}));define("controls/global/tabbar/qp-tabbar",["require","exports","tslib","aurelia-framework","aurelia-logging"],(function(e,t,r,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpTabbarCustomElement=void 0;var o=n.getLogger("qp-tabbar");var a=45;var s=function(){function e(e,t,r,i){this.element=e;this.taskQueue=t;this.bindingEngine=r;this.container=i;this.activeTabId="";this.tabs=[];this.orderedTabs=[];this.hiddenHeaders=[];this.lastVisibleIdx=-1;this.thereAreHiddens=false;this.menuOpened=false;this.shadowElement=undefined;o.warn("constructor")}e.prototype.tabsChanged=function(){this.orderedTabs=[];for(var e=0;e<this.tabs.length;++e){var t=this.tabs[e];if(!t.id)t.id="_"+e;this.orderedTabs.push(t)}if(this.tabs.length)this.activeTabId=this.tabs[0].id};e.prototype.activeTabIdChanged=function(){for(var e=0;e<this.tabs.length;++e){var t=this.tabs[e];if(t.id===this.activeTabId)t.visible=true;else t.visible=false}};e.prototype.showTab=function(e){this.activeTabId=e};e.prototype.showHiddenTab=function(e){var t=this;var r=this.orderedTabs.findIndex((function(t){return t.id===e}));var i=this.orderedTabs[r];this.orderedTabs.splice(r,1);this.orderedTabs.splice(this.lastVisibleIdx,0,i);this.activeTabId=e;this.taskQueue.queueTask((function(){t.onWidthChange();if(t.isTabHidden(e)){t.taskQueue.queueTask((function(){t.showHiddenTab(e)}))}}))};e.prototype.attached=function(){var e=this;this.resizeObserver=new i.PLATFORM.global.ResizeObserver((function(t){if(!t||!t.length)return;e.onWidthChange()}));this.resizeObserver.observe(this.headerElement)};e.prototype.onWidthChange=function(){this.menuOpened=false;var e=this.headerElement.scrollHeight;this.lastVisibleIdx=-1;if(e>a){this.thereAreHiddens=true;for(var t=this.orderedTabs.length-1;t>=0;--t){if(!this.isTabHidden(this.orderedTabs[t].id)){this.lastVisibleIdx=t;break}}}else{this.thereAreHiddens=false}this.hiddenHeaders=[];for(var r=this.lastVisibleIdx+1;r<this.orderedTabs.length;++r){var i=this.orderedTabs[r];this.hiddenHeaders.push({id:i.id,header:i.header})}};e.prototype.onMouseEnter=function(e){var t=this.element.querySelector(".qp-tabbar-tab[tabid="+e+"]");t===null||t===void 0?void 0:t.classList.add("qp-tabbar-hover");return true};e.prototype.onMouseLeave=function(e){var t=this.element.querySelector(".qp-tabbar-tab[tabid="+e+"]");t===null||t===void 0?void 0:t.classList.remove("qp-tabbar-hover");return true};e.prototype.stopPropagation=function(e){e.stopPropagation();return false};e.prototype.hideMenu=function(e){this.menuOpened=false;if(!this.shadowElement)return true;this.shadowElement.releasePointerCapture(e.pointerId);return false};e.prototype.toggleMenu=function(e){if(this.menuOpened)this.hideMenu(e);else this.showMenu(e);return false};e.prototype.showMenu=function(e){this.menuOpened=true;this.shadowElement=this.element.querySelector(".qp-menu-shadow");if(!this.shadowElement)return true;this.shadowElement.setPointerCapture(e.pointerId);return false};e.prototype.selectTab=function(e){return true};e.prototype.isTabHidden=function(e){var t=this.element.querySelector(".qp-tabbar-tab[tabid='"+e+"']");if((t===null||t===void 0?void 0:t.offsetTop)>a/2)return true;return false};r.__decorate([i.bindable,r.__metadata("design:type",String)],e.prototype,"activeTabId",void 0);r.__decorate([i.children("qp-tab"),r.__metadata("design:type",Array)],e.prototype,"tabs",void 0);e=r.__decorate([i.customElement("qp-tabbar"),i.autoinject,r.__metadata("design:paramtypes",[Element,i.TaskQueue,i.BindingEngine,i.Container])],e);return e}();t.QpTabbarCustomElement=s}));define("text!controls/global/tabbar/qp-tabbar.css",[],(function(){return'.qp-tabbar {\r\n\tmargin-top: 5px;\r\n\tposition: relative;\r\n}\r\n\r\n.qp-tabbar .qp-tabbar-header {\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n\t-ms-flex-wrap: nowrap;\r\n\t    flex-wrap: nowrap;\r\n\t-webkit-box-align: center;\r\n\t    -ms-flex-align: center;\r\n\t        align-items: center;\r\n\r\n\tborder-bottom: 1px solid #ccc;\r\n\ttext-transform: uppercase;\r\n\tfont-size: 13px;\r\n\tmargin-bottom: 5px;\r\n\tcolor: rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n.qp-tabbar .qp-tabbar-wrapper {\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n\t-ms-flex-wrap: wrap;\r\n\t    flex-wrap: wrap;\r\n\theight: 31px;\r\n\toverflow: hidden;\r\n}\r\n\r\n.qp-tabbar .qp-tabbar-tab {\r\n\tpadding: 8px 16px 8px;\r\n\tdisplay: inline-block;\r\n\tposition: relative;\r\n\tcursor: pointer;\r\n}\r\n\r\n.qp-tabbar .qp-tabbar-tab.qp-tabbar-hover {\r\n\tcolor: #000;\r\n}\r\n\r\n.qp-tabbar .qp-tabbar-tab.qp-tabbar-active {\r\n\tcolor: #007ACC;\r\n\tcolor: var(--primary-color, #007ACC);\r\n\tcursor: default;\r\n}\r\n\r\n.qp-tabbar .qp-tabbar-tab.qp-tabbar-hover::after {\r\n\tcontent: "";\r\n\tdisplay: block;\r\n\theight: 3px;\r\n\tbackground-color: #D2D4D7;;\r\n\tposition: absolute;\r\n\tbottom: 0px;\r\n\tleft: 16px;\r\n\tright: 16px;\r\n}\r\n\r\n.qp-tabbar .qp-tabbar-tab.qp-tabbar-active::after {\r\n\tcontent: "";\r\n\tdisplay: block;\r\n\theight: 3px;\r\n\tbackground-color: #007ACC;\r\n\tbackground-color: var(--primary-color, #007ACC);\r\n\tposition: absolute;\r\n\tbottom: 0px;\r\n\tleft: 16px;\r\n\tright: 16px;\r\n}\r\n\r\n.qp-tabbar .qp-tabbar-opener {\r\n\tpadding: 4px 6px;\r\n\tfill: rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n.qp-tabbar .qp-tabbar-opener.qp-tabbar-opened,\r\n.qp-tabbar .qp-tabbar-opener:hover {\r\n\tfill: #000;\r\n\tbackground-color: #D2D4D7;\r\n}\r\n\r\n.qp-tabbar .qp-tabbar-opener svg {\r\n\twidth: 16px;\r\n\theight: 16px;\r\n}\r\n\r\n.qp-tabbar-shadow {\r\n\tposition: fixed;\r\n\twidth: 100vw;\r\n\theight: 100vh;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\tz-index: 5000;\r\n}\r\n\r\n.qp-tabbar-menu {\r\n\tz-index: 6000;\r\n\tbackground-color: white;\r\n\tmax-height: 80vh;\r\n\toverflow-y: auto; /* for FF */\r\n\toverflow-y: overlay;\r\n\tmin-width: 272px !important;\r\n\t-webkit-box-shadow: 1px 3px 5px rgba(115, 115, 115, 1);\r\n\t        box-shadow: 1px 3px 5px rgba(115, 115, 115, 1);\r\n\t-webkit-box-sizing: border-box;\r\n\t        box-sizing: border-box;\r\n\tborder-radius: 5px;\r\n\tborder-top: 5px solid #fff;\r\n\tborder-bottom: 5px solid #fff;\r\n\tpadding: 0 3px;\r\n\tmargin: 0 -3px;\r\n\t\r\n\tscrollbar-width: thin;\r\n  scrollbar-color: rgba(0, 0, 0, 0.15) transparent;\r\n}\r\n\r\n.qp-tabbar-menu .qp-tabbar-menu-item {\r\n\twhite-space: nowrap;\r\n\tpadding: 5px 12px;\r\n\tfont-size: 13px;\r\n\tcursor: pointer;\r\n\tcolor: rgba(0, 0, 0, .85);\r\n}\r\n\r\n.qp-tabbar-menu .qp-tabbar-menu-item:hover {\r\n\tbackground-color: #007ACC;\r\n\tbackground-color: var(--primary-color, #007ACC);\r\n\tcolor: #fff;\r\n}\r\n'}));define("text!controls/global/tabbar/qp-tabbar.html",[],(function(){return'<template><require from="./qp-tabbar.css"></require><require from="./qp-tab"></require><div class="qp-tabbar"><div class="qp-tabbar-header"><div class="qp-tabbar-wrapper" ref="headerElement"><span class="qp-tabbar-tab ${tab.id===activeTabId ? \'qp-tabbar-active\' : \'\'}" tabid.bind="tab.id & attr" repeat.for="tab of orderedTabs" click.delegate="showTab(tab.id)" mouseenter.trigger="onMouseEnter(tab.id)" mouseleave.trigger="onMouseLeave(tab.id)"> ${tab.header} </span></div><div show.bind="thereAreHiddens" ref="menuOpener" class="qp-tabbar-opener ${menuOpened ? \'qp-tabbar-opened\': \'\'}" pointerdown.capture="toggleMenu($event)"><qp-icon imagesrc="svg:main@ellipsis"></qp-icon></div></div><div><slot></slot></div></div><div if.bind="menuOpened" class="qp-tabbar-shadow" pointerdown.delegate="toggleMenu($event)"><div glue-to.bind="menuOpener" class="qp-tabbar-menu"><div repeat.for="tab of hiddenHeaders" class="qp-tabbar-menu-item" pointerup.delegate="showHiddenTab(tab.id)" pointerdown.delegate="showHiddenTab(tab.id)"> ${tab.header} </div></div></div></template>'}));define("controls/global/text-editor/converter",["require","exports","tslib","aurelia-framework","../number-editor/converter","../mask-editor/converter"],(function(e,t,r,i,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MetaValueConverter=t.TextEditorValueConverter=void 0;var a=function(){function e(){}e.prototype.toView=function(e,t,r){if(!t&&r&&r.allowNull&&!e){return r.nullText}return e!=null?e.toString():""};e.prototype.fromView=function(e,t,r){if(r.allowNull&&(!e||e===r.nullText))return null;return e};e=r.__decorate([i.valueConverter("textEditor")],e);return e}();t.TextEditorValueConverter=a;var s=function(){function e(e,t,r){this.text=e;this.numb=t;this.mask=r;this.signals=["format-changed"]}e.prototype.toView=function(e,t,r,i){var n=this[t];return n&&n.toView?n.toView(e,r,i):e};e.prototype.fromView=function(e,t,r,i){var n=this[t];return n&&n.fromView?n.fromView(e,r,i):e};e=r.__decorate([i.autoinject,i.valueConverter("meta"),r.__metadata("design:paramtypes",[a,n.NumberEditorValueConverter,o.MaskEditorValueConverter])],e);return e}();t.MetaValueConverter=s}));define("controls/global/text-editor/qp-text-editor",["require","exports","tslib","aurelia-framework","apps/enhance/services/control-helper","../base-field-editor"],(function(e,t,r,i,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpTextEditorCustomElement=void 0;var a=function(e){r.__extends(t,e);function t(t,r){var i=e.call(this)||this;i.element=t;i.tq=r;i.converter="text";i.hasFocus=false;i.addConfigSetter("length","maxLength");i.addConfigSetter("nullable","allowNull");i.addConfigSetter("multiLine",(function(e){if(e)i.config.type=1}));return i}o=t;t.prototype.configChanged=function(e,t){if(!this.config)this.config={};n.applyDefaultValues(this.config,o.defaultConfig)};t.prototype.isTextArea=function(){return this.elemText.tagName==="TEXTAREA"};t.prototype.sendUpdateEvent=function(){var e=document.createEvent("HTMLEvents");e.initEvent("update",true,false);this.elemText.dispatchEvent(e)};t.prototype.sendInputEvent=function(){var e=document.createEvent("HTMLEvents");e.initEvent("input",true,true);this.elemText.dispatchEvent(e)};t.prototype.select=function(e,t){if(e===void 0){e=null}if(t===void 0){t=null}if(!this.config.hidden){if(e==null||t==null){if(e!=null){this.elemText.setSelectionRange(e,e)}else{this.elemText.select()}}else{this.elemText.setSelectionRange(e,t)}}};t.prototype.selectContent=function(){var e=this;if(!n.isVisible(this.elemText))return;if(this.config&&(this.config.selectOnFocus||this.getDisabled()))this.tq.queueMicroTask((function(){return e.select()}))};t.prototype.getDisabled=function(){return!this.config.enabled||this.config.readOnly};t.prototype.processKeyDown=function(e){var t=127;var r=7;var i=8;var n=e.key&&e.key.length===1&&!e.ctrlKey&&!e.metaKey&&!e.altKey;var o=n?e.key[0].charCodeAt(0):null;switch(e.key){case"Backspace":o=i;break;case"Delete":o=r;break;case"Enter":var a=this.elemText;var s=a.resizer;if(s!=null&&this.isTextArea()&&(e.ctrlKey||e.metaKey)){var l=a.selectionEnd;a.value=a.value.substring(0,l)+"\n"+a.value.substring(l);a.selectionEnd=l+1;if(s&&s.adjust)s.adjust();break}if(!e.shiftKey&&!this.getDisabled()){this.sendUpdateEvent()}break}if(o!=null){if(this.getDisabled()||o>t&&this.config.asciiCharSet){return false}return this.onKeyPress(e,o)}return true};t.prototype.onKeyPress=function(e,t){return true};t.prototype.processFocus=function(e){this.hasFocus=true;this.selectContent()};t.prototype.processBlur=function(e){this.hasFocus=false};t.prototype.processValueUpdate=function(e){var t=this;var r=this.elemText.value;this.tq.queueMicroTask((function(){return t.elemText.value=r}))};t.prototype.processPaste=function(e){if(this.getDisabled()){return false}var t=e.clipboardData?e.clipboardData:i.PLATFORM.global.clipboardData;if(t!=null){var r=t.getData("Text");if(this.processPasteValue(r)){return false}}return true};t.prototype.processPasteValue=function(e){return false};Object.defineProperty(t.prototype,"textMode",{get:function(){if(this.config==null){return"text"}switch(this.config.type){case 2:return"password";case 3:return"color"}return"text"},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"align",{get:function(){if(this.config==null){return""}switch(this.config.textAlign){case 1:return"left";case 2:return"center";case 3:return"right";case 4:return"justify"}return""},enumerable:false,configurable:true});var o;t.defaultConfig={allowNull:true,enabled:true,selectOnFocus:true,spellcheck:true,type:0};r.__decorate([i.bindable,r.__metadata("design:type",Object)],t.prototype,"config",void 0);r.__decorate([i.bindable,r.__metadata("design:type",Object)],t.prototype,"value",void 0);r.__decorate([i.bindable({defaultBindingMode:i.bindingMode.oneTime}),r.__metadata("design:type",String)],t.prototype,"converter",void 0);r.__decorate([i.computedFrom("config.type"),r.__metadata("design:type",String),r.__metadata("design:paramtypes",[])],t.prototype,"textMode",null);r.__decorate([i.computedFrom("config.textAlign"),r.__metadata("design:type",String),r.__metadata("design:paramtypes",[])],t.prototype,"align",null);t=o=r.__decorate([i.customElement("qp-text-editor"),i.useView(i.PLATFORM.moduleName("./qp-text-editor.html")),i.autoinject,r.__metadata("design:paramtypes",[Element,i.TaskQueue])],t);return t}(o.QpBaseFieldEditor);t.QpTextEditorCustomElement=a}));define("text!controls/global/text-editor/qp-text-editor.css",[],(function(){return'\r\nqp-text-editor, qp-number-editor, qp-mask-editor\r\n{\r\n\tdisplay: block;\r\n}\r\n\r\nqp-text-editor[style*="width"] > *, qp-number-editor[style*="width"] > *, qp-mask-editor[style*="width"] > *\r\n{\r\n\twidth: 100% !important;\r\n}\r\n\r\nqp-text-editor[style*="height"] > *, qp-number-editor[style*="height"] > *, qp-mask-editor[style*="height"] > *\r\n{\r\n\theight: 100% !important;\r\n}\r\n\r\ninput.qp-text-editor, textarea.qp-text-editor {\r\n\tborder: #D2D4D7 1px solid;\r\n\tpadding: 3px 6px;\r\n\tmargin-bottom: 0px;\r\n\tmargin-top: 0px;\r\n\tbox-sizing: border-box;\r\n\t-webkit-box-sizing: border-box;\r\n\t-moz-box-sizing: border-box;\r\n\toutline: none;\r\n}\r\ninput.qp-text-editor\r\n{\r\n\theight: 24px;\r\n}\r\ninput.qp-text-editor.auto-size\r\n{\r\n\twidth: 100%;\r\n}\r\n\r\ninput.qp-text-editor[readonly], textarea.qp-text-editor[readonly] \r\n{\r\n\tbackground-color: transparent;\r\n\tborder-top-color: transparent;\r\n\tborder-left-color: transparent;\r\n\tborder-right-color: transparent;\r\n\tborder-width: 1px;\r\n}\r\n\r\ninput.qp-text-editor[enabled="false"], input.qp-text-editor[disabled],\r\ntextarea.qp-text-editor[enabled="false"], textarea.qp-text-editor[disabled]\r\n{\r\n\tbackground-color: transparent;\r\n\t-webkit-box-shadow: none;\r\n\t        box-shadow: none;\r\n\tborder-color: transparent;\r\n\tborder-bottom-color: #E0E4E8;\r\n\tborder-bottom-style: dotted;\r\n\tborder-width: 1px;\r\n}\r\n\r\ninput.qp-text-editor:focus, text.qp-text-editor:focus,\r\ntextarea.qp-text-editor:focus \r\n{\r\n\tborder: 1px solid #007ACC;\r\n\tborder: 1px solid var(--primary-color, #007ACC);\r\n\t-webkit-box-shadow: 0px 0px 2px 0px #007ACC;\r\n\t        box-shadow: 0px 0px 2px 0px #007ACC;\r\n\t-webkit-box-shadow: 0px 0px 2px 0px var(--primary-color, #007ACC);\r\n\t        box-shadow: 0px 0px 2px 0px var(--primary-color, #007ACC);\r\n}\r\n\r\ninput.qp-text-editor[readonly]:focus, textarea.qp-text-editor[readonly]:focus\r\n{\r\n\tborder-width: 1px;\r\n\tbox-shadow: 0px 0px 0px 0px transparent;\r\n\t-webkit-box-shadow: 0px 0px 0px 0px transparent;\r\n\tborder-bottom-color: #D2D4D7;\r\n\tborder-bottom-style: dotted;\r\n\tbackground-color: transparent;\r\n\tborder-top-color: transparent;\r\n\tborder-left-color: transparent;\r\n\tborder-right-color: transparent;\r\n}\r\n'}));define("text!controls/global/text-editor/qp-text-editor.html",[],(function(){return'<template css="display: ${config.hidden ? \'none\': \'\'};"><require from="./qp-text-editor.css"></require><template if.bind="config.hasEditLink && (!config.enabled || config.readOnly)"><a id="${config.id}" name="${config.name}" class="${config.class} qp-text-editor" tabindex="${config.tabIndex}" href="javascript: void 0" css="text-align: ${align}" enabled.bind="enabled ? null : false & attr"> ${value | meta : converter : false : config} </a></template><template else><textarea if.bind="config.type == 1" id="${config.id}" ref="elemText" name="${config.name}" class="${config.class} qp-text-editor" tabindex="${config.tabIndex}" maxlength.bind="config.maxLength & attr" enabled.bind="config.enabled ? null : false & attr" readonly="${config.readOnly || !config.enabled ? true : null}" spellcheck.bind="config.spellcheck ? null : false & attr" css="text-align: ${align}" placeholder.bind="config.placeholder & attr" wrap.bind="wrap ? \'off\': null & attr" rows.bind="config.rows & attr" cols.bind="config.cols & attr" value.bind="value | meta : converter : hasFocus : config & updateTrigger : \'blur\' : \'update\'" keydown.trigger="processKeyDown($event)" focus.trigger="processFocus($event)" blur.trigger="processBlur($event)" paste.delegate="processPaste($event)">\r\n    </textarea> <input if.bind="config.type != 1" type="${textMode}" id="${config.id}" ref="elemText" name="${config.name}" class="${config.class} qp-text-editor" tabindex="${config.tabIndex}" maxlength.bind="config.maxLength & attr" enabled.bind="config.enabled ? null : false & attr" readonly="${config.readOnly || !config.enabled ? true : null}" spellcheck.bind="config.spellcheck ? null : false & attr" css="text-align: ${align}" placeholder.bind="config.placeholder & attr" value.bind="value | meta : converter : hasFocus : config & updateTrigger : \'blur\' : \'update\'" keydown.trigger="processKeyDown($event)" update.capture="processValueUpdate($event)" focus.trigger="processFocus($event)" blur.trigger="processBlur($event)" paste.delegate="processPaste($event)"></template></template>'}));define("controls/global/tool-bar/qp-tool-bar",["require","exports","tslib","aurelia-framework","aurelia-event-aggregator","aurelia-logging","apps/enhance/services/control-helper","plugins/happeded-on-body","aurelia-fetch-client"],(function(e,t,r,i,n,o,a,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpToolBarCustomElement=void 0;var d=o.getLogger("tool-bar");var c=45;var p=300;var u=30;var f=function(){function e(e,t,r,i,n){this.element=e;this.bindingEngine=t;this.eventAggregator=r;this.taskQueue=i;this.http=n;this.subscription=undefined;this.styleSubscription=undefined;this.items=[];this.menu=[];this.itemElements=[];this.showMenuOpener=true;this.menuExclusions={};this.toolBarMode="toolbar+menu";this.menuOpened=false;this.menuTopPosition=0;this.highlightedRow=undefined;this.highlightedColumn=undefined;this.highlightedID="";this.toolbarWidth=0;this.availableHeight=0;this.menuColumnsNbr=3}t=e;Object.defineProperty(e.prototype,"ID",{get:function(){var e;return(e=this===null||this===void 0?void 0:this.config)===null||e===void 0?void 0:e.id},enumerable:false,configurable:true});e.prototype.configChanged=function(e,r){var i=this;var n,o;if(!this.config)this.config={};a.applyDefaultValues(this.config,t.defaultConfig);this.config.changed=false;this.config.styleChanged=false;(n=this.subscription)===null||n===void 0?void 0:n.dispose();this.subscription=this.bindingEngine.propertyObserver(this.config,"changed").subscribe((function(e){if(!e)return;i.setupViewModel();i.taskQueue.queueTask((function(){i.adjustToolbarWidth();i.rebuildMenu()}));i.config.changed=false}));(o=this.styleSubscription)===null||o===void 0?void 0:o.dispose();this.styleSubscription=this.bindingEngine.propertyObserver(this.config,"styleChanged").subscribe((function(e){if(!e)return;i.synchroniseItems();i.config.styleChanged=false}));this.setupViewModel();this.setupWidthObserver();this.taskQueue.queueTask((function(){return i.adjustToolbarWidth()}))};e.prototype.attached=function(){this.setupWidthObserver()};e.prototype.setupWidthObserver=function(){var e=this;if(!this.resizeObserver&&i.PLATFORM.global.ResizeObserver&&this.toolbarElement&&this.fullULElement){this.resizeObserver=new i.PLATFORM.global.ResizeObserver((function(t){if(!t||!t.length)return;e.onWidthChange()}));this.resizeObserver.observe(this.fullULElement);this.resizeObserver.observe(this.toolbarElement)}};e.prototype.onWidthChange=function(){var e=this.toolbarElement.clientWidth;this.menuColumnsNbr=Math.min(3,Math.floor(e/300));this.adjustToolbarWidth();this.rebuildMenu();this.toolbarWidth=this.toolbarElement.clientWidth};e.prototype.adjustToolbarWidth=function(){if(!this.menuOpener)return;var e=getComputedStyle(this.menuOpener);var t=this.toolbarElement.clientWidth-this.menuOpener.offsetWidth-parseInt(e.marginLeft)-parseInt(e.marginRight);if(this.toolBarMode!=="always menu"){if(this.fullULElement.scrollHeight<c){this.toolBarMode="toolbar only";this.hideMenu();return}else this.toolBarMode="toolbar+menu"}var r=0;var i=[];var n=[];var o=0;var a=true;var s=function(e){if(!e)return"continue";if(l.isNavigation(e.id)){i.push(e);r+=l.getEleWidth(e);return"continue"}if(!l.isSystem(e.id))return"continue";o+=l.getEleWidth(e);if(o>t)a=false;var n=l.items.find((function(t){return t.id==e.id}));n===null||n===void 0?void 0:n.makeVisible(a)};var l=this;for(var d=0,p=this.itemElements;d<p.length;d++){var u=p[d];s(u)}var f=function(e){if(!e||h.isSystem(e.id)||h.isNavigation(e.id))return"continue";o+=h.getEleWidth(e);if(o>t)a=false;var r=h.items.find((function(t){return t.id==e.id}));r===null||r===void 0?void 0:r.makeVisible(a)};var h=this;for(var g=0,m=this.itemElements;g<m.length;g++){var u=m[g];f(u)}if(a&&o+r<=t){var b=function(e){var t=v.items.find((function(t){return t.id==e.id}));t===null||t===void 0?void 0:t.makeVisible()};var v=this;for(var x=0,y=i;x<y.length;x++){var u=y[x];b(u)}}else{var w=function(e){var t=q.items.find((function(t){return t.id==e.id}));t===null||t===void 0?void 0:t.makeVisible(false)};var q=this;for(var C=0,k=i;C<k.length;C++){var u=k[C];w(u)}}};e.prototype.isNavigation=function(e){if(!e)return false;var t=this.config.items[e].config;if(t.isNavigation)return true;return false};e.prototype.isSystem=function(e){if(!e)return false;var t=this.config.items[e].config;if(t.isSystem)return true;return false};e.prototype.syncMenuChanges=function(){var e;for(var t=0,r=this.items;t<r.length;t++){var i=r[t];if(!i)continue;var n=(e=this.config.items[i.id])===null||e===void 0?void 0:e.config;if(n){i.disabled=n.disabled}}};e.prototype.synchroniseItems=function(){var e=function(e){var r=t.config.items[e].config;var i=t.items.find((function(t){return t.id==e}));if(!i)return"continue";i.disabled=r.disabled;var n=i;if(!n)return"continue";n.images=r.images||n.images;n.toolTip=r.toolTip||n.toolTip};var t=this;for(var r in this.config.items){e(r)}this.attachToolTips()};e.prototype.setupViewModel=function(){var e=this;this.items=[];this.menuExclusions={};var t=this.config.id;var r=this.config.categories;if(r&&(r.length>1||r.length==1&&r[0].text)){this.toolBarMode="always menu"}else this.toolBarMode="toolbar+menu";var i=0;var n=function(e){var t=o.config.items[e];var n=t.config;var a=void 0;switch(t.type){case"menu-options":{var s=r===null||r===void 0?void 0:r.find((function(t){return t.id===e}));if(!s)return"continue";o.menuExclusions[s.name]=true;var l=new m(e,n);for(var d=0,c=s.actions;d<c.length;d++){var p=c[d];var u=o.config.items[p];var f=u.config;l.options.push(new g(p,f))}a=l;break}case"menu-button":case undefined:{a=new g(e,n);break}default:a=new h(e)}var b=false;if(r&&!(n.showInToolbar||n.favorite&&!n.disabled&&o.isInCategories(e))){a.showIfEnoughRoom=true;b=true;for(var v=0,x=r;v<x.length;v++){var y=x[v];if((y===null||y===void 0?void 0:y.text)!=null)continue;if(y===null||y===void 0?void 0:y.actions.find((function(t){return t===e}))){b=false;break}}}if(!b)o.items[i++]=a};var o=this;for(var a in this.config.items){n(a)}var s=r?r.filter((function(t){return e.menuExclusions[t.name]==null})):[];if(s.length>1||s.length==1&&s[0].text){this.toolBarMode="always menu"}else this.toolBarMode="toolbar+menu";this.rebuildMenu();this.taskQueue.queueTask((function(){e.attachToolTips()}))};e.prototype.isInCategories=function(e){for(var t=0,r=this.config.categories||[];t<r.length;t++){var i=r[t];if(i===null||i===void 0?void 0:i.actions.find((function(t){return t===e})))return true}return false};e.isInMenu=function(e,t){var r;for(var i=0,n=e;i<n.length;i++){var o=n[i];if((r=o.items)===null||r===void 0?void 0:r.find((function(e){return e.id===t})))return true}return false};e.prototype.rebuildMenu=function(){var e;var r;if(!this.config)return;var n=[];var o=0;for(var a=0,s=this.config.categories||[];a<s.length;a++){var l=s[a];if(this.menuExclusions[l.name]||!l.actions)continue;++o;var d={};d.id=l.id;d.text=l.text;d.items=[];for(var c=0,p=l.actions;c<p.length;c++){var f=p[c];var m=this.config.items[f];var b=m.config;var x=void 0;switch(m.type){case"menu-button":{x=new g(f,b,l.id);break}default:x=new h(f)}d.items.push(x);++o}n.push(d)}var y={};y.items=[];for(var w=0,q=this.items;w<q.length;w++){var x=q[w];if(x.visibleOnToolbar||!this.isSystem(x.id)||this.isNavigation(x.id)||t.isInMenu(n,x.id))continue;y.items.push(x);++o}if(y.items.length)n.unshift(y);var C=0;this.menu=[];var k=0;this.availableHeight=i.PLATFORM.global.document.documentElement.clientHeight-(((r=this.toolbarElement)===null||r===void 0?void 0:r.getBoundingClientRect().bottom)||0);var _=Math.floor(this.availableHeight/u);var D=0;for(var S=0,E=n;S<E.length;S++){var F=E[S];D+=F.items.length+1}this.menuColumnsNbr=Math.min(this.menuColumnsNbr,Math.max(Math.ceil(D/_),2));for(var M=0,T=n;M<T.length;M++){var A=T[M];k=Math.min(k+1,Math.floor(C*this.menuColumnsNbr/o));C+=A.items.length+1;if(!this.menu[k])this.menu[k]=[];this.menu[k].push(new v(A.id,A.text));(e=this.menu[k]).push.apply(e,A.items)}this.showMenuOpener=!this.isEverythingVisible()};e.prototype.isEverythingVisible=function(){var e;for(var t=0,r=this.menu;t<r.length;t++){var i=r[t];var n=function(t){if(t.type==="MenuButton"){if(((e=o.items.find((function(e){return e.id===t.id})))===null||e===void 0?void 0:e.visibleOnToolbar)!==true)return{value:false}}};var o=this;for(var a=0,s=i;a<s.length;a++){var l=s[a];var d=n(l);if(typeof d==="object")return d.value}}return true};e.prototype.attachToolTips=function(){var e,t;for(var r=0,n=this.itemElements;r<n.length;r++){var o=n[r];if(!o)continue;var a=this.config.items[o.id];if((a===null||a===void 0?void 0:a.type)==="menu-button"&&((e=a===null||a===void 0?void 0:a.config)===null||e===void 0?void 0:e.toolTip)&&i.PLATFORM.global.px)i.PLATFORM.global.px.setTitle(o,a.config.toolTip)}for(var s=0;s<this.fullULElement.children.length;++s){var o=this.fullULElement.children[s];if(!o)continue;var a=this.config.items[o.id];if((a===null||a===void 0?void 0:a.type)==="menu-button"&&((t=a===null||a===void 0?void 0:a.config)===null||t===void 0?void 0:t.toolTip)&&i.PLATFORM.global.px)i.PLATFORM.global.px.setTitle(o,a.config.toolTip)}};e.prototype.advanceSelection=function(e,t){if(t===void 0){t=0}if(this.highlightedColumn==null){if(t>0)this.highlightedColumn=this.menuColumnsNbr;else this.highlightedColumn=0}var r=this.highlightedColumn;this.highlightedColumn=(this.highlightedColumn+t+this.menuColumnsNbr)%this.menuColumnsNbr;var i=this.menu[this.highlightedColumn];if(this.highlightedRow==null){if(e>=0)this.highlightedRow=-1;else this.highlightedRow=i.length}if(t){this.highlightedRow=Math.min(this.highlightedRow,i.length-1);e=0}var n=this.highlightedRow;this.highlightedRow+=e;var o=0;for(o=0;o<this.menuColumnsNbr;++o){i=this.menu[this.highlightedColumn];while(this.highlightedRow>=0&&this.highlightedRow<i.length){var a=i[this.highlightedRow];if(a.type==="MenuButton"&&!a.disabled)break;this.highlightedRow+=e||t}if(this.highlightedRow>=0&&this.highlightedRow<i.length)break;this.highlightedColumn=(this.highlightedColumn+t+this.menuColumnsNbr)%this.menuColumnsNbr;this.highlightedRow=n}if(o===this.menuColumnsNbr){this.highlightedRow=n;this.highlightedColumn=r}i=this.menu[this.highlightedColumn];var s=i&&i[this.highlightedRow];this.highlightedID=s===null||s===void 0?void 0:s.id;if(this.menuPane){this.scrollIntoView()}};e.prototype.onKeyDown=function(e){var t=false;switch(e.key){case"Down":case"ArrowDown":if(!this.menuOpened)this.showMenu();this.advanceSelection(1);t=true;break;case"Up":case"ArrowUp":if(!this.menuOpened)this.showMenu();this.advanceSelection(-1);t=true;break;case"Left":case"ArrowLeft":if(!this.menuOpened)this.showMenu();this.advanceSelection(0,-1);t=true;break;case"Right":case"ArrowRight":if(!this.menuOpened)this.showMenu();this.advanceSelection(0,1);t=true;break;case"Esc":case"Escape":this.hideMenu();t=true;break;case"Enter":if(this.highlightedID){this.processClick(this.highlightedID,"MenuButton",e)}t=true;break}if(t){e.stopPropagation();return false}return true};e.prototype.stopPropagation=function(e){e.stopPropagation();return false};e.prototype.toggleMenu=function(e){if(this.menuOpened)this.hideMenu();else this.showMenu();return false};e.prototype.showMenu=function(){var e=this;this.menuTopPosition=this.menuOpener.getBoundingClientRect().bottom;var t=i.PLATFORM.global.document.documentElement.clientHeight-this.toolbarElement.getBoundingClientRect().bottom;if(this.availableHeight!==t){var r=this.toolbarElement.clientWidth;this.availableHeight=t;this.menuColumnsNbr=Math.min(3,Math.floor(r/300));this.setupViewModel()}this.rebuildMenu();this.menuOpener.focus();setTimeout((function(){e.documentMouseDownSubscription=e.eventAggregator.subscribe(s.MOUSE_DOWN_REACHED_BODY,(function(){return e.hideMenu()}))}),0);this.menuOpened=true};e.prototype.hideMenu=function(){this.unsubscribeFromMouseDownOnDocument();this.menuOpened=false;this.highlightedRow=undefined;this.highlightedColumn=undefined};e.prototype.unsubscribeFromMouseDownOnDocument=function(){var e;(e=this.documentMouseDownSubscription)===null||e===void 0?void 0:e.dispose();this.documentMouseDownSubscription=undefined};e.prototype.detached=function(){var e,t,r;this.unsubscribeFromMouseDownOnDocument();(e=this.styleSubscription)===null||e===void 0?void 0:e.dispose();(t=this.subscription)===null||t===void 0?void 0:t.dispose();(r=this.resizeObserver)===null||r===void 0?void 0:r.disconnect()};e.prototype.toggleFavorites=function(e,t){var r=this;var i=this.config.items[e].config;var n="add";if(i.favorite){i.favorite=false;n="remove"}else{i.favorite=true}this.http.fetch("ui/FavoriteActions/"+a.getScreenID()+"/"+i.commandName+"/"+n,{method:"POST"}).then((function(e){if(e.ok){r.setupViewModel();r.taskQueue.queueTask((function(){r.onWidthChange();r.eventAggregator.publish("repositioned:"+r.menuOpener.id)}))}else{alert("Error occured: "+e.statusText)}})).catch((function(e){return alert("Something went wrong. "+e.message)}));return this.stopPropagation(t)};e.prototype.processMenuSelected=function(e){var t=e.detail.id;this.processClick(t,"MenuButton",e.detail.event)};e.prototype.processMenuClick=function(e,t){this.processClick(e,"MenuButton",t,true)};e.prototype.processOut=function(e,t){var r=this.toolbarElement.querySelector("[id='"+e+"']");if(r){r.style["position"]="";r.style["zIndex"]=""}return true};e.prototype.processDown=function(e,t,r){var n=this;if(i.PLATFORM.global.__px&&i.PLATFORM.global.__px(document).isActiveWC()){i.PLATFORM.global.__px(document).registerWaitTask(this,(function(){n.processClick(e,t,r)}),r)}var o=this.toolbarElement.querySelector("[id='"+e+"']");if(o){o.style["position"]="relative";o.style["zIndex"]="30000"}return true};e.prototype.processClick=function(e,r,n,o){if(o===void 0){o=false}i.PLATFORM.global.__px&&i.PLATFORM.global.__px(document).unregisterWaitTask(this);if(!o){var a=this.toolbarElement.querySelector("[id='"+e+"']");if(a){a.style["position"]="";a.style["zIndex"]=""}}this.highlightedID="";if(r!=="MenuButton"){this.menuOpener.blur();return true}var s=this.config.items[e];if(!t.isEnabled(s===null||s===void 0?void 0:s.config))return true;this.hideMenu();var l={event:n,config:s.config};var d=new CustomEvent("buttonpressed",{bubbles:true,detail:l});this.element.dispatchEvent(d);if(s.config.commandName)this.eventAggregator.publish("execute-command",s.config.commandName);return false};e.prototype.processMouseEnter=function(e,t){this.highlightedID=e;return true};e.prototype.processMouseLeave=function(e,t){if(this.highlightedID===e)this.highlightedID="";return true};e.prototype.getEleWidth=function(e){if(!e)return 0;var t=getComputedStyle(e);var r=e.getBoundingClientRect();return r.width+parseInt(t.marginLeft)+parseInt(t.marginRight)};e.prototype.scrollIntoView=function(){var e,t,r,i;if(this.highlightedRow!=null&&this.highlightedColumn!=null){if("scrollBehavior"in document.documentElement.style){(t=(e=this.menuPane.children[this.highlightedColumn])===null||e===void 0?void 0:e.children[this.highlightedRow])===null||t===void 0?void 0:t.scrollIntoView({block:"nearest"})}else{(i=(r=this.menuPane.children[this.highlightedColumn])===null||r===void 0?void 0:r.children[this.highlightedRow])===null||i===void 0?void 0:i.scrollIntoView(false)}}};e.isEnabled=function(e){if(!e)return false;return!e.disabled};var t;e.defaultConfig={hidden:false,enabled:true};r.__decorate([i.bindable,r.__metadata("design:type",Object)],e.prototype,"config",void 0);r.__decorate([i.bindable,r.__metadata("design:type",Number)],e.prototype,"menuColumnsNbr",void 0);e=t=r.__decorate([i.customElement("qp-tool-bar"),i.autoinject,r.__metadata("design:paramtypes",[Element,i.BindingEngine,n.EventAggregator,i.TaskQueue,l.HttpClient])],e);return e}();t.QpToolBarCustomElement=f;var h=function(){function e(t){this.cssClass="";this.width="";this.disabled=false;this.renderAs=e.RENDER_TEXT;this.visibleOnToolbar=true;this.showIfEnoughRoom=false;this.id=t}Object.defineProperty(e.prototype,"type",{get:function(){return"MenuItem"},enumerable:false,configurable:true});e.prototype.makeVisible=function(e){if(e===void 0){e=true}this.visibleOnToolbar=e};e.prototype.renderIcon=function(){return!!(this.renderAs&e.RENDER_ICON)};e.prototype.renderText=function(){return!!(this.renderAs&e.RENDER_TEXT)};e.RENDER_ICON=1;e.RENDER_TEXT=2;return e}();var g=function(e){r.__extends(t,e);function t(t,r,i){var n=e.call(this,t)||this;n.toolTip="";n.images={};n.favorite=false;n.connotation="";n.commandName=r.commandName;n.text=r.text;n.categoryID=i;n.toolTip=r.toolTip;n.disabled=!f.isEnabled(r);n.cssClass=r.class;n.connotation=r.connotation;n.favorite=!!r.favorite;n.images=r.images||{};if(r.imageUrl)n.images.normal=r.imageUrl;if(r.imageSet&&r.imageKey)n.images.normal=r.imageSet+"@"+r.imageKey;if(n.images.normal)n.renderAs=h.RENDER_ICON;return n}Object.defineProperty(t.prototype,"type",{get:function(){return"MenuButton"},enumerable:false,configurable:true});return t}(h);var m=function(e){r.__extends(t,e);function t(t,r){var i=e.call(this,t,r)||this;i.options=[];return i}Object.defineProperty(t.prototype,"type",{get:function(){return"MenuOptions"},enumerable:false,configurable:true});return t}(g);var b=function(e){r.__extends(t,e);function t(t){return e.call(this,t)||this}Object.defineProperty(t.prototype,"type",{get:function(){return"MenuSeparator"},enumerable:false,configurable:true});return t}(h);var v=function(e){r.__extends(t,e);function t(t,r){var i=e.call(this,t)||this;i.imageURL="";i.text=r;return i}Object.defineProperty(t.prototype,"type",{get:function(){return"MenuLabel"},enumerable:false,configurable:true});return t}(h)}));define("text!controls/global/tool-bar/qp-tool-bar.css",[],(function(){return'.qp-tool-bar-wrapper {\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n\tmin-height: 45px;\r\n}\r\n\r\n.qp-tool-bar-extra {\r\n\tmargin-top: 3px;\r\n}\r\n\r\nqp-tool-bar {\r\n\t-webkit-box-flex: 1;\r\n\t    -ms-flex-positive: 1;\r\n\t        flex-grow: 1;\r\n}\r\n\r\ndiv.qp-tool-bar {\r\n\tdisplay: -webkit-inline-box;\r\n\tdisplay: -ms-inline-flexbox;\r\n\tdisplay: inline-flex;\r\n\theight: 40px;\r\n\twidth: 100%;\r\n\tmargin: 0 0 5px 0;\r\n\tpadding-bottom: 0;\r\n\toverflow: hidden;\r\n\tbackground-color: inherit;\r\n}\r\n\r\n@media screen and (max-width: 500px) {\r\n\tdiv.qp-tool-bar {\r\n\t\twidth: 100% ;\r\n\t}\r\n}\r\n\r\n.qp-tool-bar .qp-tool-bar-item {\r\n\tbackground-color: inherit;\r\n\tmargin: 3px 4px;\r\n\tcolor: #000000;\r\n\tfont-weight: 400;\r\n\twhite-space: nowrap;\r\n\ttext-transform: uppercase;\r\n\tborder: none;\r\n\t-webkit-box-sizing: content-box;\r\n\t        box-sizing: content-box;\r\n\ttext-align: center;\r\n\tcursor: default;\r\n\tmin-width: inherit;\r\n\tfont-size: 14px;\r\n} \r\n\r\n/* .qp-tool-bar .qp-tool-bar-item:hover {\r\n\tcolor: #FFFFFF;\r\n\tfill: #fff;\r\n\tbackground-color: #007ACC;\r\n\tbackground-color: var(--primary-color, #007ACC);\r\n\tcursor: pointer;\r\n} */\r\n\r\n.qp-tool-bar .qp-tool-bar-item .qp-tool-bar-button {\r\n\tpadding: 5px 10px;\r\n\theight: 20px;\r\n\tline-height: 20px;\r\n\tcursor: pointer;\r\n\t-webkit-box-sizing: content-box;\r\n\t        box-sizing: content-box;\r\n\tdisplay: table;\r\n}\r\n\r\n.qp-tool-bar .qp-tool-bar-item .qp-tool-bar-button:hover {\r\n\tbackground-color: rgba(0, 0, 0, 0.1);\r\n}\r\n.qp-tool-bar .qp-tool-bar-item .qp-tool-bar-button.disabled:hover {\r\n\tbackground-color: inherit;\r\n}\r\n\r\n\r\n.qp-tool-bar .qp-tool-bar-item .qp-tool-bar-button > qp-hyper-icon {\r\n\tdisplay: table-cell;\r\n\tvertical-align: middle;\r\n\theight: 20px;\r\n}\r\n\r\n.qp-tool-bar .qp-tool-bar-item .qp-tool-bar-button .qp-hyper-icon > img {\r\n\tmax-height: 20px;\r\n}\r\n\r\n.qp-tool-bar .qp-tool-bar-item .qp-tool-bar-text {\r\n\tdisplay: inline-block;\r\n}\r\n\r\n.qp-tool-bar .checkBox { /* TODO: remove from qp-hyper-icon */\r\n\tpadding-right: 0;\r\n}\r\n\r\n.qp-tool-bar .toolBar button:disabled {\r\n\tbackground-color: inherit;\r\n\tcolor: #000000;\r\n\topacity: 0.26;\r\n\tcursor: default;\r\n}\r\n\r\n.qp-tool-bar .items-list {\r\n\tlist-style: none outside none;\r\n\tmargin: 0px;\r\n\tpadding: 0px;\r\n\tborder-spacing: 0px;\r\n\tborder-collapse: separate;\r\n\tdisplay: inline-block;\r\n}\r\n\r\n.qp-tool-bar .items-list .qp-tool-bar-button.disabled {\r\n\topacity: 0.26;\r\n\tcursor: default;\r\n}\r\n\r\n.qp-tool-bar .items-list li {\r\n\tdisplay: inline-block;\r\n\tvertical-align: bottom;\r\n}\r\n\r\n.qp-tool-bar .qp-tool-bar-opener {\r\n\tdisplay: inline-block;\r\n\t-webkit-box-sizing: border-box;\r\n\t        box-sizing: border-box;\r\n\theight: 30px;\r\n\ttext-align: center;\r\n\tcolor: rgba(0, 0, 0, 0.5);\r\n\tline-height: 20px;\r\n\tfont-size: 29px;\r\n\tmargin: 3px;\r\n\tcursor: pointer;\r\n\t-ms-flex-negative: 0;\r\n\t    flex-shrink: 0;\r\n\tpadding: 5px 10px;\r\n}\r\n.qp-tool-bar .qp-tool-bar-opener.qp-menu-opened,\r\n.qp-tool-bar .qp-tool-bar-opener.qp-menu-opened:hover,\r\n.qp-tool-bar .qp-tool-bar-opener.qp-menu-opened:focus {\r\n\tcolor: #000;\r\n\tfill: #000;\r\n\tbackground-color: #fff;\r\n\tz-index: 6000;\r\n}\r\n\r\n.qp-tool-bar .qp-tool-bar-opener qp-icon svg {\r\n\twidth: 17px;\r\n\theight: 20px;\r\n}\r\n\r\n.qp-tool-bar .qp-tool-bar-opener:hover {\r\n\tbackground-color: #007ACC;\r\n\tbackground-color: var(--primary-color, #007ACC);\r\n\tcolor: #fff;\r\n\tfill: #fff;\r\n}\r\n\r\n.qp-tool-bar .qp-tool-bar-opener:focus {\r\n\tbackground-color: #007ACC;\r\n\tbackground-color: var(--primary-color, #007ACC);\r\n\tcolor: #fff;\r\n\tfill: #fff;\r\n}\r\n\r\n.qp-tool-bar .qp-tool-bar-opener.qp-tool-bar-invisible {\r\n\topacity: 0;\r\n}\r\n\r\n.qp-menu-shadow {\r\n\tposition: fixed;\r\n\twidth: 100vw;\r\n\theight: 100vh;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\tz-index: 5000;\r\n\tbackground-color: rgba(0, 0, 0, .25);\r\n}\r\n\r\n.qp-tool-bar-menu {\r\n\tz-index: 6000;\r\n\tbackground-color: white;\r\n\tmax-height: 80vh;\r\n\toverflow-y: auto; /* for FF */\r\n\toverflow-y: overlay;\r\n\tmin-width: 272px !important;\r\n\t-webkit-box-shadow: 0px 0px 16px rgba(115, 115, 115, 0.7);\r\n\t        box-shadow: 0px 0px 16px rgba(115, 115, 115, 0.7);\r\n\t-webkit-box-sizing: border-box;\r\n\t        box-sizing: border-box;\r\n\tborder-radius: 0px;\r\n\tborder-top: 5px solid #fff;\r\n\tborder-bottom: 5px solid #fff;\r\n\r\n\tscrollbar-width: thin;\r\n  scrollbar-color: rgba(0, 0, 0, 0.15) transparent;\r\n}\r\n\r\n.qp-tool-bar-menu::-webkit-scrollbar {\r\n\twidth: 19px;\r\n}\r\n.qp-tool-bar-menu::-webkit-scrollbar-thumb {\r\n\tbackground: rgba(0, 0, 0, 0.15);\r\n\tborder-radius: 0px;\r\n\twidth: 3px;\r\n\tborder: 5px solid white;\r\n}\r\n\r\n.qp-tool-bar-menu .qp-tool-bar-container {\r\n\tpadding: 0 14px 7px 0;\r\n\tmargin: 0;\r\n\toverflow: hidden;\r\n\tdisplay: -webkit-inline-box;\r\n\tdisplay: -ms-inline-flexbox;\r\n\tdisplay: inline-flex;\r\n\t-webkit-box-orient: horizontal;\r\n\t-webkit-box-direction: normal;\r\n\t    -ms-flex-flow: row nowrap;\r\n\t        flex-flow: row nowrap;\r\n}\r\n\r\n.qp-tool-bar-column {\r\n\twidth: 240px;\r\n\tmargin-right: 20px;\r\n}\r\n\r\n.qp-tool-bar-menu .qp-tool-bar-menu-item {\r\n\tdisplay: block;\r\n\tpadding: 0 0 0 29px;\r\n\tmargin-left: 5px;\r\n\tcursor: pointer;\r\n\theight: 30px;\r\n\tfont-size: 14px;\r\n\tline-height: 30px;\r\n\tcolor: #007ACC;\r\n\tcolor: var(--primary-color, #007ACC);\r\n\twhite-space: nowrap;\r\n\tposition: relative;\r\n}\r\n\r\n.qp-tool-bar-menu .qp-tool-bar-menu-item.qp-menu-empty-label {\r\n\theight: 10px;\r\n}\r\n\r\n.qp-tool-bar-menu .qp-tool-bar-menu-item.qp-menu-label {\r\n\tfont-size: 16px;\r\n\tcolor: #000;\r\n\tcursor: default;\r\n\tpadding: 10px 0 0 29px;\r\n\tmargin-top: 7px;\r\n}\r\n\r\n.qp-tool-bar-menu .qp-menu-text {\r\n\tdisplay: inline-block;\r\n\ttext-overflow: ellipsis;\r\n\toverflow: hidden;\r\n\twidth: 100%;\r\n}\r\n\r\n.qp-tool-bar-menu .qp-tool-bar-menu-item.disabled .qp-menu-text {\r\n\topacity: .3;\r\n}\r\n\r\n.qp-tool-bar-menu .qp-tool-bar-menu-item.qp-menu-item:hover,\r\n.qp-tool-bar-menu .qp-tool-bar-menu-item.qp-menu-item.qp-menu-highlighted {\r\n\tbackground-color: #eee;\r\n}\r\n\r\n.qp-tool-bar-menu .qp-tool-bar-menu-item.disabled {\r\n\tcursor: default;\r\n}\r\n\r\n.qp-tool-bar-menu .qp-tool-bar-menu-item.disabled:hover {\r\n\tbackground-color: inherit;\r\n}\r\n\r\n.qp-tool-bar-menu .qp-menu-fav-placeholder {\r\n\twidth: 30px;\r\n\theight: 30px;\r\n\tposition: absolute;\r\n\tcursor: pointer;\r\n\tfont-family: \'FontAwesome\' !important;\r\n\tleft: 0px;\r\n\tcolor: #000;\r\n}\r\n\r\n.qp-tool-bar-menu .qp-tool-bar-menu-item:hover .qp-menu-fav-placeholder:not(.favorite):before {\r\n\tcontent: "\\e9bb"; /* empty star */\r\n\tmargin-left: 6px;\r\n}\r\n\r\n.qp-tool-bar-menu .qp-tool-bar-menu-item .qp-menu-fav-placeholder:not(.favorite):hover:before {\r\n\tcontent: "\\e9bc"; /* filled star*/\r\n\tmargin-left: 6px;\r\n}\r\n\r\n.qp-tool-bar-menu .qp-menu-fav-placeholder.favorite:before,\r\n.qp-tool-bar-menu-item.extention-cord .qp-menu-fav-placeholder.favorite:before {\r\n\tcontent: "\\e9bc"; /* filled star*/\r\n\tcolor: #f7ba08;\r\n\tmargin-left: 6px;\r\n\tfont-family: \'FontAwesome\' !important;\r\n}\r\n\r\n.qp-tool-bar-menu .qp-menu-color-bead {\r\n\tdisplay: inline-block;\r\n\tborder-radius: 10px;\r\n\twidth: 10px;\r\n\theight: 10px;\r\n\tmargin-left: 3px;\r\n}\r\n\r\n.qp-menu-item.extention-cord {\r\n\tbackground: #eee;\r\n\tline-height: 30px;\r\n\tcolor: #007acc;\r\n\tcolor: var(--primary-color, #007ACC);\r\n\twhite-space: nowrap;\r\n\tfont-size: 14px;\r\n\t-webkit-box-shadow: none;\r\n\t        box-shadow: none;\r\n\tpadding-right: 5px;\r\n}\r\n\r\n.qp-menu-item.extention-cord.disabled:before {\r\n\tbackground: white;\r\n\tcontent: "";\r\n\tposition: absolute;\r\n\tdisplay: block;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\topacity: .7;\r\n}\r\n\r\n.qp-menu-item.extention-cord.disabled {\r\n\tbackground-color: #fff;\r\n}\r\n\r\nbody.designMode .qp-tool-bar .qp-tool-bar-item .qp-tool-bar-button:hover,\r\nbody.designMode .qp-tool-bar .qp-tool-bar-item .qp-menu:hover,\r\nbody.designMode .qp-tool-bar-menu .qp-tool-bar-menu-item .qp-menu-item:hover {\r\n\t-webkit-box-shadow: 0px 0px 3px 2px rgb(81,168,253);\r\n\t        box-shadow: 0px 0px 3px 2px rgb(81,168,253);\r\n\tcursor: help !important;\r\n\topacity: 1;\r\n}\r\n\r\n.qp-tool-bar .qp-tool-bar-item.qp-connotation-default .qp-tool-bar-button.disabled:hover {\r\n\tbackground-color: inherit;\r\n\tfill: inherit;\r\n\tcolor: inherit;\r\n\tcursor: default;\r\n}\r\n.qp-tool-bar .qp-tool-bar-item.qp-connotation-default .qp-tool-bar-button:hover {\r\n\tbackground-color: #007ACC;\r\n\tbackground-color: var(--primary-color, #007ACC);\r\n\tfill: #fff;\r\n\tcolor: #fff;\r\n}\r\n\r\n.qp-menu-color-bead.qp-connotation-Primary, .qp-tool-bar-item.qp-connotation-Primary, .qp-tool-bar-item.qp-connotation-Primary:hover {\r\n\tbackground-color: #007ACC;\r\n\tbackground-color: var(--primary-color, #007ACC);\r\n\tcolor: #fff;\r\n}\r\n.qp-menu-color-bead.qp-connotation-Secondary, .qp-tool-bar-item.qp-connotation-Secondary, .qp-tool-bar-item.qp-connotation-Secondary:hover {\r\n\tbackground-color: #6c757d;\r\n\tcolor: #fff;\r\n}\r\n.qp-menu-color-bead.qp-connotation-Success, .qp-tool-bar-item.qp-connotation-Success, .qp-tool-bar-item.qp-connotation-Success:hover {\r\n\tbackground-color: #28a745;\r\n\tcolor: #fff;\r\n}\r\n.qp-menu-color-bead.qp-connotation-Danger, .qp-tool-bar-item.qp-connotation-Danger, .qp-tool-bar-item.qp-connotation-Danger:hover {\r\n\tbackground-color: #dc3545;\r\n\tcolor: #fff;\r\n}\r\n.qp-menu-color-bead.qp-connotation-Warning, .qp-tool-bar-item.qp-connotation-Warning, .qp-tool-bar-item.qp-connotation-Warning:hover {\r\n\tbackground-color: #ffc107;\r\n\tcolor: #212529;\r\n}\r\n.qp-menu-color-bead.qp-connotation-Info, .qp-tool-bar-item.qp-connotation-Info, .qp-tool-bar-item.qp-connotation-Info:hover {\r\n\tbackground-color: #17a2b8;\r\n\tcolor: #fff;\r\n}\r\n.qp-menu-color-bead.qp-connotation-Light, .qp-tool-bar-item.qp-connotation-Light, .qp-tool-bar-item.qp-connotation-Light:hover {\r\n\tbackground-color: #f8f9fa;\r\n\tcolor: #212529;\r\n}\r\n.qp-menu-color-bead.qp-connotation-Dark, .qp-tool-bar-item.qp-connotation-Dark, .qp-tool-bar-item.qp-connotation-Dark:hover {\r\n\tbackground-color: #343a40;\r\n\tcolor: #fff;\r\n}\r\n'}));define("text!controls/global/tool-bar/qp-tool-bar.html",[],(function(){return'<template css="display: ${config.hidden ? \'none\': \'\'};"><require from="./qp-tool-bar.css"></require><require from="../menu/qp-menu"></require><div id="${config.id}" name="${config.name}" class="qp-tool-bar ${config.class}" ref="toolbarElement"><ul id="${config.id}_full_bar" class="items-list ${config.canOverflow ? \'asTable\' : \'\'}" ref="fullULElement" css="${ (toolBarMode!==\'toolbar only\') ? \'position: absolute; top: -1000px; width: \'+toolbarElement.clientWidth+\'px;\' : \'\'}"><li repeat.for="item of items" css="${\'width: \'+item.width+\'; \'}" class="qp-tool-bar-item ${item.connotation ? \'qp-connotation-\'+item.connotation : \'qp-connotation-default\'}" click.capture="processClick(item.id, item.type, $event)" mousedown.trigger="processDown(item.id, item.type, $event)" mouseout.trigger="processOut(item.id, $event)" data-cmd="${item.commandName}" id="${toolBarMode===\'toolbar only\' ? item.id : undefined}"><div if.bind="item.type===\'MenuButton\'" class="qp-tool-bar-button ${item.disabled ? \'disabled\' : \'\'}"><qp-hyper-icon if.bind="item.renderIcon()" images.bind="item.images"></qp-hyper-icon><div if.bind="item.renderText()" class="qp-tool-bar-text"> ${item.text} </div></div><qp-menu if.bind="item.type===\'MenuOptions\'" config.bind="item" menuselected.delegate="processMenuSelected($event)"></qp-menu><div if.bind="item.type!==\'MenuButton\' && item.type!==\'MenuOptions\'">[${item.id}]</div></li></ul><ul id="${config.id}_bar" show.bind="toolBarMode!==\'toolbar only\'" class="items-list ${config.canOverflow ? \'asTable\' : \'\'}"><li repeat.for="item of items" if.bind="!item.showIfEnoughRoom" ref="itemElements[$index]" css="${\'width: \'+item.width+\'; \'} ${item.visibleOnToolbar ? \'\' : \'position: absolute; top:-1000px;\'}" class="qp-tool-bar-item ${item.connotation ? \'qp-connotation-\'+item.connotation : \'qp-connotation-default\'}" click.capture="processClick(item.id, item.type, $event)" mouseout.trigger="processOut(item.id, $event)" mousedown.trigger="processDown(item.id, item.type, $event)" data-cmd="${item.commandName}" id="${toolBarMode===\'toolbar only\' ? undefined : item.id}"><div if.bind="item.type===\'MenuButton\'" class="qp-tool-bar-button ${item.disabled ? \'disabled\' : \'\'}"><qp-hyper-icon if.bind="item.renderIcon()" images.bind="item.images"></qp-hyper-icon><div if.bind="item.renderText()" class="qp-tool-bar-text"> ${item.text} </div></div><qp-menu if.bind="item.type===\'MenuOptions\'" config.bind="item" menuselected.delegate="processMenuSelected($event)"></qp-menu><div if.bind="item.type!==\'MenuButton\' && item.type!==\'MenuOptions\'">[${item.id}]</div></li></ul><div show.bind="showMenuOpener && toolBarMode!==\'toolbar only\'" class="qp-tool-bar-opener ${menuOpened ? \'qp-menu-opened\': \'\'}" ref="menuOpener" id="${config.id}_MenuOpener" keydown.capture="onKeyDown($event)" mousedown.capture="toggleMenu($event)" tabindex="1"><qp-icon imagesrc="svg:main@ellipsis"></qp-icon></div></div><div if.bind="menuOpened && showMenuOpener" class="qp-menu-shadow"><div glue-to.bind="menuOpener" class="qp-tool-bar-menu" mousedown.trigger="stopPropagation($event)" css="max-height: calc(100vh - ${menuTopPosition}px - 10px)"><div id="${config.id}_popup" ref="menuPane" class="qp-tool-bar-container"><div repeat.for="col of menu" class="qp-tool-bar-column"><div repeat.for="item of col" id="${item.id}_item" data-category-id.bind="item.categoryID ? item.categoryID+\'_item\' : undefined & attr" disabled.bind="item.disabled & attr" class="qp-tool-bar-menu-item ${item.type===\'MenuButton\' ? \'qp-menu-item\' : item.text ? \'qp-menu-label\' : \'qp-menu-empty-label\'} ${item.disabled ? \'disabled\' : \'\'} ${highlightedID === item.id ? \'qp-menu-highlighted\':\'\'}" data-cmd="${item.commandName}" click.delegate="processMenuClick(item.id, $event)" mouseenter.trigger="processMouseEnter(item.id, $event)" mouseleave.trigger="processMouseLeave(item.id, $event)"><div if.bind="item.type===\'MenuButton\'" class="qp-menu-fav-placeholder ${item.favorite===true ? \'favorite\' : \'\'}" click.delegate="toggleFavorites(item.id, $event)"></div><span if.bind="item.type===\'MenuButton\'" extention-cord.bind="highlightedID === item.id & debounce:32" class="qp-menu-item qp-menu-text ${item.disabled ? \'disabled\' : \'\'}"> ${item.text || item.toolTip} <div if.bind="item.connotation" class="qp-menu-color-bead ${\'qp-connotation-\'+item.connotation}" css="background-color: ${item.color};"></div></span><span if.bind="item.type===\'MenuLabel\'" class="qp-menu-label qp-menu-text">${item.text}</span></div></div></div></div></div></template>'}));define("controls/global/tooltip/qp-extention-cord",["require","exports","tslib","aurelia-framework","plugins/hover-activator-service/hover-activator-service"],(function(e,t,r,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpExtentionCordCustomAttribute=void 0;var o=function(){function e(e,t,r){var i=this;this.element=e;this.hoverService=t;this.tq=r;this.hoverSubscriptionOptions={activateAfter:100,onActivate:function(){return i.show()},onDeactivate:function(){return i.hide()}}}e.prototype.attached=function(){this.subscribeTo(this.element)};e.prototype.detached=function(){var e;(e=this.subscription)===null||e===void 0?void 0:e.dispose();this.subscription=undefined;this.hide()};e.prototype.subscribeTo=function(e){var t;(t=this.subscription)===null||t===void 0?void 0:t.dispose();this.subscription=undefined;this.subscription=this.hoverService.subscribeTo(e,this.hoverSubscriptionOptions)};e.prototype.forceShowChanged=function(e,t){var r=this;if(e){this.tq.queueTask((function(){r.hoverService.selfActivate(r.element,r.hoverSubscriptionOptions)}))}else if(t){this.tq.queueTask((function(){r.hoverService.selfHide(r.element,r.hoverSubscriptionOptions)}))}};e.prototype.show=function(){if(this.clone){this.hide()}var e=this.clone=this.element.cloneNode(true);e.classList.add("extention-cord");e.style.position="fixed";var t=this.element.getBoundingClientRect();document.body.appendChild(e);var r=e.getBoundingClientRect().width;if(r<t.width){this.hide()}else{e.style.pointerEvents="none";e.style.top=t.top+"px";e.style.height=t.height+"px";e.style.left=t.left+"px"}};e.prototype.hide=function(){if(this.clone){document.body.removeChild(this.clone)}this.clone=undefined};r.__decorate([i.bindable({primaryProperty:true}),r.__metadata("design:type",Boolean)],e.prototype,"forceShow",void 0);r.__decorate([i.bindable,r.__metadata("design:type",Boolean)],e.prototype,"manualShowOnly",void 0);e=r.__decorate([i.customAttribute("extention-cord"),i.autoinject,r.__metadata("design:paramtypes",[Element,n.HoverActivatorService,i.TaskQueue])],e);return e}();t.QpExtentionCordCustomAttribute=o}));define("controls/global/tooltip/qp-tooltip",["require","exports","tslib","aurelia-framework","aurelia-event-aggregator","plugins/glue/index","plugins/hover-activator-service/hover-activator-service"],(function(e,t,r,i,n,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpTooltipCustomElement=void 0;var s=40;var l=function(){function e(e,t,r,i,n){this.hoverService=e;this.ha=t;this.ea=r;this.tq=i;this.element=n;this.showMe=false;this.shownAbove=false}e.prototype.targetChanged=function(e){this.subscribeTo(e);this.glueTarget=e};e.prototype.ruleChanged=function(){var e=this;var t;if(this.subscription){(t=this.subscription)===null||t===void 0?void 0:t.dispose();this.subscription=undefined;this.subscriptionOptions={activatedElements:[this.element],cssRule:this.rule,onActivate:function(t){return e.show(t)},onDeactivate:function(){return e.hide()}};this.subscription=this.hoverService.subscribeTo(this.target,this.subscriptionOptions)}};e.prototype.attached=function(){var e=this;if(!this.target){this.target=this.element.parentElement}this.glueTarget=this.target;this.subscriptionOptions={activatedElements:[this.element],cssRule:this.rule,onActivate:function(t){return e.show(t)},onDeactivate:function(){return e.hide()}};this.subscribeTo(this.target);this.hoverService.selfHide(this.target,this.subscriptionOptions)};e.prototype.detached=function(){var e;this.hide();(e=this.subscription)===null||e===void 0?void 0:e.dispose();this.subscription=undefined};e.prototype.subscribeTo=function(e){var t;(t=this.subscription)===null||t===void 0?void 0:t.dispose();this.subscription=undefined;this.subscription=this.hoverService.subscribeTo(e,this.subscriptionOptions)};e.prototype.show=function(e){var t=this;if(this.showMe){return}if(this.onShow){this.onShow({opts:e})}if(this.rule){this.glueTarget=e.target}this.showMe=true;this.tq.flushMicroTaskQueue();this.tq.flushTaskQueue();this.ea.publish(o.COORDINATE_SYSTEM_CHANGED_EVENT_NAME);var r=this.contentElement.getBoundingClientRect().width;if(r>s){if(e.targetW<20){this.pointerAdjustX="10px"}else{this.pointerAdjustX=Math.min(Math.max(e.relativeX,20),e.targetW-20,r-20)+"px"}}else{this.pointerAdjustX="unset"}this.tq.queueTask((function(){var r=t.contentElement.getBoundingClientRect().top;t.shownAbove=r<e.targetTop}))};e.prototype.hide=function(){this.showMe=false};e.prototype.stopPropagation=function(e){e.stopImmediatePropagation()};r.__decorate([i.bindable,r.__metadata("design:type",HTMLElement)],e.prototype,"target",void 0);r.__decorate([i.bindable,r.__metadata("design:type",String)],e.prototype,"rule",void 0);r.__decorate([i.bindable,r.__metadata("design:type",Function)],e.prototype,"onShow",void 0);e=r.__decorate([i.customElement("qp-tooltip"),i.autoinject,r.__metadata("design:paramtypes",[a.HoverActivatorService,a.HoverActivatorService,n.EventAggregator,i.TaskQueue,Element])],e);return e}();t.QpTooltipCustomElement=l}));define("text!controls/global/tooltip/qp-tooltip.css",[],(function(){return".qp-tooltip-container:after {\r\n\tdisplay: none;\r\n\tposition: absolute;\r\n\tleft: 50%;\r\n\tleft: var(--pointer-adjust, 50%);\r\n\ttop: -15px;\r\n\tborder: 8px solid transparent;\r\n\tcontent: ' ';\r\n\tborder-bottom-color: #007ACC;\r\n\tborder-bottom-color: var(--primary-color, #007ACC);\r\n\t-webkit-transform: translateX(-8px);\r\n\t        transform: translateX(-8px);\r\n}\r\n.qp-tooltip-container.shown-above:after {\r\n\ttop:unset;\r\n\tbottom: -16px;\r\n}\r\n\r\n.qp-tooltip-container:before {\r\n\tposition: absolute;\r\n\tleft: 50%;\r\n\tleft: var(--pointer-adjust, 50%);\r\n\ttop: -16px;\r\n\tborder: 8px solid transparent;\r\n\tcontent: ' ';\r\n\tborder-bottom-color: #007ACC;\r\n\tborder-bottom-color: var(--primary-color, #007ACC);\r\n\t-webkit-transform: translateX(-8px);\r\n\t        transform: translateX(-8px);\r\n}\r\n.qp-tooltip-container.shown-above:before {\r\n\ttop:unset;\r\n\tbottom: -17px;\r\n}\r\n\r\n.qp-tooltip-container {\r\n\tz-index: 20000;\r\n\r\n\tmin-width: 100%;\r\n\r\n\tbackground-color: #007ACC;\r\n\tbackground-color: var(--primary-color, #007ACC);\r\n\r\n\r\n\t-webkit-box-sizing: border-box;\r\n\r\n\r\n\t        box-sizing: border-box;\r\n\t-webkit-transform: translateY(8px);\r\n\t        transform: translateY(8px);\r\n\r\n\tpointer-events: all;\r\n\r\n\tfont-size: 13px;\r\n\tborder-radius: 5px;\r\n\tbackground-color: #007ACC;\r\n\tbackground-color: var(--primary-color, #007ACC);\r\n\tborder: 1px solid #007ACC;\r\n\tborder: 1px solid var(--primary-color, #007ACC);\r\n\tcolor: RGBA(255, 255, 255, 0.87);\r\n\tfont-weight: 700;\r\n\r\n\tpadding: 5px;\r\n\r\n}\r\n"}));define("text!controls/global/tooltip/qp-tooltip.html",[],(function(){return'<template><require from="./qp-tooltip.css"></require><div show.bind="showMe" ref="contentElement" class="qp-tooltip-container ${shownAbove?\'shown-above\':\'\'}" glue-to="target.bind: glueTarget; options.bind: {doNotSetMinWidthToTarget:true}" css="--pointer-adjust:${pointerAdjustX}; min-width: unset; max-width: 400px"><slot></slot></div></template>'}));define("controls/global/uploader/qp-uploader",["require","exports","tslib","aurelia-fetch-client","aurelia-framework"],(function(e,t,r,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpMultiUploadCustomElement=void 0;var o=function(){function e(e,t){var r=this;this.element=e;this.client=t;this.filesOver=false;this.dragDropHandler=function(e){var t,i,n,o,a;var s=e;s.preventDefault();var l=new FormData;if((t=s.dataTransfer)===null||t===void 0?void 0:t.items){for(var d=0;d<s.dataTransfer.items.length;d++){if(((i=s.dataTransfer)===null||i===void 0?void 0:i.items[d].kind)==="file"){var c=s.dataTransfer.items[d].getAsFile();var p=((n=r.acceptFilter)===null||n===void 0?void 0:n.filter((function(e){return c===null||c===void 0?void 0:c.name.endsWith(e)})))||[];if(p.length>0){l.append("upload",c)}}}}else{var u=function(){var e=(o=s.dataTransfer)===null||o===void 0?void 0:o.files[d];var t=((a=r.acceptFilter)===null||a===void 0?void 0:a.filter((function(t){return e===null||e===void 0?void 0:e.name.endsWith(t)})))||[];if(t.length>0){l.append("upload",e)}};for(var d=0;d<s.dataTransfer.files.length;d++){u()}}if(l.has("upload")){r.postFiles(l)}r.hideReciever()};this.dragOverHandler=function(e){clearTimeout(r.hideTimer);r.hideTimer=undefined;if(!r.filesOver&&e.target){r.showReciever(e.target)}e.preventDefault()};this.dragLeaveHandler=function(){r.hideTimer=setTimeout((function(){r.hideReciever()}),16)};this.ready=new Promise((function(e,t){return r.r=e}))}e.prototype.postFiles=function(e){e.append("graph",this.config.graph);e.append("view",this.config.view);e.append("action",this.config.action);var t=px_cm.findDataSource()||px_cm.dataSource;this.client.fetch("ui/file/upload",{method:"POST",body:e}).then((function(e){return t.executeCommand("RepaintControls")})).catch((function(e){return t.executeCommand("RepaintControls")}))};e.prototype.configChanged=function(){var e=this;var t;this.acceptFilter=(t=this.config.accept)===null||t===void 0?void 0:t.split(",").map((function(e){return e.trim()}));this.ready.then((function(t){e.detachHandlers();e.attachHandlers()}))};e.prototype.detachHandlers=function(){this.element.removeEventListener("drop",this.dragDropHandler);this.element.removeEventListener("dragleave",this.dragLeaveHandler);this.element.removeEventListener("dragover",this.dragOverHandler);if(this.target){this.target.removeEventListener("drop",this.dragDropHandler);this.target.removeEventListener("dragleave",this.dragLeaveHandler);this.target.removeEventListener("dragover",this.dragOverHandler)}};e.prototype.attachHandlers=function(){var e;this.element.addEventListener("drop",this.dragDropHandler);this.element.addEventListener("dragleave",this.dragLeaveHandler);this.element.addEventListener("dragover",this.dragOverHandler);this.target=n.DOM.querySelector((e=this.config)===null||e===void 0?void 0:e.dropTarget);if(this.target){this.target.addEventListener("drop",this.dragDropHandler);this.target.addEventListener("dragleave",this.dragLeaveHandler);this.target.addEventListener("dragover",this.dragOverHandler)}};e.prototype.attached=function(){this.r();this.attachHandlers()};e.prototype.filesFromInput=function(){var e;var t=new FormData;var r=((e=this.fileInput.files)===null||e===void 0?void 0:e.length)||0;for(var i=0;i<r;i++){t.append("upload",this.fileInput.files[i])}if(t.has("upload")){this.postFiles(t)}};e.prototype.hideReciever=function(){if(this.reciever){n.DOM.removeNode(this.reciever);this.reciever=undefined}};e.prototype.showReciever=function(e){var t;if(e.compareDocumentPosition(this.target)&Node.DOCUMENT_POSITION_CONTAINS){t=this.target}else{t=this.element}var r=t.getBoundingClientRect(),i=r.top,o=r.left,a=r.width,s=r.height;if(!this.reciever){this.reciever=n.DOM.createElement("DIV");var l=this.reciever.style;l.position="fixed";l.top=i+"px";l.left=o+"px";l.width=a+"px";l.height=s+"px";l.pointerEvents="none";l.boxSizing="border-box";l.border="5px dashed var(--primary-color, gray)";l.backgroundColor="rgba(255,255,255,.5)";n.DOM.appendNode(this.reciever)}};e.prototype.detached=function(){};r.__decorate([n.bindable,r.__metadata("design:type",Object)],e.prototype,"value",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Object)],e.prototype,"config",void 0);e=r.__decorate([n.customElement("qp-multi-upload"),r.__metadata("design:paramtypes",[Element,i.HttpClient])],e);return e}();t.QpMultiUploadCustomElement=o}));define("text!controls/global/uploader/qp-uploader.css",[],(function(){return".qp-uploader {\r\n    /* width:100%; */\r\n    margin: 10px 0;\r\n    border: 3px dashed lightgray;\r\n    padding: 10px;\r\n    text-align: center;\r\n    position: relative;\r\n}"}));define("text!controls/global/uploader/qp-uploader.html",[],(function(){return'<template><require from="./qp-uploader.css"></require><div class="qp-uploader"><input ref="fileInput" type="file" multiple="multiple" change.trigger="filesFromInput()" style="cursor:pointer;position:absolute;top:0;left:0;width:100%;height:100%;opacity:0" title="" accept="${config.accept}"><div class="qp-tool-bar-button" style="position:relative;cursor:pointer;pointer-events:none"><div class="qp-tool-bar-text"><slot>Upload Files</slot></div></div></div></template>'}));