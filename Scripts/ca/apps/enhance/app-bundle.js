define("apps/db-router/db-router",["require","exports","tslib","aurelia-framework","aurelia-event-aggregator","aurelia-fetch-client"],(function(e,t,i,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DBRouter=void 0;var o=function(){function e(e,t){this.ea=e;this.httpClient=t;this.prevHash="";t.configure((function(e){e.withDefaults({headers:{Accept:"application/json","X-Requested-With":"Fetch"}})}));window.addEventListener("hashchange",this.hashChanged,false)}e.prototype.hashChanged=function(){var e=this;if(window.location.hash!==this.prevHash)setTimeout((function(){var t;e.prevHash=window.location.hash;if(window.location.hash)window.location.href=window.location.href;else{(t=document.getElementById("Definition"))===null||t===void 0?void 0:t.scrollIntoView()}}),0)};e.prototype.configureRouter=function(e,t){this.router=t;e.options.pushState=true;e.map([{route:[""],name:"home",moduleId:"controls/global/dac-browser/qp-dac-browser"},{route:["*link"],name:"dac",moduleId:"controls/global/dac-browser/qp-dac-browser"}]);e.mapUnknownRoutes({route:[""],name:"home",moduleId:"controls/global/dac-browser/qp-dac-browser"})};e=i.__decorate([n.autoinject,i.__metadata("design:paramtypes",[r.EventAggregator,a.HttpClient])],e);return e}();t.DBRouter=o}));define("text!apps/db-router/db-router.html",[],(function(){return"<template><router-view></router-view></template>"}));define("apps/db-router/main",["require","exports","tslib","aurelia-framework","../../environment"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.configure=void 0;r=i.__importDefault(r);function a(e){var t=n.PLATFORM.global.globalControlsModules;e.use.standardConfiguration().feature("plugins/glue").feature("plugins/happeded-on-body").feature("plugins/hover-activator-service").plugin("aurelia-dialog").plugin("aurelia-ui-virtualization");["apps/enhance/controls","controls/global"].forEach((function(t){e.use.feature(t)}));e.use.developmentLogging(r.default.debug?"debug":"warn");if(r.default.testing){e.use.plugin("aurelia-testing")}e.start().then((function(){return e.setRoot("apps/db-router/db-router")}))}t.configure=a}));define("apps/enhance/controls/control-config",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true})}));define("apps/enhance/controls/index",["require","exports","./qp-plugin-service","./qp-tree-node","./qp-tree","./qp-gauge"],(function(e,t,i,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.configure=void 0;function o(e){e.globalResources([i.QpPluginServiceCustomElement,a.QpGaugeCustomElement,n.QpTreeNodeCustomElement,r.QpTreeCustomElement])}t.configure=o}));define("apps/enhance/controls/qp-gauge",["require","exports","tslib","aurelia-pal","aurelia-framework","../services/control-helper"],(function(e,t,i,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpGaugeCustomElement=void 0;var o=function(){function e(e){var t=this;this.element=e;this.everytingReady=new Promise((function(e,i){t.getReady=e}))}t=e;e.prototype.attached=function(){if(this.getReady)this.getReady()};e.prototype.configChanged=function(e,i){var n=this;if(i===undefined){a.applyDefaultValues(e,t.defaultConfig)}this.everytingReady.then((function(){return n.createGauge()}))};e.prototype.valueChanged=function(e,t){var i;if(((i=this.chart)===null||i===void 0?void 0:i.arrows[0].setValue)&&this.config.value!=null){this.chart.arrows[0].setValue(this.config.value);this.chart.axes[0].setBottomText(this.formatDecimal(this.config.value))}};e.prototype.formatDecimal=function(e){var t;return(t=this.config.formattedValues[e])!==null&&t!==void 0?t:e.toString()};e.prototype.formatInverval=function(e,t){return this.formatDecimal(e)+" â€” "+this.formatDecimal(t)};e.prototype.createGauge=function(){var e=Math.max(this.config.end,this.config.value);var t=Math.min(this.config.begin,this.config.value);var i=this;var r=Math.min(t,this.config.normalEdge);var a=Math.max(t,this.config.normalEdge);var o=Math.min(e,this.config.errorEdge);var s=Math.max(e,this.config.errorEdge);var l=Math.min(a,o);var c=Math.max(a,o);var u=.02;var d=65;var p=10;var f=10;var h=-3;var v=s-r;var m=(a-r)/v>u;var g=(c-l)/v>u&&(s-o)/v>u;var b=-120+240/v*(a-r);var y=-120+240/v*(o-r);var x=f,_=f;if(m&&g&&b>=-d&&y<=d&&y-b<p){var w=f/2*((d-Math.abs(b))/d);if(b>h)w=-w;x-=w;_+=w}var S=function(e){return i.formatDecimal(e)};var C={type:"gauge",theme:"light",addClassNames:true,gradientRatio:[0,0,0,0,0,0,0,0,0,0,1,0,0],axes:[{axisThickness:1,axisAlpha:.2,tickAlpha:.2,labelsEnabled:true,labelFunction:S,valueInterval:v,minorTickInterval:v/25,inside:false,bands:[{color:this.config.normalColor,endValue:a,innerRadius:"70%",startValue:r,balloonText:this.formatInverval(r,a)},{color:this.config.warningColor,endValue:c,innerRadius:"70%",startValue:l,balloonText:this.formatInverval(l,c)},{color:this.config.errorColor,endValue:s,innerRadius:"70%",startValue:o,balloonText:this.formatInverval(o,s)}],bottomText:"",bottomTextFontSize:14,bottomTextYOffset:-20,startValue:r,endValue:s}],arrows:[{nailAlpha:0,nailBorderThickness:.5,innerRadius:8,nailRadius:2}],export:{enabled:true}};if(m){C.axes.push({axisThickness:0,tickThickness:0,labelsEnabled:true,valueInterval:a-r,labelFunction:S,inside:false,startAngle:-120,endAngle:b,startValue:r,endValue:a,showFirstLabel:false,showLastLabel:true,labelOffset:x})}if(g){C.axes.push({axisThickness:0,tickThickness:0,labelsEnabled:true,valueInterval:s-o,labelFunction:S,inside:false,startAngle:y,endAngle:120,startValue:o,endValue:s,showFirstLabel:true,showLastLabel:false,labelOffset:_})}this.chart=n.PLATFORM.global.AmCharts.makeChart(this.gaugeElement,C);this.valueChanged(this.config.value,this.config.value)};var t;e.defaultConfig={begin:0,end:100,value:0,normalEdge:70,errorEdge:90,normalColor:"#007C09",warningColor:"#FFC109",errorColor:"#DC3545",formattedValues:{}};i.__decorate([r.bindable,i.__metadata("design:type",Object)],e.prototype,"config",void 0);e=t=i.__decorate([r.autoinject,r.customElement("qp-gauge"),i.__metadata("design:paramtypes",[Element])],e);return e}();t.QpGaugeCustomElement=o}));define("text!apps/enhance/controls/qp-gauge.css",[],(function(){return".qp-gauge {\r\n\twidth: 100%;\r\n\theight: 100%;\r\n}"}));define("text!apps/enhance/controls/qp-gauge.html",[],(function(){return'<template><require from="./qp-gauge.css"></require><div class="qp-gauge" ref="gaugeElement" id="${config.id}"></div></template>'}));define("apps/enhance/controls/qp-plugin-service",["require","exports","tslib","aurelia-framework","aurelia-fetch-client"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpPluginServiceCustomElement=void 0;var a=function(){function t(e,t){this.element=e;this.http=t}t.prototype.configChanged=function(e){this.initPopup(this.config)};t.prototype.initPopup=function(t){var n=this;new Promise((function(i,n){e([t.Path],i,n)})).then(i.__importStar).then((function(){var e=document.createElement(t.TagName);e.setAttribute("options",JSON.stringify(t));e.setAttribute("mobileOptions",n.element.getAttribute("mobileOptions"));document.body.appendChild(e)}))};i.__decorate([n.bindable,i.__metadata("design:type",Object)],t.prototype,"config",void 0);i.__decorate([n.bindable,i.__metadata("design:type",HTMLElement)],t.prototype,"button",void 0);t=i.__decorate([n.customElement("qp-plugin-service"),n.autoinject,i.__metadata("design:paramtypes",[Element,r.HttpClient])],t);return t}();t.QpPluginServiceCustomElement=a}));define("text!apps/enhance/controls/qp-plugin-service.css",[],(function(){return".pluginServiceButton {\r\n    background-color: silver;\r\n    border: 1px black;\r\n    margin: 15px;\r\n    width: 50px;\r\n    height: 30px;\r\n}\r\n.pluginServiceHidden{\r\n    display: none;\r\n}"}));define("text!apps/enhance/controls/qp-plugin-service.html",[],(function(){return'<template id="${config.id}" class="${config.class}"><require from="./qp-plugin-service.css"></require><button class="pluginServiceButton pluginServiceHidden" click.delegate="openPluginForm()">Custom pay</button><div ref="root"></div></template>'}));define("apps/enhance/controls/qp-tree",["require","exports","tslib","aurelia-fetch-client","aurelia-framework","aurelia-dependency-injection","../services/tree-service","aurelia-logging"],(function(e,t,i,n,r,a,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpTreeCustomElement=void 0;var l=s.getLogger("qp-tree");var c=function(){function e(e,t,i){this.container=e;this.http=t;this.element=i;this.nodeid=null;this.value=[];this.container.registerInstance(o.TreeService,new o.TreeService);this.treeService=this.container.get(o.TreeService)}e.prototype.configChanged=function(e){var t=this;this.treeService.treeId=this.config.id;if(e.modifiable==undefined){this.treeService.modifiable=true}else{this.treeService.modifiable=false}if(!e.height){this.treeContainer.style.overflowY="hidden"}var i={graph:e.graph,view:e.datamember};if(e.columns){i.columns=e.columns.split(" ");this.buildTreeFromColumns(i)}else{i.columns=[e.description,e.idparent,e.idname];if(e.iconfield)i.columns.push(e.iconfield);if(e.iconcolorfield)i.columns.push(e.iconcolorfield);if(e.actionfield)i.columns.push(e.actionfield);if(e.extracolumnfield)i.columns.push(e.extracolumnfield);if(i.view=="testtree"){this.buildTestTree(i)}else{this.buildTree(i)}}this.treeService.mode=e.mode;this.treeService.defaultDrag=e.defaultdrag;this.element.addEventListener("valueSelected",(function(e){t.value=e.detail}));this.element.addEventListener("updateTree",(function(e){t.updateTree()}));this.addEventListener(e.onadd,"onAdd");this.addEventListener(e.onchange,"onChange");this.addEventListener(e.ondelete,"onDelete");this.addEventListener(e.onselect,"onSelect");if(e.extracolumns){var n=JSON.parse(e.extracolumns);if(e.width){this.treeService.secondFlexWidth=n.reduce((function(e,t){return e+t.width}),0);this.treeService.secondFlexWidth+=parseInt(getComputedStyle(this.toolbar).width);this.treeService.firstFlexWidth=parseInt(e.width)-this.treeService.secondFlexWidth}this.treeService.extraWidths=n.map((function(e){return e.width}));this.treeService.extraTagnames=n.map((function(e){return e.tagname}));n.forEach((function(e){var i=document.createElement("div");i.style.width=e.width+"px";i.innerHTML=e.title;i.className="optional-item";t.optionalTitles.appendChild(i)}))}else{this.tableTitle.classList.add("hidden")}};e.prototype.addEventListener=function(e,t){var i=this;if(e){this.element.addEventListener(t,(function(t){i.executeCommand(e)}))}};e.prototype.valueChanged=function(e){var t=this,i=t.tree,n=t.config,r=t.value;if(e){i.treeService.resetSelected();if(n.mode==="multi"){e.forEach((function(e){i.treeService.selectMulti(e.id)}))}else{i.treeService.selectSingle(e[0].id)}this.updateTree()}};e.prototype.buildTree=function(e){var t=this;this.sendRequest(e,"GetData").then((function(e){var i=t.config;var n=e.map((function(e){var t=e[i.idparent]!="null"?e[i.idparent]:null;var n={name:e[i.description],icon:e[i.iconfield],parentId:t,id:e[i.idname]};if(e[i.actionfield])n.actions=JSON.parse(e[i.actionfield]);if(e[i.iconfield])n.icon=e[i.iconfield];if(e[i.iconcolorfield])n.iconColor=e[i.iconcolorfield];if(e[i.actionfield])n.extraColumns=JSON.parse(e[i.extracolumnfield]);return n}));t.treeService.itemList=n;t.treeService.createMetaMap(n);if(t.config.openedlayers>0){t.updateOpenedLayers()}t.tree.update()}))};e.prototype.buildTestTree=function(e){var t=this;this.sendRequest(e,"GetTestData").then((function(e){var i=JSON.parse(e);t.treeService.itemList=i;t.treeService.createMetaMap(i);if(t.config.openedlayers>0){t.updateOpenedLayers()}t.tree.update()}))};e.prototype.updateOpenedLayers=function(){this.tree.treeService.traverseAndClose(this.tree.meta,0,this.config.openedlayers+1)};e.prototype.buildTreeFromColumns=function(e){var t=this;this.sendRequest(e,"GetData").then((function(i){var n={name:e.view,icon:"",iconColor:"",children:[]};var r=t.config;var a=[r.iconfield,r.idname,r.iconcolorfield];var o=e.columns.filter((function(e){return!a.includes(e)}));var s=function(e){o.reduce((function(t,i){var n,a;var o=e[i];var s=(n=t.children)===null||n===void 0?void 0:n.find((function(e){return e.name===o}));if(!s){s={name:o,children:[],icon:e[r.iconfield],iconColor:e[r.iconcolorfield]};(a=t.children)===null||a===void 0?void 0:a.push(s)}return s}),n)};for(var l=0,c=i;l<c.length;l++){var u=c[l];s(u)}t.tree.treeService.buildTree(n);t.tree.update()}))};e.prototype.sendRequest=function(e,t){return this.http.fetch("ui/tree/"+t,{method:"Post",body:n.json(e)}).then((function(e){if(e.ok){return e.json()}else{l.error(e.statusText)}}))};e.prototype.onFilter=function(){this.tree.treeService.setFilter(this.filter);this.updateText()};e.prototype.updateText=function(){var e=Array.from(this.element.getElementsByTagName("qp-tree-node"))||[];for(var t=0,i=e;t<i.length;t++){var n=i[t].au.controller.viewModel;n.updateText=!n.updateText}};e.prototype.updateTree=function(){var e=Array.from(this.element.getElementsByTagName("qp-tree-node"))||[];for(var t=0,i=e;t<i.length;t++){var n=i[t].au.controller.viewModel;n.updateTree=!n.updateTree}};e.prototype.onButton=function(){var e=this.treeService.collectInfo();var t=new CustomEvent("valueSelected",{bubbles:true,detail:e});this.element.dispatchEvent(t);this.value=e};e.prototype.executeCommand=function(e){var t=r.PLATFORM.global.px_cm.findDataSource();var i=this.treeService.getRootTree();t.executeCommand(e,JSON.stringify(i))};e.prototype.detached=function(){};i.__decorate([r.bindable,i.__metadata("design:type",Object)],e.prototype,"config",void 0);i.__decorate([r.bindable,i.__metadata("design:type",Array)],e.prototype,"value",void 0);e=i.__decorate([r.customElement("qp-tree"),r.autoinject,i.__metadata("design:paramtypes",[a.Container,n.HttpClient,Element])],e);return e}();t.QpTreeCustomElement=c}));define("apps/enhance/controls/qp-tree-node",["require","exports","tslib","aurelia-framework","../services/control-helper","../services/tree-service","../services/localization","aurelia-logging"],(function(e,t,i,n,r,a,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpTreeNodeCustomElement=void 0;var l=s.getLogger("qp-tree-node");var c=function(){function e(e,t,i){this.element=e;this.treeService=t;this.tq=i;this.updateTree=true;this.updateText=true;this.editmode=false;this.showDragSeparator=false;this.localizedStrings=o.LOCALIZED_STRINGS.tree}Object.defineProperty(e.prototype,"meta",{get:function(){return this.treeService.metaMap[this.nodeid]},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"textParts",{get:function(){var e;var t=this.meta;if(!t)return[];if((t===null||t===void 0?void 0:t.item)&&(t===null||t===void 0?void 0:t.mark)){var i=new r.TextParter(t.mark);return i.getTextParts(t.item.name)}return[{text:(e=t.item)===null||e===void 0?void 0:e.name,selected:false}]},enumerable:false,configurable:true});e.prototype.attached=function(){var e,t;if(((t=(e=this.meta)===null||e===void 0?void 0:e.item)===null||t===void 0?void 0:t.extraColumns)&&this.optional.children.length===0){this.createOptionalControls(this.meta.item.extraColumns)}var i=this.treeService.generateTestId(this.nodeid);if(i){this.meta.item.testId=i}};e.prototype.createOptionalControls=function(e){var t=this;e.forEach((function(e,i){var n=document.createElement("div");var r=document.createElement(t.treeService.extraTagnames[i]);r.setAttribute("value.bind",e);r.setAttribute("config.bind","{enabled: false}");r.style.width=t.treeService.extraWidths[i]+"px";n.appendChild(r);n.style.width=t.treeService.extraWidths[i]+"px";n.className="optional-item";t.optional.appendChild(n)}));if(this.treeService.firstFlexWidth&&this.treeService.secondFlexWidth){var i=this.treeService.firstFlexWidth-this.calcOffset()-8+"px";if(getComputedStyle(this.flexFirst).width>i)this.flexFirst.style.width=i;this.flexSecond.style.width=this.treeService.secondFlexWidth+"px"}};e.prototype.calcOffset=function(){return this.treeService.getParentChain(this.nodeid).length*(parseInt(getComputedStyle(this.treeUl).marginLeft)+parseInt(getComputedStyle(this.treeUl).paddingLeft))+parseInt(getComputedStyle(this.treeNode).marginLeft)+parseInt(getComputedStyle(this.treeNode).paddingLeft)};e.prototype.getTransferData=function(e){if(e.dataTransfer){return JSON.parse(e.dataTransfer.getData("text/plain"))}else{return null}};e.prototype.update=function(){this.dispatchEvent("updateTree")};e.prototype.dispatchEvent=function(e,t){var i=new CustomEvent(e,{bubbles:true,detail:t});this.element.dispatchEvent(i)};e.prototype.onOpen=function(){this.treeService.toggle(this.nodeid);this.update()};e.prototype.onSelectSingle=function(){var e=this.treeService.selectSingle(this.nodeid);this.dispatchEvent("valueSelected",e);this.dispatchEvent("onSelect",e);this.dispatchEvent("onChange");return e};e.prototype.onEdit=function(){var e=this;this.editmode=!this.editmode;this.tq.queueMicroTask((function(){return e.input.select()}));this.hideNodeMenu()};e.prototype.onSelectMulti=function(){this.treeService.selectMulti(this.nodeid);this.update();this.dispatchEvent("onSelect",this.treeService.collectInfo());this.dispatchEvent("onChange")};e.prototype.onDeleteNode=function(){this.treeService.delete(this.nodeid);this.update();this.hideNodeMenu();this.dispatchEvent("onDelete");this.dispatchEvent("onChange")};e.prototype.onAddChildNode=function(){this.treeService.addNewChild(this.nodeid);this.update();this.hideNodeMenu();this.dispatchEvent("onAdd");this.dispatchEvent("onChange")};e.prototype.onAddSiblingNode=function(){this.treeService.addNewSibling(this.nodeid);this.update();this.hideNodeMenu();this.dispatchEvent("onAdd");this.dispatchEvent("onChange")};e.prototype.onInput=function(e){if(e.key==="Enter"){this.editmode=false;e.preventDefault();e.stopPropagation()}else{return true}};e.prototype.hideNodeMenu=function(){if(!this.toolbar.classList.contains("hidden")){this.toolbar.classList.add("hidden")}};e.prototype.onDragStart=function(e){if(e.dataTransfer){e.dataTransfer.setData("text/plain",JSON.stringify({id:this.nodeid,treeid:this.treeService.treeId,item:this.treeService.draggedNodes(this.nodeid)}));e.dataTransfer.setDragImage(this.flexFirst,0,0);e.dataTransfer.effectAllowed="move";this.treeService.hovered.id=this.nodeid;this.treeService.hovered.separator=false}return true};e.prototype.onDrop=function(e){var t=this.getTransferData(e);if(t&&t.id!==this.nodeid){this.treeService.dropAfter(t.id,this.nodeid);this.update()}};e.prototype.onDragOver=function(e){this.treeService.hovered.id=this.nodeid;this.treeService.hovered.separator=false;if(e.dataTransfer)e.dataTransfer.dropEffect="move"};e.prototype.showSeparator=function(){this.treeService.hovered.separator=true};e.prototype.onDragLeave=function(e){this.treeService.resetHover()};e.prototype.dropSibling=function(e){var t=this.getTransferData(e);if(t&&(t.id!==this.nodeid||t.treeid!=this.treeService.treeId)){this.treeService.dropAfter(t.id,this.nodeid,t.treeid);if(this.treeService.defaultDrag=="cut"){this.dispatchEvent("onDelete")}this.update()}this.treeService.resetHover();this.dispatchEvent("onChange")};e.prototype.dropChild=function(e){var t=this.getTransferData(e);if(t&&(t.id!==this.nodeid||t.treeid!=this.treeService.treeId)){this.treeService.dropChild(t.id,this.nodeid,t.treeid);if(this.treeService.defaultDrag=="cut"){this.dispatchEvent("onDelete")}this.update()}this.treeService.resetHover();this.dispatchEvent("onChange")};e.prototype.onMouseOut=function(){this.toolbar.classList.add("hidden")};e.prototype.onToolbarClick=function(e){if(this.treeService.shownToolbar&&this.treeService.shownToolbar!=this.toolbar){this.treeService.shownToolbar.classList.add("hidden")}this.treeService.shownToolbar=this.toolbar;if(this.toolbar.classList.contains("hidden")){this.toolbar.classList.remove("hidden")}else{this.toolbar.classList.add("hidden")}};e.prototype.detached=function(){};i.__decorate([n.bindable,i.__metadata("design:type",String)],e.prototype,"nodeid",void 0);i.__decorate([n.bindable,i.__metadata("design:type",String)],e.prototype,"id",void 0);i.__decorate([n.computedFrom("nodeid","updateTree"),i.__metadata("design:type",Object),i.__metadata("design:paramtypes",[])],e.prototype,"meta",null);i.__decorate([n.computedFrom("updateText"),i.__metadata("design:type",Array),i.__metadata("design:paramtypes",[])],e.prototype,"textParts",null);e=i.__decorate([n.customElement("qp-tree-node"),n.autoinject,i.__metadata("design:paramtypes",[Element,a.TreeService,n.TaskQueue])],e);return e}();t.QpTreeNodeCustomElement=c}));define("text!apps/enhance/controls/qp-tree-node.html",[],(function(){return'<template id="${meta.item.testId}"><ul ref="treeUl" class="${meta.hidden==true && meta.item!=null ? \'tree-node-hidden\' : \'\'}"><div if.bind="nodeid!==null" ref="treeNode" class="tree-node ${meta.children.length === 0 ? \'tree-leaf\' : \'\'} ${treeService.mode==\'single\' && meta.selected ? \'tree-node-selected\' : \'\'} ${treeService.modifiable? \'draggable\': \'\'} ${treeService.hovered.id==nodeid && treeService.hovered.separator==false ? \'tree-node-drag\' : \'\'}" draggable="true" dragend.trigger="treeService.modifiable? onDragEnd($event): null" dragstart.delegate="treeService.modifiable? onDragStart($event): null" drop.trigger="treeService.modifiable? dropChild($event): null" dragover.trigger="treeService.modifiable? onDragOver($event): null"><div ref="flexFirst" class="flex-first"><i if.bind="meta.children.length > 0" class="ac ${(meta.opened)?\'ac-keyboard_arrow_down\':\'ac-keyboard_arrow_right\'} tree-open" click.delegate="onOpen()"></i><div class="tree-checkbox tree-quad" if.bind="treeService.mode==\'multi\'"><input if.bind="!meta.indeterminate" type="checkbox" class="tree-quad" checked.one-way="meta.selected" change.delegate="onSelectMulti()"><div if.bind="meta.indeterminate" class="indeterminate" click.delegate="treeService.mode==\'multi\' ? onSelectMulti() : null"><div class="inside"></div></div></div><qp-icon if.bind="meta.item.icon" class="tree-quad" imagesrc.bind="meta.item.icon" css="color: ${meta.item.iconColor}"></qp-icon><span if.bind="!editmode" extention-cord class="tree-text" click.delegate="treeService.mode==\'multi\' ? onSelectMulti() : null" dblclick.delegate="treeService.mode==\'single\' ? onSelectSingle() : null"><span if.bind="!meta.hidden" repeat.for="part of textParts" class.bind="part.selected ? \'selected\' : \'\'">${part.text}</span></span><input ref="input" value.bind="meta.item.name" keydown.capture="onInput($event)" class="tree-text-input ${editmode?\'\':\'hidden\'}" blur.trigger="editmode=false"></div><div ref="flexSecond" class="flex-second"><div ref="optional" class="tree-optional" if.bind="meta.item.extraColumns"></div><div if.bind="meta.item.actions && treeService.modifiable" class="tree-toolbar tree-quad"><qp-icon class="tree-quad" imagesrc="svg:main@ellipsis" click.delegate="onToolbarClick($event)"></qp-icon><div ref="toolbar" class="tree-toolbar-right hidden"><div if.bind="meta.item.actions.createSibling" id="${meta.item.testId}_addsibling" click.delegate="onAddSiblingNode()"><i class="tree-quad ac ac-add"></i>${localizedStrings.AddSibling} </div><div if.bind="meta.item.actions.createChild" id="${meta.item.testId}_addchild" click.delegate="onAddChildNode()"><i class="tree-quad ac ac-add"></i>${localizedStrings.AddChild} </div><div if.bind="meta.item.actions.rename" id="${meta.item.testId}_rename" click.delegate="onEdit()"><i class="tree-quad ac main-RecordEdit"></i>${localizedStrings.Rename} </div><div if.bind="meta.item.actions.delete" id="${meta.item.testId}_delete" click.delegate="onDeleteNode()"><i class="tree-quad ac ac-delete"></i>${localizedStrings.Delete} </div></div></div></div></div><div class="tree-separator ${treeService.hovered.separator && treeService.hovered.id==nodeid ? \'\': \'hidden\'}" dragover.trigger="treeService.modifiable? showSeparator(): null" drop.trigger="treeService.modifiable? dropSibling($event): null"></div><li if.bind="meta.opened"><qp-tree-node repeat.for="child of meta.children" nodeid.bind="child"></qp-tree-node></li></ul></template>'}));define("text!apps/enhance/controls/qp-tree.css",[],(function(){return'qp-tree {\r\n    display: block;\r\n    overflow: hidden;\r\n}\r\n\r\n.tree-root ul {\r\n    list-style-type: none;\r\n    margin: 0;\r\n    padding-left: 20px;\r\n}\r\n\r\n.tree-container {\r\n    overflow-y: auto;\r\n    overflow-x: hidden;\r\n    height: calc(100% - 60px);\r\n    margin-left: -40px;\r\n}\r\n\r\n.tree-search {\r\n    width: auto;\r\n    height: 24px;\r\n    background-color: white;\r\n    border: solid 1px #E1E1E1;\r\n    border-radius: 5px;\r\n    margin-bottom: 13px;\r\n}\r\n\r\n.tree-search i {\r\n    width: 20px;\r\n    height: 20px;\r\n    font-size: 20px;\r\n    color: rgba(0, 0, 0, 0.4);\r\n    vertical-align: middle;\r\n    float: right;\r\n    margin-right: 3px;\r\n    line-height: 22px;\r\n    margin-top: 1px;\r\n}\r\n\r\n.tree-search input {\r\n    height: 100%;\r\n    background-color: transparent;\r\n    border: 0px;\r\n    margin-left: 3px;\r\n    min-width: 200px;\r\n    padding: 0px 2px;\r\n}\r\n\r\n.tree-search input::-webkit-input-placeholder {\r\n    font-style: normal;\r\n}\r\n\r\n.tree-search input::-moz-placeholder {\r\n    font-style: normal;\r\n}\r\n\r\n.tree-search input:-ms-input-placeholder {\r\n    font-style: normal;\r\n}\r\n\r\n.tree-search input::-ms-input-placeholder {\r\n    font-style: normal;\r\n}\r\n\r\n.tree-search input::placeholder {\r\n    font-style: normal;\r\n}\r\n\r\n.tree-text .selected {\r\n    background-color: orange;\r\n}\r\n\r\n.tree-checkbox {\r\n    margin: 4px 7px;\r\n}\r\n\r\n.tree-checkbox input {\r\n    accent-color: var(--primary-color, #007ACC);\r\n    border: 1px solid rgba(0, 0, 0, 0.19);\r\n    border-radius: 2px;\r\n    margin: 0px;\r\n    padding: 0px;\r\n}\r\n\r\n.tree-checkbox div {\r\n    border-radius: 2px;\r\n}\r\n\r\n.tree-checkbox .indeterminate {\r\n    background-color: white;\r\n    border: 1px solid var(--primary-color, #007ACC);\r\n}\r\n\r\n.tree-checkbox .indeterminate>.inside {\r\n    width: 8px;\r\n    height: 8px;\r\n    background-color: var(--primary-color, #007ACC);\r\n    margin: 3px;\r\n}\r\n\r\n.tree-checkbox input[type="checkbox"]:focus {\r\n    -webkit-box-shadow: 0px 0px 0px rgba(115, 115, 115, 0.5);\r\n            box-shadow: 0px 0px 0px rgba(115, 115, 115, 0.5);\r\n}\r\n\r\n.tree-open {\r\n    cursor: pointer;\r\n    margin: 4px 7px;\r\n}\r\n\r\n.tree-dragged {\r\n    cursor: -webkit-grabbing;\r\n    cursor: grabbing;\r\n}\r\n\r\n.tree-node {\r\n    display: -webkit-box;\r\n    display: -ms-flexbox;\r\n    display: flex;\r\n    -webkit-box-align: center;\r\n        -ms-flex-align: center;\r\n            align-items: center;\r\n    -webkit-box-pack: justify;\r\n        -ms-flex-pack: justify;\r\n            justify-content: space-between;\r\n}\r\n\r\n.tree-node.hidden {\r\n    display: none;\r\n}\r\n\r\n.tree-node-hidden {\r\n    display: none;\r\n}\r\n\r\n.tree-node.draggable {\r\n    cursor: -webkit-grab;\r\n    cursor: grab;\r\n}\r\n\r\n.tree-node:hover {\r\n    background-color: rgba(0, 0, 0, 0.08);\r\n}\r\n\r\n.tree-node:hover .tree-toolbar {\r\n    visibility: visible;\r\n}\r\n\r\n.tree-node {\r\n    padding: 0px 12px 0px 8px;\r\n}\r\n\r\n.tree-node-selected span {\r\n    color: var(--primary-color, #007ACC);\r\n}\r\n\r\n.tree-after-text {\r\n    display: -webkit-box;\r\n    display: -ms-flexbox;\r\n    display: flex;\r\n    -webkit-box-align: baseline;\r\n        -ms-flex-align: baseline;\r\n            align-items: baseline;\r\n}\r\n\r\n.tree-optional {\r\n    display: grid;\r\n    grid-template-columns: 1fr 1fr;\r\n}\r\n\r\n.tree-leaf {\r\n    margin-left: 27px;\r\n}\r\n\r\n.tree-quad qp-icon {\r\n    margin-right: 7px;\r\n}\r\n\r\n.tree-text-input {\r\n    border: 2px solid #027ACC;\r\n    -webkit-box-sizing: border-box;\r\n            box-sizing: border-box;\r\n    border-radius: 6px;\r\n    height: 26px;\r\n    width: 100%;\r\n    margin: -2px;\r\n}\r\n\r\n.tree-text-input.hidden {\r\n    display: none;\r\n}\r\n\r\n.tree-text {\r\n    margin: 3px;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n    -webkit-user-select: none;\r\n       -moz-user-select: none;\r\n        -ms-user-select: none;\r\n            user-select: none;\r\n}\r\n\r\n.tree-text.extention-cord {\r\n    font-size: 13px;\r\n    margin: -4px;\r\n    padding: 4px;\r\n    background-color: #E0E0E0;\r\n    -webkit-box-sizing: content-box;\r\n            box-sizing: content-box;\r\n    -webkit-box-shadow: none;\r\n            box-shadow: none;\r\n    color: inherit;\r\n}\r\n\r\n.tree-edit-buttons {\r\n    display: none;\r\n    background-color: white;\r\n    padding: 6px;\r\n    position: absolute;\r\n    -webkit-box-shadow: 0px 0px 16px rgba(115, 115, 115, 0.5);\r\n            box-shadow: 0px 0px 16px rgba(115, 115, 115, 0.5);\r\n    border-radius: 5px;\r\n    position: fixed;\r\n    z-index: 100;\r\n}\r\n\r\n.tree-edit-buttons>div {\r\n    display: block;\r\n    padding: 6px;\r\n}\r\n\r\n.tree-node-drag {\r\n    background-color: #D7EFFF;\r\n}\r\n\r\n.tree-toolbar {\r\n    display: inline-block;\r\n    -webkit-user-select: none;\r\n       -moz-user-select: none;\r\n        -ms-user-select: none;\r\n            user-select: none;\r\n    text-align: center;\r\n    margin: 3px;\r\n    cursor: pointer;\r\n    overflow: visible;\r\n    position: relative;\r\n}\r\n\r\n.tree-toolbar .tree-optional:not(.hidden) {\r\n    visibility: hidden;\r\n}\r\n\r\n.tree-toolbar svg {\r\n    max-height: 16px;\r\n    max-width: 16px;\r\n}\r\n\r\n.tree-toolbar>div {\r\n    display: -webkit-box;\r\n    display: -ms-flexbox;\r\n    display: flex;\r\n    -webkit-box-align: start;\r\n        -ms-flex-align: start;\r\n            align-items: flex-start;\r\n    -webkit-box-orient: vertical;\r\n    -webkit-box-direction: normal;\r\n        -ms-flex-direction: column;\r\n            flex-direction: column;\r\n    position: absolute;\r\n    padding: 8px 20px;\r\n    background: #FFFFFF;\r\n    -webkit-box-shadow: 0px 0px 16px rgba(115, 115, 115, 0.5);\r\n            box-shadow: 0px 0px 16px rgba(115, 115, 115, 0.5);\r\n    border-radius: 5px;\r\n}\r\n\r\n.tree-toolbar>div>div {\r\n    white-space: nowrap;\r\n    margin: 7px 0px;\r\n}\r\n\r\n.tree-toolbar>div>div>i {\r\n    margin-right: 7px;\r\n}\r\n\r\n.tree-toolbar .hidden {\r\n    display: none;\r\n}\r\n.tree-toolbar-right {\r\n    right: 10px;\r\n    z-index: 5;\r\n}\r\n.tree-toolbar.hidden {\r\n    opacity: 0;\r\n    cursor: default;\r\n}\r\n.tree-separator {\r\n    width: 100%;\r\n    border-top: 1px solid rgba(0, 0, 0, 0.3);\r\n    padding: 1px;\r\n}\r\n\r\n.tree-separator.hidden {\r\n    opacity: 0;\r\n}\r\n\r\n.tree-quad {\r\n    width: 16px;\r\n    height: 16px !important;\r\n}\r\n\r\n.flex-first {\r\n    display: -webkit-box;\r\n    display: -ms-flexbox;\r\n    display: flex;\r\n    -webkit-box-align: center;\r\n        -ms-flex-align: center;\r\n            align-items: center;\r\n    height: 24px;\r\n}\r\n\r\n.flex-second {\r\n    display: -webkit-box;\r\n    display: -ms-flexbox;\r\n    display: flex;\r\n    -webkit-box-align: center;\r\n        -ms-flex-align: center;\r\n            align-items: center;\r\n    -webkit-box-pack: end;\r\n        -ms-flex-pack: end;\r\n            justify-content: flex-end;\r\n}\r\n\r\n.optional-item {\r\n    height: 25px;\r\n    text-align: center;\r\n    overflow: hidden;\r\n    margin-top: 1px;\r\n}'}));define("text!apps/enhance/controls/qp-tree.html",[],(function(){return'<template id="${config.id}"><require from="./qp-tree.css"></require><div class="tree-search"><input id="${config.id}_text" placeholder="Search" value.bind="filter" input.delegate="onFilter() & debounce:500"> <i class="ac ac-search" click.delegate="onFilter()"></i></div><div ref="treeContainer" class="tree-container"><div class="tree-node" ref="tableTitle"><div ref="flexFirst" class="flex-first"></div><div ref="flexSecond" class="flex-second"><div ref="optionalTitles" class="tree-optional"></div><div if.bind="config.modifiable==undefined" ref="toolbar" class="tree-toolbar tree-quad hidden"><qp-icon class="tree-quad" imagesrc="svg:main@ellipsis"></qp-icon></div></div></div><qp-tree-node class="tree-root" id.bind="config.id" view-model.ref="tree" nodeid.bind="nodeid"></qp-tree-node></div><button id="${config.id}_ready" if.bind="config.mode==\'multi\'" click.delegate="onButton()">Ready</button></template>'}));define("apps/enhance/main",["require","exports","tslib","aurelia-bootstrapper","aurelia-framework","environment","compatibility-layer/faux-screen","aurelia-binding","aurelia-fetch-client"],(function(e,t,i,n,r,a,o,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:true});a=i.__importDefault(a);s.disableConnectQueue();var c=function(e){var t=e instanceof Element&&e.getAttribute("id")||undefined;return{element:e,id:t}};var u=c(document.activeElement);if(u.element&&u.element.tagName==="BODY"){document.addEventListener("focus",(function(e){u=c(e.target)}),{capture:true,once:true})}var d=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n,s,c,d,p,f,h,v,m,g;return i.__generator(this,(function(i){switch(i.label){case 0:t=r.PLATFORM.global.globalControlsModules;n=1e4;s=function(e){e.useDefaults();e.settings.showCloseButton=true;e.settings.startingZIndex=n};e.use.basicConfiguration().defaultResources().globalResources([o.FauxScreenCustomAttribute]).plugin("aurelia-animator-css").plugin("aurelia-ui-virtualization").plugin("aurelia-dialog",s).feature("plugins/enhance-n-watch").feature("plugins/glue").feature("plugins/happeded-on-body").feature("plugins/hover-activator-service").feature("apps/enhance/controls");if(Array.isArray(t)){t.forEach((function(t){return e.use.feature(t)}))}e.use.developmentLogging(a.default.debug?"debug":"warn");return[4,e.start()];case 1:i.sent();c=e.container.get(l.HttpClient);d=requirejs.s.contexts._.config.baseUrl.replace("/scripts/ca/","/");c.configure((function(e){e.withBaseUrl(d).withDefaults({headers:{Accept:"application/json","X-Requested-With":"Fetch"},credentials:"same-origin"})}));p={elements:{},values:{}};if(a.default.debug)r.PLATFORM.global.fauxScreen=p;return[4,e.enhanceAndWatch(p)];case 2:i.sent();if(u.id){f=r.DOM.getElementById(u.id);if(f){f.focus()}}else if(u.element instanceof HTMLElement&&u.element.parentNode!=null){if(u.element!==document.activeElement){u.element.focus()}}if(r.PLATFORM.global.px_cm){px_cm.handleLoad();if(px_cm.auEnhanceCompleted)px_cm.auEnhanceCompleted();if(px_cm.requiredReloadPage(false))px_cm.reloadPage(true);px_cm.au_flush=function(){var t=e.container.get(r.TaskQueue);if(!t.flushing){t.flushMicroTaskQueue()}};px_cm.au_enhance=function(t){var i=e.container.get(r.TemplatingEngine);var n=i.enhance({element:t,container:e.container,resources:e.resources,bindingContext:p});px_cm.au_flush();return n};h=px_cm.AureliaEnhanceAwaitQueue;if(h){for(v=0,m=h;v<m.length;v++){g=m[v];g()}h.splice(0,h.length)}}return[2]}}))}))};var p=document.querySelector("body");var f=p===null||p===void 0?void 0:p.hasAttribute("no-enhance");if(!f){n.bootstrap(d)}}));define("apps/enhance/services/api-client",["require","exports","tslib","aurelia-fetch-client","aurelia-framework","whatwg-fetch","abortcontroller-polyfill/dist/abortcontroller-polyfill-only"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ApiClient=void 0;var a=function(){function e(e){this.client=e}e.prototype.getBranchData=function(e,t){return this.client.fetch("ui/BranchSelector/Pass",{method:"POST",body:n.json(e),signal:t}).then((function(e){return e.json()}))};e.prototype.getBranchTree=function(e,t){return this.client.fetch("ui/BranchSelector/Tree",{method:"POST",body:n.json(e),signal:t}).then((function(e){return e.json()}))};e.prototype.getSuggestionData=function(e,t){return this.client.fetch("ui/Selector/GetSuggestions",{method:"POST",body:n.json(e),signal:t}).then((function(e){return e.json()}))};e=i.__decorate([r.autoinject,i.__metadata("design:paramtypes",[n.HttpClient])],e);return e}();t.ApiClient=a}));define("apps/enhance/services/control-helper",["require","exports","tslib","aurelia-pal"],(function(e,t,i,n){"use strict";var r,a;Object.defineProperty(t,"__esModule",{value:true});t.TextParter=t.isScriptLoaded=t.loadScript=t.getInvariantText=t.netTypeConvert=t.scrollToView=t.isInViewport=t.ScrollMode=t.applyDefaultValues=t.isDate=t.isNumeric=t.NetType=t.browser=t.isVisible=t.isLetter=t.getScreenID=t.isDigit=t.formatNumber=t.formatDate=t.dateFormatInfo=t.numberFormatInfo=t.siteRoot=t.topDocument=t.topWindow=t.compareStrings=t.equals=void 0;function o(e,t){if(e==null&&t!=null||t==null&&e!=null){return false}if(e instanceof Date&&t instanceof Date){return e.getTime()===t.getTime()}return e==t}t.equals=o;function s(e,t,i){if(i){if(e)e=e.toLowerCase();if(t)t=t.toLowerCase()}return e==t}t.compareStrings=s;function l(e){var t;var i=document.getElementById(e);if(i){do{if((t=i.au)===null||t===void 0?void 0:t.controller){var n=i.au.controller;if(n.viewModel.currentViewModel)return n.viewModel.currentViewModel;return n.viewModel}i=i.parentNode}while(i);return undefined}}n.PLATFORM.global.getViewModelById=l;var c=n.PLATFORM.global;var u;try{c=c.top;u=c.document}catch(e){c=n.PLATFORM.global}t.topWindow=c;t.topDocument=t.topWindow.document;var d=n.PLATFORM.global.location.pathname;t.siteRoot=d.substring(0,d.toLowerCase().indexOf("scripts/"));t.numberFormatInfo=t.topWindow._numbFormatInfo;t.dateFormatInfo=t.topWindow._dateFormatInfo||{abbrMonthNames:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec,",monthNames:"January,February,March,April,May,June,July,August,September,October,November,December,",dayNames:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday",abbrDayNames:"Sun,Mon,Tue,Wed,Thu,Fri,Sat"};function p(e,t,i){if(t.length===1){switch(t){case"d":t=i.shortDate;break;case"D":t=i.longDate;break;case"t":t=i.shortTime;break;case"T":t=i.longTime;break;case"g":t=i.shortDate+" "+i.shortTime;break;case"G":t=i.shortDate+" "+i.longTime;break;case"f":t=i.longDate+" "+i.shortTime;break;case"F":t=i.longDate+" "+i.longTime;break}}var n="";var r=false;var a=i.monthNames.split(",");var o=i.dayNames.split(",");for(var s=0;s<t.length;s++){if(r){n+=t.substr(s,1);r=false;continue}if(t.charAt(s)==="\\"){r=true;continue}var l=t.substr(s,4);var c="";switch(l){case"MMMM":c=a[e.getMonth()];break;case"dddd":c=a[e.getMonth()];break;case"yyyy":c=e.getFullYear()+"";break}if(c){n+=c;s+=3;continue}l=t.substr(s,3);switch(l){case"MMM":c=a[e.getMonth()].substr(0,3);break;case"ddd":c=o[e.getDay()].substr(0,3);break}if(c){n+=c;s+=2;continue}l=t.substr(s,2);switch(l){case"MM":c=(e.getMonth()+1).toString();if(c.length===1)c="0"+c;break;case"dd":c=e.getDate().toString();if(c.length===1)c="0"+c;break;case"yy":c=(e.getFullYear()%100).toString();if(c.length===1)c="0"+c;break;case"HH":c=e.getHours().toString();if(c.length===1)c="0"+c;break;case"hh":{var u=e.getHours();if(u===0)u=12;else if(u>12)u-=12;c=u.toString();if(c.length===1)c="0"+c;break}case"mm":c=e.getMinutes().toString();if(c.length===1)c="0"+c;break;case"ss":c=e.getSeconds().toString();if(c.length===1)c="0"+c;break;case"tt":{var d=false;if(e.getHours()>=12)d=true;if(d)c=i.pm;else c=i.am;break}}if(c){n+=c;s+=1;continue}l=t.substr(s,1);switch(l){case"M":c=(e.getMonth()+1).toString();break;case"d":c=e.getDate().toString();break;case"y":c=(e.getFullYear()%100).toString();break;case"H":c=e.getHours().toString();break;case"h":{var u=e.getHours();if(u===0)u=12;else if(u>12)u-=12;c=u.toString();break}case"m":c=e.getMinutes().toString();break;case"s":c=e.getSeconds().toString();break}if(c){n+=c;continue}n+=t.substr(s,1)}return n}t.formatDate=p;function f(e,t,i){var n=i.number.decimalSeparator;var r=i.number.groupSeparator;var a=e.toLocaleString("en-US",{minimumFractionDigits:t,useGrouping:t>0});var o=a.split(".");a=o[0].replace(/,/g,r);return o.length>1?a+n+o[1]:a}t.formatNumber=f;function h(e){if(typeof e==="string"){e=e.charCodeAt(0)}var t=47;var i=58;return e>t&&e<i}t.isDigit=h;function v(){var e=window.__screenID;var t=window.location.pathname;if(e)e=e.replace(/\./g,"");else e=t.substr(t.lastIndexOf("/")+1).replace(".aspx","").replace(".html","").toUpperCase();return e}t.getScreenID=v;function m(e){if(typeof e==="number"){e=String.fromCharCode(e)}var t=255;return e.charCodeAt(0)>t||e.toUpperCase()!==e.toLowerCase()}t.isLetter=m;function g(e){try{return e&&e.offsetParent!=null&&e.offsetWidth>0}catch(e){}return false}t.isVisible=g;var b=((a=(r=n.PLATFORM.global)===null||r===void 0?void 0:r.navigator)===null||a===void 0?void 0:a.userAgent.toLowerCase())||"";var y=b.indexOf("msie")>=0;var x=b.indexOf("edge")>=0;var _=b.indexOf("rv:11.0")>0;var w=y||_;var S=b.indexOf("safari")>=0;var C=b.indexOf("firefox");var E=C>=0?parseFloat(b.substr(C+8,3)):0;var M=C>=0;var k=M&&E>=65;t.browser={isIE:y,isEdge:x,isIE11:_,isAnyIE:w,isSafari:S,isFirefox:M,isFirefoxFrom65:k};var O;(function(e){e[e["Empty"]=0]="Empty";e[e["Object"]=1]="Object";e[e["DBNull"]=2]="DBNull";e[e["Boolean"]=3]="Boolean";e[e["Char"]=4]="Char";e[e["SByte"]=5]="SByte";e[e["Byte"]=6]="Byte";e[e["Int16"]=7]="Int16";e[e["UInt16"]=8]="UInt16";e[e["Int32"]=9]="Int32";e[e["UInt32"]=10]="UInt32";e[e["Int64"]=11]="Int64";e[e["UInt64"]=12]="UInt64";e[e["Single"]=13]="Single";e[e["Double"]=14]="Double";e[e["Decimal"]=15]="Decimal";e[e["DateTime"]=16]="DateTime";e[e["String"]=18]="String"})(O=t.NetType||(t.NetType={}));function T(e){return e!=null&&(e>=O.SByte&&e<=O.Decimal)}t.isNumeric=T;function P(e){return e instanceof Date||e&&e.constructor.name==="Date"}t.isDate=P;function F(e,t){var n=i.__assign({},e);if(w)j(n);Object.assign(e,t,n)}t.applyDefaultValues=F;function j(e){for(var t in e)if(e[t]===undefined)delete e[t]}var I;(function(e){e[e["Both"]=0]="Both";e[e["Vertical"]=1]="Vertical";e[e["Horizontal"]=2]="Horizontal"})(I=t.ScrollMode||(t.ScrollMode={}));function D(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}t.isInViewport=D;function A(e,t,i){if(i===void 0){i=I.Both}if(t==null||e.scrollWidth<=e.offsetWidth&&e.scrollHeight<=e.offsetHeight){return}var n=e.offsetParent;var r=n.getBoundingClientRect();var a=e.getBoundingClientRect();var o=t.getBoundingClientRect();var s=o.left-r.left;var l=a.left-r.left;var c=o.top-r.top;var u=a.top-r.top;var d=s+t.offsetWidth;var p=l+e.offsetWidth;var f=c+t.offsetHeight;var h=u+e.offsetHeight;var v=e.offsetWidth-e.clientWidth;var m=e.offsetHeight-e.clientHeight;var g=-1;var b=-1;var y=i===I.Both||i===I.Vertical;var x=i===I.Both||i===I.Horizontal;if(y){if(f>h-m&&c-(f-h)>u){g=e.scrollTop+(f-h)+m}if(c<u)g=e.scrollTop-(u-c)}if(x){if(d>p-v&&s-(d-p)>l){b=e.scrollLeft+(d-p)+v}if(s<l)b=e.scrollLeft-(l-s)}if(y&&g>=0)e.scrollTop=g;if(x&&b>=0)e.scrollLeft=b}t.scrollToView=A;function N(e,t){if(e==null)return null;var i=e;if(t===O.Boolean){if(typeof e!=="boolean"){if(e&&typeof e==="string"){if(e==="0"||e.toLowerCase()==="false")e=false}i=Boolean(e)}}else if(t>=O.SByte&&t<=O.UInt64){if(typeof e!=="number"){i=parseInt(e);if(isNaN(i))i=0}}else if(t>=O.Single&&t<=O.Decimal){if(typeof e!=="number"){i=parseFloat(e);if(isNaN(i))i=0}}else if(t===O.DateTime){if(!(e instanceof Date)){var n=e.toString().split(".");var r=n.length>1?n[1]:null;if(typeof e==="string"&&n[0].startsWith("@"))i=NaN;else i=new Date(Date.parse(n[0]));if(r!=null&&i instanceof Date){r=parseInt(r);if(!isNaN(r))i.setMilliseconds(r)}}}else if(t===O.Char||t===O.String){i=String(e)}return i}t.netTypeConvert=N;function R(e){var t="";if(e==null)return t;if(P(e)){var i=[e.getMonth()+1,e.getDate(),e.getFullYear()];t=i.join("/");var n=[e.getHours(),e.getMinutes(),e.getSeconds()];if(n[0]||n[1]||n[2])t+=" "+n.join(":")}else if(typeof e==="boolean"){t=e?"True":"False"}else t=e.toString();return t}t.getInvariantText=R;function q(e,t){var i;var n=function(){if(t){t()}};if(!L(e)){var r=document.createElement("script");r.type="text/javascript";r.defer=true;r.src=e;r.charset="utf-8";r.addEventListener("load",n);var a=document.getElementsByTagName("script")[0];(i=a===null||a===void 0?void 0:a.parentNode)===null||i===void 0?void 0:i.insertBefore(r,a)}else{n()}}t.loadScript=q;function L(e){return document.querySelector('script[src="'+e+'"]')}t.isScriptLoaded=L;var V=function(){function e(e,t){if(t===void 0){t=true}this.search=e;this.ignoreCase=t}e.prototype.hasMatch=function(e){if(this.ignoreCase)return e.toLowerCase().indexOf(this.search.toLowerCase())!==-1;return e.indexOf(this.search)!==-1};e.prototype.getTextParts=function(e){var t=[];var i=this.ignoreCase?e.toLowerCase():e;var n=this.ignoreCase?this.search.toLowerCase():this.search;var r=i.split(n);var a=0;if(r.length>1){r.forEach((function(i){t.push({text:e.substr(a,i.length),selected:false},{text:e.substr(a+i.length,n.length),selected:true});a+=i.length+n.length}));t.pop();return t}return[{text:e,selected:false}]};return e}();t.TextParter=V}));define("apps/enhance/services/localization",["require","exports","tslib","aurelia-pal","aurelia-framework","aurelia-logging"],(function(e,t,i,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpTranslator=t.localizable=t.Format=t.LOCALIZED_STRINGS=void 0;var o=a.getLogger("localization");n.PLATFORM.global.ClientLocalizedStrings=n.PLATFORM.global.ClientLocalizedStrings||{};t.LOCALIZED_STRINGS=n.PLATFORM.global.ClientLocalizedStrings;t.default=t.LOCALIZED_STRINGS;function s(e,t){var i=t.lastIndexOf("{")+1;var n=t.length-t.indexOf("}");if(i==1&&n==1)return e;else if(i%2==1&&n%2==1){return t.substring(0,i/2)+e+t.substring(t.length-n/2+1)}return t.substring(0,t.length-n/2).substring(i/2)}function l(e,t){var n=[];for(var r=2;r<arguments.length;r++){n[r-2]=arguments[r]}var a=e;if(typeof t==="string"){var o=i.__spreadArray([t],n);var l=function(e){a=a.replace(new RegExp("\\{+"+e+"\\}+","g"),(function(t){return s(o[e],t)}))};for(var c=0;c<o.length;++c){l(c)}}else{var u=function(e){a=a.replace(new RegExp("\\{+"+e+"\\}+","g"),(function(i){return s(t[e],i)}))};for(var d in t){u(d)}}return a}t.Format=l;function c(e){var t=Object.getPrototypeOf(e);if(!(t===null||t===void 0?void 0:t.name))return;c(t);var i=Object.getOwnPropertyNames(t);for(var n=0,r=i;n<r.length;n++){var a=r[n];if(!e.hasOwnProperty(a))e[a]=t[a]}}function u(e,t,i){if(t&&e){d.AddEntry(e,t);return}if(e){e.Format=l;c(e);var n=Object.getOwnPropertyNames(e);for(var r=0,a=n;r<a.length;r++){var o=a[r];switch(o){case"length":case"name":case"prototype":continue}d.AddEntry(e,o)}}}t.localizable=u;var d=function(){function n(){this.lang="";this.SetLang(t.LOCALIZED_STRINGS.currentLocale)}a=n;n.prototype.SetLang=function(e){var t=this;this.loadDictionary(e).then((function(){var i=a.dict[e];var n=a.dict["default"];for(var r in a.data){var o=i&&i[r]||n[r];var s=a.data[r];for(var l=0,c=s;l<c.length;l++){var u=c[l];u[r]=o}}t.lang=e}),(function(e){}))};n.prototype.loadDictionary=function(t){if(a.dict[t])return new Promise((function(e,t){e()}));return new Promise((function(i,n){e(["../../../locales/"+t+"/translation.json"],i,n)})).then(i.__importStar).then((function(e){try{var i=typeof e.default==="string"?JSON.parse(e.default):e.default;a.dict[t]=i}catch(e){alert('"'+t+'" dictionary parsing error: '+e)}}),(function(){o.warn('Cannot load dictionary for "'+t+'"');return new Promise((function(e,t){e()}))}))};n.AddEntry=function(e,t){if(!this.dict["default"])this.dict["default"]={};this.dict["default"][t]=e[t];if(!this.data[t])this.data[t]=[];var i=this.data[t];i.push(e)};n.FillInDefaultDictionary=function(e){this.dict["default"]=i.__assign(i.__assign({},this.dict["default"]),e)};var a;n.data={};n.dict={};n=a=i.__decorate([r.autoinject,i.__metadata("design:paramtypes",[])],n);return n}();t.QpTranslator=d}));define("apps/enhance/services/mark-highlights",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.markHighlights=void 0;function i(e,t){if(!e){return[{highlight:false,text:t}]}var i=e.split(" ").filter((function(e){return e.length>0})).map((function(e){var t=e.toUpperCase();var i=t.length;return{str:t,len:i}}));var n=t.toUpperCase();var r=Array.from({length:n.length});for(var a=0;a<r.length;a++){r[a]=false}var o=[];i.forEach((function(e){var t=0;var i=-1;do{i=n.indexOf(e.str,t);if(i>-1){for(var a=i;a<i+e.len;a++){r[a]=true}t=i+e.len}}while(i>-1)}));var s=false;var l=0;do{var c=l;while(r[l]===s&&l<r.length){l++}if(l>c){o.push({highlight:s,text:t.substring(c,l)})}s=r[l]}while(l<r.length);return o}t.markHighlights=i}));define("apps/enhance/services/mask-helper",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.splitMask=t.maskFilter=t.encodeMask=t.formatByMask=t.MaskParts=t.getMaskParts=void 0;function i(e){var t=a(e);var i=s(t);return new n(t,i[0],i[1],i[2])}t.getMaskParts=i;var n=function(){function e(e,t,i,n){this.maskFull=e;this.mask=t;this.maskExclude=i;this.maskInclude=n}return e}();t.MaskParts=n;function r(e,t,i,n){if(n==null)n=0;if(t==null)t="";var r=s(e);var a="",l,c,u=0;var d=r[0],p=r[1],f=r[2];for(var h=0;h<d.length;h++){if((c=d.charCodeAt(h))<21){l=null;if(u<t.length){l=o(c,t,u,null,p,f);u++}a+=l?l:i}else{a+=d.charAt(h);if(n>0)u++}}return a}t.formatByMask=r;function a(e){var t,i,n=0,r="";var a=s(e);var o=a[0],c=a[1],u=a[2];for(var d=0;d<o.length;d++){i=o.charAt(d);if((t=l(i,n))!==0){if(t<0){n=n===-t?0:-t;continue}r+=String.fromCharCode(t)}else if(i==="\\"&&d+1<o.length){i=o.charAt(d+1);if(l(i,0)!==0){r+=i;d++}}else r+=i}if(c)r+="|"+c;if(u){if(!c)r+="|";r+="|"+u}return r}t.encodeMask=a;function o(e,t,i,n,r,a){if(i>=t.length)return n;var o=t.charCodeAt(i);var s=t.charAt(i);if(o<21||r&&r.indexOf(s)!==-1)return n;if(a&&a.indexOf(s)!==-1)return s;var l=Math.floor((e-1)/6);switch(l){case 0:break;case 1:if(o>47&&o<58)return s;case 2:if(o>255||s.toUpperCase()!==s.toLowerCase())break;return n;case 3:return o>47&&o<58?s:n}if((e=Math.floor((e-1)/2)%3)===0)return s;s=e===2?s.toLowerCase():s.toUpperCase();if(r&&r.indexOf(s)!==-1)return n;return s}t.maskFilter=o;function s(e){if(e==null)e="";var t=e.split("|");if(t.length===1)t[1]="";if(t.length===2)t[2]="";return t}t.splitMask=s;function l(e,t){var i;switch(e){case">":return-1;case"<":return-2;case"&":i=1;break;case"C":i=2;break;case"A":i=7;break;case"a":i=8;break;case"L":i=13;break;case"?":i=14;break;case"#":case"0":return 19;case"9":return 20;default:return 0}return i+t*2}}));define("apps/enhance/services/suggestings-service",["require","exports","tslib","aurelia-framework","./api-client","./mark-highlights"],(function(e,t,i,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SuggestingsServiceFabric=t.SuggestingsService=void 0;var o=2;var s=function(){function e(e,t){this.params=e;this.apiClient=t;this.results=new Map;this.baseQuery={args:e.args,fields:this.params.fields,filter:"",graph:this.params.graph,graphStateId:this.params.graphStateId,inlineArgs:this.params.inlineArgs,skip:0,take:this.params.pageSize,view:this.params.viewName}}e.prototype.abortRequest=function(){if(this.abortController){if(!this.abortController.signal.aborted){this.abortController.abort()}}};e.prototype.getSuggestions=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t;var n=this;return i.__generator(this,(function(r){if(!this.results.has(e)){t=i.__assign(i.__assign(i.__assign({},this.baseQuery),{filter:e}),{take:this.params.pageSize*o});return[2,this.getData(t).then((function(r){if(r.haveMore){r.loadMore=function(){if(r.loading){return}r.loading=true;var e=i.__assign(i.__assign({},t),{skip:r.suggestionItems.length,take:n.params.pageSize});n.getData(e).then((function(e){var t;r.haveMore=e.haveMore;r.totalCount=e.totalCount;(t=r.suggestionItems).push.apply(t,e.suggestionItems);r.loading=false}))}}n.results.set(e,r);return n.results.get(e)}))]}return[2,Promise.resolve(this.results.get(e))]}))}))};e.prototype.getData=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t=this;return i.__generator(this,(function(i){this.abortRequest();this.abortController=new AbortController;return[2,this.apiClient.getSuggestionData(e,this.abortController.signal).then((function(i){if(!i.data||!i.fields){return{haveMore:false,totalCount:0,suggestionItems:[],loading:false}}var n=i.fields.findIndex((function(e){return e.toLowerCase()===t.params.valueField.toLowerCase()}));var r=i.fields.length>1&&t.params.descriptionName!==t.params.valueField?i.fields.findIndex((function(e){return e.toLowerCase()===(""+t.params.descriptionName).toLowerCase()})):-1;var o={haveMore:i.haveMore,loading:false,suggestionItems:i.data.map((function(t){var i=t[n];var o=r===-1?undefined:t[r];var s=a.markHighlights(e.filter,o?i+" - "+o:""+i);return{display:o,segments:s,value:i}})),totalCount:i.totalCount};return o}))]}))}))};return e}();t.SuggestingsService=s;var l=function(){function e(e){this.apiClient=e}e.prototype.getSuggestingService=function(e){return new s(e,this.apiClient)};e=i.__decorate([n.autoinject,i.__metadata("design:paramtypes",[r.ApiClient])],e);return e}();t.SuggestingsServiceFabric=l}));define("apps/enhance/services/tree-service",["require","exports","tslib","../services/control-helper","aurelia-logging"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TreeService=t.getId=void 0;var a=1;var o=r.getLogger("tree-service");var s=function(){return""+a++};t.getId=s;var l=null;var c={item:null,children:[],opened:true,hidden:false,mark:""};function u(e,i,n){var r=t.getId();n.push({name:e.name,id:r,parentId:i,icon:e.icon,iconColor:e.iconColor,actions:e.actions});for(var a=0,o=e.children||[];a<o.length;a++){var s=o[a];u(s,r,n)}}var d=function(){function e(){this.itemList=[];this.metaMap={};this.mode="single";this.filterShowChildren=true;this.filterStart=false;this.filterIgnoreCase=true;this.lastSelectedNodeId="";this.lastId=0;this.treeId="";this.firstFlexWidth=0;this.secondFlexWidth=0;this.extraWidths=[];this.extraTagnames=[];this.defaultDrag="copy";this.modifiable=false;this.hovered={id:"",separator:false}}e.prototype.buildTree=function(e){u(e,l,this.itemList);this.createMetaMap(this.itemList)};e.prototype.createMetaMap=function(e){var t=this;e.forEach((function(e){var n=t.metaMap[e.id]||i.__assign(i.__assign({},c),{item:e,selected:false});t.metaMap[e.id]=n}));e.forEach((function(e){var n=t.metaMap[e.parentId]||i.__assign({},c);t.metaMap[e.parentId]=i.__assign(i.__assign({},n),{children:i.__spreadArray(i.__spreadArray([],n.children),[e.id])})}))};e.prototype.toggle=function(e){var t;var n=this.metaMap[e];this.metaMap=i.__assign(i.__assign({},this.metaMap),(t={},t[e]=i.__assign(i.__assign({},n),{opened:!n.opened}),t))};e.prototype.closeChildren=function(e){var t=this;e.opened=false;e.children.forEach((function(e){if(t.metaMap[e].children.length>0){t.closeChildren(t.metaMap[e])}}))};e.prototype.traverseAndClose=function(e,t,i){var n=this;if(t>=i){this.closeChildren(e)}else{e.children.forEach((function(e){n.traverseAndClose(n.metaMap[e],t+1,i)}))}};e.prototype.getTreeServiceById=function(t){return document.getElementById(t).au.controller.container.get(e)};e.prototype.selectSingle=function(e){var t;if(this.lastSelectedNodeId!==""){this.metaMap[this.lastSelectedNodeId].selected=false}this.lastSelectedNodeId=e;this.metaMap[e].selected=true;return[{id:e,text:(t=this.metaMap[e].item)===null||t===void 0?void 0:t.name}]};e.prototype.selectMulti=function(e){var t;var n;var r=this.metaMap[e];var a=!r.selected;this.metaMap=i.__assign(i.__assign({},this.metaMap),(t={},t[e]=i.__assign(i.__assign({},r),{selected:a,indeterminate:false}),t));var o=this.metaMap[(n=r.item)===null||n===void 0?void 0:n.parentId];while(o.item&&o.item.parentId){if(this.allChildrenSame(o.children,a)){o.selected=a;o.indeterminate=false}else{o.indeterminate=true}o=this.metaMap[o.item.parentId]}this.selectChildren(r.children,!r.selected)};e.prototype.collectInfo=function(){var e,t;var i=[];for(var n in this.metaMap){var r=this.metaMap[n];if(r.children.length===0&&r.selected){i.push({id:(e=r.item)===null||e===void 0?void 0:e.id,text:(t=r.item)===null||t===void 0?void 0:t.name})}}return i};e.prototype.allChildrenSame=function(e,t){var i=this;return e.every((function(e){return i.metaMap[e].selected===t&&!i.metaMap[e].indeterminate}))};e.prototype.setFilter=function(e){var t=this;this.resetFilter();if(e==="")return;var i=new Set;var r=function(e){var n;if(i.has(e))return;i.add(e);if(e===l)return;r((n=t.metaMap[e].item)===null||n===void 0?void 0:n.parentId)};var a=new n.TextParter(e);this.itemList.forEach((function(e){if(a.hasMatch(e.name)){r(e.id);if(t.filterShowChildren)t.markChildren(t.metaMap[e.id].children,i)}}));for(var o in this.metaMap){var s=this.metaMap[o];if(i.has(o)){s.mark=e;s.hidden=false;s.opened=true}else{s.hidden=true}}};e.prototype.markChildren=function(e,t){var i=this;e.forEach((function(e){t.add(e);if(i.metaMap[e].children.length>0)i.markChildren(i.metaMap[e].children,t)}))};e.prototype.selectChildren=function(e,t){var i=this;e.forEach((function(e){i.metaMap[e].selected=t;i.metaMap[e].indeterminate=false;if(i.metaMap[e].children.length>0)i.selectChildren(i.metaMap[e].children,t)}))};e.prototype.recalcChildren=function(e){var t=this;e.forEach((function(e){t.metaMap[e].item.testId=t.generateTestId(e);if(t.metaMap[e].children.length>0)t.recalcChildren(t.metaMap[e].children)}))};e.prototype.resetFilter=function(){for(var e in this.metaMap){this.metaMap[e].mark="";this.metaMap[e].hidden=false}};e.prototype.resetSelected=function(){for(var e in this.metaMap){this.metaMap[e].selected=false;this.metaMap[e].indeterminate=false}};e.prototype.getParentId=function(e){var t=this.metaMap[e];if(e===l){return e}return t.item.parentId};e.prototype.getParentChain=function(e){var t=[];while(e!==l){e=this.getParentId(e);t.push(e)}return t};e.prototype.getTestIdChain=function(e){var t=[];while(e!=l){t.push(this.getTestParentId(e));e=this.getParentId(e)}return t};e.prototype.getTestParentId=function(e){var t=this.metaMap[e];return this.metaMap[t.item.parentId].children.indexOf(e)};e.prototype.generateTestId=function(e){if(!this.treeId)return"";var t=this.getTestIdChain(e).reverse();var i=this.treeId+"_node";t.forEach((function(e){i+="_"+e}));return""+i};e.prototype.recalcTestId=function(e){var t=this.metaMap[this.metaMap[e].item.parentId];var i=t.children.indexOf(e);var n=t.children.slice(i,t.children.length);this.recalcChildren(n)};e.prototype.delete=function(e){var t=this.metaMap[e].item.parentId;var i=this.metaMap[t].children.indexOf(e);if(i!==-1){this.metaMap[t].children.splice(i,1)}this.deleteChildren(e);if(i>=1){this.recalcTestId(this.metaMap[t].children[i-1])}else{this.recalcTestId(this.metaMap[t].children[i])}};e.prototype.deleteChildren=function(e){var t=this;this.metaMap[e].children.forEach((function(e){t.deleteChildren(e);delete t.metaMap[e]}));this.metaMap[e].children=[]};e.prototype.addNewChild=function(e){var t=this.createNewNode(e,e);this.metaMap[e].children=i.__spreadArray(i.__spreadArray([],this.metaMap[e].children.slice()),[t.item.id]);this.recalcTestId(t.item.id)};e.prototype.addNewSibling=function(e){var t=this.getParentId(e);var i=this.createNewNode(t,e);this.insertAfter(e,i);this.recalcTestId(i.item.id)};e.prototype.insertAfter=function(e,t){var n=this.getParentId(e);var r=i.__assign({},this.metaMap[n]);var a=r.children.indexOf(e);if(a<0){o.info("index is not in parent children");return}r.children.splice(a+1,0,t.item.id)};e.prototype.generateNewId=function(){while(this.metaMap[this.lastId]){this.lastId=this.lastId+1}return this.lastId.toString()};e.prototype.lastIdNumber=function(){var e=i.__assign({},this.metaMap);delete e.null;return Math.max.apply(null,Object.keys(e))};e.prototype.createNewNode=function(e,t){var n=this.generateNewId();if(t){var r=i.__assign(i.__assign({},this.metaMap[t].item),{parentId:e,id:n});this.metaMap[n]={children:[],opened:true,hidden:false,mark:"",item:i.__assign({},r)}}else{this.metaMap[n]={children:[],opened:true,hidden:false,mark:"",item:{parentId:e,name:"New",id:n}}}return this.metaMap[n]};e.prototype.draggedNodes=function(e){var t=this.metaMap[e].item;if(!t)throw"error";var n=[i.__assign({},t)];return this.copyChildren(n,e)};e.prototype.getRootTree=function(){return this.copyChildren([],null)};e.prototype.modifyids=function(e,t){e.map((function(e){e.id=(+e.id+t).toString();e.parentId=(+e.parentId+t).toString()}))};e.prototype.copyChildren=function(e,t){var n=this;this.metaMap[t].children.forEach((function(t){var r=n.metaMap[t].item;if(!r)throw"aaa";e.push(i.__assign({},r));return n.copyChildren(e,t)}));return e};e.prototype.dropAfter=function(e,t,n){if(n===void 0){n=this.treeId}if(n!=this.treeId){var r=this.getTreeServiceById(n);var a=r.draggedNodes(e);var o=this.lastIdNumber()+1;r.modifyids(a,o);this.createMetaMap(a);var s=+e+o;this.insertAfter(t,this.metaMap[s]);var l=this.getParentId(t);this.metaMap[s].item.parentId=l;if(this.defaultDrag=="cut"){r.delete(e)}this.recalcTestId(s.toString());r.resetHover()}else{if(this.isDroppable(e,t)){var l=this.getParentId(t);var c=this.getParentId(e);if(l!==c&&e!==c&&t!=l){var u=i.__assign({},this.metaMap[c]);var d=i.__assign({},this.metaMap[l]);u.children=u.children.filter((function(t){return t!==e}));this.insertAfter(t,this.metaMap[e]);var p=i.__spreadArray([],d.children);d.children=p;this.metaMap[e].item.parentId=l;this.metaMap[c]=u;this.metaMap[l]=d}else{var f=i.__assign({},this.metaMap[c]);var h=f.children.indexOf(t);f.children=f.children.filter((function(t){return t!==e}));f.children.splice(h,0,e);this.metaMap[c]=f}this.recalcTestId(e)}}};e.prototype.dropChild=function(e,t,n){if(n!=this.treeId){var r=this.getTreeServiceById(n);var a=r.draggedNodes(e);var o=this.lastIdNumber()+1;r.modifyids(a,o);this.createMetaMap(a);var s=(+e+o).toString();this.metaMap[s].item.parentId=t;this.metaMap[t].children=this.metaMap[t].children.slice();this.metaMap[t].children.push(s);if(this.defaultDrag=="cut")r.delete(e);this.recalcTestId(s);r.resetHover()}else{if(this.isDroppable(e,t)){var l=this.getParentId(t);var c=this.getParentId(e);if(l!==c&&e!==c&&t!=c){var u=i.__assign({},this.metaMap[c]);var d=i.__assign({},this.metaMap[t]);u.children=u.children.filter((function(t){return t!==e}));this.metaMap[e].item.parentId=t;this.metaMap[c]=u;this.metaMap[t]=d;d.children=d.children.slice();d.children.push(e);this.recalcTestId(e)}else{var p=i.__assign({},this.metaMap[c]);p.children=p.children.filter((function(t){return t!==e}));p.children.unshift(e);this.metaMap[c]=p}}}};e.prototype.isDroppable=function(e,t){if(e===t){o.info("These must be different");return false}else{if(e===l||t===l){o.info("Do not use the root node");return false}else{var i=this.getParentChain(t);if(i.includes(e)){o.info("Cannot move unto self");return false}}}return true};e.prototype.resetHover=function(){this.hovered.id="";this.hovered.separator=false};return e}();t.TreeService=d}));define("compatibility-layer/faux-object-factory",["require","exports","./faux-objects/base-editor","aurelia-logging","./faux-objects/text-editor","./faux-objects/faux-object","./faux-objects/calendar","./faux-objects/datetime-edit","./faux-objects/color-picker","./faux-objects/branch-selector","./faux-objects/check-box","./faux-objects/drop-down","./faux-objects/number-editor","./faux-objects/mask-editor","./faux-objects/selector","./faux-objects/button","./faux-objects/plugin-service","./faux-objects/screen-title","./faux-objects/tool-bar","./faux-objects/long-run","./faux-objects/workflow-diagram"],(function(e,t,i,n,r,a,o,s,l,c,u,d,p,f,h,v,m,g,b,y,x){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getFauxObject=t.controlTag2FauxObjectMap=void 0;var _=n.getLogger("object-proxy");t.controlTag2FauxObjectMap={"qp-branch-selector":c.FauxObjectBranchSelector,"qp-color-picker":l.FauxObjectColorPicker,"qp-text-editor":r.FauxObjectTextEditor,"qp-number-editor":p.FauxObjectNumberEditor,"qp-mask-editor":f.FauxObjectMaskEditor,"qp-calendar":o.FauxObjectCalendar,"qp-datetime-edit":s.FauxObjectDatetimeEdit,"qp-check-box":u.FauxObjectCheckBox,"qp-drop-down":d.FauxObjectDropDown,"qp-selector":h.FauxObjectSelector,"qp-workflow-diagram":x.FauxObjectWorkflowDiagram,"qp-manufacturing-diagram":i.FauxObjectBaseEditor,"qp-button":v.FauxObjectButton,"qp-screen-title":g.FauxObjectScreenTitle,"qp-tool-bar":b.FauxObjectToolBar,"qp-long-run":y.FauxObjectLongRun,"qp-plugin-service":m.FauxObjectPluginService};var w={get:function(e,t,i){var n=Reflect.get(e,t,i);_.info("proxy get",t,n);return n},set:function(e,t,i,n){var r=Reflect.set(e,t,i,n);_.info("proxy set",t,i,r);return r}};function S(e,i,n,r){var o=e.tagName.toLowerCase();var s=t.controlTag2FauxObjectMap[o]||a.FauxObjectBase;var l=new s(e,i,n,r);return l}t.getFauxObject=S}));define("compatibility-layer/faux-objects/base-editor",["require","exports","tslib","aurelia-logging","./faux-object","aurelia-framework","aurelia-dependency-injection","apps/enhance/services/control-helper"],(function(e,t,i,n,r,a,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FauxObjectBaseEditor=void 0;var l=n.getLogger("base-editor");var c={dataField:null,enabled:true,readOnly:false,required:false,value:null};var u;(function(e){e["valueChanging"]="valueChanging";e["valueChanged"]="valueChanged"})(u||(u={}));var d=function(e){i.__extends(t,e);function t(t,i,n,a){var o=e.call(this,t,i,n)||this;o.element=t;o.screenValues=n;o.bindingEngine=a;o.enabled=true;o.readOnly=false;o.onValueChange=0;o.autoCallBack=new r.CallbackSettings;o.trackValue=false;o[r.propertySetters].set("readOnly",(function(e){return o.setReadOnly(e)}));o[r.propertySetters].set("enabled",(function(e){return o.setEnabled(e)}));o[r.propertySetters].set("value",(function(e){return o.setValue(e)}));o[r.configSetters].set("readOnly",null);o[r.configSetters].set("enabled",null);o.subscription=o.bindingEngine.propertyObserver(o.screenValues,o.ID).subscribe((function(e,t){if(o.trackValue){o.taskQueue.queueMicroTask((function(){return o.updateValue(e)}))}}));var s=o.getExternalProps();o.events.appendEvents([u.valueChanging,u.valueChanged],s?s.clientEvents:null);return o}t.prototype[r.initializeFauxObject]=function(){var t=this;e.prototype[r.initializeFauxObject].call(this);this.px_cm.setStackElements(this);this.saveTextElementRef();this.domEventsElem=new a.ElementEvents(this.element);this.domEventsElem.subscribe("input",(function(){t.px_cm.notifyOwnerTyping(t)}));this.domEventsElem.subscribe("focus",(function(){t.px_cm.notifyOwnerActivate(t)}))};t.prototype.afterInitialize=function(){var t=this;e.prototype.afterInitialize.call(this);this.taskQueue.queueTask((function(){t.value=t.getValue();t.trackValue=true}))};Object.defineProperty(t.prototype,"taskQueue",{get:function(){return o.Container.instance.get(a.TaskQueue)},enumerable:false,configurable:true});t.prototype[r.disposeFauxObject]=function(){e.prototype[r.disposeFauxObject].call(this);this.domEventsElem.disposeAll();this.subscription.dispose()};t.prototype.saveTextElementRef=function(){this.elemText=this.elemFocus=this.getTextElement();if(this.elemText)this.setObjectRef(this.elemText)};t.prototype.getDefaultCallbackProps=function(){return i.__assign(i.__assign({},e.prototype.getDefaultCallbackProps.call(this)),c)};t.prototype.updateState=function(e){};t.prototype.refreshValue=function(){var e=this.getTextElement();if(e===a.PLATFORM.global.document.activeElement){var t=new CustomEvent("update",{bubbles:true,cancelable:false});e.dispatchEvent(t);this.flushMicroTaskQueue()}return false};t.prototype.updateValue=function(e){if(e===undefined)return this.refreshValue();this.updateState(e);if(!s.equals(e,this.value)){var t={oldValue:this.value,value:e,commandCanceled:false};if(this.fireEvent(u.valueChanging,null,t)){this.setValue(this.value);return false}this.setValue(e);if(e===this.value){if(e!==undefined)this.flushMicroTaskQueue();this.fireEvent(u.valueChanged,null,t);this.px_cm.notifyOwnerChanged(this);this.px_cm.processPostData(this,t);if(t.commandCanceled){this.setValue(t.oldValue);return false}}}return true};t.prototype.focus=function(){var e=this.getTextElement();try{e.focus()}catch(e){}};t.prototype.getTextElement=function(){return this.element.querySelector("input")};t.prototype.setVisible=function(t){e.prototype.setVisible.call(this,t);this.px_cm.setStackElementsVisible(this,t)};t.prototype.getEnabled=function(){return this[r.configRef].enabled};t.prototype.setEnabled=function(e){this.enabled=this[r.configRef].enabled=!!e};t.prototype.getReadOnly=function(){return this[r.configRef].readOnly};t.prototype.setReadOnly=function(e){this.readOnly=this[r.configRef].readOnly=!!e};t.prototype.getValue=function(e){if(e===void 0){e=undefined}if(e)this.refreshValue();return this.screenValues[this[r.configRef].id]};t.prototype.setValue=function(e){var t=this;var i=this.trackValue;this.trackValue=false;this.screenValues[this[r.configRef].id]=e;this.value=e;if(i)setTimeout((function(){return t.trackValue=i}),0)};t.prototype.getLabelText=function(){var e=this;var t;if(e.labelWrapper)t=e.labelWrapper.getElementsByTagName("label")[0];return t?t.textContent:""};t.prototype.initStateBag=function(e){this.stateBag=this.px.topWin().Object.create(this.px.topWin().PXStateBag.prototype);this.stateBag.constructor(this,e?e:"PXText")};t.prototype.flushMicroTaskQueue=function(){var e=o.Container.instance.get(a.TaskQueue);if(e&&!e.flushing)e.flushMicroTaskQueue()};return t}(r.FauxObjectBase);t.FauxObjectBaseEditor=d}));define("compatibility-layer/faux-objects/branch-selector",["require","exports","tslib","./base-editor","./faux-object"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FauxObjectBranchSelector=void 0;var a=function(e){i.__extends(t,e);function t(t,i,n,a){var o=e.call(this,t,i,n,a)||this;o.autoCallBack=new r.CallbackSettings;o[r.propertySetters].set("branchName",(function(e){return false}));o[r.configSetters].set("value",(function(e){return o.setValue(e)}));return o}t.prototype[r.initializeFauxObject]=function(){e.prototype[r.initializeFauxObject].call(this);this.elemWrapper=this.element.querySelector(".editor");this.elemText=this.element.querySelector("input")};t.prototype[r.disposeFauxObject]=function(){e.prototype[r.disposeFauxObject].call(this)};t.prototype.setValue=function(t){if(t instanceof Object){e.prototype.setValue.call(this,t)}else{if(this.screenValues[this[r.configRef].id]instanceof Object&&this.screenValues[this[r.configRef].id].id===t){return}var i={id:t,text:"no branch name"};e.prototype.setValue.call(this,i)}};t.prototype.getValue=function(t){var i;e.prototype.getValue.call(this,t);return(i=this.screenValues[this[r.configRef].id])===null||i===void 0?void 0:i.id};t.prototype.setProperties=function(t){var n=t.branchName,r=t.value,a=i.__rest(t,["branchName","value"]);if(n&&r){a.value={id:r,text:n};e.prototype.setProperties.call(this,a)}else{e.prototype.setProperties.call(this,t)}};t.prototype.copyPropertiesToConfig=function(t){var n=t.branchName,r=t.value,a=i.__rest(t,["branchName","value"]);if(n&&r){a.value={id:r,text:n};e.prototype.copyPropertiesToConfig.call(this,a)}else{e.prototype.copyPropertiesToConfig.call(this,t)}};t.prototype.focus=function(){var e;try{(e=this.elemText)===null||e===void 0?void 0:e.focus()}catch(e){}};return t}(n.FauxObjectBaseEditor);t.FauxObjectBranchSelector=a}));define("compatibility-layer/faux-objects/button",["require","exports","tslib","aurelia-pal","./faux-object","aurelia-framework","aurelia-logging"],(function(e,t,i,n,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FauxObjectMenu=t.FauxObjectButton=void 0;var s=o.getLogger("button__faux-object");var l={hidden:false,enabled:true,queryString:""};var c=function(e){i.__extends(t,e);function t(t,i,n){var a=e.call(this,t,i,n)||this;a.enabled=true;a.readOnly=false;a.commandState=null;a.autoCallBack=new r.CallbackSettings;a.popupCommand=new r.CallbackSettings;a.syncText=true;a.syncVisible=true;a.labelWrapper=undefined;a.hideEnterKey=true;a.collectParams=0;a.openFrameset=false;a.navigateUrl="";a.popupPanel="";a.dependOnGrid=undefined;a.stateColumn=undefined;a.linkedGrid=undefined;a.sourceName=i.name;a[r.propertySetters].set("enabled",(function(e){return a.setEnabled(e)}));var o=a.getExternalProps();a.events.appendEvents(["click","mouseUp","mouseDown"],o?o.clientEvents:null);return a}t.prototype[r.initializeFauxObject]=function(){var t=this;e.prototype[r.initializeFauxObject].call(this);this.px_cm.setStackElements(this);this.px_cm.registerCommandExecutor(this);this.domEvents=new a.ElementEvents(this.element);this.domEvents.subscribe("mouseup",(function(e){if(t.fireEvent("mouseUp",e,{})){t.px.cancelEvent(e);return}}));this.domEvents.subscribe("mousedown",(function(e){if(t.fireEvent("mouseDown",e,{})){t.px.cancelEvent(e);return}}));this.elemButton=this.element.querySelector("button");if(this.elemButton)this.setObjectRef(this.elemButton);if(this.dependOnGrid){var i=this.linkedGrid=this.px_all[this.dependOnGrid];if(i){this.setEnabled(this.getEnabledState(null));var n=function(e,i){if(t.linkedGrid===e)t.setEnabled(t.getEnabledState(null))};i.events.addEventHandler("afterRepaint",n);i.events.addEventHandler("afterRepaintRow",n)}}this.domEvents.subscribe("buttonpressed",(function(e){var i=e.detail.event;if(t[r.configRef].toggleMode){t.setPushed(e.detail.value)}if(t.fireEvent("click",i,{})){t.px.cancelEvent(i);return}if(t.getEnabled()){if(e.detail.isMenuItem){t.execMenu(i,i.detail)}else{t.exec(i,undefined)}}}))};t.prototype[r.disposeFauxObject]=function(){e.prototype[r.disposeFauxObject].call(this)};t.prototype.getDefaultCallbackProps=function(){return l};t.prototype.commandStateCallback=function(e,t){this.setEnabled(this.getEnabledState(e));if(this.syncVisible)this.setVisible(e.getVisible());var i=e.getDisplayName();if(i!=null){var n=i.indexOf("action")===0;if(!n&&this.syncText)this.setText(i)}var r=e.getTooltip();if(r!=null)this.setTooltip(r)};t.prototype.focus=function(){var e;try{(e=this.elemButton)===null||e===void 0?void 0:e.focus()}catch(e){}};t.prototype.getMenu=function(){return this._dropMenu};t.prototype.initMenu=function(e,t,i){this._dropMenu=new u(e,this,t.options,i);this.px_all[e]=this._dropMenu};t.prototype.setText=function(e){this[r.configRef].text=e};t.prototype.getText=function(){return this[r.configRef].text};t.prototype.setTooltip=function(e){this[r.configRef].toolTip=e};Object.defineProperty(t.prototype,"dialogResult",{get:function(){return this[r.configRef].dialogResult},set:function(e){this[r.configRef].dialogResult=e},enumerable:false,configurable:true});t.prototype.setHidden=function(e){this.setVisible(!e)};t.prototype.setVisible=function(t){e.prototype.setVisible.call(this,t);this.px_cm.setStackElementsVisible(this,t)};t.prototype.getVisible=function(){return!this.hidden};t.prototype.getEnabled=function(){return this[r.configRef].enabled};t.prototype.setEnabled=function(e){if(e&&this.commandState){this.enabled=this[r.configRef].enabled=!!this.getEnabledState(null)}else this.enabled=this[r.configRef].enabled=!!e};t.prototype.setPushed=function(e){var t=this[r.configRef];var i=this.screenValues[this[r.configRef].id];if(t.toggleMode&&e!==i){this.screenValues[this[r.configRef].id]=e}};t.prototype.getPushed=function(){return!!this.screenValues[this[r.configRef].id]};t.prototype.execMenu=function(e,t){var i;var r=n.PLATFORM.global["_"+this.ID+"_menu"];if(!r)return;var a=t.value.command;var o;for(var s in r.items){var l=r.items[s];if(((i=l.autoCallBack)===null||i===void 0?void 0:i.command)===a){o=l;break}}if(!o)return;o.autoCallBack.enabled=t.value.enabled;o.isMenuItem=true;o.ID=this.ID;this.exec(e,o)};t.prototype.exec=function(e,t){if(t===void 0){t=undefined}t=t||this;var i=t.autoCallBack;var n=t.isMenuItem?t:this;var r={cancelPostBack:false,eventArgs:null};var a=t.commandSourceID;if(!a&&this.owner)a=this.owner.commandSourceID;if(t.navigateUrl){if(!r.cancelPostBack){var o=t.queryString;var s=o?t.navigateUrl+"?"+o:t.navigateUrl;if(n.popupPanel){var l=n.px_all[n.popupPanel];if(l.getVisible()&&s===l.getPageUrl()){l.hide()}else{l.setPageUrl(s);l.show(n)}}else{var c=e&&(e.shiftKey||e.ctrlKey);this.px.openUrl(s,t.target,c||t.openFrameset)}}}else if(t.autoPostBack){if(!r.cancelPostBack&&e&&e.target){this.px.doPost(e.target.getAttribute("name"),"click")}}else if(i&&i.enabled&&i.command){var u=i.target&&this.px_all[i.target];if(u&&u.__className==="PXBaseDataSource"){u.callbackFromUI=true}if(!r.cancelCallBack)this.px_callback.exec(n,n.autoCallBack,n.popupCommand)}else if(a&&t.commandName){var d=this.px_all[a];if(d&&d.executeCommand){d.sourceEvent=e;if(d.__className==="PXBaseDataSource"){d.callbackFromUI=true}if(t.commandName){d.executeCommand(t.commandName,t.commandArgument,n.popupCommand)}}}if(n.popupPanel&&!t.autoPostBack&&!t.navigateUrl){var l=this.px_all[n.popupPanel];if(l){if(!l.getVisible()){l.closeCallback=n.popupCommand;l.show(n)}else l.hide()}}};t.prototype.getEnabledState=function(e){if(e!=null)this.commandState=e;var t=this.commandState!=null?this.commandState.getEnabled():null;if(this.linkedGrid&&(t==null||t===true)){var i=this.linkedGrid.activeRow;var n=this.linkedGrid.rows.length>0;if(this.stateColumn&&i){var r=i.getCell(this.stateColumn);if(r)n=Boolean(r.getValue())}t=n}return t};return t}(r.FauxObjectBase);t.FauxObjectButton=c;var u=function(){function e(e,t,i,n){this.ID=e;this.owner=t;this[r.configRef]=i;this.readProperties(this,n)}e.prototype.getItems=function(){return this[r.configRef]};e.prototype.setProperties=function(e){return this._readItemsProps(this[r.configRef],e?e.items:null)};e.prototype.readProperties=function(e,t){var i,n;for(var a in t){var o=e[a];var s=t[a];var l=(i={},i[a]=s,i);if(a==="items"){this._readItemsProps(this[r.configRef],s)}else if(o!=null&&typeof o==="object"){if(o instanceof Date){l=(n={},n[a]=new Date(Date.parse(s)),n);Object.assign(e,l)}else if(o instanceof Array){Object.assign(e,l)}else this.readProperties(o,s)}else if(typeof o==="boolean"){e[a]=!!s}else Object.assign(e,l)}};e.prototype._readItemsProps=function(t,n){for(var r=0;r<t.length;r++){var a=t[r];if(a&&a.value){var o=n?n["i"+r]:{};var s=i.__assign(i.__assign({},e.defaultProperties),o);this.readProperties(a.value,s);if(a.value.hasChild)this._readItemsProps(a.value.childItems,n)}}};e.defaultProperties={enabled:true,visible:true};return e}();t.FauxObjectMenu=u}));define("compatibility-layer/faux-objects/calendar",["require","exports","tslib","./faux-object","aurelia-framework"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FauxObjectCalendar=void 0;var a=function(e){i.__extends(t,e);function t(t,i,n){return e.call(this,t,i,n)||this}t.prototype[n.initializeFauxObject]=function(){var t=this;e.prototype[n.initializeFauxObject].call(this);var i=this.element;this.domEvents=new r.ElementEvents(i);this.domEvents.subscribe("valuechanged",(function(){px_cm.notifyOwnerChanged(t);px_cm.processPostData(t)}))};t.prototype[n.disposeFauxObject]=function(){e.prototype[n.disposeFauxObject].call(this);this.domEvents.disposeAll()};return t}(n.FauxObjectBase);t.FauxObjectCalendar=a}));define("compatibility-layer/faux-objects/check-box",["require","exports","tslib","./faux-object","./base-editor","aurelia-framework","aurelia-logging"],(function(e,t,i,n,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FauxObjectCheckBox=void 0;var s=o.getLogger("check-box__faux-object");var l=function(e){i.__extends(t,e);function t(t,i,n,r){var a=e.call(this,t,i,n,r)||this;var o=a.getExternalProps();a.events.appendEvents(["click","mouseUp","mouseDown"],o?o.clientEvents:null);return a}t.prototype[n.initializeFauxObject]=function(){var t=this;e.prototype[n.initializeFauxObject].call(this);this.elemText=this.element.querySelector("input");this.domEvents=new a.ElementEvents(this.element);this.domEvents.subscribe("mouseup",(function(e){if(t.fireEvent("mouseUp",e,{})){t.px.cancelEvent(e);return}}));this.domEvents.subscribe("mousedown",(function(e){if(t.fireEvent("mouseDown",e,{})){t.px.cancelEvent(e);return}}));this.domEvents.subscribe("click",(function(e){if(t.fireEvent("click",e,{})){t.px.cancelEvent(e);return}}))};t.prototype.setValue=function(t){if(typeof t==="string"){if(t.toLowerCase()===this[n.configRef].trueValue.toLowerCase()){return e.prototype.setValue.call(this,true)}else return e.prototype.setValue.call(this,false)}e.prototype.setValue.call(this,t)};t.prototype[n.disposeFauxObject]=function(){e.prototype[n.disposeFauxObject].call(this)};t.prototype.refreshValue=function(){return false};t.prototype.getChecked=function(){return this.getValue()!=0};t.prototype.setChecked=function(e){e?this.setValue(1):this.setValue(0)};return t}(r.FauxObjectBaseEditor);t.FauxObjectCheckBox=l}));define("compatibility-layer/faux-objects/color-picker",["require","exports","tslib","aurelia-framework","./faux-object","./base-editor","aurelia-logging"],(function(e,t,i,n,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FauxObjectColorPicker=void 0;var s=o.getLogger("faux-color-picker");var l=function(e){i.__extends(t,e);function t(t,i,n,r){return e.call(this,t,i,n,r)||this}t.prototype[r.initializeFauxObject]=function(){var t=this;e.prototype[r.initializeFauxObject].call(this);var i=this.element.querySelector("input[type=color]");if(i){this.domEventsColor=new n.ElementEvents(i);this.domEventsColor.subscribe("blur",(function(){t.taskQueue.flushTaskQueue()}))}};t.prototype.getTextElement=function(){return this.element.querySelector("input[type=text]")};t.prototype[r.disposeFauxObject]=function(){e.prototype[r.disposeFauxObject].call(this);if(this.domEventsColor){this.domEventsColor.disposeAll()}};return t}(a.FauxObjectBaseEditor);t.FauxObjectColorPicker=l}));define("compatibility-layer/faux-objects/datetime-edit",["require","exports","tslib","./faux-object","./base-editor","aurelia-framework","apps/enhance/services/control-helper","aurelia-logging"],(function(e,t,i,n,r,a,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FauxObjectDatetimeEdit=t.MAX_DAYS_IN_MONTH=t.MONTHS_IN_YEAR=t.MAX_YEAR=t.MIN_YEAR=void 0;var l=s.getLogger("date-time__faux-object");t.MIN_YEAR=1900;t.MAX_YEAR=9999;t.MONTHS_IN_YEAR=12;t.MAX_DAYS_IN_MONTH=31;var c=function(e){i.__extends(r,e);function r(t,i,r,a){var o=e.call(this,t,i,r,a)||this;o.onValueChange=0;o.allowStrings=false;o.durationMode=false;o.allowCustomItems=false;o[n.configSetters].set("editMask",null);o[n.configSetters].set("displayMask",null);o[n.configSetters].set("nullText",null);o[n.configSetters].set("allowNull",null);o[n.configSetters].set("allowCustomItems",null);o[n.configSetters].set("minValue",(function(e){return o.setMinValue(e)}));o[n.configSetters].set("maxValue",(function(e){return o.setMaxValue(e)}));o[n.configSetters].set("timeMode",null);return o}r.prototype[n.initializeFauxObject]=function(){var t=this;e.prototype[n.initializeFauxObject].call(this);this.elemText=this.element.querySelector("input");this.domEvents=new a.ElementEvents(this.element);this.domEvents.subscribe("paste",(function(){px_cm.notifyOwnerTyping(t)}));this.domEvents.subscribe("usertyping",(function(){px_cm.notifyOwnerTyping(t)}));this.domEvents.subscribe("activated",(function(){px_cm.notifyOwnerActivate(t)}))};r.prototype.setMinValue=function(e){try{this[n.configRef].minValue=new Date(e)}catch(r){var i=this._parseStringValue(e);if(!(i instanceof Date))i=new Date(t.MIN_YEAR,0,1);this[n.configRef].minValue=i}};r.prototype.setMaxValue=function(e){try{this[n.configRef].maxValue=new Date(e)}catch(r){var i=this._parseStringValue(e);if(!(i instanceof Date))i=new Date(t.MAX_YEAR,t.MONTHS_IN_YEAR-1,t.MAX_DAYS_IN_MONTH);this[n.configRef].minValue=i}};r.prototype.setValue=function(t){var i=typeof t==="string"?this._parseStringValue(t):t;var n=i&&i.constructor.name==="Date"?i:null;if(this.allowCustomItems)this.allowStrings=true;if(this.allowCustomItems||t==null||n&&!isNaN(n.getTime())&&o.equals(this._ajustLimits(n),n)){e.prototype.setValue.call(this,i)}};r.prototype.setSize=function(e,t){this[n.configRef].width=e;return};r.prototype[n.disposeFauxObject]=function(){e.prototype[n.disposeFauxObject].call(this);this.domEvents.disposeAll()};r.prototype.setTimeMode=function(e){var t=this[n.configRef];t.timeMode=e};r.prototype.setDateMask=function(e,t){var i=this[n.configRef];i.editMask=e;i.displayMask=t};r.prototype._parseStringValue=function(e){var t=this[n.configRef];var i=null;if(e==null||this.isNullValue(e)){if(t.allowNull)return null;i=new Date}else{if(t.timeMode||e.indexOf(":")>0){var r=Date.parse(e);if(!isNaN(r))i=new Date(r)}else{var a=e.split("/");if(a.length>=3){var o=parseInt(a[2]);var s=parseInt(a[0]);var l=parseInt(a[1]);if(!isNaN(o)&&!isNaN(s)&&!isNaN(l)){i=new Date(o,s-1,l);i.setFullYear(o,s-1,l)}}}}if(t.timeMode&&i instanceof Date&&!isNaN(i.getTime())){i.setFullYear(t.minValue.getFullYear());i.setMonth(0);if(!this.durationMode)i.setDate(1)}if(t.allowCustomItems&&(i==null||isNaN(i.getTime())))return e;return i};r.prototype.isNullValue=function(e){var t=this[n.configRef];var i=String(e);if(e===undefined||i==="")return true;if(t.allowNull&&i===t.nullText)return true;return false};r.prototype._ajustLimits=function(e){var t=this[n.configRef];if(!t.timeMode&&!this.allowCustomItems&&e!=null&&!isNaN(e.getTime())){var i=e.getTime();var r=void 0;var a=void 0;if(t.minValue!=null)r=t.minValue.getTime();if(t.maxValue!=null)a=t.maxValue.getTime();if(r!==undefined&&i<r){e=new Date(r)}if(a!==undefined&&i>a){e=new Date(a)}}return e};return r}(r.FauxObjectBaseEditor);t.FauxObjectDatetimeEdit=c}));define("compatibility-layer/faux-objects/drop-down",["require","exports","tslib","./faux-object","./base-editor","apps/enhance/services/control-helper","aurelia-logging"],(function(e,t,i,n,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FauxObjectDropDown=void 0;var s=o.getLogger("drop-down__faux-object");var l=0;var c=1;var u=2;var d=3;var p=function(e){i.__extends(t,e);function t(t,i,r,a){var o=e.call(this,t,i,r,a)||this;o.compareItems=function(e,t){if(e.value!==t.value)return false;if(e.text!==t.text)return false;if(e.imageURL!==t.imageURL)return false;var i=e.enabled==null?true:e.enabled;var n=t.enabled==null?true:t.enabled;if(Boolean(i)!==Boolean(n))return false;return true};if(!i.options||!i.options.length){i.options=[]}o.__className="PXDropDown";o[n.propertySetters].set("items",(function(e){return o.setItems(e)}));o.initStateBag("PText");t.style.zIndex=null;return o}t.prototype[n.initializeFauxObject]=function(){e.prototype[n.initializeFauxObject].call(this);this.elemText=this.element.querySelector("input");this.updateState(this.getValue())};t.prototype.updateState=function(e){this.stateBag.update("Value",e!=null?e:"")};t.prototype.setValue=function(t){var i=this[n.configRef];if(!i.allowMultiSelect&&!i.allowNull&&!i.allowEdit&&i.options){if(!i.options.find((function(e){return e.value==t})))return}var r=a.netTypeConvert(t,i.valueType);e.prototype.setValue.call(this,r);this.updateState(r)};t.prototype.getValue=function(t){if(t===void 0){t=undefined}var i=e.prototype.getValue.call(this,t);if(i==null){return null}return i};t.prototype[n.disposeFauxObject]=function(){e.prototype[n.disposeFauxObject].call(this)};t.prototype.refreshValue=function(){return false};t.prototype.setAllowNull=function(e){this[n.configRef].allowNull=e};t.prototype.setAllowEdit=function(e){this[n.configRef].allowEdit=e};t.prototype.setAllowMultiSelect=function(e){this[n.configRef].allowMultiSelect=e};t.prototype.initInlineEditor=function(e){var t=this[n.configRef];var i=e[n.configRef];t.allowMultiSelect=i.allowMultiSelect;t.options.splice(0,t.options.length);for(var r=0,a=i.options;r<a.length;r++){var o=a[r];var s=new f;s.value=o.value;s.text=o.text;t.options.push(s)}};t.prototype.getDisplayText=function(e){var t=this[n.configRef];var i;if(typeof e==="string")i=e.split(",");else if(e!=null)i=[e];else i=[];var r="";i.forEach((function(e){var i=t.options.find((function(i,n){if(a.netTypeConvert(i.value,t.valueType)===e){i.selected=true;return true}return false}));if(i){if(r)r+=", ";r+=i.text}}));return r};t.prototype.addItemByValues=function(e,t,i,n){var r=new f;r.value=e;r.text=t;r.enabled=i==null?true:i;r.imageUrl=n==null?"":n;return this.addItem(r)};t.prototype.removeItem=function(e){var t=this[n.configRef].options;var i=this.findItemByValue(e);if(i!=null){var r=t[i].value;t.splice(i,1);if(r===e){if(i>=t.length)i=t.length-1;if(i>=0)r=t[i].value;else r=null;this.updateValue(r)}}};t.prototype.parseItem=function(e,t){var i="|";var n=t.split(i);e.value=n.length>l?n[l]:"";e.text=n.length>c?n[c]:e.value;e.enabled=n.length>u?Boolean(n[u]):true;e.imageUrl=n.length>d?n[d]:""};t.prototype.setProperties=function(t){var n=i.__assign(i.__assign({},this.getDefaultCallbackProps()),t);if(n.hasOwnProperty("items")){this.setItems(n["items"]);delete n["items"]}return e.prototype.setProperties.call(this,n)};t.prototype.setItems=function(e){var t;var r=false;var a=this[n.configRef];var o=undefined;if(typeof e==="string"){var s=e.split(";");o=new Array(s.length);for(var l=0;l<s.length;l++){o[l]=new f;this.parseItem(o[l],s[l])}if(a.options!=null&&a.options.length===o.length){for(var c=0;c<o.length;c++){if(!this.compareItems(a.options[c],o[c])){r=true;break}}}else r=true}else if(e&&e.constructor.name==="Array"){r=true;o=new Array;for(var u=0,d=e;u<d.length;u++){var p=d[u];if(p.value==null)continue;p.value=p.value.toString();o.push(p)}}else if(e==null){r=true;o=new Array}if(r&&o){(t=a.options).splice.apply(t,i.__spreadArray([0,a.options.length],o));this.items=o;var h=this.getValue();if(a.allowEdit||this.findItemByValue(h)!=null)this.setValue(h);else if(a.allowNull)this.setValue(null);else this.setValue(o[0].value)}};t.prototype.findItemByValue=function(e){var t=this[n.configRef].options;if(t!=null){var i=0;for(;i<t.length;i++){var r=t[i];if(r.value==e){break}}if(i<t.length)return i}return null};t.prototype.addItem=function(e){var t=this[n.configRef].options;var i=this.findItemByValue(e.value);var r=true;if(i!=null){r=!this.compareItems(t[i],e);t[i]=e}else{i=t.length;t[i]=e}return i};return t}(r.FauxObjectBaseEditor);t.FauxObjectDropDown=p;var f=function(){function e(){this.selected=false;this.enabled=true}return e}()}));define("compatibility-layer/faux-objects/faux-object",["require","exports","tslib","aurelia-logging","aurelia-pal","apps/enhance/services/control-helper"],(function(require,exports,tslib_1,aurelia_logging_1,aurelia_pal_1,control_helper_1){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CallbackCommand=exports.CallbackSettings=exports.CommandState=exports.FauxObjectEventsList=exports.FauxObjectBase=exports.propertySetters=exports.configSetters=exports.configRef=exports.disposeFauxObject=exports.initializeFauxObject=void 0;var logger=aurelia_logging_1.getLogger("faux-object");exports.initializeFauxObject=Symbol("initializeFauxObject");exports.disposeFauxObject=Symbol("disposeFauxObject");exports.configRef=Symbol("configRef");exports.configSetters=Symbol("configSetters");exports.propertySetters=Symbol("propertySetters");var defaultCallbackProperties={hidden:false};var FauxObjectBase=function(){function e(t,i,n){var r=this;this.element=t;this.screenValues=n;this.hidden=false;if(!i.id){logger.error("config without id");throw"wrong config"}this[exports.configRef]=i;this.ID=i.id;this.name=i.name;this.px_context=px_context;this.tabIndex=this[exports.configRef].tabIndex;var a=2;if(i.propsTemplate)this.__className=i.propsTemplate.substring(a);this.sourceID=t.getAttribute("source-id");this[exports.propertySetters]=new Map([["hidden",function(e){return r.setHidden(e)}]]);this[exports.configSetters]=new Map([["hidden",null]]);var o=this.getExternalProps();this.events=new FauxObjectEventsList(this,[e.initEventName],o?o.clientEvents:null)}Object.defineProperty(e.prototype,"px_cm",{get:function(){return px_cm},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"px",{get:function(){return this.px_context.px},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"px_all",{get:function(){return this.px_context.px_all},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"px_callback",{get:function(){return this.px_context.px_callback},enumerable:false,configurable:true});e.prototype.getTemplateProps=function(){return window[this[exports.configRef].propsTemplate||""]};e.prototype.getExternalProps=function(){var e=this.sourceID?this.sourceID:this.ID;var t=window["_"+e];return t?t:{}};e.prototype.fireEvent=function(e,t,i){if(t===void 0){t=null}if(i===void 0){i=null}return this.events.fireEvent(e,t,i)};e.prototype[exports.initializeFauxObject]=function(){var t=tslib_1.__assign(tslib_1.__assign({},this.getTemplateProps()),this.getExternalProps());this.readProperties(this,t);this.copyPropertiesToConfig(t);this.px_all[this.ID]=this;var i=this.ID.split("_").pop();if(i)px_context.px_alls[i]=this;if(this.bindingContainer)px_cm.notifyOwnerCreated(this);px_cm.tabIndexer=px_cm.tabIndexer||[];if(this.tabIndex&&this.tabIndex>=0)this.px_cm.tabIndexer.push(this);this.fireEvent(e.initEventName);var n=this.element.querySelector("[id]");if(n&&!n.object)this.setObjectRef(n)};e.prototype[exports.disposeFauxObject]=function(){return};e.prototype.destructor=function(){this[exports.disposeFauxObject]()};e.prototype.afterInitialize=function(){return};e.prototype.setObjectRef=function(e){e.object=this};e.prototype.setHidden=function(e){this.setVisible(!e)};e.prototype.setVisible=function(e){this.hidden=this[exports.configRef].hidden=!e};e.prototype.getVisible=function(){return!this.hidden};e.prototype.getDefaultCallbackProps=function(){return defaultCallbackProperties};e.prototype.setProperties=function(e){var t;var i=tslib_1.__assign(tslib_1.__assign({},this.getDefaultCallbackProps()),e);var n=this[exports.propertySetters];var r=this[exports.configRef];for(var a in i){var o=n.get(a);if(o){o(i[a])}else{var s=(t={},t[a]=i[a],t);Object.assign(this,s);if(this[exports.configSetters].has(a)){var l=this[exports.configSetters].get(a);if(l){l(i[a])}else{Object.assign(r,s)}}}}};e.prototype.readProperties=function(e,t){var i,n;for(var r in t){var a=e[r];var o=t[r];var s=(i={},i[r]=o,i);if(a!=null&&typeof a==="object"){if(a instanceof Date){s=(n={},n[r]=new Date(Date.parse(o)),n);Object.assign(e,s)}else if(a instanceof Array){Object.assign(e,s)}else this.readProperties(a,o)}else if(typeof a==="boolean"){e[r]=!!o}else Object.assign(e,s)}};e.prototype.copyPropertiesToConfig=function(e){var t;var i=this[exports.configRef];for(var n in e){if(!this[exports.configSetters].has(n))continue;var r=this[exports.configSetters].get(n);if(r){r(e[n])}else{Object.assign(i,(t={},t[n]=e[n],t))}}};e.initEventName="initialize";return e}();exports.FauxObjectBase=FauxObjectBase;var FauxObjectEventsList=function(){function FauxObjectEventsList(e,t,i){this.owner=e;this.events=new Object;this.handlers=new Object;this.count=0;this.appendEvents(t,i)}FauxObjectEventsList.prototype.dispose=function(){delete this.owner;delete this.handlers;delete this.events};FauxObjectEventsList.prototype.appendEvents=function(events,handlers){if(events==null)return;for(var _i=0,events_1=events;_i<events_1.length;_i++){var name_1=events_1[_i];this.events[name_1]=this.count++}if(handlers==null)return;for(var hn in handlers){if(this.events.hasOwnProperty(hn)){var hlist=handlers[hn].startsWith("(")?[handlers[hn]]:handlers[hn].split(",");for(var _a=0,hlist_1=hlist;_a<hlist_1.length;_a++){var handler=hlist_1[_a];var hf=void 0;var win=aurelia_pal_1.PLATFORM.global;try{hf=win[handler]}catch(e){}try{hf=eval(handler)}catch(e){}if(hf==null)try{hf=control_helper_1.topWindow.eval(handler)}catch(e){}if(hf)this.addEventHandler(hn,hf)}}}};FauxObjectEventsList.prototype.addEventHandler=function(e,t){var i=this.events[e];if(i==null||i<0)return;var n=this.handlers[i];if(n==null)n=this.handlers[i]=[];for(var r=0;r<=n.length;r++){if(n[r]==null){n[r]=new Object;n[r].func=t;break}else if(n[r].func===t)break}};FauxObjectEventsList.prototype.removeEventHandler=function(e,t){var i=this.events[e];if(i==null||i<0||i>=this.count)return;var n=this.handlers[i];if(n==null)return;for(var r in n){if(n[r]!=null&&n[r].func===t){delete n[r];n[r]=null;return}}};FauxObjectEventsList.prototype.fireEvent=function(e,t,i){var n=this.events[e];var r=this.initializeEvent(n,t,i);var a=this.handlers[n];var o=a==null?0:a.length;if(o===0)return false;var s=false;try{while(o-- >0){if(a[o]==null)continue;a[o].func(this.owner,r);if(r.cancel)s=true}}catch(e){}return s};FauxObjectEventsList.prototype.initializeEvent=function(e,t,i){var n;this.eventArgs=new Object;this.eventArgs.event=t;this.eventArgs.id=e;this.eventArgs.srcElement=(n=this.owner)===null||n===void 0?void 0:n.element;this.eventArgs.srcArgs=i;if(i!=null)for(var r in i)this.eventArgs[r]=i[r];return this.eventArgs};return FauxObjectEventsList}();exports.FauxObjectEventsList=FauxObjectEventsList;var CommandState=function(){function e(){this._visible=true;this._enabled=true;this._displayName=null;this._tooltip=null}e.prototype.getEnabled=function(){return this._enabled};e.prototype.setEnabled=function(e){this._enabled=e};e.prototype.getVisible=function(){return this._visible};e.prototype.setVisible=function(e){this._visible=e};e.prototype.getDisplayName=function(){return this._displayName};e.prototype.setDisplayName=function(e){this._displayName=e};e.prototype.getTooltip=function(){return this._tooltip};e.prototype.setTooltip=function(e){this._tooltip=e};return e}();exports.CommandState=CommandState;var CallbackSettings=function(){function e(){this.enabled=true;this.activeBehavior=false;this.suppressOnReload=false;this.fromUIOnly=false;this.behavior=new CallbackCommand}return e}();exports.CallbackSettings=CallbackSettings;var CallbackCommand=function(){function e(){this.blockPage=false;this.repaintControls=0;this.commitChanges=false;this.postData=1;this.postDataControls=true;this.closePopup=false;this.hideText=false;this.optimizePostData=true;this.popupCheckSave=true;this.showProcessInfo=false}return e}();exports.CallbackCommand=CallbackCommand}));define("compatibility-layer/faux-objects/long-run",["require","exports","tslib","./faux-object","aurelia-logging","aurelia-framework"],(function(e,t,i,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FauxObjectLongRun=void 0;var o=r.getLogger("long-run__faux-object");var s=function(e){i.__extends(t,e);function t(t,i,n){var r=e.call(this,t,i,n)||this;r.spin=new c(r);r.time=new u(r);return r}t.prototype[n.initializeFauxObject]=function(){var t=this;e.prototype[n.initializeFauxObject].call(this);this.domEvents=new a.ElementEvents(this.element);this.domEvents.subscribe("cancel-long-run",(function(e){o.debug("cancel-long-run",e.detail);t.cancelLongRun(e.detail.event)}))};t.prototype.cancelLongRun=function(e){var t=this.ID.substr(0,this.ID.length-"_LongRun".length);var i=this.px_all[t];i.sourceEvent=e;i.executeCommand("LongRun")};return t}(n.FauxObjectBase);t.FauxObjectLongRun=s;var l=function(){function e(e){this.parent=e}Object.defineProperty(e.prototype,"element",{get:function(){return this},enumerable:false,configurable:true});e.prototype.setAttribute=function(e,t){switch(e){case"error":this.error=t;break;case"status":switch(t){case"completed":case"aborted":case"inprocess":this.parent[n.configRef].status=t;break;default:o.error("WRONG LongRun status value: ",t)}break;default:o.error("WRONG LongRun attribute assignment: ",e," - ",t)}};e.prototype.removeAttribute=function(e){return this.setAttribute(e)};e.prototype.setVisible=function(e){this.parent[n.configRef].hidden=!e};e.prototype.setText=function(e){this.parent[n.configRef].longRunCompleted=e};e.prototype.setTooltip=function(e){this.parent[n.configRef].longRunMessage=e};e.prototype.setEnabled=function(e){this.parent[n.configRef].enabled=e};return e}();var c=function(e){i.__extends(t,e);function t(t){var i=e.call(this,t)||this;i.parent=t;return i}t.prototype.setVisible=function(e){this.parent[n.configRef].spinHidden=!e};return t}(l);var u=function(e){i.__extends(t,e);function t(t){var i=e.call(this,t)||this;i.parent=t;return i}return t}(l)}));define("compatibility-layer/faux-objects/mask-editor",["require","exports","tslib","./faux-object","./text-editor","apps/enhance/services/mask-helper"],(function(e,t,i,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FauxObjectMaskEditor=void 0;var o={inputMask:""};var s=function(e){i.__extends(t,e);function t(t,i,r,a){var o=e.call(this,t,i,r,a)||this;o[n.configSetters].set("inputMask",(function(e){return o.setInputMask(e)}));o[n.configSetters].set("valueMode",null);o[n.configSetters].set("promptChar",null);o[n.configSetters].set("emptyChar",null);o[n.propertySetters].set("inputMask",(function(e){return o.setInputMask(e)}));o.initStateBag("PXMaskEditor");return o}t.prototype.getDefaultCallbackProps=function(){return i.__assign(i.__assign({},e.prototype.getDefaultCallbackProps.call(this)),o)};t.prototype.initInlineEditor=function(e){this.setInputMask(e.getInputMask())};t.prototype.getInputMask=function(){return this[n.configRef].inputMask};t.prototype.setInputMask=function(e){this[n.configRef].inputMask=e;this.stateBag.update("InputMask",e!=null?e:"")};t.prototype.getDisplayText=function(e){var t=this[n.configRef];if(!this.rawMask||t.inputMask!==this.rawMask){this.maskParts=a.getMaskParts(t.inputMask);this.rawMask=t.inputMask}return a.formatByMask(this.maskParts.maskFull,e,t.emptyChar,t.valueMode)};return t}(r.FauxObjectTextEditor);t.FauxObjectMaskEditor=s}));define("compatibility-layer/faux-objects/number-editor",["require","exports","tslib","./text-editor","./faux-object"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FauxObjectNumberEditor=void 0;var a=function(e){i.__extends(t,e);function t(t,i,n,a){var o=e.call(this,t,i,n,a)||this;o.decimals=0;o[r.configSetters].set("decimals",null);o[r.configSetters].set("minValue",null);o[r.configSetters].set("maxValue",null);o[r.configSetters].set("valueType",null);o[r.configSetters].set("editFormat",null);o[r.configSetters].set("displayFormat",null);return o}t.prototype.initInlineEditor=function(e){this.setDecimals(e.getDecimals());this.setMaxValue(e.getMaxValue());this.setMinValue(e.getMinValue())};t.prototype.setValue=function(t){if(!isNaN(t))e.prototype.setValue.call(this,t)};t.prototype.getDecimals=function(){return this[r.configRef].decimals};t.prototype.setDecimals=function(e){this[r.configRef].decimals=this.decimals=e};t.prototype.getMinValue=function(){return this[r.configRef].minValue};t.prototype.setMinValue=function(e){this[r.configRef].minValue=e};t.prototype.getMaxValue=function(){return this[r.configRef].maxValue};t.prototype.setMaxValue=function(e){this[r.configRef].maxValue=e};return t}(n.FauxObjectTextEditor);t.FauxObjectNumberEditor=a}));define("compatibility-layer/faux-objects/plugin-service",["require","exports","tslib","./faux-object","./faux-object"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FauxObjectPluginService=void 0;var a=function(e){i.__extends(t,e);function t(t,i,r){var a=e.call(this,t,i,r)||this;a[n.configSetters].set("graph",null);return a}return t}(r.FauxObjectBase);t.FauxObjectPluginService=a}));define("compatibility-layer/faux-objects/screen-title",["require","exports","tslib","./faux-object","./faux-object"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FauxObjectScreenTitle=void 0;var a=function(e){i.__extends(t,e);function t(t,i,r){var a=e.call(this,t,i,r)||this;a[n.configSetters].set("caption",null);a[n.configSetters].set("title",null);a[n.configSetters].set("isFavorite",null);a[n.configSetters].set("isFavoritable",null);a[n.configSetters].set("hasCaption",null);a[n.configSetters].set("nodeID",null);a[n.configSetters].set("href",null);a[n.configSetters].set("tooltipAddToFavorites",null);a[n.configSetters].set("tooltipRemoveFromFavorites",null);return a}return t}(r.FauxObjectBase);t.FauxObjectScreenTitle=a}));define("compatibility-layer/faux-objects/selector",["require","exports","tslib","./base-editor","./faux-object"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FauxObjectSelector=void 0;var a=function(e){i.__extends(t,e);function t(t,i,n,a){var o=e.call(this,t,i,n,a)||this;o.autoCallBack=new r.CallbackSettings;o[r.propertySetters].set("hintText",(function(e){return false}));o[r.configSetters].set("value",(function(e){return o.setValue(e)}));o.initStateBag("PXSelector");return o}t.prototype[r.initializeFauxObject]=function(){e.prototype[r.initializeFauxObject].call(this)};t.prototype[r.disposeFauxObject]=function(){e.prototype[r.disposeFauxObject].call(this)};t.prototype.getValue=function(e){if(e===void 0){e=undefined}if(e)this.refreshValue();var t=this.screenValues[this[r.configRef].id];return t===null||t===void 0?void 0:t.id};t.prototype.updateState=function(e){this.stateBag.update("Value",e===null||e===void 0?void 0:e.id)};t.prototype.setValue=function(t){if(t instanceof Object){e.prototype.setValue.call(this,t)}else{if(this.screenValues[this[r.configRef].id]instanceof Object&&this.screenValues[this[r.configRef].id].id===t){return}var i={id:t,text:t};e.prototype.setValue.call(this,i)}};t.prototype.setProperties=function(t){var n=t.hintText,r=t.value,a=i.__rest(t,["hintText","value"]);if(n&&r){a.value={id:r,text:n};e.prototype.setProperties.call(this,a)}else{e.prototype.setProperties.call(this,t)}};t.prototype.afterInitialize=function(){e.prototype.afterInitialize.call(this);var t=this.element.querySelector("div.qp-field-editor");if(t){this.setObjectRef(t)}this.trackValue=true};t.prototype.copyPropertiesToConfig=function(t){var n=t.hintText,r=t.value,a=i.__rest(t,["hintText","value"]);if(n&&r){a.value={value:r,text:n};e.prototype.copyPropertiesToConfig.call(this,a)}else{e.prototype.copyPropertiesToConfig.call(this,t)}};return t}(n.FauxObjectBaseEditor);t.FauxObjectSelector=a}));define("compatibility-layer/faux-objects/text-editor",["require","exports","tslib","./faux-object","./base-editor","aurelia-pal"],(function(e,t,i,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FauxObjectTextEditor=void 0;var o={defaultLocale:"",language:"",localizationInfo:null};var s=function(e){i.__extends(t,e);function t(t,i,r,a){var o=e.call(this,t,i,r,a)||this;o.linkCommand=new n.CallbackSettings;o[n.configSetters].set("selectOnFocus",null);o[n.configSetters].set("allowNull",null);o[n.configSetters].set("nullText",null);o[n.configSetters].set("required",null);o[n.configSetters].set("asciiCharSet",null);o[n.configSetters].set("validateExp",null);return o}t.prototype[n.initializeFauxObject]=function(){var t=this;e.prototype[n.initializeFauxObject].call(this);this.defaultLocale=null;this.px_cm.registerRequiresOnLoad(this,this.ID);this.px_cm.registerAutoSize(this,this.getExternalProps());this.wrapLanguage();var i=new MutationObserver((function(e){t.onMutationCallback(e)}));i.observe(this.element,{childList:true,subtree:true});this.domEventsElem.subscribe("click",(function(e){var i=e.target;if(i&&i.tagName==="A")t.px_callback.exec(t,t.linkCommand)}));this.domEventsElem.subscribe("focus",(function(e){t.hasFocus=true}));this.domEventsElem.subscribe("blur",(function(e){t.hasFocus=false}))};t.prototype[n.disposeFauxObject]=function(){e.prototype[n.disposeFauxObject].call(this)};t.prototype.onMutationCallback=function(e){var t=false;for(var i=0,n=e;i<n.length;i++){var r=n[i];if(r.type==="childList"){if(r.addedNodes.length>0||r.removedNodes.length>0){t=true;break}}}if(t)this.saveTextElementRef()};t.prototype.getDefaultCallbackProps=function(){return i.__assign(i.__assign({},e.prototype.getDefaultCallbackProps.call(this)),o)};t.prototype.getTextElement=function(){var e=this.element.querySelector("input");return e?e:this.element.querySelector("textarea")};t.prototype.onLoad=function(){if(this.syncStateWithCommand)this.px_cm.registerCommandExecutor(this)};t.prototype.setProperties=function(t){if(this.syncStateWithCommand)t.readOnly=this.getReadOnly();e.prototype.setProperties.call(this,t);this.wrapLanguage()};t.prototype.initInlineEditor=function(e){var t=this.getTextElement();if(t.tagName==="TEXTAREA"){this.px.registerAutoSizedText(t)}this.saveTextElementRef()};t.prototype.commandStateCallback=function(e){this.setReadOnly(!e.getEnabled())};t.prototype.setVisible=function(t){if(!!t!==this.getVisible()){var i=t?"":"none";if(this.boundImage)this.boundImage.style.display=i;if(this.labelID){var n=this.px.elemByID(this.labelID);if(n)n.style.display=i}var r=this.element.nextElementSibling;if(r&&r.getAttribute("data-lang")==="indi"){r.style.display=i}}e.prototype.setVisible.call(this,t)};t.prototype.setReadOnly=function(t){e.prototype.setReadOnly.call(this,t);this.wrapLanguage()};t.prototype.setValue=function(t){e.prototype.setValue.call(this,t);this.repaintText(t)};t.prototype.repaintText=function(e){return};t.prototype.getSelectedText=function(){var e=this.getTextElement();this.selStart=e.selectionStart||0;this.selEnd=e.selectionEnd||0;return e.value.substring(this.selStart,this.selEnd)};t.prototype.select=function(e,t){if(e===void 0){e=null}if(t===void 0){t=null}var i=this.getTextElement();if(e==null||t==null){if(e!=null){i.setSelectionRange(e,e)}else{i.select()}}else i.setSelectionRange(e,t)};t.prototype.getPositioning=function(e){return a.PLATFORM.global.getComputedStyle(e).position};t.prototype.removeLanguage=function(){if(this.elemLanguage&&this.elemLanguage.parentNode){this.elemLanguage.parentNode.removeChild(this.elemLanguage)}};t.prototype.wrapLanguage=function(e){if(e===void 0){e=null}var t=e||this.language||this.defaultLocale;if(!!t){if(this.elemLanguage&&this.elemLanguage.parentNode){this.elemLanguage.innerHTML=t;this.elemLanguage.style.display=this.getReadOnly()?"none":"";return}var i=this.elemText&&this.elemText.nextElementSibling;var n=this.elemText&&this.elemText.parentNode;if(n){this.elemLanguage=a.PLATFORM.global.document.createElement("a");this.elemLanguage.className="langindi2";this.elemLanguage.innerHTML=t;this.elemLanguage.href="javascript:void 0";this.elemLanguage.style.display=this.getReadOnly()?"none":"";var r=this.getPositioning(n);if(r==="static")n.style.position="relative";this.elemLanguage.setAttribute("style","position:absolute;top:2px; /* background-color: rgba(255,255,255,0.8);*/ ");this.elemLanguage.style[this.px.isRTL()?"left":"right"]="-30px";n.insertBefore(this.elemLanguage,i);this.px.addEventHandler(this.elemLanguage,"click",this.localeEditor.bind(this))}}};t.prototype.localeEditor=function(e){var t=this.px_all[this.bindingContainer];if(t&&t.__className==="PXGrid"){t.localizedInlineEditor=this;if(t.activeCell.language||t.activeRow.isNew()&&t.activeCell.column.defaultLocale&&!t.activeCell.getReadOnly()){this.px_cm.showLocalizePopup(t.dataSourceID,t.dataMember,t.activeCell.column.getKey(),t,this.getValue(),t.activeCell.language)}}else if(t&&this.language){if(!this.getReadOnly()){this.px_cm.showLocalizePopup(t.dataSourceID,t.dataMember,this.dataField,this,this.getValue(),this.language)}}else if(this.localizationInfo){var i=this.localizationInfo.split(";");this.px_cm.showLocalizePopup(i[0],i[1],i[2],this,this.getValue(),this.language)}e.preventDefault();e.stopPropagation();return false};t.prototype.localeUpdated=function(e){if(!e)return;var t=e.split(";");if(t.length>1){this.language=t[0];this.setValue(t[1])}};t.prototype.adjustInline=function(e){this.wrapLanguage(e);if(this.elemLanguage&&this.elemLanguage.parentNode){this.elemLanguage.style.display="";var t=this.px.isRTL()?["multiLangRTL"]:["multiLang"];if(this.elemText)this.px.appendCss(this.elemText,t,true);var i=this.getPositioning(this.elemLanguage.parentNode);if((i==="absolute"||i==="relative")&&this.elemText!=null){var n=window.getComputedStyle(this.elemText);var r=6;var a=27;var o=3;var s=this.px.isRTL()?(this.elemText.offsetLeft||0)+r:(this.elemText.offsetLeft||0)+parseInt(n.width,10)-a;this.elemLanguage.style.right="";this.elemLanguage.style.left=s+"px";this.elemLanguage.style.top=this.elemText.offsetTop+o+"px";if(this.elemText.style.zIndex)this.elemLanguage.style.zIndex=String(parseInt(this.elemText.style.zIndex)+1)}}};t.prototype.hideInline=function(){if(this.elemLanguage){this.elemLanguage.style.display="none";if(this.elemText)this.px.excludeCss(this.elemText,["multiLang","multiLangRTL"],true)}};return t}(r.FauxObjectBaseEditor);t.FauxObjectTextEditor=s}));define("compatibility-layer/faux-objects/tool-bar",["require","exports","tslib","./faux-object","aurelia-framework","aurelia-logging","./button","./../../apps/enhance/services/control-helper","aurelia-dependency-injection"],(function(e,t,i,n,r,a,o,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FauxExportExcelButton=t.FauxObjectToolBar=void 0;var c=a.getLogger("tool-bar__faux-object");var u={hidden:false,disabled:false,connotation:"",favorite:false,showInToolbar:false,commandArgument:""};var d=function(e){i.__extends(t,e);function t(t,i,n){var r=e.call(this,t,i,n)||this;r.commandState=null;r._items=[];r.registeredCommands={};var a=r.getExternalProps();r.events.appendEvents(["buttonClick","menuShow"],a?a.clientEvents:null);return r}Object.defineProperty(t.prototype,"items",{get:function(){return this._items},set:function(e){this._items=e},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"configItems",{get:function(){return this[n.configRef].items},enumerable:false,configurable:true});t.prototype[n.initializeFauxObject]=function(){var i=this;this.initItems(this[n.configRef].items);e.prototype[n.initializeFauxObject].call(this);this.paramsCall=this.px_callback.createCommand("CollectParams",true,false,false,3);this.domEvents=new r.ElementEvents(this.element);this.domEvents.subscribe("mouseup",(function(e){if(i.fireEvent("mouseUp",e,{})){i.px.cancelEvent(e);return}}));this.domEvents.subscribe("buttonpressed",(function(e){c.debug("buttonpressed",e.detail);var n=e.detail.event;var r=e.detail.config;if(t.isEnabled(r)){if(e.detail.isMenuItem){i.execMenu(n,n.detail,r)}else{i.exec(n,r)}}}))};t.isEnabled=function(e){if(!e)return false;return!e.disabled};Object.defineProperty(t.prototype,"taskQueue",{get:function(){return l.Container.instance.get(r.TaskQueue)},enumerable:false,configurable:true});t.prototype.registerCommands=function(){var e=this;var t;for(var i in this[n.configRef].items){var r=(t=this[n.configRef].items[i])===null||t===void 0?void 0:t.config;if(r==null)continue;if(this.registeredCommands[i])continue;this.registeredCommands[i]=true;var a=r.commandSourceID;if(!a)a=this.commandSourceID;if(a){var o=this.px_all[a];if(o&&o.registerCommandControl){var s=r.commandName;if(s)o.registerCommandControl(this,s)}}if(r.autoCallBack&&r.autoCallBack.command&&r.autoCallBack.target){var l=this.px_all[r.autoCallBack.target];if(l&&l.registerCommandControl){l.registerCommandControl(this,r.autoCallBack.command)}}if(r.dependOnGrid){var c=r.linkedGrid=this.px_all[r.dependOnGrid];if(c){this.setItemEnabledState(r);if(!c.toolBarAttached){c.toolBarAttached=true;c.events.addEventHandler("afterRepaint",(function(t){return e.handleGridRepaint(t)}));c.events.addEventHandler("afterRepaintRow",(function(t){return e.handleGridRepaint(t)}))}}}}};t.prototype.handleGridRepaint=function(e){var t;for(var i in this.configItems){var n=(t=this.configItems[i])===null||t===void 0?void 0:t.config;if(n!=null&&n.linkedGrid==e){this.setItemEnabledState(n)}}};t.prototype.navigate=function(e,t){var i=e.target?e.target:this[n.configRef].target;var r=e.queryString;var a=r?e.navigateUrl+(e.navigateUrl.indexOf("?")===-1?"?":"&")+r:e.navigateUrl;if(e.popupPanel){var o=this.px_all[e.popupPanel];if(o.getVisible()&&a===o.getPageUrl()){o.hide()}else{o.setPageUrl(a);o.show(this)}}else{var s=t&&(t.shiftKey||t.ctrlKey);this.px.openUrl(a,i,s||e.openFrameset)}};Object.defineProperty(t.prototype,"commandSourceID",{get:function(){return this[n.configRef].commandSourceID},set:function(e){this[n.configRef].commandSourceID=e},enumerable:false,configurable:true});t.prototype.execMenu=function(e,t,i){var r;var a=this.items[i.index];var o=a.getMenu();var s=(r=o===null||o===void 0?void 0:o.getItems()[t.value.index])===null||r===void 0?void 0:r.value;if(!s||!o)return;var l=s.autoPostBack;if(l==null)l=i.autoPostBack;if(l==null)l=this[n.configRef].autoPostBack;var c=false;var u=s.commandSourceID;if(!u)u=i.commandSourceID;if(!u)u=a.owner.commandSourceID;var d=s.autoCallBack||i.autoCallBack||a.autoCallBack;if(d.enabled==null)d.enabled=true;if(s.navigateUrl){if(!c){if(s.popupPanel){var p=this.px_all[s.popupPanel];if(p.getVisible()&&s.navigateUrl===p.getPageUrl()){p.hide()}else{p.setPageUrl(s.navigateUrl);p.show(a?a:o)}}else{var f=e&&(e.shiftKey||e.ctrlKey);this.px.openUrl(s.navigateUrl,s.target,f||s.openFrameset)}}}else if(l){if(!c){var h=e.target.getAttribute("name");this.px.doPost(h,"click|"+(s.value?"val|"+s.value:this.element.id))}}else if(d&&d.enabled&&d.command){this.px_callback.exec(s,s.autoCallBack,s.popupCommand)}else if(u&&s.commandName){var v=this.px_all[u];if(v&&v.executeCommand){v.sourceEvent=e;v.executeCommand(s.commandName,s.commandArgument,s.popupCommand)}}if(s.popupPanel&&!l&&!s.navigateUrl){var p=this.px_all[s.popupPanel];if(p){if(!p.getVisible()){p.closeCallback=s.popupCommand;p.show(s)}else p.hide()}}};t.prototype.exec=function(e,i){var r=i;var a={button:i};if(i.suppressActions||this.fireEvent("buttonClick",e,a))return;var o=i.autoPostBack;var s=false;if(o==null)o=this[n.configRef].autoPostBack;var l=i.commandSourceID;var c=i.autoCallBack||r.autoCallBack;if(!l)l=this.commandSourceID;if(i.navigateUrl){if(!s){if(r.collectParams===1){var u={};u.button=r;var d=t._processCollect;this.px_callback.execI(this,this.paramsCall,i.index,d,u)}else this.navigate(i,e)}}else if(o){if(!s){var p=this.element.getAttribute("name");this.px.doPost.doPost(p,"click:"+i.index)}}else if(c&&c.enabled&&c.command){if(e)e.openFrameset=r.openFrameset;if(!e.cancelCallBack)this.px_callback.exec(this,r.autoCallBack,r.popupCommand)}else if(l&&i.commandName){var f=this.px_all[l];if(f&&f.executeCommand){f.sourceEvent=e;f.executeCommand(i.commandName,i.commandArgument,r.popupCommand)}}if(r.popupPanel&&!o&&!r.navigateUrl){var h=this.px_all[r.popupPanel];if(h){if(!h.getVisible()){h.closeCallback=r.popupCommand;h.show(this)}else h.hide()}}};t._processCollect=function(e,t){var i=t.button;if(i&&e){i.queryString=e;i.navigate()}};t.prototype.readProperties=function(e,t){var i,n;for(var r in t){var a=e[r];var o=t[r];var s=(i={},i[r]=o,i);if(a!=null&&typeof a==="object"){if(a instanceof Date){s=(n={},n[r]=new Date(Date.parse(o)),n);Object.assign(e,s)}else if(r==="items"){this.readProperties(a,o)}else if(a instanceof Array){Object.assign(e,s)}else this.readProperties(a,o)}else if(r==="disabled"){this.syncItemEnabledState(e,o)}else if(typeof a==="boolean"){e[r]=!!o}else Object.assign(e,s)}};t.prototype.copyPropertiesToConfig=function(t){e.prototype.copyPropertiesToConfig.call(this,t)};t.prototype.setProperties=function(t){if(this[n.configRef])this[n.configRef].changed=true;if(t&&t.items){for(var r in t.items){var a=t.items[r];a.config=i.__assign(i.__assign({},u),a.config);var o=this[n.configRef].items[r];if(!o)o=this[n.configRef].items[r]={};delete o.index;e.prototype.readProperties.call(this,o,a)}}if(t){this[n.configRef].categories=[];if(t.categories)this.readProperties(this[n.configRef].categories,t.categories)}this.registerCommands()};t.prototype.commandStateCallback=function(e,t){if(this[n.configRef])this[n.configRef].styleChanged=true;for(var i in this[n.configRef].items){var r=this[n.configRef].items[i].config;var a=r.commandName;if(s.compareStrings(a,t,true)){this.setItemState(r,e);break}}};t.prototype.syncItemEnabledState=function(e,t){if(t)e.disabled=true;else{var i=e.commandName;var n=e.commandSourceID;if(!n&&this.commandSourceID)n=this.commandSourceID;if((!i||!n)&&e.autoCallBack&&!e.popupPanel){i=e.autoCallBack.command;n=e.autoCallBack.target}var r=undefined;if(i&&n){var a=this.px_all[n];if(a&&a.getCommandState)r=a.getCommandState(this,i)}this.setItemEnabledState(e,r)}};t.prototype.setItemEnabledState=function(e,t){if(t)e.disabled=!t.getEnabled();if(e.linkedGrid&&(e.disabled==null||e.disabled==false)){var i=e.linkedGrid.rows.length>0;var n=e.linkedGrid.activeRow;if(e.stateColumn&&n){var r=n.getCell(e.stateColumn);if(r)i=Boolean(r.getValue());e.disabled=!i}}};t.prototype.setItemState=function(e,t){this.setItemEnabledState(e,t);e.hidden=!t.getVisible();var i=t.getDisplayName();if(e.syncText&&i!=null&&e.displayStyle!==1){e.text=i}var n=t.getTooltip();if(n!=null)e.toolTip=n};t.prototype.getEnabled=function(){return this[n.configRef].enabled};t.prototype.setEnabled=function(e){this[n.configRef].enabled=!!e};t.prototype.getEnabledState=function(e){if(e!=null)this.commandState=e;var t=this.commandState!=null?this.commandState.getEnabled():null;return t};t.prototype.getButton=function(e){var t=this.items;if(e==="ExportExcel"){var i=t.find((function(t){var i;return((i=t)===null||i===void 0?void 0:i.item.config.commandName)===e}));if(i)return i;for(var r in this.configItems){var a=this.configItems[r];if(a.config.commandName===e){a.id=r;i=new p(this,a);t.push(i);return i}}return null}if(t&&e){for(var l=0,c=t;l<c.length;l++){var i=c[l];if(!(i instanceof o.FauxObjectButton))continue;var u=i[n.configRef];var d=i.autoCallBack;if(u.key===e||s.compareStrings(u.commandName,e,true)||d&&s.compareStrings(d.command,e,true)){return i}}}return null};t.prototype.arrangeOverflowItems=function(){c.error("ARRANGE OVERFLOW is not yet implemented. ")};t.prototype.initItems=function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t];if(n==null)continue;if(!this.items[n.index]){if(n.type==="qp-button"||n.type==="PXToolBarButton"){var a=r.DOM.getElementById(n.id)}else if(n.type==="label"||n.type==="PXToolBarLabel"){var a=r.DOM.getElementById(n.id);this.items[n.index]=new h(a,n)}}else{this.items[n.index].setProperties(n)}}};return t}(n.FauxObjectBase);t.FauxObjectToolBar=d;var p=function(){function e(e,t){this.images={};this.toolbar=e;this.item=t}e.prototype.getTooltip=function(){return this.item.config.toolTip};e.prototype.setTooltip=function(e){this.item.config.toolTip=e};e.prototype.setStyle=function(){var e,t;var i=(t=(e=this.toolbar[n.configRef])===null||e===void 0?void 0:e.items[this.item.id])===null||t===void 0?void 0:t.config;if(!i)return;i.imageKey=undefined;i.imageSet=undefined;i.images=this.images;this.toolbar[n.configRef].styleChanged=true};e.prototype.setProperties=function(e){var t;for(var i in e){var n=(t={},t[i]=e[i],t);Object.assign(this,n)}};return e}();t.FauxExportExcelButton=p;s.topWindow.FauxExportExcelButton=function(e,t){return new p(e,t)};var f=function(){function e(e){this.enabled=true;this.readOnly=false;this.commandState=null;this.autoCallBack=new n.CallbackSettings;this.popupCommand=new n.CallbackSettings;this.navigateUrl="";this.popupPanel="";this.id=e}return e}();var h=function(){function e(e,t){this.config=t;this.itemCell=e.parentElement;this.element=e}Object.defineProperty(e.prototype,"type",{get:function(){return"PXToolBarSeperator"},set:function(e){},enumerable:false,configurable:true});e.prototype.setProperties=function(e){var t;for(var i in e){var n=(t={},t[i]=e[i],t);Object.assign(this,n)}};e.prototype.setText=function(e){this.config.text=e};return e}()}));define("compatibility-layer/faux-objects/workflow-diagram",["require","exports","tslib","./base-editor","./faux-object"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FauxObjectWorkflowDiagram=void 0;var a=function(e){i.__extends(t,e);function t(t,i,n,a){var o=e.call(this,t,i,n,a)||this;o[r.propertySetters].set("hidden",(function(e){return o.setHidden(e)}));o[r.propertySetters].set("visible",(function(e){return o.setVisible(e)}));o[r.configSetters].set("hidden",null);return o}t.prototype[r.initializeFauxObject]=function(){e.prototype[r.initializeFauxObject].call(this);this.elemText=this.element.querySelector("input")};t.prototype[r.disposeFauxObject]=function(){e.prototype[r.disposeFauxObject].call(this)};t.prototype.setProperties=function(t){var n=t.hidden,r=i.__rest(t,["hidden"]);if(n===undefined){r.hidden=true;e.prototype.setProperties.call(this,r)}else{t.hidden=!!t.hidden;e.prototype.setProperties.call(this,t)}};t.prototype.setHidden=function(e){this.hidden=this[r.configRef].hidden=e};t.prototype.setVisible=function(e){};return t}(n.FauxObjectBaseEditor);t.FauxObjectWorkflowDiagram=a}));define("compatibility-layer/faux-screen",["require","exports","tslib","aurelia-framework","./faux-objects/faux-object","./faux-object-factory"],(function(e,t,i,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FauxScreenCustomAttribute=void 0;var o=function(){function e(e,t,i){this.element=e;this.bindingEngine=t;this.tq=i}e.prototype.bind=function(e){var t=e.elements[this.config.id];if(t!==undefined){e.elements[this.config.id]=undefined;this.tq.flushMicroTaskQueue()}e.elements[this.config.id]=this.config;var i=this.config.value;e.values[this.config.id]=i;this.values=e.values;this.elements=e.elements};e.prototype.attached=function(){var e=a.getFauxObject(this.element,this.config,this.values,this.bindingEngine);var t=this.element;t.object=e;e[r.initializeFauxObject]();this.tq.queueMicroTask((function(){return e.afterInitialize()}))};e.prototype.unbind=function(){this.values[this.config.id]=undefined;this.elements[this.config.id]=undefined};e.prototype.detached=function(){var e=this.element;e.object[r.disposeFauxObject]()};i.__decorate([n.bindable({defaultBindingMode:n.bindingMode.oneTime,primaryProperty:true}),i.__metadata("design:type",Object)],e.prototype,"config",void 0);e=i.__decorate([n.autoinject,n.customAttribute("faux-screen"),i.__metadata("design:paramtypes",[Element,n.BindingEngine,n.TaskQueue])],e);return e}();t.FauxScreenCustomAttribute=o}));define("controls/containers/enhanced-compose",["require","exports","tslib","aurelia-framework","aurelia-logging"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.EnhancedComposeCustomElement=void 0;var a=r.getLogger("enhanced-compose");var o=function(){function e(e,t,i,n,r){this.container=e;this.viewResources=t;this.element=i;this.targetInstruction=n;this.compositionEngine=r;this.expressions=this.targetInstruction.expressions}e.prototype.bind=function(e,t){this.bindingContext=e;this.overrideContext=t;this.viewModelChanged(this.viewModel)};e.prototype.getViewModelClassFromTagName=function(e){var t=this.viewResources.getElement(e);if(t)return t.target;t=this.viewResources.getElement("qp-text-editor");return t.target};e.prototype.viewModelChanged=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,r;var o=this;return i.__generator(this,(function(i){if(this.currViewModel||this.currViewModelPromise||!e)return[2];t=this.getViewModelClassFromTagName(e);if(!t)a.error("No client control exists for tag",e);r={bindingContext:this.bindingContext,overrideContext:this.overrideContext,viewModel:t,container:this.container,host:this.element,viewResources:this.container.get(n.ViewResources),viewSlot:this.container.get(n.ViewSlot)};this.currentViewModelPromise=this.compositionEngine.compose(r).then((function(e){var t=o.currentViewModel=e.viewModel;var i=n.metadata.get(n.metadata.resource,t.constructor);if(i){var a=i.properties;var s=function(i){var n=o.expressions.find((function(e){return e.targetProperty===i.name}));if(n){var r=n.createBinding(t);e.view.addBinding(r)}};for(var l=0,c=a;l<c.length;l++){var u=c[l];s(u)}}e.bind(r)}),(function(e){return a.error("error composing",e)})).then((function(){return o.currentViewModelPromise=undefined}));return[2]}))}))};i.__decorate([n.bindable,i.__metadata("design:type",String)],e.prototype,"viewModel",void 0);e=i.__decorate([n.noView,n.customElement("enhanced-compose"),n.autoinject,i.__metadata("design:paramtypes",[n.Container,n.ViewResources,Element,n.TargetInstruction,n.CompositionEngine])],e);return e}();t.EnhancedComposeCustomElement=o}));define("controls/containers/qp-field/qp-field",["require","exports","tslib","apps/enhance/services/control-helper","aurelia-framework","descriptors/fieldstate"],(function(e,t,i,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getDefaultControlType=t.QpFieldCustomElement=void 0;var o=function(){function e(e){this.element=e;this.controlType=undefined;this.labelSize=undefined;this.controlSize=undefined;this.customType=true;this.controlConfig={};this.stateExpr=this.element.getAttribute("control-state.bind")}e.prototype.bind=function(e,t){this.controlConfig.id=this.controlId;if(!this.controlConfig.id&&this.stateExpr){var i=2;var n=this.stateExpr.split(".",i);if(n.length===i)this.controlConfig.id="ed"+n[0]+"-"+n[1]}};Object.defineProperty(e.prototype,"label",{get:function(){var e;if(this.suppressLabel)return undefined;return(e=this.controlState)===null||e===void 0?void 0:e.displayName},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"suppressLabel",{get:function(){var e,t;if(this.noLabel)return true;if(this.controlType==="qp-check-box"||((e=this.controlState)===null||e===void 0?void 0:e.type)===n.NetType.Boolean)return true;return(t=this.controlState)===null||t===void 0?void 0:t.suppressLabel},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"defaultControlType",{get:function(){var e,t;var i=this.controlState;if(this.customType&&((e=i)===null||e===void 0?void 0:e.controlType))return(t=i)===null||t===void 0?void 0:t.controlType;return s(i)},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"errorCssClass",{get:function(){var e;switch((e=this.controlState)===null||e===void 0?void 0:e.errorLevel){case a.PXErrorLevel.Error:case a.PXErrorLevel.RowError:return"err-l";case a.PXErrorLevel.Warning:case a.PXErrorLevel.RowWarning:return"war-l";case a.PXErrorLevel.RowInfo:return"inf-l";default:return""}},enumerable:false,configurable:true});i.__decorate([r.bindable,i.__metadata("design:type",String)],e.prototype,"controlId",void 0);i.__decorate([r.bindable,i.__metadata("design:type",a.PXFieldState)],e.prototype,"controlState",void 0);i.__decorate([r.bindable({defaultBindingMode:r.bindingMode.twoWay}),i.__metadata("design:type",Object)],e.prototype,"controlValue",void 0);i.__decorate([r.bindable,i.__metadata("design:type",Object)],e.prototype,"controlType",void 0);i.__decorate([r.bindable,i.__metadata("design:type",Object)],e.prototype,"labelSize",void 0);i.__decorate([r.bindable,i.__metadata("design:type",Object)],e.prototype,"controlSize",void 0);i.__decorate([r.bindable,i.__metadata("design:type",Object)],e.prototype,"customType",void 0);i.__decorate([r.bindable,i.__metadata("design:type",Boolean)],e.prototype,"noLabel",void 0);i.__decorate([r.bindable,i.__metadata("design:type",Object)],e.prototype,"controlConfig",void 0);i.__decorate([r.computedFrom("controlState.displayName","controlState.suppressLabel","controlState.type","controlType"),i.__metadata("design:type",Object),i.__metadata("design:paramtypes",[])],e.prototype,"label",null);i.__decorate([r.computedFrom("controlState.suppressLabel","controlState.type","controlType"),i.__metadata("design:type",Object),i.__metadata("design:paramtypes",[])],e.prototype,"suppressLabel",null);i.__decorate([r.computedFrom("controlState.type","controlState.viewName","controlState.allowedValues","controlState.inputMask","controlState.controlType"),i.__metadata("design:type",String),i.__metadata("design:paramtypes",[])],e.prototype,"defaultControlType",null);i.__decorate([r.computedFrom("controlState.errorLevel"),i.__metadata("design:type",Object),i.__metadata("design:paramtypes",[])],e.prototype,"errorCssClass",null);e=i.__decorate([r.customElement("qp-field"),i.__metadata("design:paramtypes",[Element])],e);return e}();t.QpFieldCustomElement=o;function s(e){if(e===null||e===void 0?void 0:e.viewName)return"qp-selector";switch(e===null||e===void 0?void 0:e.type){case n.NetType.Boolean:return"qp-check-box";case n.NetType.SByte:case n.NetType.Byte:case n.NetType.Int16:case n.NetType.UInt16:case n.NetType.Int32:case n.NetType.UInt32:case n.NetType.Int64:case n.NetType.UInt64:return(e===null||e===void 0?void 0:e.allowedValues)?"qp-drop-down":"qp-number-editor";case n.NetType.Single:case n.NetType.Double:case n.NetType.Decimal:return"qp-number-editor";case n.NetType.DateTime:return"qp-datetime-edit";case n.NetType.String:return(e===null||e===void 0?void 0:e.allowedValues)?"qp-drop-down":"qp-text-editor";default:return"qp-text-editor"}}t.getDefaultControlType=s}));define("text!controls/containers/qp-field/qp-field.css",[],(function(){return'.qp-field\r\n{\r\n\tdisplay: block;\r\n}\r\n.qp-field .wrapper\r\n{\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n\tposition: relative;\r\n\t/* border-radius: 5px; */\r\n\tpadding-left: 15px;\r\n}\r\n\r\n.qp-field .icon-container {\r\n\twidth: 14px;\r\n\tposition: absolute;\r\n}\r\n\r\n.qp-field .label-container\r\n{\r\n\twidth: 100px;\r\n\theight: 25px;\r\n}\r\n.qp-field .label-container label\r\n{\r\n\tdisplay: inline-block;\r\n\toverflow: hidden;\r\n\twhite-space: nowrap;\r\n\ttext-overflow: ellipsis;\r\n\twidth: 100%;\r\n\tline-height: 25px;\r\n}\r\n.qp-field .control-container.size-default {\r\n\t-webkit-box-flex: 1;\r\n\t    -ms-flex: 1 0 auto;\r\n\t        flex: 1 0 auto;\r\n\twidth: 180px;\r\n}\r\n\r\n.qp-field .control-container > enhanced-compose > *\r\n{\r\n\twidth: 100%;\r\n}\r\n\r\n\r\n.qp-field .req-l .icon-container:before {\r\n  content: "*";\r\n  font-size: 15px;\r\n  opacity: 1;\r\n}\r\n\r\n.qp-field .wrapper.err-l {\r\n\tbackground-color: rgba(255, 0, 0, 0.17);\r\n}\r\n\r\n.qp-field .wrapper.war-l {\r\n\tbackground-color: rgba(255, 193, 9, 0.2);\r\n}\r\n\r\n.qp-field .icon-container {\r\n  font-family: \'FontAwesome\';\r\n  font-style: normal;\r\n  font-weight: normal;\r\n  font-variant: normal;\r\n  text-transform: none;\r\n  line-height: 25px;\r\n  /* Better Font Rendering =========== */\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  position: absolute;\r\n  text-align: left;\r\n  vertical-align: middle;\r\n  overflow: hidden;\r\n  direction: ltr;\r\n  font-size: 15px;\r\n\tleft: 1px;\r\n}\r\n\r\n.qp-field .err-l .icon-container,\r\n.qp-field .war-l .icon-container {\r\n\tcursor: help;\r\n}\r\n\r\n.qp-field .err-l .icon-container:before {\r\n  content: "\\e997";\r\n  color: #dc3545;\r\n}\r\n\r\n.qp-field .war-l .icon-container:before {\r\n  content: "\\e99a";\r\n  color: #ffc109;\r\n}\r\n\r\n.qp-field .war-l .icon-container:after {\r\n  content: "\\e99b";\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  color: black;\r\n}\r\n\r\n.qp-field .inf-l .icon-container:before {\r\n  content: "\\e998";\r\n  color: #28a745;\r\n}\r\n\r\n.qp-field .inf-l .icon-container:after {\r\n  content: "\\e999";\r\n  position: absolute;\r\n  top: 4px;\r\n  left: 0;\r\n  color: white;\r\n}\r\n\r\n.qp-field .err-l .icon-container .qp-tooltip-container {\r\n\tbackground-color: #e51c23;\r\n\tborder-color: #e51c23;;\r\n\tcolor: rgba(255, 255, 255, 0.87);\r\n\tfont-family: Arial, sans-serif;\r\n\tmax-width: 300px;\r\n}\r\n\r\n.qp-field .err-l .icon-container .qp-tooltip-container::before {\r\n\tborder-bottom-color: #e51c23;\r\n}\r\n\r\n.qp-field .war-l .icon-container .qp-tooltip-container {\r\n\tbackground-color: #ffeb3b;\r\n\tborder-color: brown;;\r\n\tcolor: rgba(0, 0, 0, 0.87);\r\n\tfont-family: Arial, sans-serif;\r\n\tmax-width: 300px;\r\n}\r\n\r\n.qp-field .war-l .icon-container .qp-tooltip-container::before {\r\n\tborder-bottom-color: brown;\r\n}\r\n\r\n.qp-field .war-l .icon-container .qp-tooltip-container::after {\r\n\tdisplay: block;\r\n\tborder-bottom-color: #ffeb3b;\r\n}'}));define("text!controls/containers/qp-field/qp-field.html",[],(function(){return'<template class="qp-field"><require from="./qp-field.css"></require><div class="wrapper ${errorCssClass} ${controlState.required === true ? \'req-l\': \'\'}" if.bind="controlState.visible === undefined  || controlState.visible !== false"><div class="icon-container"><qp-tooltip if.bind="controlState.error">${controlState.error}</qp-tooltip></div><div class="label-container ${labelSize ? (\'size-\' + labelSize) : \'\'}" if.bind="label"><label for.bind="id">${label}</label></div><div class="control-container ${controlSize ? (\'size-\' + controlSize) : \'size-default\'}"><enhanced-compose view-model.bind="controlType || defaultControlType" config.bind="controlConfig" state.bind="controlState" value.two-way="controlState.value"></enhanced-compose></div></div></template>'}));define("controls/containers/qp-fieldset/inline-view",["require","exports","tslib","aurelia-framework"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InlineView=void 0;var r=function(){function e(e,t,i,n){this.viewCompiler=e;this.viewSlot=t;this.container=i;this.viewResources=n;this.viewCompiler=e;this.viewSlot=t;this.container=i;this.viewResources=n}e.prototype.attached=function(){var e=this.viewCompiler.compile("<template>"+this.template+"<template>",this.viewResources);var t=e.create(this.container);t.bind(this.context);this.viewSlot.add(t);this.viewSlot.attached()};i.__decorate([n.bindable({defaultBindingMode:n.bindingMode.toView}),i.__metadata("design:type",String)],e.prototype,"template",void 0);i.__decorate([n.bindable,i.__metadata("design:type",Object)],e.prototype,"context",void 0);e=i.__decorate([n.noView,n.autoinject,i.__metadata("design:paramtypes",[n.ViewCompiler,n.ViewSlot,n.Container,n.ViewResources])],e);return e}();t.InlineView=r}));define("controls/containers/qp-fieldset/qp-fieldset",["require","exports","tslib","aurelia-event-aggregator","aurelia-framework","descriptors/reflection-metadata","descriptors/base-view-model","descriptors/case-insensitive-map"],(function(e,t,i,n,r,a,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DataFieldDescriptor=t.QpFieldsetCustomElement=void 0;var l=function(){function e(e,t,i,n){this.element=e;this.eventAggregator=t;this.bindingEngine=i;this.labelSize=undefined;this.controlSize=undefined;this.inlineContext={};this.fieldNames=[];this.fields=new s.CaseInsensitiveMap;this.hasVisibleControls=false;this.replaceElements=n.elementInstruction.replaceParts;this.insertElements=n.elementInstruction.insertParts;this.existingFields=n.elementInstruction.existingFields;this.dataFields=n.elementInstruction.dataFields;this.viewName=this.element.getAttribute("view.bind")}e.prototype.viewChanged=function(e,t){var i=this;var n;var r=a.PXReflectionMetadata.getMetadata;var o=function(){var e,t;i.fields.clear();i.fieldNames.splice(0,i.fieldNames.length);var n=function(e){if(i.view.getField(e).skip===true)return"continue";if((t=i.existingFields)===null||t===void 0?void 0:t.find((function(t){return t.toLowerCase()===e.toLowerCase()})))return"continue";if(i.group&&!(i.view.getField(e).group===i.group))return"continue";i.fields.set(e,i.view.getField(e));i.fieldNames.push(e)};for(var r=0,a=(e=i.view)===null||e===void 0?void 0:e.fieldNames;r<a.length;r++){var o=a[r];n(o)}};(n=this.fieldsSubscription)===null||n===void 0?void 0:n.dispose();if(e){if(this.viewName){var s=r(this.bindingContext,this.viewName,"viewInfo");if(s)this.caption=s.displayName}e.name=this.viewName||undefined;if(!this.dataFields){if(e.fieldNames)o();this.fieldsSubscription=this.bindingEngine.collectionObserver(e.fieldNames).subscribe(o)}}};e.prototype.bind=function(e,t){Object.assign(this.inlineContext,e);this.inlineContext.labelSize=this.labelSize;this.inlineContext.controlSize=this.controlSize;this.inlineContext.viewName=this.viewName;this.bindingContext=e;this.viewChanged(this.view,undefined)};e.prototype.getFieldState=function(e,t){var i,n;return e?(i=this.bindingContext[e])===null||i===void 0?void 0:i.getField(t):(n=this.view)===null||n===void 0?void 0:n.getField(t)};e.prototype.attached=function(){var e=this;this.updateSubscription=this.eventAggregator.subscribe("screen-updated",(function(){if(e.dataFields){e.hasVisibleControls=e.dataFields.some((function(t){var i;return(i=e.getFieldState(t.viewName,t.name))===null||i===void 0?void 0:i.visible}))}else{e.hasVisibleControls=!e.view||e.fieldNames.some((function(t){var i;return(i=e.fields.get(t))===null||i===void 0?void 0:i.visible}))}}))};e.prototype.detached=function(){var e;(e=this.updateSubscription)===null||e===void 0?void 0:e.dispose()};i.__decorate([r.bindable,i.__metadata("design:type",o.BaseViewModel)],e.prototype,"view",void 0);i.__decorate([r.bindable,i.__metadata("design:type",String)],e.prototype,"group",void 0);i.__decorate([r.bindable,i.__metadata("design:type",String)],e.prototype,"caption",void 0);i.__decorate([r.bindable,i.__metadata("design:type",Object)],e.prototype,"labelSize",void 0);i.__decorate([r.bindable,i.__metadata("design:type",Object)],e.prototype,"controlSize",void 0);e=i.__decorate([r.processContent((function(e,t,i,n){var r;var a=[];var o=function(e,t,i){for(var n=0;n<e.length;n++){var r=e[n];a.push(r);var o=r.tagName==="TEMPLATE"?r.innerHTML:r.outerHTML;t.set(r.getAttribute(i)||"",o)}};var l=i.getAttribute("view.bind");var u=i.querySelectorAll("field");if(u&&u.length){var d=[];for(var p=0;p<u.length;p++){var f=u[p];var h=f===null||f===void 0?void 0:f.getAttribute("name");var v=void 0;var m=h===null||h===void 0?void 0:h.split(".",2);if(m&&m.length>1){v=m[0];h=m[1]}var g=(f===null||f===void 0?void 0:f.getAttribute("control-type"))||undefined;var b=!!(f===null||f===void 0?void 0:f.getAttribute("no-label"));if(h){var y=new c(h,v,g,b);y.template=(r=f.innerHTML)===null||r===void 0?void 0:r.trim();d.push(y)}}n.dataFields=d}else if(l){var x=i.querySelectorAll("*[replace-part]");var _=n.replaceParts=new s.CaseInsensitiveMap;o(x,_,"replace-part");var w=i.querySelectorAll("*[insert-after]");var S=n.insertParts=new s.CaseInsensitiveMap;o(w,S,"insert-after");var C=[];a.forEach((function(e){var t;var i=e;var n=(i===null||i===void 0?void 0:i.content)?i.content:e;(t=n.querySelectorAll("qp-field"))===null||t===void 0?void 0:t.forEach((function(e){return C.push(e)}))}));var E=[];C.forEach((function(e){var t;var i=(t=e.getAttribute("control-state.bind"))===null||t===void 0?void 0:t.split(".");if(i&&i[0]===l&&i[1]&&!_.has(i[1].toLowerCase())){E.push(i[1])}}));n.existingFields=E;i.innerHTML=""}else if(i.innerHTML){var M=document.createElement("template");M.setAttribute("replace-part","content");M.innerHTML=i.innerHTML;i.innerHTML="";i.appendChild(M)}return true})),r.autoinject,r.customElement("qp-fieldset"),i.__metadata("design:paramtypes",[Element,n.EventAggregator,r.BindingEngine,r.TargetInstruction])],e);return e}();t.QpFieldsetCustomElement=l;var c=function(){function e(e,t,i,n){this.name=e;this.viewName=t;this.controlType=i;this.noLabel=n}return e}();t.DataFieldDescriptor=c}));define("text!controls/containers/qp-fieldset/qp-fieldset.css",[],(function(){return".qp-fieldset\r\n{\r\n\tdisplay: inline-block;\r\n\tvertical-align: top;\r\n}\r\n.qp-fieldset fieldset\r\n{\r\n\tpadding: 0px;\r\n\tborder: 0px;\r\n\tmargin: 5px;\r\n\tmargin-top: 0px;\r\n}\r\n\r\n.qp-fieldset.has-caption fieldset\r\n{\r\n\tborder-top: 1px solid #007ACC;\r\n}\r\n\r\n.qp-fieldset legend\r\n{\r\n\tfont-size: 13px;\r\n\tcolor: #007ACC;\r\n\theight: 24px;\r\n\twidth: auto;\r\n\tpadding: 3px 6px 0px 0px;\r\n\ttext-transform: uppercase;\r\n\ttext-align: left;\r\n}\r\n\r\n.qp-fieldset fieldset > qp-field, .qp-fieldset fieldset > inline-view,\r\n.qp-fieldset fieldset > inline-view > qp-field\r\n{\r\n\tmargin-top: 5px;\r\n\tdisplay: block;\r\n}\r\n\r\n.size-xxs {\r\n\twidth: 40px !important;\r\n\t-webkit-box-flex: 0 !important;\r\n\t    -ms-flex-positive: 0 !important;\r\n\t        flex-grow: 0 !important;\r\n }\r\n\r\n .size-xs {\r\n\twidth: 70px !important;\r\n\t-webkit-box-flex: 0 !important;\r\n\t    -ms-flex-positive: 0 !important;\r\n\t        flex-grow: 0 !important;\r\n }\r\n\r\n .size-s {\r\n\twidth: 100px !important;\r\n\t-webkit-box-flex: 0 !important;\r\n\t    -ms-flex-positive: 0 !important;\r\n\t        flex-grow: 0 !important;\r\n }\r\n\r\n .size-sm {\r\n\twidth: 150px !important;\r\n\t-webkit-box-flex: 0 !important;\r\n\t    -ms-flex-positive: 0 !important;\r\n\t        flex-grow: 0 !important;\r\n }\r\n\r\n .size-m {\r\n\twidth: 200px !important;\r\n\t-webkit-box-flex: 0 !important;\r\n\t    -ms-flex-positive: 0 !important;\r\n\t        flex-grow: 0 !important;\r\n }\r\n\r\n .size-xm {\r\n\twidth: 250px !important;\r\n\t-webkit-box-flex: 0 !important;\r\n\t    -ms-flex-positive: 0 !important;\r\n\t        flex-grow: 0 !important;\r\n }\r\n\r\n .size-l {\r\n\twidth: 300px !important;\r\n\t-webkit-box-flex: 0 !important;\r\n\t    -ms-flex-positive: 0 !important;\r\n\t        flex-grow: 0 !important;\r\n }\r\n\r\n .size-xl {\r\n\twidth: 350px !important;\r\n\t-webkit-box-flex: 0 !important;\r\n\t    -ms-flex-positive: 0 !important;\r\n\t        flex-grow: 0 !important;\r\n }\r\n\r\n .size-xxl {\r\n\twidth: 400px !important;\r\n\t-webkit-box-flex: 0 !important;\r\n\t    -ms-flex-positive: 0 !important;\r\n\t        flex-grow: 0 !important;\r\n }\r\n\r\n .size-fit {\r\n\t-webkit-box-flex: 1;\r\n\t    -ms-flex-positive: 1;\r\n\t        flex-grow: 1;\r\n }"}));define("text!controls/containers/qp-fieldset/qp-fieldset.html",[],(function(){return'<template class="qp-fieldset ${caption ? \'has-caption\' : \'\'}" show.bind="hasVisibleControls"><require from="./qp-fieldset.css"></require><require from="./inline-view"></require><fieldset if.bind="hasVisibleControls"><legend if.bind="caption">${caption}</legend><template if.bind="dataFields"><template repeat.for="df of dataFields"><let state.bind="getFieldState(df.viewName, df.name)"></let><let visible.bind="state.visible === undefined  || state.visible !== false"></let><let size.bind="(!state.suppressLabel && state.displayName) ? controlSize : \'\'"></let><template if.bind="df.template"><inline-view template.bind="df.template" context.bind="$parent.inlineContext"></inline-view></template><template else><qp-field if.bind="visible" control-id="ed${df.viewName ? df.viewName : viewName}-${df.name}" control-type.bind="df.controlType" no-label.bind="df.noLabel" control-state.bind="state" label-size.bind="labelSize" control-size.bind="size"></qp-field></template></template></template><template if.bind="!dataFields && view"><template repeat.for="fn of fieldNames"><let state.bind="fields.get(fn)"></let><template if.bind="replaceElements.has(fn)"><inline-view template.bind="replaceElements.get(fn)" context.bind="$parent.inlineContext"></inline-view></template><template else><template if.bind="$first && insertElements.has(\'\')"><inline-view template.bind="insertElements.get(\'\')" context.bind="$parent.inlineContext"></inline-view></template><let visible.bind="state.visible === undefined  || state.visible !== false"></let><let size.bind="(!state.suppressLabel && state.displayName) ? controlSize : \'\'"></let><template if.bind="state.template"><inline-view template.bind="state.template" context.bind="view"></inline-view></template><template else><qp-field control-id="ed${viewName}-${fn}" if.bind="visible" control-state.bind="state" label-size.bind="labelSize" control-size.bind="size"></qp-field></template><template if.bind="insertElements.has(fn)"><inline-view template.bind="insertElements.get(fn)" context.bind="$parent.inlineContext"></inline-view></template></template></template></template><template if.bind="!dataFields && !view" replaceable part="content"></template></fieldset></template>'}));define("controls/custom/field-pair/qp-field-pair",["require","exports","tslib","aurelia-framework","controls/containers/qp-field/qp-field","controls/global/base-field-editor","descriptors/base-view-model","descriptors/fieldstate"],(function(e,t,i,n,r,a,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpFieldPairCustomElement=void 0;var l=function(e){i.__extends(t,e);function t(t,i){var n=e.call(this)||this;n.element=t;n.tq=i;n.firstConfig={};n.secondConfig={};n.addConfigSetter("viewModel",(function(e){return n.view=e}));n.addConfigSetter("secondName",(function(e){return n.secondName=e}));return n}Object.defineProperty(t.prototype,"firstControlType",{get:function(){return this.firstState?r.getDefaultControlType(this.firstState):undefined},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"secondControlType",{get:function(){return this.secondState?r.getDefaultControlType(this.secondState):undefined},enumerable:false,configurable:true});t.prototype.stateChanged=function(t,i){var n,r;e.prototype.stateChanged.call(this,t,i);this.firstState=this.state;this.firstConfig.id="ed"+((n=this.view)===null||n===void 0?void 0:n.name)+"-"+((r=this.firstState)===null||r===void 0?void 0:r.name)};t.prototype.secondNameChanged=function(e){var t,i,n;this.secondState=(t=this.view)===null||t===void 0?void 0:t.getField(e);this.secondConfig.id="ed"+((i=this.view)===null||i===void 0?void 0:i.name)+"-"+((n=this.secondState)===null||n===void 0?void 0:n.name)};i.__decorate([n.bindable,i.__metadata("design:type",s.PXFieldState)],t.prototype,"state",void 0);i.__decorate([n.bindable,i.__metadata("design:type",Object)],t.prototype,"config",void 0);i.__decorate([n.bindable,i.__metadata("design:type",o.BaseViewModel)],t.prototype,"view",void 0);i.__decorate([n.bindable,i.__metadata("design:type",String)],t.prototype,"secondName",void 0);i.__decorate([n.computedFrom("firstState.type","firstState.viewName","firstState.allowedValues","firstState.inputMask"),i.__metadata("design:type",Object),i.__metadata("design:paramtypes",[])],t.prototype,"firstControlType",null);i.__decorate([n.computedFrom("secondState.type","secondState.viewName","secondState.allowedValues","secondState.inputMask"),i.__metadata("design:type",Object),i.__metadata("design:paramtypes",[])],t.prototype,"secondControlType",null);t=i.__decorate([n.customElement("qp-field-pair"),n.autoinject,i.__metadata("design:paramtypes",[Element,n.TaskQueue])],t);return t}(a.QpBaseFieldEditor);t.QpFieldPairCustomElement=l}));define("text!controls/custom/field-pair/qp-field-pair.html",[],(function(){return'<template><div style="position:relative;display:flex;gap:5px"><div class="control-container size-s"><enhanced-compose if.bind="firstControlType" view-model.bind="firstControlType" config.bind="firstConfig" state.bind="firstState" value.two-way="firstState.value"></enhanced-compose></div><div class="control-container size-fit"><enhanced-compose if.bind="secondControlType" view-model.bind="secondControlType" config.bind="secondConfig" state.bind="secondState" value.two-way="secondState.value"></enhanced-compose></div></div></template>'}));define("descriptors/base-view-model",["require","exports","tslib","../apps/enhance/services/control-helper","aurelia-framework","./fieldstate","./reflection-metadata"],(function(e,t,i,n,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BaseViewModel=void 0;var s=function(){function e(){this.fieldNames=[]}e.prototype.getField=function(e){return this[e]};e.prototype.setField=function(e,t){this[e]=t};e.prototype.subscribeValueChanged=function(e,t,i){var n=this;var a=r.Container.instance.get(r.BindingEngine);var o=this.getField(t);if(o){return a.propertyObserver(o,"value").subscribe((function(t,r){return i(e,n,t,r)}))}};e.prototype.setFields=function(e){var t;var r=this;var s;var l=[];var c=0;var u=false;var d=function(t){var i=e[t];if(!p.getField(t))p.setField(t,a.createFieldState(p,t,(s=i.stateType)!==null&&s!==void 0?s:"default",i.args));if(i.type===n.NetType.DateTime&&typeof i.value==="string"){i.value=new Date(i.value)}var d=p.getField(t);Object.assign(d,i);d.applyOptions();var f=o.PXReflectionMetadata.getMetadataKeys(p,t);if(f)f.forEach((function(e){return d[e]=o.PXReflectionMetadata.getMetadata(r,t,e)}));l.push(t);if(!u&&p.fieldNames[c++]!==t)u=true};var p=this;for(var f in e){d(f)}if(u||l.length>this.fieldNames.length){(t=this.fieldNames).splice.apply(t,i.__spreadArray([0,this.fieldNames.length],l))}};e.prototype.setValue=function(e,t){var i=this[e];if(i)i.value=t};e.prototype.getValue=function(e){var t=this.getField(e);return t?t.value:undefined};e.prototype.getGenericValue=function(e){var t=this.getField(e);return t?t.value:undefined};return e}();t.BaseViewModel=s}));define("descriptors/case-insensitive-map",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CaseInsensitiveMap=void 0;var i=function(){function e(t){return Reflect.construct(Map,arguments,e)}e.prototype.set=function(e,t){if(typeof e==="string"){e=e.toLowerCase()}return Map.prototype.set.call(this,e,t)};e.prototype.get=function(e){if(typeof e==="string"){e=e.toLowerCase()}return Map.prototype.get.call(this,e)};e.prototype.has=function(e){if(typeof e==="string"){e=e.toLowerCase()}return Map.prototype.has.call(this,e)};e.prototype.clear=function(){Map.prototype.clear.call(this)};e.prototype.delete=function(e){if(typeof e==="string"){e=e.toLowerCase()}return Map.prototype.delete.call(this,e)};e.prototype.keys=function(){return Array.from(Map.prototype.keys.call(this)).map((function(e){if(typeof e==="string"){e=e.toLowerCase()}return e})).values()};return e}();t.CaseInsensitiveMap=i}));define("descriptors/customization",["require","exports","tslib","aurelia-framework"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.applyScreenMixin=t.extendsScreen=t.createFullCollection=t.createCollection=t.BaseViewModelCollection=t.createInstance=t.extendsViewModel=void 0;var r=new Map;function a(){var e=arguments[0];return function(t,i,n){if(e){if(!r.has(e))r.set(e,[]);r.get(e).push(t[i])}return t}}t.extendsViewModel=a;function o(e){var t=r.get(e.name);var i=e;if(t&&t.length>0){for(var n=0,a=t;n<a.length;n++){var o=a[n];i=o(i)}}return new i}t.createInstance=o;var s=function(e){i.__extends(t,e);function t(i,n){var r=e.call(this)||this;r.typeConstructor=i;r.config=n;Object.setPrototypeOf(r,t.prototype);return r}t.prototype.createInstance=function(){return new this.typeConstructor};t.prototype.setActiveRow=function(e){var t=e?this.find((function(t){return t.id===e})):undefined;return this.activeRow=t};t.prototype.setRows=function(e){this.splice(0);if(!e)return;for(var t=0,i=e;t<i.length;t++){var n=i[t];var r=this.createInstance();r.id=n.id;r.setFields(n.cells);this.push(r)}};return t}(Array);t.BaseViewModelCollection=s;function l(e,t){var i=r.get(e.name);var n=e;if(i&&i.length>0){for(var a=0,o=i;a<o.length;a++){var l=o[a];n=l(n)}}return new s(n,t)}t.createCollection=l;function c(e){var t=r.get(e.name);var i=e;if(t&&t.length>0){for(var n=0,a=t;n<a.length;n++){var o=a[n];i=o(i)}}var s=[];s.createInstance=function(){return new i};s.getGridData=function(){var e=s.columns;if(!e){return null}return{columns:e,rows:s.map((function(t){return{cells:e.map((function(e){var i=t.getField(e.field);if(!i){return null}return{value:i.value,text:i.value,readOnly:!i.enabled}}))}}))}};return s}t.createFullCollection=c;var u=new Map;function d(){var e=arguments[0];return function(t,i,n){if(i&&e){if(!u.has(e))u.set(e,[]);u.get(e).push(t[i])}return t}}t.extendsScreen=d;function p(e){var t,i,r;var a=u.get(e.name.toUpperCase());var o=e;n.PLATFORM.global.extensions=[];if(a&&a.length>0){for(var s=0,l=a;s<l.length;s++){var c=l[s];o=c(o);n.PLATFORM.global.extensions[o.name]={fileName:(t=o)===null||t===void 0?void 0:t.fileName,parentFileName:(r=(i=o)===null||i===void 0?void 0:i.__proto__)===null||r===void 0?void 0:r.fileName}}}return o}t.applyScreenMixin=p}));define("descriptors/fieldstate",["require","exports","tslib","aurelia-framework"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BooleanFieldState=t.NumberFieldState=t.DateFieldState=t.StringFieldState=t.AnyFieldState=t.FieldState=t.FieldStateDTO=t.createFieldState=t.registerFieldState=t.PXFieldStatePair=t.PXFieldStateGeneric=t.PXFieldState=t.DimensionLookupMode=t.PXSegment=t.PXFieldOptions=t.PXSelectorMode=t.PXErrorLevel=void 0;var r=new Map;var a;(function(e){e[e["Undefined"]=0]="Undefined";e[e["RowInfo"]=1]="RowInfo";e[e["Warning"]=2]="Warning";e[e["RowWarning"]=3]="RowWarning";e[e["Error"]=4]="Error";e[e["RowError"]=5]="RowError"})(a=t.PXErrorLevel||(t.PXErrorLevel={}));var o;(function(e){e[e["Undefined"]=0]="Undefined";e[e["NoAutocomplete"]=1]="NoAutocomplete";e[e["MaskAutocomplete"]=32]="MaskAutocomplete";e[e["AutocompleteMode"]=33]="AutocompleteMode";e[e["TextModeReadonly"]=2]="TextModeReadonly";e[e["TextModeEditable"]=4]="TextModeEditable";e[e["TextModeSearch"]=6]="TextModeSearch";e[e["TextMode"]=6]="TextMode";e[e["DisplayModeHint"]=0]="DisplayModeHint";e[e["DisplayModeValue"]=8]="DisplayModeValue";e[e["DisplayModeText"]=16]="DisplayModeText";e[e["DisplayMode"]=24]="DisplayMode"})(o=t.PXSelectorMode||(t.PXSelectorMode={}));var s;(function(e){e[e["Default"]=0]="Default";e[e["Readonly"]=1]="Readonly";e[e["Hidden"]=2]="Hidden";e[e["NoLabel"]=4]="NoLabel";e[e["Multiline"]=8]="Multiline"})(s=t.PXFieldOptions||(t.PXFieldOptions={}));var l=function(){function e(){}return e}();t.PXSegment=l;var c;(function(e){e[e["BySegmentedKeys"]=0]="BySegmentedKeys";e[e["BySegmentsAndAllAvailableSegmentValues"]=1]="BySegmentsAndAllAvailableSegmentValues";e[e["BySegmentsAndChildSegmentValues"]=2]="BySegmentsAndChildSegmentValues"})(c=t.DimensionLookupMode||(t.DimensionLookupMode={}));var u=function(){function e(e,t,i,n){this.autoPostback=false;this.unbound=false;this.errorLevel=a.Undefined;this.name=t;this.options=i;this.displayName=n}t=e;Object.defineProperty(e.prototype,"textValue",{get:function(){if(this.value==null)return"";else if(typeof this.value==="object"){return this.value.text?this.value.text:""}return this.value.toString()},enumerable:false,configurable:true});e.prototype.applyOptions=function(){if(this.options&&(this.options&s.Readonly)===s.Readonly){this.readOnly=true}if(this.options&&(this.options&s.NoLabel)===s.NoLabel){this.suppressLabel=true}if(this.options&&(this.options&s.Multiline)===s.Multiline){return this.multiLine=true}if(this.options&&(this.options&s.Hidden)===s.Hidden){return this.skip=true}};e.prototype.configureControl=function(e){};e.create=function(){var e=new t;e.visible=true;e.enabled=true;return e};e.createUnbound=function(e){if(e===void 0){e=undefined}var i=new t;i.unbound=true;i.visible=true;i.enabled=true;i.calculation=e;return i};var t;i.__decorate([n.computedFrom("value"),i.__metadata("design:type",String),i.__metadata("design:paramtypes",[])],e.prototype,"textValue",null);e=t=i.__decorate([f("default"),i.__metadata("design:paramtypes",[Object,Object,Number,String])],e);return e}();t.PXFieldState=u;var d=function(e){i.__extends(t,e);function t(t,i,n,r,a){var o=e.call(this,t,i,r,a)||this;o.keys=n;o.obj=t;return o}n=t;t.createGeneric=function(e,t,i){return new n(e,t,i)};Object.defineProperty(t.prototype,"fields",{get:function(){return this.keys.map((function(e){return e}))},enumerable:false,configurable:true});var n;t=n=i.__decorate([f("generic"),i.__metadata("design:paramtypes",[Object,String,Object,Number,String])],t);return t}(u);t.PXFieldStateGeneric=d;var p=function(e){i.__extends(t,e);function t(t,i,n,r,a){var o=e.call(this,t,i,r,a)||this;o.viewModel=t;o.secondName=n===null||n===void 0?void 0:n.toString();return o}Object.defineProperty(t.prototype,"controlType",{get:function(){return"qp-field-pair"},enumerable:false,configurable:true});t=i.__decorate([f("pair"),i.__metadata("design:paramtypes",[Object,String,Object,Number,String])],t);return t}(u);t.PXFieldStatePair=p;function f(e){return function(t){try{if(t)if(r&&!r.has(e))r.set(e,t)}catch(e){}}}t.registerFieldState=f;function h(e,t,n,a){var o;if(a)return new((o=r.get(n)).bind.apply(o,i.__spreadArray([void 0,e,t],a)));return new(r.get(n))(e,t)}t.createFieldState=h;var v=function(){function e(e,t,i){this.enabled=e;this.visible=t;this.value=i}return e}();t.FieldStateDTO=v;var m=function(e){i.__extends(t,e);function t(t,i,n){var r=e.call(this)||this;r.enabled=t;r.visible=i;r.typedValue=n;return r}Object.defineProperty(t.prototype,"typedValue",{get:function(){return this.value},set:function(e){this._typedValue=e},enumerable:false,configurable:true});t.prototype.configure=function(e){if(e){if(e.autoPostback)this.autoPostback=e.autoPostback;if(e.text)this.displayName=e.text;if(e.suppressLabel)this.suppressLabel=e.suppressLabel;if(e.readOnly)this.readOnly=e.readOnly;if(e.calculation)this.calculation=e.calculation;if(e.unbound)this.unbound=e.unbound}};return t}(u);t.FieldState=m;var g=function(e){i.__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.create=function(e,i){if(e===void 0){e=undefined}if(i===void 0){i=null}var n=new t(true,true,i);if(e)n.configure(e);return n};t.createUnbound=function(e){if(e===void 0){e=null}var i=new t(true,true,e);i.unbound=true;return i};return t}(m);t.AnyFieldState=g;var b=function(e){i.__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.create=function(e,i){if(e===void 0){e=undefined}if(i===void 0){i=null}var n=new t(true,true,i);if(e)n.configure(e);return n};return t}(m);t.StringFieldState=b;var y=function(e){i.__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.create=function(e,i){if(e===void 0){e=undefined}if(i===void 0){i=null}var n=new t(true,true,i);if(e)n.configure(e);return n};return t}(m);t.DateFieldState=y;var x=function(e){i.__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.create=function(e,i){if(e===void 0){e=undefined}if(i===void 0){i=null}var n=new t(true,true,i);if(e)n.configure(e);return n};return t}(m);t.NumberFieldState=x;var _=function(e){i.__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.create=function(e,i){if(e===void 0){e=undefined}if(i===void 0){i=null}var n=new t(true,true,i);if(e)n.configure(e);return n};return t}(m);t.BooleanFieldState=_}));define("descriptors/interface",["require","exports","tslib","./reflection-metadata","./fieldstate","./customization"],(function(e,t,i,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.placeAfterProperty=t.placeBeforeProperty=t.placeAfterView=t.placeBeforeView=t.viewInfo=t.graphInfo=t.featureInstalled=t.registerViewModelMixin=t.register=t.type=t.fieldInfo=t.calculation=t.multiLine=t.text=t.unbound=t.readOnly=t.suppressLabel=t.mappedToViewField=t.linkCommand=t.autoRefresh=t.headerDescription=t.autoPostback=t.skip=t.pair=t.group=t.ActionState=t.server=void 0;var o=function(e){i.__extends(t,e);function t(t){if(t===void 0){t=null}return e.call(this,true,true,t)||this}t.prototype.emulate=function(e){return new t(e)};return t}(r.AnyFieldState);t.server=new o;var s=function(){function e(e,t,i,n){this.enabled=t||false;this.visible=i||false;this.commandName=e||"";this.text=n||""}return e}();t.ActionState=s;function l(e){return function(t,i){C(t,i,"group",e)}}t.group=l;function c(e,t,i){if(t===void 0){t="s"}if(i===void 0){i="xs"}return function(n,r){C(n,r,"template",'<div style="position:relative;display: flex;">\n\t\t\t\t<qp-field control-id="ed'+r+'" control-state.bind="'+r+'" control-size="'+t+'" >\n\t\t\t\t</qp-field>\n\t\t\t\t<qp-field control-id="ed'+e+'" control-state.bind="'+e+'" control-size="'+i+'" >\n\t\t\t\t</qp-field>\n\t\t\t</div>');C(n,e,"skip",true)}}t.pair=c;function u(e,t){if(typeof e==="boolean"){return function(t,i){C(t,i,"skip",e)}}C(e,t,"skip",true)}t.skip=u;function d(e,t){if(typeof e==="boolean"){return function(t,i){C(t,i,"autoPostback",e)}}C(e,t,"autoPostback",true)}t.autoPostback=d;function p(e,t){if(typeof e==="boolean"){return function(t,i){C(t,i,"headerDescription",e)}}C(e,t,"headerDescription",true)}t.headerDescription=p;function f(e,t){if(typeof e==="boolean"){return function(t,i){C(t,i,"autoRefresh",e)}}C(e,t,"autoRefresh",true)}t.autoRefresh=f;function h(e){return function(t,i){C(t,i,"linkCommand",e)}}t.linkCommand=h;function v(e,t){return function(i,n){C(i,n,"mappedToViewField",{viewName:e,fieldName:t})}}t.mappedToViewField=v;function m(e,t){if(typeof e==="boolean"){return function(t,i){C(t,i,"suppressLabel",e)}}C(e,t,"suppressLabel",true)}t.suppressLabel=m;function g(e,t){if(typeof e==="boolean"){return function(t,i){C(t,i,"readOnly",e)}}C(e,t,"readOnly",true)}t.readOnly=g;function b(e,t){if(typeof e==="boolean"){return function(t,i){C(t,i,"unbound",e)}}C(e,t,"unbound",true)}t.unbound=b;function y(e){return function(t,i){C(t,i,"displayName",e)}}t.text=y;function x(e,t){if(typeof e==="boolean"){return function(t,i){C(t,i,"multiLine",e)}}C(e,t,"multiLine",true)}t.multiLine=x;function _(e){return function(t,i){C(t,i,"calculation",e)}}t.calculation=_;function w(e){return function(t,i){for(var n=0,r=Object.getOwnPropertyNames(e);n<r.length;n++){var a=r[n];C(t,i,a,e[a])}}}t.fieldInfo=w;function S(e){return function(t,i){C(t,i,"type",e)}}t.type=S;function C(e,t,i,r){n.PXReflectionMetadata.setMetadata(e,t,i,r)}function E(e){if(e===void 0){e={}}return function(e,t,i){return e}}t.register=E;function M(e){if(e===void 0){e={}}return function(e,t,i){return e}}t.registerViewModelMixin=M;function k(e){return function(t){console.log("featureInstalled: "+e)}}t.featureInstalled=k;function O(e){return function(t){n.PXReflectionMetadata.setMetadata(t,"graphInfo",e);return a.applyScreenMixin(t)}}t.graphInfo=O;function T(e){return function(t,i){C(t,i,"viewInfo",e)}}t.viewInfo=T;function P(e){return function(t){n.PXReflectionMetadata.setMetadata(t,"placeBeforeView",e)}}t.placeBeforeView=P;function F(e){return function(t){n.PXReflectionMetadata.setMetadata(t,"placeAfterView",e)}}t.placeAfterView=F;function j(e){return function(t,i){C(t,i,"placeBeforeProperty",e)}}t.placeBeforeProperty=j;function I(e){return function(t,i){C(t,i,"placeAfterProperty",e)}}t.placeAfterProperty=I}));define("descriptors/reflection-metadata",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PXReflectionMetadata=void 0;var i=function(){function e(){}e.setMetadata=function(e,t,i,n){if(!e)return;if(!e["__pxmetadata__"])e["__pxmetadata__"]={};if(n!==undefined&&t&&typeof i==="string"){if(!e["__pxmetadata__"][t])e["__pxmetadata__"][t]={};e["__pxmetadata__"][t][i]=n}else if(t){e["__pxmetadata__"][t]=i}};e.getMetadataKeys=function(e,t){if(!e)return undefined;if(!e["__pxmetadata__"])return undefined;if(t){if(!e["__pxmetadata__"][t])return undefined;return Object.getOwnPropertyNames(e["__pxmetadata__"][t])}else{return Object.getOwnPropertyNames(e["__pxmetadata__"])}};e.getMetadata=function(e,t,i){if(!e)return undefined;if(!e["__pxmetadata__"])return undefined;if(!e["__pxmetadata__"][t])return undefined;if(i)return e["__pxmetadata__"][t][i];else return e["__pxmetadata__"][t]};return e}();t.PXReflectionMetadata=i}));define("descriptors/screen-base-view-model",["require","exports","tslib","aurelia-dependency-injection","aurelia-framework","aurelia-event-aggregator","./base-view-model","../services/screen-service","./interface","./reflection-metadata","./case-insensitive-map","../services/screen-api-client","path"],(function(e,t,i,n,r,a,o,s,l,c,u,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ScreenBaseViewModel=void 0;p=i.__importStar(p);var f=function(){function e(e){this.container=e;this.actions=new u.CaseInsensitiveMap;this.actionNames=[];this.model=undefined;this.subscribers=[];this.graphInfo=c.PXReflectionMetadata.getMetadata(Object.getPrototypeOf(this).constructor,"graphInfo");this.eventAggregator=e.get(a.EventAggregator);e.registerInstance(d.ScreenApiClient,new d.ScreenApiClient(this.screenID));e.registerInstance(s.ScreenService,this.screenData=new s.ScreenService(this,e,this.graphInfo))}t=e;Object.defineProperty(e.prototype,"screenID",{get:function(){var e=this;while(e.__proto__.constructor&&e.__proto__.constructor.name!==t.name){e=e.__proto__}return e.constructor.name},enumerable:false,configurable:true});e.prototype.activate=function(e){if(e&&e.initialized!==undefined){this.model=e;e.viewModel=this}};Object.defineProperty(e.prototype,"viewName",{get:function(){var e=this.__proto__.constructor.fileName;var t=this.constructor.rootName;var i=p.relative(t,e);var n=i.substring(0,i.lastIndexOf(".ts"))+".html";return n},enumerable:false,configurable:true});e.prototype.clearActions=function(){var e,t;(e=this.actions)===null||e===void 0?void 0:e.clear();(t=this.actionNames)===null||t===void 0?void 0:t.splice(0)};e.prototype.attached=function(){return i.__awaiter(this,void 0,void 0,(function(){var e=this;return i.__generator(this,(function(t){switch(t.label){case 0:if(this.model&&(!this.model.viewName||this.model.viewName!==this.viewName)){this.model.viewName=this.viewName;return[2]}return[4,this.onBeforeInitialize()];case 1:t.sent();this.screenData.initialize().then((function(){e.eventAggregator.publish("screen-initialize-data-ready",e.screenID);e.attachFieldsValueHandlers();e.onInitialize();e.eventAggregator.publish("screen-initialized",e.screenID);e.onAfterInitialize()}),(function(t){e.eventAggregator.publish("screen-initialized",e.screenID);e.onInitializeError(t)}));return[2]}}))}))};e.prototype.setupParameters=function(e){var t=this[this.graphInfo.primaryView];for(var i in e){this.screenData.setScreenParameter(this.graphInfo.primaryView,i,e[i])}};e.prototype.getKeys=function(){var e={};var t=this[this.graphInfo.primaryView];for(var i in t){var n=t[i];if(!n)continue;if(n.primaryKey){e[i]=n.textValue}}return e};e.prototype.isNewEntry=function(){return this.screenData.isNewEntry};e.prototype.getCaptionText=function(){var e="";var t=undefined;var i=this[this.graphInfo.primaryView];for(var n in i){var r=i[n];if(!r)continue;if(r.primaryKey){e+=r.textValue+" ";t=r}}if(t){for(var n in i){var r=i[n];if(!r||!r.headerDescription||!r.textValue)continue;e+="- "+r.textValue}}return e};e.prototype.onBeforeInitialize=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){return[2]}))}))};e.prototype.onInitialize=function(){};e.prototype.onInitializeError=function(e){};e.prototype.onAfterInitialize=function(){this.screenData.executeCommand(null)};e.prototype.onActionsUpdate=function(){var e;if((e=this.screenData)===null||e===void 0?void 0:e.caption){this.screenData.caption.caption=this.getCaptionText();if(this.screenData.caption.caption)this.screenData.caption.hasCaption=true}};e.prototype.setActionStates=function(e){if(e){for(var t in e){if(!this.actions.get(t))this.actions.set(t,new l.ActionState(t));Object.assign(this.actions.get(t),e[t])}this.actionNames=Object.keys(e)}this.onActionsUpdate()};e.prototype.attachFieldsValueHandlers=function(){for(var e=0,t=Object.getOwnPropertyNames(this);e<t.length;e++){var i=t[e];var n=this[i];if(n&&n instanceof o.BaseViewModel){var r=Object.keys(n);var a=this.getAllFunctions(n);var s=function(e){var t=e.split("_");if(t.length===2&&r.some((function(e){return e===t[0]}))){l.attachValueHandler(e,i,t[0],n)}};var l=this;for(var c=0,u=a;c<u.length;c++){var d=u[c];s(d)}}}var p=Object.keys(this);var f=this.getAllFunctions(this);var h=function(e){var t=e.split("_");if(t.length===3&&p.some((function(e){return e===t[0]}))){v.attachValueHandler(e,t[0],t[1],v)}};var v=this;for(var m=0,g=f;m<g.length;m++){var d=g[m];h(d)}};e.prototype.attachValueHandler=function(e,t,i,n){var r=n[e];var a=this[t];if(a){var o=a.subscribeValueChanged(this,i,r);if(o)this.subscribers.push(o)}};e.prototype.detached=function(){this.subscribers.forEach((function(e){return e.dispose()}));this.subscribers.splice(0,this.subscribers.length);this.screenData.dispose()};e.prototype.getAllFunctions=function(e){var t=new Array;var i=e;do{t=t.concat(Object.getOwnPropertyNames(i));i=Object.getPrototypeOf(i)}while(i);return t.sort().filter((function(t,i,n){if(t!==n[i+1]&&typeof e[t]==="function")return true}))};var t;e=t=i.__decorate([r.inject(n.Container),i.__metadata("design:paramtypes",[n.Container])],e);return e}();t.ScreenBaseViewModel=f}));define("text!descriptors/screen-base-view-model.css",[],(function(){return'body\r\n{\r\n\theight: 100%;\r\n\tmargin: 0px;\r\n\tborder: 0px;\r\n\tline-height: normal !important;\r\n}\r\n\r\nbody, input, textarea\r\n{\r\n\tfont-family: Arial, sans-serif !important;\r\n\tfont-size: 13px;\r\n}\r\n\r\n*, *::before, *::after\r\n{\r\n\t-webkit-box-sizing: border-box;\r\n\t        box-sizing: border-box;\r\n}\r\n\r\n*:focus {\r\n\toutline: none;\r\n }\r\n \r\n/*--------------- Styles for render icons using css sprites ---------------*/\r\n.sprite-icon [class*="main-"], .sprite-icon [class*="control-"], .sprite-icon [class*="text-"]\r\n{\r\n\t/* use !important to prevent issues with browser extensions that change fonts */\r\n\tfont-family: \'FontAwesome\' !important;\r\n\tspeak: none;\r\n\tfont-style: normal;\r\n\tfont-weight: normal;\r\n\tfont-variant: normal;\r\n\ttext-transform: none;\r\n\tline-height: 1;\r\n\r\n\t/* Better Font Rendering =========== */\r\n\t-webkit-font-smoothing: antialiased;\r\n\t-moz-osx-font-smoothing: grayscale;\r\n}\t\r\n\r\n.sprite-icon \r\n{\r\n\tdisplay: inline-block;\r\n\tposition: relative;\r\n\ttext-align: left;\r\n\tvertical-align: middle;\r\n\toverflow: hidden;\r\n\tdirection: ltr;\r\n }\r\n\t \r\n.main-icon\r\n{\r\n\theight: 18px; width: 16px; font-size: 16px;\r\n}\r\n.main-icon-img \r\n{\r\n\tposition: absolute;\r\n}\r\n\r\n.control-icon \r\n{\r\n\theight: 12px;\r\n\twidth: 12px;\r\n\tfont-size: 12px;\r\n} \r\n.control-icon-img \r\n{\r\n\tposition: absolute;\r\n\ttop: 50%;\r\n\t-webkit-transform: translateY(-50%);\r\n\t        transform: translateY(-50%);\r\n}\r\n\r\n.control-icon[icon^="Selector"] \r\n{\r\n\twidth: 16px;\r\n\theight: 16px;\r\n\tfont-size: 16px;\r\n\topacity: 0.64;\r\n\tcursor: pointer; \r\n}'}));define("text!descriptors/screen-base-view-model.html",[],(function(){return'<template><require from="./screen-base-view-model.css"></require></template>'}));define("environment",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default={debug:false,testing:false}}));define("plugins/css-theme/css-theme",["require","exports","tslib"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.updateCssVariables=void 0;function n(e){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){return[2,e.fetch("frameset/cssvariables").then((function(e){return e.json()})).then((function(e){var t=document.createElement("style");t.innerHTML=":root {"+e.variables+"}";document.head.appendChild(t)}))]}))}))}t.updateCssVariables=n}));define("plugins/enhance-n-watch/index",["require","exports","tslib","./mutation-enhancer"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.configure=void 0;function r(e){e.aurelia.enhanceAndWatch=function(t,r){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(i){e.aurelia.__me=new n.MutationEnhancer(e.aurelia,t);e.aurelia.__me.watch(r);return[2,this.enhance(t,r)]}))}))};e.aurelia.stopWatch=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){if(e.aurelia.__me instanceof n.MutationEnhancer){e.aurelia.__me.unwatch()}return[2]}))}))}}t.configure=r}));define("plugins/enhance-n-watch/mutation-enhancer",["require","exports","aurelia-framework","aurelia-logging"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MutationEnhancer=void 0;var r=n.getLogger("enhance-watch");var a=function(){function e(e,t){this.au=e;this.bindingContext=t;this.enhanceSelector="";this.container=e.container;this.engine=e.container.get(i.TemplatingEngine)}e.prototype.watch=function(e){var t=this;this.enhanceSelector=Object.keys(this.au.resources.elements).filter((function(e){return["compose","router-view"].indexOf(e)===-1})).map((function(e){return e.toLowerCase()})).join(",");this.observer=new MutationObserver((function(e){t.onMutationcallback(e)}));this.observer.observe(i.PLATFORM.global.document,{childList:true,subtree:true})};e.prototype.unwatch=function(){if(this.observer){this.observer.disconnect()}};e.prototype.onMutationcallback=function(e){var t,i;for(var n=0,a=e;n<a.length;n++){var o=a[n];if(o.type==="childList"){for(var s=0;s<o.addedNodes.length;s++){var l=o.addedNodes[s];if(l.nodeType!==Node.ELEMENT_NODE){continue}var c=void 0;if(this.au.resources.getElement(l.nodeName.toLowerCase())){c=[l]}else{c=l.querySelectorAll(this.enhanceSelector)}for(var u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("au-target-id")){d.au.controller.attached()}else{this.engine.enhance({element:d,container:this.container,resources:this.au.resources,bindingContext:this.bindingContext})}}}for(var s=0;s<o.removedNodes.length;s++){var l=o.removedNodes[s];if(l.nodeType!==Node.ELEMENT_NODE){continue}var c=void 0;if(this.au.resources.getElement(l.nodeName.toLowerCase())){c=[l]}else{c=l.querySelectorAll(this.enhanceSelector)}for(var u=0;u<c.length;u++){var d=c[u];if(!d.au){r.warn("no au-target-id on removed node",d)}if(d.getAttribute("au-target-id")){(i=(t=d.au)===null||t===void 0?void 0:t.controller)===null||i===void 0?void 0:i.detached()}}}}}};return e}();t.MutationEnhancer=a}));define("plugins/glue/glue-to-custom-attribute",["require","exports","tslib","aurelia-templating","aurelia-logging","aurelia-pal","aurelia-event-aggregator","./index"],(function(e,t,i,n,r,a,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GlueToCustomAttribute=void 0;var l=r.getLogger("glue-to-attribute");var c=function(){function e(e,t){var i=this;this.ea=t;this.element=e;this.readyPromise=new Promise((function(e,t){i.signalReady=e}))}e.prototype.targetChanged=function(e,t){if(this.repositionSubscription){this.repositionSubscription.dispose();this.repositionSubscription=undefined}if(this.coordinateSystemSubscription){this.coordinateSystemSubscription.dispose();this.coordinateSystemSubscription=undefined}this.glueAndObserve()};e.prototype.glueAndObserve=function(){var e=this;this.readyPromise.then((function(){if(e.target){e.coordinateSystemSubscription=e.ea.subscribe(s.COORDINATE_SYSTEM_CHANGED_EVENT_NAME,(function(t){e.reconSquad();e.glueNow()}));e.repositionSubscription=e.ea.subscribe("repositioned:"+e.target.id,(function(){e.reconSquad();e.moveIfNecessary()}));e.reconSquad();e.initGlue();e.glueNow()}}))};e.prototype.attached=function(){this.signalReady();this.glueAndObserve()};e.prototype.initGlue=function(){var e=this.element.style;var t=e.maxWidth||e.width;var i=e.maxHeight||e.height;var n=this.element.getBoundingClientRect(),r=n.width,o=n.height;this.maxWidth=t&&parseInt(t)||r;this.maxHeight=i&&parseInt(i)||o;var s=a.PLATFORM.global.innerHeight-this.glueRect.bottom;var l=this.glueRect.top;this.direction=s>this.maxHeight||l<this.maxHeight?"down":"up"};e.prototype.reconSquad=function(){this.docRect=a.PLATFORM.global.document.documentElement.getBoundingClientRect();this.glueRect=this.target.getBoundingClientRect()};e.prototype.detached=function(){if(this.repositionSubscription){this.repositionSubscription.dispose();this.repositionSubscription=undefined}if(this.coordinateSystemSubscription){this.coordinateSystemSubscription.dispose();this.coordinateSystemSubscription=undefined}if(this.resizeObserver){this.resizeObserver.unobserve(this.element)}};e.prototype.moveIfNecessary=function(){var e=this.element.getBoundingClientRect();if(e.top===this.glueRect.bottom&&(e.left<=this.glueRect.left&&e.right>=this.glueRect.right))return;this.glueNow()};e.prototype.glueNow=function(){var e;var t=this.element;var i=t.getBoundingClientRect().width;var n;var r;var a;var o=this.glueRect.width||this.glueRect.right-this.glueRect.left;var s=this.glueRect.left+Math.min(this.maxWidth,i)>this.docRect.width;if(s){var l=Math.max(this.glueRect.right,this.docRect.right);r=l}else{r=this.glueRect.left}var c=t.style;if(this.direction==="up"){n=this.glueRect.top;a=s?"translate(-100%,-100%)":"translateY(-100%)"}else{n=this.glueRect.bottom;a=s?"translateX(-100%)":""}if(!c.minWidth&&!((e=this.options)===null||e===void 0?void 0:e.doNotsetMinWidthToTarget)){c.minWidth=o+"px"}c.position="fixed";c.left=r+"px";c.top=n+"px";c.transform=a};i.__decorate([n.bindable({primaryProperty:true}),i.__metadata("design:type",Object)],e.prototype,"target",void 0);i.__decorate([n.bindable,i.__metadata("design:type",Object)],e.prototype,"options",void 0);e=i.__decorate([n.customAttribute("glue-to"),i.__metadata("design:paramtypes",[Element,o.EventAggregator])],e);return e}();t.GlueToCustomAttribute=c}));define("plugins/glue/index",["require","exports","aurelia-framework","./glue-to-custom-attribute","aurelia-event-aggregator"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.configure=t.COORDINATE_SYSTEM_CHANGED_EVENT_NAME=void 0;t.COORDINATE_SYSTEM_CHANGED_EVENT_NAME="absolute-positions-are-screwed";function a(e){e.globalResources([n.GlueToCustomAttribute]);var a=e.container.get(r.EventAggregator);e.postTask((function(){i.PLATFORM.global.document.addEventListener("scroll",(function(e){o(e)}),{capture:true,passive:true});i.PLATFORM.global.addEventListener("resize",(function(e){o(e)}),{passive:true})}));function o(e){a.publish(t.COORDINATE_SYSTEM_CHANGED_EVENT_NAME,e)}}t.configure=a}));define("plugins/happeded-on-body/index",["require","exports","aurelia-framework","aurelia-event-aggregator"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.configure=t.DROP_ON_BODY=t.RESIZE_WINDOW=t.MOUSE_DOWN_REACHED_BODY=void 0;t.MOUSE_DOWN_REACHED_BODY="mouse-down-reached-body";t.RESIZE_WINDOW="resize-window";t.DROP_ON_BODY="drop_on_body";function r(e){var r=e.container.get(n.EventAggregator);e.postTask((function(){i.PLATFORM.global.document.addEventListener("mousedown",(function(e){a(e)}))}));function a(e){r.publish(t.MOUSE_DOWN_REACHED_BODY,e)}e.postTask((function(){i.PLATFORM.global.addEventListener("resize",(function(){o()}))}));function o(){var e={delay:250,timeoutId:undefined};if(e.timeoutId)clearTimeout(e.timeoutId);e.timeoutId=setTimeout((function(){r.publish(t.RESIZE_WINDOW)}),e.delay)}e.postTask((function(){i.PLATFORM.global.document.addEventListener("drop",(function(e){s(e)}))}));function s(e){r.publish(t.DROP_ON_BODY,e)}}t.configure=r}));define("plugins/hover-activator-service/hover-activator-service",["require","exports","aurelia-framework"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.HoverActivatorService=void 0;var n=500;var r=32;var a=function(){function e(){var e=this;this.hoverDelegate=function(t){return e.mouseMoveHandler(t)};this.keyDelegate=function(t){return e.keyDownHandler(t)};this.scrollDelegate=function(){return e.scrollHappened()};this.resizeDelegate=function(){return e.resizeHappened()};this.activators=new Map;this.actionTriggerTimers=[];this.lastMouseCoords={x:0,y:0};i.DOM.addEventListener("mousemove",this.hoverDelegate,true);i.DOM.addEventListener("keydown",this.keyDelegate,true);i.DOM.addEventListener("scroll",this.scrollDelegate,true);i.PLATFORM.global.addEventListener("resize",this.resizeDelegate,{passive:true})}e.prototype.mouseMoveHandler=function(e){var t=this;if(i.PLATFORM.global.__suppressTooltip){return}if(!this.legacyTM&&i.PLATFORM.global.px_tm){this.legacyTM=i.PLATFORM.global.px_tm;this.legacyHideTooltip=this.legacyTM.hideTooltip;if(this.legacyTM){i.PLATFORM.global.px_tm.hideTooltip=function(){t.deactivateActiveSubscribers();t.legacyHideTooltip.call(t.legacyTM)}}}var n=e.target;this.lastMouseCoords={x:e.clientX,y:e.clientY};if(this.currentTarget===n){return}this.clearActionTimers();this.deactivateActiveSubscribers(n);this.actionTriggerTimers.push(setTimeout((function(){return t.lockTarget(n)}),r))};e.prototype.keyDownHandler=function(e){};e.prototype.scrollHappened=function(){this.deactivateByUserActivity()};e.prototype.resizeHappened=function(){this.deactivateByUserActivity()};e.prototype.clearActionTimers=function(){this.actionTriggerTimers.forEach((function(e){clearTimeout(e)}));this.actionTriggerTimers=[]};e.prototype.deactivateByUserActivity=function(e){this.clearActionTimers();this.deactivateActiveSubscribers()};e.prototype.deactivateActiveSubscribers=function(e){var t,i;if(e===void 0){e=null}var n=((t=this.activeSubscribers)===null||t===void 0?void 0:t.filter((function(t){var i;return!t.subscribersOptions.cssRule&&t.activator.contains(e)||((i=t.subscribersOptions.activatedElements)===null||i===void 0?void 0:i.find((function(t){return t.contains(e)})))})))||[];(i=this.activeSubscribers)===null||i===void 0?void 0:i.filter((function(e){return n.indexOf(e)===-1})).forEach((function(e){return e.subscribersOptions.onDeactivate()}));if(n.length){this.activeSubscribers=n}else{this.activeSubscribers=undefined}};e.prototype.findActivators=function(e){var t=e;var i=[];while(t){if(t.getAttribute("error")){t=undefined}else{var n=this.activators.get(t);if(n){n.forEach((function(e){i.push({activator:t,subscribersOptions:e})}))}t=t.parentElement||undefined}}return i};e.prototype.getActivationParams=function(e){var t=e.getBoundingClientRect(),i=t.left,n=t.top,r=t.width;var a=this.lastMouseCoords.x-i;var o=this.lastMouseCoords.y-n;return{target:e,targetW:r,targetTop:n,mouseX:this.lastMouseCoords.x,mouseY:this.lastMouseCoords.y,relativeX:a,relativeY:o}};e.prototype.lockTarget=function(e){this.clearActionTimers();this.currentTarget=e;this.activeSubscribers=this.findActivators(e);for(var t=0,i=this.activeSubscribers;t<i.length;t++){var n=i[t];this.queueActivation(e,n)}};e.prototype.targetVisible=function(e){var t=e===null||e===void 0?void 0:e.getBoundingClientRect(),i=t.width,n=t.height;return i>0&&n>0};e.prototype.queueActivation=function(e,t){var i=this;var r=t.subscribersOptions.activateAfter||n;if(!t.subscribersOptions.cssRule){this.actionTriggerTimers.push(setTimeout((function(){return i.targetVisible(e)&&t.subscribersOptions.onActivate(i.getActivationParams(e))}),r))}else{var a=t.activator.querySelectorAll(t.subscribersOptions.cssRule);var o=function(n){var o=a[n];if(e==o||o.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY){s.actionTriggerTimers.push(setTimeout((function(){return i.targetVisible(e)&&t.subscribersOptions.onActivate(i.getActivationParams(o))}),r));return"break"}};var s=this;for(var l=0;l<a.length;l++){var c=o(l);if(c==="break")break}}};e.prototype.subscribeTo=function(e,t){var i=this;var n=this.activators.get(e)||[];n.push(t);this.activators.set(e,n);return{dispose:function(){var n;var r=((n=i.activators.get(e))===null||n===void 0?void 0:n.filter((function(e){return e!=t})))||[];if(r.length>0){i.activators.set(e,r)}else{i.activators.delete(e)}}}};e.prototype.selfActivate=function(e,t){this.clearActionTimers();this.deactivateActiveSubscribers();this.activeSubscribers=[{activator:e,subscribersOptions:t}];t.onActivate(this.getActivationParams(e));this.currentTarget=undefined};e.prototype.selfHide=function(e,t){var i;t===null||t===void 0?void 0:t.onDeactivate();var n=((i=this.activeSubscribers)===null||i===void 0?void 0:i.filter((function(e){return e.subscribersOptions!==t})))||[];if(n.length==0){this.activeSubscribers=undefined}else{this.activeSubscribers=n}};return e}();t.HoverActivatorService=a}));define("plugins/hover-activator-service/index",["require","exports","./hover-activator-service"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.configure=void 0;function n(e){e.singleton(i.HoverActivatorService)}t.configure=n}));define("plugins/payment/qp-authorize-net",["require","exports","tslib","../../apps/enhance/services/control-helper","aurelia-framework","aurelia-framework"],(function(e,t,i,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpAuthorizeNetCustomElement=void 0;var o="Accept_SANDBOX";var s="Accept_PRODUCTION";var l="https://jstest.authorize.net/v1/Accept.js";var c="https://js.authorize.net/v1/Accept.js";var u=function(){function e(e){this.element=e;this.cardData={cardNumber:"",month:"",year:"",cardCode:""};this.authData={clientKey:"",apiLoginID:""};this.secureData={authData:this.authData,cardData:this.cardData}}e.prototype.attached=function(){this.initPopup()};e.prototype.initPopup=function(){this.options=JSON.parse(this.element.getAttribute("options")||"");this.authData.clientKey=this.options.clientKey;this.authData.apiLoginID=this.options.apiLoginID;switch(this.options.type){case o:n.loadScript(l,this.initHostedForm.bind(this));break;case s:n.loadScript(c,this.initHostedForm.bind(this));break}};e.prototype.closePaymentForm=function(){this.cardData.cardNumber="";this.cardData.month="";this.cardData.year="";this.cardData.cardCode="";this.element.style.display="none"};e.prototype.initHostedForm=function(){this.element.style.display="block"};e.prototype.sendPaymentDataToAnet=function(){var e=this;Accept.dispatchData(this.secureData,(function(t){if(t.messages.resultCode==="Error"){var i=0;while(i<t.messages.message.length){console.log(t.messages.message[i].code+":"+t.messages.message[i].text);i=i+1}}else{var n=r.PLATFORM.global.px_cm.findDataSource();n.executeCommand("SyncPaymentTransaction",t.opaqueData.dataValue);e.closePaymentForm()}}))};e=i.__decorate([r.customElement("qp-authorize-net"),r.autoinject,a.useView("./qp-authorize-net.html"),i.__metadata("design:paramtypes",[Element])],e);return e}();t.QpAuthorizeNetCustomElement=u}));define("plugins/payment/qp-authorize-net-hosted-form",["require","exports","tslib","aurelia-framework","../../apps/enhance/services/control-helper","aurelia-framework"],(function(e,t,i,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpAuthorizeNetHostedFormCustomElement=t.configure=void 0;function o(e){e.globalResources([d])}t.configure=o;var s="AcceptUI_SANDBOX";var l="AcceptUI_PRODUCTION";var c="https://jstest.authorize.net/v3/AcceptUI.js";var u="https://js.authorize.net/v3/AcceptUI.js";var d=function(){function e(e){this.element=e}e.prototype.attached=function(){this.initPopup()};e.prototype.initPopup=function(){this.options=JSON.parse(this.element.getAttribute("options")||"");var e=document.getElementById("acceptButton");e.setAttribute("data-apiLoginID",this.options.apiLoginID);e.setAttribute("data-clientKey",this.options.clientKey);switch(this.options.type){case s:r.loadScript(c,(function(){e.click()}));break;case l:r.loadScript(u,(function(){e.click()}));break}n.PLATFORM.global.responseHandler=function(e){if(e.messages.resultCode==="Error"){var t=0;while(t<e.messages.message.length){console.log(e.messages.message[t].code+":"+e.messages.message[t].text);t=t+1}}else{var i=n.PLATFORM.global.px_cm.findDataSource();i.executeCommand("SyncPaymentTransaction",e.opaqueData.dataValue)}}};e=i.__decorate([a.customElement("qp-authorize-net-hosted-form"),i.__metadata("design:paramtypes",[Element])],e);return e}();t.QpAuthorizeNetHostedFormCustomElement=d}));define("text!plugins/payment/qp-authorize-net-hosted-form.html",[],(function(){return'<template id="${config.id}" class="${config.class}"><style>#AcceptUIContainer button{background-color:#00f}</style><form id="paymentForm" style="opacity:0" method="POST"><input type="hidden" name="dataValue" id="dataValue"> <input type="hidden" name="dataDescriptor" id="dataDescriptor"> <button id="acceptButton" type="button" class="AcceptUI" data-billingaddressoptions=\'{"show":true, "required":false}\' data-acceptuiformbtntxt="Submit" data-acceptuiformheadertxt="Card Information" data-responsehandler="responseHandler">Pay</button></form></template>'}));define("text!plugins/payment/qp-authorize-net.css",[],(function(){return"qp-authorize-net div{\r\n    padding: 15px;\r\n    position: fixed;\r\n    top: 25%;\r\n    left: 25%;\r\n    background-color: aliceblue;\r\n    border: solid 1px black;\r\n    z-index: 20000;\r\n}\r\n#paymentForm.show-payment-form {\r\n    display: block;\r\n}\r\n#paymentForm:not(.show-payment-form) {\r\n    display: none;\r\n}"}));define("text!plugins/payment/qp-authorize-net.html",[],(function(){return'<template id="${config.id}" class="${config.class}"><require from="./qp-authorize-net.css"></require><div ref="paymentForm"><p><label>Card Number</label> <input type="text" maxlength="16" value.bind="cardData.cardNumber"></p><p><label>Month</label> <input type="text" maxlength="2" value.bind="cardData.month"></p><p><label>Year</label> <input type="text" maxlength="4" value.bind="cardData.year"></p><p><label>Card Code</label> <input type="text" maxlength="3" value.bind="cardData.cardCode"></p><p><button ref="okPayButton" type="button" click.delegate="sendPaymentDataToAnet()">Pay</button> <button ref="cancelPayButton" type="button" click.delegate="closePaymentForm()">Cancel</button></p></div></template>'}));define("plugins/payment/qp-stripe",["require","exports","tslib","../../apps/enhance/services/localization","../../apps/enhance/services/control-helper","aurelia-framework","aurelia-fetch-client"],(function(e,t,i,n,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpStripeCustomElement=void 0;var s=["Name","AddressLine1","AddressLine2","City","State","Zip","Phone","Email"];var l="https://js.stripe.com/v3/";var c=function(){function e(e,t){var i=this;this.element=e;this.http=t;this.title="";this.buttonCaption="";this.sum="";this.currency="";this.errors="";this.notReady=true;this.fields=s;this.completeData={cardNumber:false,cvc:false,expirationDate:false};this.shiftX=0;this.shiftY=0;this.separateBefore="Phone";this.isMobile=false;this._bindMouseMove=function(e){return i.onMouseMove(e)};this._bindRemoveMouseListeners=function(){return i.removeMouseListeners()};this.localizedStrings=n.LOCALIZED_STRINGS.payment}e.prototype.attached=function(){this.isMobile=!this.getDataSource();this.initPopup()};e.prototype.initPopup=function(){var e=this;this.options=JSON.parse(this.element.getAttribute("options")||"");this.options.required=["AddressLine1","Zip"];if(this.options.AddressVerification){this.options.required.forEach((function(t){e.completeData[t]=false}))}this.element.style.display="block";r.loadScript(l,this.initHostedForm.bind(this))};e.prototype.keyDown=function(e){switch(e.key){case"Enter":if(this.payButton.getAttribute("disabled")===null)this.submitPayment(e);break;case"Esc":case"Escape":this.cancelAndClosePaymentForm();break}return true};e.prototype.keyInputDown=function(e,t,i){if(e.key==="Tab"){e.preventDefault();e.stopPropagation();document.getElementById(e.shiftKey?i:t).focus()}return true};e.prototype.initHostedForm=function(){var e=this;this.stripe=Stripe(this.options.ApiLoginID,{apiVersion:this.options.ApiVersion,locale:this.options.Locale});var t=this.stripe.elements();var i={base:{fontSize:"13px",color:"#32325d","::placeholder":{color:"#C6C6C6"}}};this.cardNumber=t.create("cardNumber",{showIcon:true,style:i,placeholder:"0000 0000 0000 0000"});this.cardNumber.mount("#card-number");var n=t.create("cardExpiry",{style:i});this.cardNumber.on("change",(function(t){e.updateComplete(e.cardNumberLabel,"cardNumber",t.complete);if(t.complete)n.focus();if(t.error){}e.checkCompleteness()}));this.updateComplete(this.cardNumberLabel,"cardNumber",false);this.cardNumber.on("ready",(function(){e.cardNumber.focus()}));n.mount("#card-expiry");var r=t.create("cardCvc",{style:i});this.updateComplete(this.cardExpiryLabel,"expirationDate",false);r.mount("#card-cvc");n.on("change",(function(t){e.updateComplete(e.cardExpiryLabel,"expirationDate",t.complete);if(t.complete)r.focus();if(t.error){}e.checkCompleteness()}));this.updateComplete(this.cardCvcLabel,"cvc",false);r.on("change",(function(t){e.updateComplete(e.cardCvcLabel,"cvc",t.complete);if(t.complete)e.payButton.focus();if(t.error){}e.checkCompleteness()}));this.payButton.addEventListener("click",this.submitPayment.bind(this));switch(this.options.Mode){case"payment":this.sum=this.options.Amount;this.currency=this.options.Currency;this.title=this.localizedStrings.TitlePay;this.buttonCaption=this.localizedStrings.Pay;break;case"newProfile":this.title=this.localizedStrings.TitleCreateProfile;this.buttonCaption=this.localizedStrings.Save;break}this.fields.forEach((function(t){var i=document.getElementById(t);i.value=e.options[t]||"";if(e.completeData[t]!==undefined){i.previousElementSibling.setAttribute("required","");e.checkFieldCompleteness(i);i.onkeyup=e.checkFieldCompleteness.bind(e,i)}}))};e.prototype.checkFieldCompleteness=function(e){this.updateComplete(e.previousElementSibling,e.id,e.value!="");this.checkCompleteness()};e.prototype.updateComplete=function(e,t,i){this.completeData[t]=i;if(i){e.classList.remove("field-warning")}else{e.classList.add("field-warning");this.completeData[e.id]=false}};e.prototype.checkCompleteness=function(){var e=this;var t=true;if(this.options.AddressVerification){this.options.required.forEach((function(i){if(!e.completeData[i])t=false}))}if(this.completeData.cardNumber&&this.completeData.expirationDate&&this.completeData.cvc&&t){this.payButton.removeAttribute("disabled")}else{this.payButton.setAttribute("disabled","")}};e.prototype.submitPayment=function(e){var t=this;e.preventDefault();var i=document.getElementById("payment-form");var n=function(e){var t=i.querySelector(e);return t&&t.value||undefined};var r={name:n("#Name"),email:n("#Email"),phone:n("#Phone"),address:{city:n("#City"),line1:n("#AddressLine1"),line2:n("#AddressLine2"),postal_code:n("#Zip"),state:n("#State")}};switch(this.options.Mode){case"payment":this.stripe.confirmCardPayment(this.options.ClientKey,{payment_method:{card:this.cardNumber,billing_details:r}}).then((function(e){if(e.error){t.errors=e.error.message}else{t.stripePaymentHandler(e.paymentIntent.id,"SyncPaymentTransaction")}}));break;case"newProfile":this.stripe.createSource(this.cardNumber,{owner:r}).then((function(e){if(e.error){t.errors=e.error.message}else{t.stripePaymentHandler(e.source.id,"SyncCCPaymentMethods")}}));break}};e.prototype.executeCommand=function(e,t){var i=this.getDataSource();if(i){i.executeCommand(e,t)}else{window.location.replace(this.createUrlForMobile(e,t))}};e.prototype.createUrlForMobile=function(e,t){return window.location.href.split("/Frames/")[0]+"/CCService?ServiceAction=AcceptPluginPayment"+this.element.getAttribute("mobileOptions")+"&Command="+e+"&Result="+t};e.prototype.callGraphMethod=function(e,t,i){this.http.fetch("ui/plugin/"+e+"/"+t+"/"+i+"/info",{method:"Post",headers:{"X-XSRF-TOKEN":a.PLATFORM.global.px.GetAntiForgeryToken()}})};e.prototype.stripePaymentHandler=function(e,t){var i=document.getElementById("payment-form");var n=document.createElement("input");n.setAttribute("type","hidden");n.setAttribute("name","stripeToken");n.setAttribute("value",e);i.appendChild(n);var r=a.PLATFORM.global.px_cm.findDataSource();r.executeCommand(t,e);this.closePaymentForm()};e.prototype.getDataSource=function(){return a.PLATFORM.global.px_cm.findDataSource()||window.parent.parent.px_cm.findDataSource()};e.prototype.cancelAndClosePaymentForm=function(){switch(this.options.Mode){case"payment":this.executeCommand("SyncPaymentTransaction","__CLOSECCHFORM");break;case"newProfile":this.executeCommand("SyncCCPaymentMethods","__CLOSECCHFORM");break}this.closePaymentForm()};e.prototype.closePaymentForm=function(){this.element.parentElement.removeChild(this.element)};e.prototype.mouseDown=function(e){this.shiftX=e.clientX-this.paymentForm.getBoundingClientRect().left;this.shiftY=e.clientY-this.paymentForm.getBoundingClientRect().top;this.element.addEventListener("mousemove",this._bindMouseMove);this.element.addEventListener("mouseup",this._bindRemoveMouseListeners);this.element.addEventListener("mouseleave",this._bindRemoveMouseListeners);this.paymentForm.classList.add("payment-form-being-dragged")};e.prototype.onMouseMove=function(e){this.paymentForm.style.left=e.pageX-this.shiftX+"px";this.paymentForm.style.top=e.pageY-this.shiftY+"px"};e.prototype.removeMouseListeners=function(){this.element.removeEventListener("mousemove",this._bindMouseMove);this.element.removeEventListener("mouseup",this._bindRemoveMouseListeners);this.element.removeEventListener("mouseleave",this._bindRemoveMouseListeners);this.paymentForm.classList.remove("payment-form-being-dragged")};i.__decorate([a.bindable,i.__metadata("design:type",HTMLElement)],e.prototype,"payButton",void 0);i.__decorate([a.bindable,i.__metadata("design:type",HTMLElement)],e.prototype,"paymentForm",void 0);i.__decorate([a.bindable,i.__metadata("design:type",HTMLElement)],e.prototype,"cardNumberLabel",void 0);i.__decorate([a.bindable,i.__metadata("design:type",HTMLElement)],e.prototype,"cardExpiryLabel",void 0);i.__decorate([a.bindable,i.__metadata("design:type",HTMLElement)],e.prototype,"cardCvcLabel",void 0);e=i.__decorate([a.customElement("qp-stripe"),a.autoinject,a.useView("./qp-stripe.html"),i.__metadata("design:paramtypes",[Element,o.HttpClient])],e);return e}();t.QpStripeCustomElement=c}));define("text!plugins/payment/qp-stripe.css",[],(function(){return'qp-stripe{\r\n    width: 100%;\r\n    height: 100%;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    z-index: 20000;\r\n}\r\nqp-stripe .ac-warning{\r\n    font-size: 20px;\r\n    color: black;\r\n    float: left;\r\n    margin: 9px;\r\n}\r\n.payment-form-background {\r\n    position: fixed;\r\n    background-color: rgba(0, 0, 0, 0.2);\r\n    width:100%;\r\n    height:100%;\r\n}\r\n.payment-form-being-dragged {\r\n    opacity: 0.75;\r\n}\r\n.form-errors{\r\n    background-color: #FFD7D7;\r\n    width: 100%;\r\n    border-radius: 8px;\r\n}\r\n#card-errors {\r\n    padding: 10px;\r\n    padding-left: 40px;\r\n    font-size: 13px;\r\n    word-wrap: break-word;\r\n}\r\n#payment-form {\r\n    padding: 20px;\r\n    position: absolute;\r\n    background: #FFFFFF;\r\n    overflow: hidden;\r\n}\r\n#payment-form:not(.payment-mobile){\r\n    -webkit-box-shadow: 0px 0px 16px rgba(115, 115, 115, 0.5);\r\n            box-shadow: 0px 0px 16px rgba(115, 115, 115, 0.5);\r\n    border-radius: 10px;\r\n    width: 420px;\r\n    top: 15%;\r\n    left: calc(50% - 460px / 2);\r\n}\r\n.payment-form-background .payment-mobile {\r\n\tdisplay: none;\r\n}\r\n#payment-form label {\r\n    margin: 2px;\r\n    font-size: 13px;\r\n    color: #222222;\r\n}\r\n#card-number {\r\n    width: 242px;\r\n    line-height: 26px;\r\n    vertical-align: middle;\r\n}\r\n.card-expiry {\r\n    margin-top: 16px;\r\n}\r\n#card-expiry {\r\n    width: 81px;\r\n}\r\n#payment-form label.payment-form-label {\r\n    left: 20px;\r\n    top: 20px;\r\n    font-size: 22px;\r\n    color: #000000;\r\n}\r\n#payment-form i.ac.ac-close.ac-pull-right {\r\n    font-size: 20px;\r\n}\r\n#additional-payment-info{\r\n    padding-top: 10px;\r\n}\r\n#additional-payment-info div {\r\n    margin: 5px 0;\r\n    display: -webkit-box;\r\n    display: -ms-flexbox;\r\n    display: flex;\r\n    -webkit-box-pack: justify;\r\n        -ms-flex-pack: justify;\r\n            justify-content: space-between;\r\n    -webkit-box-align: center;\r\n        -ms-flex-align: center;\r\n            align-items: center;\r\n}\r\n#additional-payment-info label, .payment-amount-label {\r\n    display: inline-block;\r\n    max-width: 150px;\r\n}\r\n#additional-payment-info input{\r\n    width: 250px;\r\n}\r\n#additional-payment-info label[required]:before, .card-front label[required]:before, .card-back label[required]:before {\r\n    content:"* ";\r\n}\r\n.field-warning:before {\r\n    color: red;\r\n}\r\n#additional-payment-info .payment-form-input {\r\n    height: 16px;\r\n    padding: 4px 8px 4px 8px;\r\n    left: 200px;\r\n}\r\n.payment-form-input {\r\n    background: #FFFFFF;\r\n    border: 1px solid rgba(0, 0, 0, 0.19);\r\n    border-radius: 5px;\r\n}\r\n.payment-form-input:focus, \r\n.StripeElement--focus {\r\n    border: 2px solid #027ACC;\r\n    margin: -1px;\r\n}\r\n.payment-card {\r\n    position: relative;\r\n    height: 150px; \r\n    margin-top: 14px;\r\n}\r\n.card-front {\r\n    position: absolute;\r\n    width: 256px;\r\n    height: 117px;\r\n    background: #DCECF8;\r\n    border-radius: 8px;\r\n    z-index: 1;\r\n    padding: 16px;\r\n}\r\n.card-back {\r\n    position: absolute;\r\n    width: 134px;\r\n    height: 123px;\r\n    left: 272px;\r\n    top: 10px;\r\n    margin: 0px;\r\n    background: rgba(2, 122, 204, 0.24);\r\n    border-radius: 8px;\r\n}\r\n.magnetic-line {\r\n    width: 100%;\r\n    height: 32px;\r\n    margin-top: 16px;\r\n    background-color: rgba(2, 122, 204, 0.2);\r\n}\r\n.card-cvc {\r\n    position: absolute;\r\n    left: 30px;\r\n    bottom: 20px;\r\n}\r\n#card-cvc {\r\n    width: 70px;\r\n}\r\n.pay-button {\r\n    width: 100%;\r\n\tbackground-color: var(--primary-color, #007ACC) !important;\r\n    border-radius: 5px;\r\n    font-size: 13px;\r\n    line-height: 15px;\r\n    text-transform: uppercase;\r\n    color: #FFFFFF;\r\n    height: 30px;\r\n    margin-top: 20px;\r\n    border: 0px;\r\n}\r\n.payment-amount {\r\n    width: 110px;\r\n}\r\n.payment-errors-hidden {\r\n    display: none;\r\n}\r\n\r\n.pay-button:disabled{\r\n\topacity: 0.4;\r\n}\r\n\r\n.pay-button:not([disabled]):hover,\r\n.pay-button:active {\r\n\topacity: 0.87;\r\n\tbackground-color: var(--primary-color, #007ACC) !important;\r\n\tborder-color: var(--primary-color, #007ACC) !important;\r\n}\r\n.payment-amount[disabled] {\r\n\tbackground-color: transparent;\r\n\t-webkit-box-shadow: none;\r\n\t        box-shadow: none;\r\n\tborder-color: transparent;\r\n\tborder-bottom-color: #E0E4E8;\r\n\tborder-bottom-style: dotted;\r\n\tborder-width: 1px;\r\n}\r\n#additional-payment-info input#Zip {\r\n    width: 100px;\r\n    margin-right: 150px;\r\n}\r\n.StripeElement {\r\n    padding: 5px 8px 3px 8px;\r\n}\r\n.address-separator {\r\n    margin-top: 8px;\r\n    margin-bottom: 2px;\r\n    width: 100%;\r\n}'}));define("text!plugins/payment/qp-stripe.html",[],(function(){return'<template><require from="./qp-stripe.css"></require><div class="payment-form-background ${isMobile?\'payment-mobile\':\'\'}"></div><div ref="paymentForm" class="${isMobile?\'payment-mobile\':\'\'}" id="payment-form" keydown.capture="keyDown($event)"><div ref="headerForDrag" mousedown.trigger="mouseDown($event)"><label class="payment-form-label">${title}</label> <i class="ac ac-close ac-pull-right" tooltip="Close payment form" click.delegate="cancelAndClosePaymentForm()"></i></div><div class="payment-card"><div class="card-front"><div><label ref="cardNumberLabel" required>${localizedStrings.CardNumber}</label><div id="card-number" class="payment-form-input"></div></div><div class="card-expiry"><label ref="cardExpiryLabel" required>${localizedStrings.ExpirationDate}</label><div id="card-expiry" class="payment-form-input"></div></div></div><div class="card-back"><div class="magnetic-line"></div><div class="card-cvc"><label ref="cardCvcLabel" required>${localizedStrings.Cvc}</label><div id="card-cvc" class="payment-form-input"></div></div></div></div><div id="additional-payment-info"><template repeat.for="item of fields"><div if.bind="item === separateBefore"><fieldset class="address-separator"><legend>${localizedStrings.ContactInfo}</legend></fieldset></div><div><label for="${item}">${localizedStrings[item]}</label> <input id="${item}" class="payment-form-input" keydown.capture="keyInputDown($event, ($index+1==fields.length)?\'pay-button\':fields[$index+1], ($index==0)?\'card-expiry\':fields[$index-1])"></div></template></div><div class="form-errors ${(errors == \'\')? \'payment-errors-hidden\': \'\'}"><i class="ac ac-warning"></i><div id="card-errors">${errors}</div></div><button ref="payButton" id="pay-button" disabled="disabled" class="pay-button">${buttonCaption} ${sum} ${currency}</button></div></template>'}));define("plugins/selector-service/index",["require","exports","./selector-service"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.configure=void 0;function n(e){e.singleton(i.SelectorService)}t.configure=n}));define("plugins/selector-service/selector-dialog",["require","exports","tslib","aurelia-framework","aurelia-dialog"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SelectorDialog=void 0;var a=function(){function e(e){this.controller=e;this.okConfig={text:"Select"};this.gridReady=false}e.prototype.activate=function(e){var t=this;this.okConfig={text:e.selectorConfig.selectButtonCaption};this.gridConfig=e.selectorConfig;this.selectorElement=e.selector;this.searchValue=e.searchValue;if(window.px_all){window.px_all[this.gridConfig.panel_id]={search:function(e){var i=t.gridElem.querySelector(".grid-filter-text");i.value=e;i.dispatchEvent(new Event("input",{bubbles:true}))},getSearchColumn:function(){return{displayFormat:""}}}}};e.prototype.attached=function(){var e=this.selectorElement;this.selectorElement=n.DOM.querySelector("body");this.selectorElement=e};e.prototype.actionHandler=function(e){if(e.action==="select")this.controller.ok(this.preselectedValue)};e.prototype.selected=function(e){if(e.activeRow!==undefined){var t=e.getCell(this.gridConfig.valueField);var i=e.getCell(this.gridConfig.descriptionName);if(t)this.controller.ok({id:t.value,text:(i===null||i===void 0?void 0:i.value)||""})}};e.prototype.rowChanged=function(e){this.gridReady=true;if(e.activeRow!==undefined){var t=e.getCell(this.gridConfig.valueField);var i=e.getCell(this.gridConfig.descriptionName);this.preselectedValue={id:t===null||t===void 0?void 0:t.value,text:(i===null||i===void 0?void 0:i.value)||""}}};e=i.__decorate([n.autoinject,i.__metadata("design:paramtypes",[r.DialogController])],e);return e}();t.SelectorDialog=a}));define("text!plugins/selector-service/selector-dialog.css",[],(function(){return".selector-dialog {\r\n    background-color: #F5F7F8;\r\n\t\tmin-width: 360px;\r\n\t\t\r\n\t\tvisibility: hidden;\r\n\t\tdisplay: block;\r\n}\r\n.selector-dialog.grid-ready {\r\n\tvisibility: visible;\r\n}\r\n.selector-dialog qp-grid {\r\n    max-width:90vw;\r\n    \r\n    min-width: 320px;\r\n\r\n    max-height:80vh;\r\n    height:370px;\r\n    /* background-color:white; */\r\n}\r\n.selector-dialog ux-dialog-header{\r\n \r\n    padding: 14px 14px 7px;\r\n}\r\n.selector-dialog ux-dialog-body{\r\n padding: 0;   \r\n}\r\n.selector-dialog .grid-toolbar .qp-button {\r\n    height: 30px;\r\n    font-size: 14px;\r\n    padding-left: 10px;\r\n    padding-right: 10px;\r\n    border-radius: 5px;\r\n    margin-left: 4px;\r\n}\r\n@media screen and (max-width: 500px) {\r\n    .selector-dialog {\r\n        position: absolute;\r\n        top:0;\r\n        bottom: 0;\r\n        left: 0;\r\n        right: 0;\r\n        width: 100vw;\r\n        min-width: 0;\r\n    }\r\n    .selector-dialog qp-grid  {\r\n        height: 84vh;\r\n        width: 95vw;\r\n        min-width: 0;\r\n        min-width: none;\r\n    }\r\n}\r\n"}));define("text!plugins/selector-service/selector-dialog.html",[],(function(){return'<template><require from="./selector-dialog.css"></require><ux-dialog id="${gridConfig.panel_id}" style="max-width:720px" class="selector-dialog ${gridReady?\'grid-ready\':\'\'}" glue-to.bind="selectorElement"><ux-dialog-header show-close-button><div> ${gridConfig.dialogCaptionPrefix} - ${gridConfig.displayName} </div></ux-dialog-header><ux-dialog-body><qp-grid search-value.bind="searchValue" search-field.bind="gridConfig.valueField" config.bind="gridConfig" on-default-action.call="selected(args)" on-action.call="actionHandler(args)" on-active-row-changed.call="rowChanged(args)" ref="gridElem"><div slot="externalToolbar"><qp-button data-cmd="Select" click.trigger="controller.ok(preselectedValue)" config.bind="okConfig">${gridConfig.selectButtonCaption}</qp-button></div></qp-grid></ux-dialog-body></ux-dialog></template>'}));define("plugins/selector-service/selector-service",["require","exports","tslib","aurelia-framework","aurelia-logging","aurelia-dialog"],(function(e,t,i,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SelectorService=void 0;var o="selector-service-panel-container";var s=r.getLogger("selector service");var l=function(){function e(e){this.dialogService=e;this.selectors=new Map}e.prototype.getSelectorValue=function(e,t,r,a){return i.__awaiter(this,void 0,void 0,(function(){var o,s,l;return i.__generator(this,(function(i){switch(i.label){case 0:l=new Promise((function(e,t){o=e;s=t}));this.dialogService.open({viewModel:n.PLATFORM.moduleName("plugins/selector-service/selector-dialog"),model:{selectorConfig:e,selector:t,searchValue:a},lock:false,ignoreTransitions:true,childContainer:r.createChild(),position:function(e){}}).whenClosed((function(e){if(!e.wasCancelled){o(e.output)}else{s("because reason")}}));return[4,l];case 1:return[2,i.sent()]}}))}))};e.prototype.getValueFromSelector=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n,r,a;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,this.ensureSelectorInTheDom(e)];case 1:t=i.sent();a=new Promise((function(e,i){n=e;r=i;t.resolvers={resolve:n,reject:r}}));this.querySelector(t,e);return[2,a]}}))}))};e.prototype.querySelector=function(e,t){var i=__px(document).getDropDownPos(t.inputElement,e.panelElement,2);document.dropDownElem=e.panelElement;e.panelElement.setAttribute("controlID",e.panelObject.ID);e.panelElement.style.left=i.left+"px";e.panelElement.style.top=i.top+"px";e.panelElement.style.position="absolute";e.panelElement.style.display="";e.activeQuery=true;var n=e.gridObject;n.clearFastFilter();n.search(t.value,t.valueColumn);var r=e.gridObject;setTimeout((function(){if(r.filterBar&&!__px(document).IsTablet)r.filterBar.focus();else r.focus()}),1)};e.prototype.ensureSelectorInTheDom=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n,r,a;var o=this;return i.__generator(this,(function(i){r=new Promise((function(e,i){t=e;n=i}));if(!this.selectors.has(e.controlId)){a={name:"DropDown",blockPage:true,commitChanges:false,repaintControls:0,postData:1,postDataControls:true,container:"",repaintControlsIDs:"",selectControlsIDs:"",commitChangesIDs:"",optimizePostData:false};__px_callback(window).execI({ID:e.controlId,sourceName:e.controlName},a,"",(function(i){o.selectors.set(e.controlId,o.callbackHandler(i,e));t(o.selectors.get(e.controlId))}))}else{t(this.selectors.get(e.controlId))}return[2,r]}))}))};e.prototype.callbackHandler=function(e,t){__px_cm(window).processHtmlData(e,t.controlId+"_selector_dialog");var i=document.querySelector("#"+t.controlId+"_selector_dialog");var n=document.querySelector("#"+t.controlId+"_pnl_gr");var r=n.object;var a=r.events;var o=document.querySelector("#"+t.controlId+"_pnl");var s=o.object;var l=s.events(document).querySelector("form").appendChild(o);var c={selectorElement:i,grid:n,gridObject:r,panelElement:o,panelObject:s,resolvers:undefined,activeQuery:false};var u=function(){var e=r.activeRow.getCell(t.valueColumn).getValue();var i=r.activeRow.getCell(t.textColumn).getValue();if(c.resolvers&&c.activeQuery){c.resolvers.resolve({id:e,text:i})}c.panelElement.style.display="none";document.dropDownElem=undefined};var d=function(e){c.resolvers.reject(new Error(e));c.panelElement.style.display="none";document.dropDownElem=undefined};c.panelObject.hideDropDown=function(){d("outer click")};l.addEventHandler("beforeHide",(function(){d("Close")}));a.addEventHandler("keyDown",(function(e,t){switch(t.key){case 13:t.cancel=true;u();break;case 27:t.cancel=true;d("Close");break}}));r.extToolbar.events.addEventHandler("buttonClick",(function(e,t){switch(t.button.key){case"Select":u();break}}));a.addEventHandler("cellClick",(function(e,t){if(t.event.clickCount===2){u()}}));return c};e=i.__decorate([n.autoinject,i.__metadata("design:paramtypes",[a.DialogService])],e);return e}();t.SelectorService=l}));define("services/screen-api-client",["require","exports","aurelia-dependency-injection","aurelia-fetch-client","controls/global/informer/qp-informer-rack"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ErrorInfo=t.ScreenApiClient=void 0;var a="newui/ts";var o=function(){function e(e){this.screenID=e;this.client=i.Container.instance.get(n.HttpClient);this.baseUri=a+"/"+this.screenID}e.prototype.getScreenData=function(e){if(!this.screenID)return undefined;return this.fetchMsg(this.baseUri+"/cleared",e)};e.prototype.updateScreenData=function(e){if(!this.screenID)return undefined;return this.fetchMsg(""+this.baseUri,e)};e.prototype.fetchExt=function(e,t){return this.client.fetch(e,{method:"POST",body:n.json(t)}).then((function(e){switch(e.status){case 200:return e.json();case 500:return new Promise((function(t,i){e.json().then((function(t){i(new s(e.status,t))}),(function(e){i(new s(-1,e))}))}));default:}return e.json()}),(function(e){if(e.message)console.error(e);return Promise.reject(new s(-1,e))}))};e.prototype.fetchMsg=function(e,t){var i;return(i=this.fetchExt(e,t))===null||i===void 0?void 0:i.then((function(e){return Promise.resolve(e)}),(function(e){var t=e.data.Message||e.data.message;if(t&&e.data.ExceptionMessage)t+=" "+e.data.ExceptionMessage;if(t)r.showInformer(t,"error");return Promise.reject(e)}))};return e}();t.ScreenApiClient=o;var s=function(){function e(e,t){this.status=e;this.data=t}return e}();t.ErrorInfo=s}));define("services/screen-service",["require","exports","tslib","aurelia-framework","aurelia-event-aggregator","./screen-api-client"],(function(e,t,i,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ScreenService=void 0;var o=2;var s=3;var l=function(){function e(e,t,i){var o;this.model=e;this.container=t;this.graphInfo=i;this.callbackRunning=false;this.dirtyValues={};this.dirtyValuesGrids={};this.subscriptions=[];this.fullCollectionSubscriptions={};this.suspendUpdates=false;this.screenApiClient=t===null||t===void 0?void 0:t.get(a.ScreenApiClient);this.eventAggregator=t===null||t===void 0?void 0:t.get(r.EventAggregator);this.tq=t===null||t===void 0?void 0:t.get(n.TaskQueue);this.bindingEngine=t===null||t===void 0?void 0:t.get(n.BindingEngine);this.isValid=!!t&&!!this.screenApiClient&&!!e;this.isNewEntry=true;this.screenID=(o=this.screenApiClient)===null||o===void 0?void 0:o.screenID}e.prototype.registerDataComponent=function(e,t){if(!this.dataComponents)this.dataComponents=new Map;this.dataComponents.set(e,t)};e.prototype.getGraphInfo=function(){var e;return(e=this.model)===null||e===void 0?void 0:e.graphInfo};e.prototype.initialize=function(){var e,t;return i.__awaiter(this,void 0,void 0,(function(){var n;var r=this;return i.__generator(this,(function(i){n=this.eventAggregator.subscribe("execute-command",(function(e){return r.executeCommand(e)}));this.subscriptions.push(n);return[2,(t=(e=this.screenApiClient)===null||e===void 0?void 0:e.getScreenData(this.getQueryParams()))===null||t===void 0?void 0:t.then((function(e){r.id=e.id;r.repaintScreen(e,true)}))]}))}))};e.prototype.dispose=function(){this.dirtyValues={};this.dirtyValuesGrids={};this.subscriptions.forEach((function(e){return e.dispose()}));this.subscriptions=[];for(var e in this.fullCollectionSubscriptions){this.fullCollectionSubscriptions[e].forEach((function(e){return e.dispose()}))}this.fullCollectionSubscriptions={}};e.prototype.update=function(e){var t,n;return i.__awaiter(this,void 0,void 0,(function(){var r=this;return i.__generator(this,(function(i){this.callbackRunning=true;this.eventAggregator.publish("callback-started",e);(n=(t=this.screenApiClient)===null||t===void 0?void 0:t.updateScreenData(this.getQueryParams(e,true)))===null||n===void 0?void 0:n.then((function(e){r.repaintScreen(e)})).finally((function(){r.callbackRunning=false;r.tq.queueTask((function(){return r.eventAggregator.publish("callback-completed",e)}))}));return[2]}))}))};e.prototype.setScreenParameter=function(e,t,i){if(!this.dirtyValues[e])this.dirtyValues[e]={};this.dirtyValues[e][t]=i};e.prototype.executeCommand=function(e){var t=this;this.callbackRunning=true;this.tq.flushMicroTaskQueue();this.tq.queueTask((function(){return t.update(e)}))};e.prototype.applyFieldUpdated=function(){this.tq.flushMicroTaskQueue()};e.prototype.repaintScreen=function(e,t){var n=this;var r;if(t===void 0){t=false}this.caption={title:"<No title>",caption:"",href:"",hidden:false,id:"screen-title",name:"screenTitle",tabIndex:-1,propsTemplate:"",hasCaption:false,isFavoritable:false,isFavorite:false};if(e.caption)this.caption=i.__assign(i.__assign({},this.caption),e.caption);this.toolbar=e.toolbar;this.id=e.id;this.isNewEntry=e.isNewEntry===undefined?false:e.isNewEntry;if(e.antiXsrfToken)this.antiXsrfToken=e.antiXsrfToken;this.caption.antiXsrfToken=this.antiXsrfToken;var a=e.fieldStates;this.suspendUpdates=true;var l=function(e){var i=c.model[e];if(!i)return"continue";var o=[];var s=a[e];for(var l in s){if(t||!i.getField(l))o.push(l);if(s[l].viewName)s[l].graph=(r=c.graphInfo)===null||r===void 0?void 0:r.graphType}i.setFields(s);o.forEach((function(t){return n.attachValueObserver(i.getField(t),e,t)}))};var c=this;for(var u in a){l(u)}var d=e.collectionFieldStates;if(d)this.repaintFullCollections(d,t);var p=e.gridsData;if(p)this.repaintGrids(p);this.model.setActionStates(e.actionStates);this.tq.flushMicroTaskQueue();this.dirtyValues={};this.dirtyValuesGrids={};if(e.longRunStatus){if(e.longRunStatus===1){var f=5e3;this.eventAggregator.publish("longrun-started");clearInterval(this.longRunInterval);this.longRunInterval=setInterval((function(){return n.update()}),f)}else if(e.longRunStatus>1){this.eventAggregator.publish("longrun-stopped");clearInterval(this.longRunInterval);if(e.longRunStatus===o){this.eventAggregator.publish("longrun-succeded",e.longRunMessage)}else if(e.longRunStatus===s){this.eventAggregator.publish("longrun-aborted",e.longRunMessage)}}}else{this.eventAggregator.publish("longrun-cleared")}this.suspendUpdates=false;this.eventAggregator.publish("screen-updated",e)};e.prototype.repaintGrids=function(e){var t,i;for(var n in e){var r=this.model[n];if(r&&((t=this.dataComponents)===null||t===void 0?void 0:t.has(n))){(i=this.dataComponents.get(n))===null||i===void 0?void 0:i.applyQueryResult(e[n])}}};e.prototype.repaintFullCollections=function(e,t){var i=this;var n;if(t===void 0){t=false}var r=function(r){var o=a.model[r];if(!o)return"continue";var s=e[r];if(s.columns){o.columns=s.columns}if(s.items){if(a.fullCollectionSubscriptions[r]){a.fullCollectionSubscriptions[r].forEach((function(e){return e.dispose()}));a.fullCollectionSubscriptions[r]=[]}o.splice(0);var l=function(e){var l=[];var c=s.items[e];var u=o.createInstance();u.id=c.id;o.push(u);for(var d in c.values){if(t||!u.getField(d))l.push(d);if(c.values[d].viewName)c.values[d].graph=(n=a.graphInfo)===null||n===void 0?void 0:n.graphType}u.setFields(c.values);l.forEach((function(e){return i.attachValueObserver(u.getField(e),r,e,c.id)}))};for(var c in s.items){l(c)}}if(s.columnsProp&&o.columns){for(var u=0;u<o.columns.length;u++){Object.assign(o.columns[u],s.columnsProp[u])}}if(s.activeRowId){o.activeRow=o.find((function(e){return e.id===s.activeRowId}))}};var a=this;for(var o in e){r(o)}};e.prototype.getQueryParams=function(e,t){var i;if(t===void 0){t=false}var n={command:e,id:this.id};if(t){n.data=this.dirtyValues;n.gridsData=this.dirtyValuesGrids}(i=this.dataComponents)===null||i===void 0?void 0:i.forEach((function(e,t){var i=e===null||e===void 0?void 0:e.getQueryParams();if(i){if(!n.gridsParams)n.gridsParams={};n.gridsParams[t]=i}}));return n};e.prototype.attachValueObserver=function(e,t,i,n){if(n){var r=this.generateCollectionValueObserver(t,i,n,e.autoPostback);if(!this.fullCollectionSubscriptions[t]){this.fullCollectionSubscriptions[t]=[]}this.fullCollectionSubscriptions[t].push(this.bindingEngine.propertyObserver(e,"value").subscribe(r))}else{var r=this.generateValueObserver(t,i,e.autoPostback);this.subscriptions.push(this.bindingEngine.propertyObserver(e,"value").subscribe(r))}};e.prototype.generateValueObserver=function(e,t,i){var n=this;return function(r,a){if(!n.suspendUpdates){if(!n.dirtyValues[e])n.dirtyValues[e]={};n.dirtyValues[e][t]=r&&r.id?r.id:r;if(i)n.update()}}};e.prototype.generateCollectionValueObserver=function(e,t,i,n){var r=this;return function(a,o){if(!r.suspendUpdates){if(!r.dirtyValuesGrids[e])r.dirtyValuesGrids[e]={};if(!r.dirtyValuesGrids[e][i])r.dirtyValuesGrids[e][i]={};r.dirtyValuesGrids[e][i][t]=a&&a.id?a.id:a;if(n)r.update()}}};return e}();t.ScreenService=l}));define("plugins/glue",["plugins/glue/index"],(function(e){return e}));define("plugins/happeded-on-body",["plugins/happeded-on-body/index"],(function(e){return e}));define("plugins/hover-activator-service",["plugins/hover-activator-service/index"],(function(e){return e}));